var Sb=Object.defineProperty;var kb=(e,t,n)=>t in e?Sb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ct=(e,t,n)=>kb(e,typeof t!="symbol"?t+"":t,n);function Cb(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var W6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ab(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V2={exports:{}},Vu={},G2={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qc=Symbol.for("react.element"),Db=Symbol.for("react.portal"),Lb=Symbol.for("react.fragment"),Eb=Symbol.for("react.strict_mode"),Pb=Symbol.for("react.profiler"),Tb=Symbol.for("react.provider"),qb=Symbol.for("react.context"),Ib=Symbol.for("react.forward_ref"),Fb=Symbol.for("react.suspense"),Rb=Symbol.for("react.memo"),Ob=Symbol.for("react.lazy"),r0=Symbol.iterator;function Mb(e){return e===null||typeof e!="object"?null:(e=r0&&e[r0]||e["@@iterator"],typeof e=="function"?e:null)}var K2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z2=Object.assign,Y2={};function el(e,t,n){this.props=e,this.context=t,this.refs=Y2,this.updater=n||K2}el.prototype.isReactComponent={};el.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};el.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function J2(){}J2.prototype=el.prototype;function fm(e,t,n){this.props=e,this.context=t,this.refs=Y2,this.updater=n||K2}var pm=fm.prototype=new J2;pm.constructor=fm;Z2(pm,el.prototype);pm.isPureReactComponent=!0;var a0=Array.isArray,X2=Object.prototype.hasOwnProperty,mm={current:null},Q2={key:!0,ref:!0,__self:!0,__source:!0};function ev(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)X2.call(t,r)&&!Q2.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:qc,type:e,key:i,ref:o,props:s,_owner:mm.current}}function Bb(e,t){return{$$typeof:qc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gm(e){return typeof e=="object"&&e!==null&&e.$$typeof===qc}function Ub(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var s0=/\/+/g;function Yh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ub(""+e.key):t.toString(36)}function Kd(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case qc:case Db:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Yh(o,0):r,a0(s)?(n="",e!=null&&(n=e.replace(s0,"$&/")+"/"),Kd(s,t,n,"",function(d){return d})):s!=null&&(gm(s)&&(s=Bb(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(s0,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",a0(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Yh(i,l);o+=Kd(i,t,n,c,s)}else if(c=Mb(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Yh(i,l++),o+=Kd(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function wd(e,t,n){if(e==null)return e;var r=[],s=0;return Kd(e,r,"","",function(i){return t.call(n,i,s++)}),r}function zb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ur={current:null},Zd={transition:null},$b={ReactCurrentDispatcher:ur,ReactCurrentBatchConfig:Zd,ReactCurrentOwner:mm};function tv(){throw Error("act(...) is not supported in production builds of React.")}gt.Children={map:wd,forEach:function(e,t,n){wd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wd(e,function(){t++}),t},toArray:function(e){return wd(e,function(t){return t})||[]},only:function(e){if(!gm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};gt.Component=el;gt.Fragment=Lb;gt.Profiler=Pb;gt.PureComponent=fm;gt.StrictMode=Eb;gt.Suspense=Fb;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$b;gt.act=tv;gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Z2({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=mm.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)X2.call(t,c)&&!Q2.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:qc,type:e.type,key:s,ref:i,props:r,_owner:o}};gt.createContext=function(e){return e={$$typeof:qb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Tb,_context:e},e.Consumer=e};gt.createElement=ev;gt.createFactory=function(e){var t=ev.bind(null,e);return t.type=e,t};gt.createRef=function(){return{current:null}};gt.forwardRef=function(e){return{$$typeof:Ib,render:e}};gt.isValidElement=gm;gt.lazy=function(e){return{$$typeof:Ob,_payload:{_status:-1,_result:e},_init:zb}};gt.memo=function(e,t){return{$$typeof:Rb,type:e,compare:t===void 0?null:t}};gt.startTransition=function(e){var t=Zd.transition;Zd.transition={};try{e()}finally{Zd.transition=t}};gt.unstable_act=tv;gt.useCallback=function(e,t){return ur.current.useCallback(e,t)};gt.useContext=function(e){return ur.current.useContext(e)};gt.useDebugValue=function(){};gt.useDeferredValue=function(e){return ur.current.useDeferredValue(e)};gt.useEffect=function(e,t){return ur.current.useEffect(e,t)};gt.useId=function(){return ur.current.useId()};gt.useImperativeHandle=function(e,t,n){return ur.current.useImperativeHandle(e,t,n)};gt.useInsertionEffect=function(e,t){return ur.current.useInsertionEffect(e,t)};gt.useLayoutEffect=function(e,t){return ur.current.useLayoutEffect(e,t)};gt.useMemo=function(e,t){return ur.current.useMemo(e,t)};gt.useReducer=function(e,t,n){return ur.current.useReducer(e,t,n)};gt.useRef=function(e){return ur.current.useRef(e)};gt.useState=function(e){return ur.current.useState(e)};gt.useSyncExternalStore=function(e,t,n){return ur.current.useSyncExternalStore(e,t,n)};gt.useTransition=function(){return ur.current.useTransition()};gt.version="18.3.1";G2.exports=gt;var T=G2.exports;const nv=Ab(T),Wb=Cb({__proto__:null,default:nv},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb=T,Vb=Symbol.for("react.element"),Gb=Symbol.for("react.fragment"),Kb=Object.prototype.hasOwnProperty,Zb=Hb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yb={key:!0,ref:!0,__self:!0,__source:!0};function rv(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Kb.call(t,r)&&!Yb.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Vb,type:e,key:i,ref:o,props:s,_owner:Zb.current}}Vu.Fragment=Gb;Vu.jsx=rv;Vu.jsxs=rv;V2.exports=Vu;var a=V2.exports,Xf={},av={exports:{}},Mr={},sv={exports:{}},iv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,ne){var pe=K.length;K.push(ne);e:for(;0<pe;){var oe=pe-1>>>1,E=K[oe];if(0<s(E,ne))K[oe]=ne,K[pe]=E,pe=oe;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ne=K[0],pe=K.pop();if(pe!==ne){K[0]=pe;e:for(var oe=0,E=K.length,q=E>>>1;oe<q;){var G=2*(oe+1)-1,H=K[G],te=G+1,ce=K[te];if(0>s(H,pe))te<E&&0>s(ce,H)?(K[oe]=ce,K[te]=pe,oe=te):(K[oe]=H,K[G]=pe,oe=G);else if(te<E&&0>s(ce,pe))K[oe]=ce,K[te]=pe,oe=te;else break e}}return ne}function s(K,ne){var pe=K.sortIndex-ne.sortIndex;return pe!==0?pe:K.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,m=null,g=3,p=!1,j=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(K){for(var ne=n(d);ne!==null;){if(ne.callback===null)r(d);else if(ne.startTime<=K)r(d),ne.sortIndex=ne.expirationTime,t(c,ne);else break;ne=n(d)}}function S(K){if(N=!1,w(K),!j)if(n(c)!==null)j=!0,re(R);else{var ne=n(d);ne!==null&&ie(S,ne.startTime-K)}}function R(K,ne){j=!1,N&&(N=!1,y(_),_=-1),p=!0;var pe=g;try{for(w(ne),m=n(c);m!==null&&(!(m.expirationTime>ne)||K&&!L());){var oe=m.callback;if(typeof oe=="function"){m.callback=null,g=m.priorityLevel;var E=oe(m.expirationTime<=ne);ne=e.unstable_now(),typeof E=="function"?m.callback=E:m===n(c)&&r(c),w(ne)}else r(c);m=n(c)}if(m!==null)var q=!0;else{var G=n(d);G!==null&&ie(S,G.startTime-ne),q=!1}return q}finally{m=null,g=pe,p=!1}}var W=!1,U=null,_=-1,D=5,z=-1;function L(){return!(e.unstable_now()-z<D)}function O(){if(U!==null){var K=e.unstable_now();z=K;var ne=!0;try{ne=U(!0,K)}finally{ne?P():(W=!1,U=null)}}else W=!1}var P;if(typeof b=="function")P=function(){b(O)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Z=A.port2;A.port1.onmessage=O,P=function(){Z.postMessage(null)}}else P=function(){C(O,0)};function re(K){U=K,W||(W=!0,P())}function ie(K,ne){_=C(function(){K(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){j||p||(j=!0,re(R))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(K){switch(g){case 1:case 2:case 3:var ne=3;break;default:ne=g}var pe=g;g=ne;try{return K()}finally{g=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,ne){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var pe=g;g=K;try{return ne()}finally{g=pe}},e.unstable_scheduleCallback=function(K,ne,pe){var oe=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?oe+pe:oe):pe=oe,K){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=pe+E,K={id:h++,callback:ne,priorityLevel:K,startTime:pe,expirationTime:E,sortIndex:-1},pe>oe?(K.sortIndex=pe,t(d,K),n(c)===null&&K===n(d)&&(N?(y(_),_=-1):N=!0,ie(S,pe-oe))):(K.sortIndex=E,t(c,K),j||p||(j=!0,re(R))),K},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(K){var ne=g;return function(){var pe=g;g=ne;try{return K.apply(this,arguments)}finally{g=pe}}}})(iv);sv.exports=iv;var Jb=sv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb=T,Or=Jb;function Le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ov=new Set,dc={};function Zi(e,t){Vo(e,t),Vo(e+"Capture",t)}function Vo(e,t){for(dc[e]=t,e=0;e<t.length;e++)ov.add(t[e])}var cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qf=Object.prototype.hasOwnProperty,Qb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i0={},o0={};function e_(e){return Qf.call(o0,e)?!0:Qf.call(i0,e)?!1:Qb.test(e)?o0[e]=!0:(i0[e]=!0,!1)}function t_(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function n_(e,t,n,r){if(t===null||typeof t>"u"||t_(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function hr(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Kn[e]=new hr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Kn[t]=new hr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Kn[e]=new hr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Kn[e]=new hr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Kn[e]=new hr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Kn[e]=new hr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Kn[e]=new hr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Kn[e]=new hr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Kn[e]=new hr(e,5,!1,e.toLowerCase(),null,!1,!1)});var vm=/[\-:]([a-z])/g;function ym(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vm,ym);Kn[t]=new hr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vm,ym);Kn[t]=new hr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vm,ym);Kn[t]=new hr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Kn[e]=new hr(e,1,!1,e.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Kn[e]=new hr(e,1,!1,e.toLowerCase(),null,!0,!0)});function xm(e,t,n,r){var s=Kn.hasOwnProperty(t)?Kn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(n_(t,n,s,r)&&(n=null),r||s===null?e_(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ps=Xb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jd=Symbol.for("react.element"),bo=Symbol.for("react.portal"),_o=Symbol.for("react.fragment"),bm=Symbol.for("react.strict_mode"),ep=Symbol.for("react.profiler"),lv=Symbol.for("react.provider"),cv=Symbol.for("react.context"),_m=Symbol.for("react.forward_ref"),tp=Symbol.for("react.suspense"),np=Symbol.for("react.suspense_list"),wm=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),dv=Symbol.for("react.offscreen"),l0=Symbol.iterator;function Il(e){return e===null||typeof e!="object"?null:(e=l0&&e[l0]||e["@@iterator"],typeof e=="function"?e:null)}var Qt=Object.assign,Jh;function Vl(e){if(Jh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Jh=t&&t[1]||""}return`
`+Jh+e}var Xh=!1;function Qh(e,t){if(!e||Xh)return"";Xh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Xh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Vl(e):""}function r_(e){switch(e.tag){case 5:return Vl(e.type);case 16:return Vl("Lazy");case 13:return Vl("Suspense");case 19:return Vl("SuspenseList");case 0:case 2:case 15:return e=Qh(e.type,!1),e;case 11:return e=Qh(e.type.render,!1),e;case 1:return e=Qh(e.type,!0),e;default:return""}}function rp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _o:return"Fragment";case bo:return"Portal";case ep:return"Profiler";case bm:return"StrictMode";case tp:return"Suspense";case np:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cv:return(e.displayName||"Context")+".Consumer";case lv:return(e._context.displayName||"Context")+".Provider";case _m:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wm:return t=e.displayName||null,t!==null?t:rp(e.type)||"Memo";case Fs:t=e._payload,e=e._init;try{return rp(e(t))}catch{}}return null}function a_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rp(t);case 8:return t===bm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function s_(e){var t=uv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nd(e){e._valueTracker||(e._valueTracker=s_(e))}function hv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=uv(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ap(e,t){var n=t.checked;return Qt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function c0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Qs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fv(e,t){t=t.checked,t!=null&&xm(e,"checked",t,!1)}function sp(e,t){fv(e,t);var n=Qs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ip(e,t.type,n):t.hasOwnProperty("defaultValue")&&ip(e,t.type,Qs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function d0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ip(e,t,n){(t!=="number"||hu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Gl=Array.isArray;function qo(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Qs(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function op(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Le(91));return Qt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function u0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Le(92));if(Gl(n)){if(1<n.length)throw Error(Le(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Qs(n)}}function pv(e,t){var n=Qs(t.value),r=Qs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function h0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function mv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?mv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sd,gv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Sd=Sd||document.createElement("div"),Sd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function uc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Xl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i_=["Webkit","ms","Moz","O"];Object.keys(Xl).forEach(function(e){i_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xl[t]=Xl[e]})});function vv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Xl.hasOwnProperty(e)&&Xl[e]?(""+t).trim():t+"px"}function yv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vv(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var o_=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cp(e,t){if(t){if(o_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Le(62))}}function dp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var up=null;function jm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hp=null,Io=null,Fo=null;function f0(e){if(e=Rc(e)){if(typeof hp!="function")throw Error(Le(280));var t=e.stateNode;t&&(t=Ju(t),hp(e.stateNode,e.type,t))}}function xv(e){Io?Fo?Fo.push(e):Fo=[e]:Io=e}function bv(){if(Io){var e=Io,t=Fo;if(Fo=Io=null,f0(e),t)for(e=0;e<t.length;e++)f0(t[e])}}function _v(e,t){return e(t)}function wv(){}var ef=!1;function jv(e,t,n){if(ef)return e(t,n);ef=!0;try{return _v(e,t,n)}finally{ef=!1,(Io!==null||Fo!==null)&&(wv(),bv())}}function hc(e,t){var n=e.stateNode;if(n===null)return null;var r=Ju(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Le(231,t,typeof n));return n}var fp=!1;if(cs)try{var Fl={};Object.defineProperty(Fl,"passive",{get:function(){fp=!0}}),window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{fp=!1}function l_(e,t,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var Ql=!1,fu=null,pu=!1,pp=null,c_={onError:function(e){Ql=!0,fu=e}};function d_(e,t,n,r,s,i,o,l,c){Ql=!1,fu=null,l_.apply(c_,arguments)}function u_(e,t,n,r,s,i,o,l,c){if(d_.apply(this,arguments),Ql){if(Ql){var d=fu;Ql=!1,fu=null}else throw Error(Le(198));pu||(pu=!0,pp=d)}}function Yi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Nv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p0(e){if(Yi(e)!==e)throw Error(Le(188))}function h_(e){var t=e.alternate;if(!t){if(t=Yi(e),t===null)throw Error(Le(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return p0(s),e;if(i===r)return p0(s),t;i=i.sibling}throw Error(Le(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Le(189))}}if(n.alternate!==r)throw Error(Le(190))}if(n.tag!==3)throw Error(Le(188));return n.stateNode.current===n?e:t}function Sv(e){return e=h_(e),e!==null?kv(e):null}function kv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kv(e);if(t!==null)return t;e=e.sibling}return null}var Cv=Or.unstable_scheduleCallback,m0=Or.unstable_cancelCallback,f_=Or.unstable_shouldYield,p_=Or.unstable_requestPaint,gn=Or.unstable_now,m_=Or.unstable_getCurrentPriorityLevel,Nm=Or.unstable_ImmediatePriority,Av=Or.unstable_UserBlockingPriority,mu=Or.unstable_NormalPriority,g_=Or.unstable_LowPriority,Dv=Or.unstable_IdlePriority,Gu=null,Fa=null;function v_(e){if(Fa&&typeof Fa.onCommitFiberRoot=="function")try{Fa.onCommitFiberRoot(Gu,e,void 0,(e.current.flags&128)===128)}catch{}}var ma=Math.clz32?Math.clz32:b_,y_=Math.log,x_=Math.LN2;function b_(e){return e>>>=0,e===0?32:31-(y_(e)/x_|0)|0}var kd=64,Cd=4194304;function Kl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Kl(l):(i&=o,i!==0&&(r=Kl(i)))}else o=n&~s,o!==0?r=Kl(o):i!==0&&(r=Kl(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ma(t),s=1<<n,r|=e[n],t&=~s;return r}function __(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w_(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ma(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=__(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function mp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Lv(){var e=kd;return kd<<=1,!(kd&4194240)&&(kd=64),e}function tf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ic(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ma(t),e[t]=n}function j_(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ma(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Sm(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ma(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Et=0;function Ev(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pv,km,Tv,qv,Iv,gp=!1,Ad=[],Ws=null,Hs=null,Vs=null,fc=new Map,pc=new Map,Os=[],N_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function g0(e,t){switch(e){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":fc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(t.pointerId)}}function Rl(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Rc(t),t!==null&&km(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function S_(e,t,n,r,s){switch(t){case"focusin":return Ws=Rl(Ws,e,t,n,r,s),!0;case"dragenter":return Hs=Rl(Hs,e,t,n,r,s),!0;case"mouseover":return Vs=Rl(Vs,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return fc.set(i,Rl(fc.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,pc.set(i,Rl(pc.get(i)||null,e,t,n,r,s)),!0}return!1}function Fv(e){var t=Fi(e.target);if(t!==null){var n=Yi(t);if(n!==null){if(t=n.tag,t===13){if(t=Nv(n),t!==null){e.blockedOn=t,Iv(e.priority,function(){Tv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=vp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);up=r,n.target.dispatchEvent(r),up=null}else return t=Rc(n),t!==null&&km(t),e.blockedOn=n,!1;t.shift()}return!0}function v0(e,t,n){Yd(e)&&n.delete(t)}function k_(){gp=!1,Ws!==null&&Yd(Ws)&&(Ws=null),Hs!==null&&Yd(Hs)&&(Hs=null),Vs!==null&&Yd(Vs)&&(Vs=null),fc.forEach(v0),pc.forEach(v0)}function Ol(e,t){e.blockedOn===t&&(e.blockedOn=null,gp||(gp=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,k_)))}function mc(e){function t(s){return Ol(s,e)}if(0<Ad.length){Ol(Ad[0],e);for(var n=1;n<Ad.length;n++){var r=Ad[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ws!==null&&Ol(Ws,e),Hs!==null&&Ol(Hs,e),Vs!==null&&Ol(Vs,e),fc.forEach(t),pc.forEach(t),n=0;n<Os.length;n++)r=Os[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Os.length&&(n=Os[0],n.blockedOn===null);)Fv(n),n.blockedOn===null&&Os.shift()}var Ro=ps.ReactCurrentBatchConfig,vu=!0;function C_(e,t,n,r){var s=Et,i=Ro.transition;Ro.transition=null;try{Et=1,Cm(e,t,n,r)}finally{Et=s,Ro.transition=i}}function A_(e,t,n,r){var s=Et,i=Ro.transition;Ro.transition=null;try{Et=4,Cm(e,t,n,r)}finally{Et=s,Ro.transition=i}}function Cm(e,t,n,r){if(vu){var s=vp(e,t,n,r);if(s===null)hf(e,t,r,yu,n),g0(e,r);else if(S_(s,e,t,n,r))r.stopPropagation();else if(g0(e,r),t&4&&-1<N_.indexOf(e)){for(;s!==null;){var i=Rc(s);if(i!==null&&Pv(i),i=vp(e,t,n,r),i===null&&hf(e,t,r,yu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else hf(e,t,r,null,n)}}var yu=null;function vp(e,t,n,r){if(yu=null,e=jm(r),e=Fi(e),e!==null)if(t=Yi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Nv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return yu=e,null}function Rv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m_()){case Nm:return 1;case Av:return 4;case mu:case g_:return 16;case Dv:return 536870912;default:return 16}default:return 16}}var Bs=null,Am=null,Jd=null;function Ov(){if(Jd)return Jd;var e,t=Am,n=t.length,r,s="value"in Bs?Bs.value:Bs.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Jd=s.slice(e,1<r?1-r:void 0)}function Xd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dd(){return!0}function y0(){return!1}function Br(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dd:y0,this.isPropagationStopped=y0,this}return Qt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dd)},persist:function(){},isPersistent:Dd}),t}var tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dm=Br(tl),Fc=Qt({},tl,{view:0,detail:0}),D_=Br(Fc),nf,rf,Ml,Ku=Qt({},Fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ml&&(Ml&&e.type==="mousemove"?(nf=e.screenX-Ml.screenX,rf=e.screenY-Ml.screenY):rf=nf=0,Ml=e),nf)},movementY:function(e){return"movementY"in e?e.movementY:rf}}),x0=Br(Ku),L_=Qt({},Ku,{dataTransfer:0}),E_=Br(L_),P_=Qt({},Fc,{relatedTarget:0}),af=Br(P_),T_=Qt({},tl,{animationName:0,elapsedTime:0,pseudoElement:0}),q_=Br(T_),I_=Qt({},tl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),F_=Br(I_),R_=Qt({},tl,{data:0}),b0=Br(R_),O_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=B_[e])?!!t[e]:!1}function Lm(){return U_}var z_=Qt({},Fc,{key:function(e){if(e.key){var t=O_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?M_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lm,charCode:function(e){return e.type==="keypress"?Xd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$_=Br(z_),W_=Qt({},Ku,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_0=Br(W_),H_=Qt({},Fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lm}),V_=Br(H_),G_=Qt({},tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),K_=Br(G_),Z_=Qt({},Ku,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y_=Br(Z_),J_=[9,13,27,32],Em=cs&&"CompositionEvent"in window,ec=null;cs&&"documentMode"in document&&(ec=document.documentMode);var X_=cs&&"TextEvent"in window&&!ec,Mv=cs&&(!Em||ec&&8<ec&&11>=ec),w0=" ",j0=!1;function Bv(e,t){switch(e){case"keyup":return J_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wo=!1;function Q_(e,t){switch(e){case"compositionend":return Uv(t);case"keypress":return t.which!==32?null:(j0=!0,w0);case"textInput":return e=t.data,e===w0&&j0?null:e;default:return null}}function ew(e,t){if(wo)return e==="compositionend"||!Em&&Bv(e,t)?(e=Ov(),Jd=Am=Bs=null,wo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mv&&t.locale!=="ko"?null:t.data;default:return null}}var tw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tw[e.type]:t==="textarea"}function zv(e,t,n,r){xv(r),t=xu(t,"onChange"),0<t.length&&(n=new Dm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var tc=null,gc=null;function nw(e){Qv(e,0)}function Zu(e){var t=So(e);if(hv(t))return e}function rw(e,t){if(e==="change")return t}var $v=!1;if(cs){var sf;if(cs){var of="oninput"in document;if(!of){var S0=document.createElement("div");S0.setAttribute("oninput","return;"),of=typeof S0.oninput=="function"}sf=of}else sf=!1;$v=sf&&(!document.documentMode||9<document.documentMode)}function k0(){tc&&(tc.detachEvent("onpropertychange",Wv),gc=tc=null)}function Wv(e){if(e.propertyName==="value"&&Zu(gc)){var t=[];zv(t,gc,e,jm(e)),jv(nw,t)}}function aw(e,t,n){e==="focusin"?(k0(),tc=t,gc=n,tc.attachEvent("onpropertychange",Wv)):e==="focusout"&&k0()}function sw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zu(gc)}function iw(e,t){if(e==="click")return Zu(t)}function ow(e,t){if(e==="input"||e==="change")return Zu(t)}function lw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var va=typeof Object.is=="function"?Object.is:lw;function vc(e,t){if(va(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Qf.call(t,s)||!va(e[s],t[s]))return!1}return!0}function C0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function A0(e,t){var n=C0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=C0(n)}}function Hv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Hv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vv(){for(var e=window,t=hu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hu(e.document)}return t}function Pm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cw(e){var t=Vv(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Hv(n.ownerDocument.documentElement,n)){if(r!==null&&Pm(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=A0(n,i);var o=A0(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dw=cs&&"documentMode"in document&&11>=document.documentMode,jo=null,yp=null,nc=null,xp=!1;function D0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xp||jo==null||jo!==hu(r)||(r=jo,"selectionStart"in r&&Pm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nc&&vc(nc,r)||(nc=r,r=xu(yp,"onSelect"),0<r.length&&(t=new Dm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=jo)))}function Ld(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var No={animationend:Ld("Animation","AnimationEnd"),animationiteration:Ld("Animation","AnimationIteration"),animationstart:Ld("Animation","AnimationStart"),transitionend:Ld("Transition","TransitionEnd")},lf={},Gv={};cs&&(Gv=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Yu(e){if(lf[e])return lf[e];if(!No[e])return e;var t=No[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Gv)return lf[e]=t[n];return e}var Kv=Yu("animationend"),Zv=Yu("animationiteration"),Yv=Yu("animationstart"),Jv=Yu("transitionend"),Xv=new Map,L0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(e,t){Xv.set(e,t),Zi(t,[e])}for(var cf=0;cf<L0.length;cf++){var df=L0[cf],uw=df.toLowerCase(),hw=df[0].toUpperCase()+df.slice(1);ni(uw,"on"+hw)}ni(Kv,"onAnimationEnd");ni(Zv,"onAnimationIteration");ni(Yv,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(Jv,"onTransitionEnd");Vo("onMouseEnter",["mouseout","mouseover"]);Vo("onMouseLeave",["mouseout","mouseover"]);Vo("onPointerEnter",["pointerout","pointerover"]);Vo("onPointerLeave",["pointerout","pointerover"]);Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zl));function E0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,u_(r,t,void 0,e),e.currentTarget=null}function Qv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;E0(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;E0(s,l,d),i=c}}}if(pu)throw e=pp,pu=!1,pp=null,e}function Wt(e,t){var n=t[Np];n===void 0&&(n=t[Np]=new Set);var r=e+"__bubble";n.has(r)||(ey(t,e,2,!1),n.add(r))}function uf(e,t,n){var r=0;t&&(r|=4),ey(n,e,r,t)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function yc(e){if(!e[Ed]){e[Ed]=!0,ov.forEach(function(n){n!=="selectionchange"&&(fw.has(n)||uf(n,!1,e),uf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ed]||(t[Ed]=!0,uf("selectionchange",!1,t))}}function ey(e,t,n,r){switch(Rv(t)){case 1:var s=C_;break;case 4:s=A_;break;default:s=Cm}n=s.bind(null,t,n,e),s=void 0,!fp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function hf(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Fi(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}jv(function(){var d=i,h=jm(n),m=[];e:{var g=Xv.get(e);if(g!==void 0){var p=Dm,j=e;switch(e){case"keypress":if(Xd(n)===0)break e;case"keydown":case"keyup":p=$_;break;case"focusin":j="focus",p=af;break;case"focusout":j="blur",p=af;break;case"beforeblur":case"afterblur":p=af;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=x0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=E_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=V_;break;case Kv:case Zv:case Yv:p=q_;break;case Jv:p=K_;break;case"scroll":p=D_;break;case"wheel":p=Y_;break;case"copy":case"cut":case"paste":p=F_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=_0}var N=(t&4)!==0,C=!N&&e==="scroll",y=N?g!==null?g+"Capture":null:g;N=[];for(var b=d,w;b!==null;){w=b;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,y!==null&&(S=hc(b,y),S!=null&&N.push(xc(b,S,w)))),C)break;b=b.return}0<N.length&&(g=new p(g,j,null,n,h),m.push({event:g,listeners:N}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",g&&n!==up&&(j=n.relatedTarget||n.fromElement)&&(Fi(j)||j[ds]))break e;if((p||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,p?(j=n.relatedTarget||n.toElement,p=d,j=j?Fi(j):null,j!==null&&(C=Yi(j),j!==C||j.tag!==5&&j.tag!==6)&&(j=null)):(p=null,j=d),p!==j)){if(N=x0,S="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(N=_0,S="onPointerLeave",y="onPointerEnter",b="pointer"),C=p==null?g:So(p),w=j==null?g:So(j),g=new N(S,b+"leave",p,n,h),g.target=C,g.relatedTarget=w,S=null,Fi(h)===d&&(N=new N(y,b+"enter",j,n,h),N.target=w,N.relatedTarget=C,S=N),C=S,p&&j)t:{for(N=p,y=j,b=0,w=N;w;w=po(w))b++;for(w=0,S=y;S;S=po(S))w++;for(;0<b-w;)N=po(N),b--;for(;0<w-b;)y=po(y),w--;for(;b--;){if(N===y||y!==null&&N===y.alternate)break t;N=po(N),y=po(y)}N=null}else N=null;p!==null&&P0(m,g,p,N,!1),j!==null&&C!==null&&P0(m,C,j,N,!0)}}e:{if(g=d?So(d):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var R=rw;else if(N0(g))if($v)R=ow;else{R=sw;var W=aw}else(p=g.nodeName)&&p.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(R=iw);if(R&&(R=R(e,d))){zv(m,R,n,h);break e}W&&W(e,g,d),e==="focusout"&&(W=g._wrapperState)&&W.controlled&&g.type==="number"&&ip(g,"number",g.value)}switch(W=d?So(d):window,e){case"focusin":(N0(W)||W.contentEditable==="true")&&(jo=W,yp=d,nc=null);break;case"focusout":nc=yp=jo=null;break;case"mousedown":xp=!0;break;case"contextmenu":case"mouseup":case"dragend":xp=!1,D0(m,n,h);break;case"selectionchange":if(dw)break;case"keydown":case"keyup":D0(m,n,h)}var U;if(Em)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else wo?Bv(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Mv&&n.locale!=="ko"&&(wo||_!=="onCompositionStart"?_==="onCompositionEnd"&&wo&&(U=Ov()):(Bs=h,Am="value"in Bs?Bs.value:Bs.textContent,wo=!0)),W=xu(d,_),0<W.length&&(_=new b0(_,e,null,n,h),m.push({event:_,listeners:W}),U?_.data=U:(U=Uv(n),U!==null&&(_.data=U)))),(U=X_?Q_(e,n):ew(e,n))&&(d=xu(d,"onBeforeInput"),0<d.length&&(h=new b0("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=U))}Qv(m,t)})}function xc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xu(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=hc(e,n),i!=null&&r.unshift(xc(e,i,s)),i=hc(e,t),i!=null&&r.push(xc(e,i,s))),e=e.return}return r}function po(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function P0(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=hc(n,i),c!=null&&o.unshift(xc(n,c,l))):s||(c=hc(n,i),c!=null&&o.push(xc(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var pw=/\r\n?/g,mw=/\u0000|\uFFFD/g;function T0(e){return(typeof e=="string"?e:""+e).replace(pw,`
`).replace(mw,"")}function Pd(e,t,n){if(t=T0(t),T0(e)!==t&&n)throw Error(Le(425))}function bu(){}var bp=null,_p=null;function wp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jp=typeof setTimeout=="function"?setTimeout:void 0,gw=typeof clearTimeout=="function"?clearTimeout:void 0,q0=typeof Promise=="function"?Promise:void 0,vw=typeof queueMicrotask=="function"?queueMicrotask:typeof q0<"u"?function(e){return q0.resolve(null).then(e).catch(yw)}:jp;function yw(e){setTimeout(function(){throw e})}function ff(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),mc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mc(t)}function Gs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function I0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var nl=Math.random().toString(36).slice(2),Ta="__reactFiber$"+nl,bc="__reactProps$"+nl,ds="__reactContainer$"+nl,Np="__reactEvents$"+nl,xw="__reactListeners$"+nl,bw="__reactHandles$"+nl;function Fi(e){var t=e[Ta];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ds]||n[Ta]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=I0(e);e!==null;){if(n=e[Ta])return n;e=I0(e)}return t}e=n,n=e.parentNode}return null}function Rc(e){return e=e[Ta]||e[ds],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function So(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Le(33))}function Ju(e){return e[bc]||null}var Sp=[],ko=-1;function ri(e){return{current:e}}function Vt(e){0>ko||(e.current=Sp[ko],Sp[ko]=null,ko--)}function zt(e,t){ko++,Sp[ko]=e.current,e.current=t}var ei={},sr=ri(ei),xr=ri(!1),zi=ei;function Go(e,t){var n=e.type.contextTypes;if(!n)return ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function br(e){return e=e.childContextTypes,e!=null}function _u(){Vt(xr),Vt(sr)}function F0(e,t,n){if(sr.current!==ei)throw Error(Le(168));zt(sr,t),zt(xr,n)}function ty(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Le(108,a_(e)||"Unknown",s));return Qt({},n,r)}function wu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ei,zi=sr.current,zt(sr,e),zt(xr,xr.current),!0}function R0(e,t,n){var r=e.stateNode;if(!r)throw Error(Le(169));n?(e=ty(e,t,zi),r.__reactInternalMemoizedMergedChildContext=e,Vt(xr),Vt(sr),zt(sr,e)):Vt(xr),zt(xr,n)}var ns=null,Xu=!1,pf=!1;function ny(e){ns===null?ns=[e]:ns.push(e)}function _w(e){Xu=!0,ny(e)}function ai(){if(!pf&&ns!==null){pf=!0;var e=0,t=Et;try{var n=ns;for(Et=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ns=null,Xu=!1}catch(s){throw ns!==null&&(ns=ns.slice(e+1)),Cv(Nm,ai),s}finally{Et=t,pf=!1}}return null}var Co=[],Ao=0,ju=null,Nu=0,Yr=[],Jr=0,$i=null,as=1,ss="";function Pi(e,t){Co[Ao++]=Nu,Co[Ao++]=ju,ju=e,Nu=t}function ry(e,t,n){Yr[Jr++]=as,Yr[Jr++]=ss,Yr[Jr++]=$i,$i=e;var r=as;e=ss;var s=32-ma(r)-1;r&=~(1<<s),n+=1;var i=32-ma(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,as=1<<32-ma(t)+s|n<<s|r,ss=i+e}else as=1<<i|n<<s|r,ss=e}function Tm(e){e.return!==null&&(Pi(e,1),ry(e,1,0))}function qm(e){for(;e===ju;)ju=Co[--Ao],Co[Ao]=null,Nu=Co[--Ao],Co[Ao]=null;for(;e===$i;)$i=Yr[--Jr],Yr[Jr]=null,ss=Yr[--Jr],Yr[Jr]=null,as=Yr[--Jr],Yr[Jr]=null}var Rr=null,Ir=null,Kt=!1,pa=null;function ay(e,t){var n=Xr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function O0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rr=e,Ir=Gs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rr=e,Ir=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=$i!==null?{id:as,overflow:ss}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rr=e,Ir=null,!0):!1;default:return!1}}function kp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cp(e){if(Kt){var t=Ir;if(t){var n=t;if(!O0(e,t)){if(kp(e))throw Error(Le(418));t=Gs(n.nextSibling);var r=Rr;t&&O0(e,t)?ay(r,n):(e.flags=e.flags&-4097|2,Kt=!1,Rr=e)}}else{if(kp(e))throw Error(Le(418));e.flags=e.flags&-4097|2,Kt=!1,Rr=e}}}function M0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rr=e}function Td(e){if(e!==Rr)return!1;if(!Kt)return M0(e),Kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wp(e.type,e.memoizedProps)),t&&(t=Ir)){if(kp(e))throw sy(),Error(Le(418));for(;t;)ay(e,t),t=Gs(t.nextSibling)}if(M0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ir=Gs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ir=null}}else Ir=Rr?Gs(e.stateNode.nextSibling):null;return!0}function sy(){for(var e=Ir;e;)e=Gs(e.nextSibling)}function Ko(){Ir=Rr=null,Kt=!1}function Im(e){pa===null?pa=[e]:pa.push(e)}var ww=ps.ReactCurrentBatchConfig;function Bl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Le(309));var r=n.stateNode}if(!r)throw Error(Le(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Le(284));if(!n._owner)throw Error(Le(290,e))}return e}function qd(e,t){throw e=Object.prototype.toString.call(t),Error(Le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function B0(e){var t=e._init;return t(e._payload)}function iy(e){function t(y,b){if(e){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=Js(y,b),y.index=0,y.sibling=null,y}function i(y,b,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,b,w,S){return b===null||b.tag!==6?(b=_f(w,y.mode,S),b.return=y,b):(b=s(b,w),b.return=y,b)}function c(y,b,w,S){var R=w.type;return R===_o?h(y,b,w.props.children,S,w.key):b!==null&&(b.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Fs&&B0(R)===b.type)?(S=s(b,w.props),S.ref=Bl(y,b,w),S.return=y,S):(S=su(w.type,w.key,w.props,null,y.mode,S),S.ref=Bl(y,b,w),S.return=y,S)}function d(y,b,w,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=wf(w,y.mode,S),b.return=y,b):(b=s(b,w.children||[]),b.return=y,b)}function h(y,b,w,S,R){return b===null||b.tag!==7?(b=Bi(w,y.mode,S,R),b.return=y,b):(b=s(b,w),b.return=y,b)}function m(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=_f(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jd:return w=su(b.type,b.key,b.props,null,y.mode,w),w.ref=Bl(y,null,b),w.return=y,w;case bo:return b=wf(b,y.mode,w),b.return=y,b;case Fs:var S=b._init;return m(y,S(b._payload),w)}if(Gl(b)||Il(b))return b=Bi(b,y.mode,w,null),b.return=y,b;qd(y,b)}return null}function g(y,b,w,S){var R=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return R!==null?null:l(y,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jd:return w.key===R?c(y,b,w,S):null;case bo:return w.key===R?d(y,b,w,S):null;case Fs:return R=w._init,g(y,b,R(w._payload),S)}if(Gl(w)||Il(w))return R!==null?null:h(y,b,w,S,null);qd(y,w)}return null}function p(y,b,w,S,R){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(w)||null,l(b,y,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case jd:return y=y.get(S.key===null?w:S.key)||null,c(b,y,S,R);case bo:return y=y.get(S.key===null?w:S.key)||null,d(b,y,S,R);case Fs:var W=S._init;return p(y,b,w,W(S._payload),R)}if(Gl(S)||Il(S))return y=y.get(w)||null,h(b,y,S,R,null);qd(b,S)}return null}function j(y,b,w,S){for(var R=null,W=null,U=b,_=b=0,D=null;U!==null&&_<w.length;_++){U.index>_?(D=U,U=null):D=U.sibling;var z=g(y,U,w[_],S);if(z===null){U===null&&(U=D);break}e&&U&&z.alternate===null&&t(y,U),b=i(z,b,_),W===null?R=z:W.sibling=z,W=z,U=D}if(_===w.length)return n(y,U),Kt&&Pi(y,_),R;if(U===null){for(;_<w.length;_++)U=m(y,w[_],S),U!==null&&(b=i(U,b,_),W===null?R=U:W.sibling=U,W=U);return Kt&&Pi(y,_),R}for(U=r(y,U);_<w.length;_++)D=p(U,y,_,w[_],S),D!==null&&(e&&D.alternate!==null&&U.delete(D.key===null?_:D.key),b=i(D,b,_),W===null?R=D:W.sibling=D,W=D);return e&&U.forEach(function(L){return t(y,L)}),Kt&&Pi(y,_),R}function N(y,b,w,S){var R=Il(w);if(typeof R!="function")throw Error(Le(150));if(w=R.call(w),w==null)throw Error(Le(151));for(var W=R=null,U=b,_=b=0,D=null,z=w.next();U!==null&&!z.done;_++,z=w.next()){U.index>_?(D=U,U=null):D=U.sibling;var L=g(y,U,z.value,S);if(L===null){U===null&&(U=D);break}e&&U&&L.alternate===null&&t(y,U),b=i(L,b,_),W===null?R=L:W.sibling=L,W=L,U=D}if(z.done)return n(y,U),Kt&&Pi(y,_),R;if(U===null){for(;!z.done;_++,z=w.next())z=m(y,z.value,S),z!==null&&(b=i(z,b,_),W===null?R=z:W.sibling=z,W=z);return Kt&&Pi(y,_),R}for(U=r(y,U);!z.done;_++,z=w.next())z=p(U,y,_,z.value,S),z!==null&&(e&&z.alternate!==null&&U.delete(z.key===null?_:z.key),b=i(z,b,_),W===null?R=z:W.sibling=z,W=z);return e&&U.forEach(function(O){return t(y,O)}),Kt&&Pi(y,_),R}function C(y,b,w,S){if(typeof w=="object"&&w!==null&&w.type===_o&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case jd:e:{for(var R=w.key,W=b;W!==null;){if(W.key===R){if(R=w.type,R===_o){if(W.tag===7){n(y,W.sibling),b=s(W,w.props.children),b.return=y,y=b;break e}}else if(W.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Fs&&B0(R)===W.type){n(y,W.sibling),b=s(W,w.props),b.ref=Bl(y,W,w),b.return=y,y=b;break e}n(y,W);break}else t(y,W);W=W.sibling}w.type===_o?(b=Bi(w.props.children,y.mode,S,w.key),b.return=y,y=b):(S=su(w.type,w.key,w.props,null,y.mode,S),S.ref=Bl(y,b,w),S.return=y,y=S)}return o(y);case bo:e:{for(W=w.key;b!==null;){if(b.key===W)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(y,b.sibling),b=s(b,w.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=wf(w,y.mode,S),b.return=y,y=b}return o(y);case Fs:return W=w._init,C(y,b,W(w._payload),S)}if(Gl(w))return j(y,b,w,S);if(Il(w))return N(y,b,w,S);qd(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,w),b.return=y,y=b):(n(y,b),b=_f(w,y.mode,S),b.return=y,y=b),o(y)):n(y,b)}return C}var Zo=iy(!0),oy=iy(!1),Su=ri(null),ku=null,Do=null,Fm=null;function Rm(){Fm=Do=ku=null}function Om(e){var t=Su.current;Vt(Su),e._currentValue=t}function Ap(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Oo(e,t){ku=e,Fm=Do=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(vr=!0),e.firstContext=null)}function ea(e){var t=e._currentValue;if(Fm!==e)if(e={context:e,memoizedValue:t,next:null},Do===null){if(ku===null)throw Error(Le(308));Do=e,ku.dependencies={lanes:0,firstContext:e}}else Do=Do.next=e;return t}var Ri=null;function Mm(e){Ri===null?Ri=[e]:Ri.push(e)}function ly(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Mm(t)):(n.next=s.next,s.next=n),t.interleaved=n,us(e,r)}function us(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Rs=!1;function Bm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ks(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,_t&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,us(e,n)}return s=r.interleaved,s===null?(t.next=t,Mm(r)):(t.next=s.next,s.next=t),r.interleaved=t,us(e,n)}function Qd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sm(e,n)}}function U0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Cu(e,t,n,r){var s=e.updateQueue;Rs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,h=d=c=null,l=i;do{var g=l.lane,p=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=e,N=l;switch(g=t,p=n,N.tag){case 1:if(j=N.payload,typeof j=="function"){m=j.call(p,m,g);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=N.payload,g=typeof j=="function"?j.call(p,m,g):j,g==null)break e;m=Qt({},m,g);break e;case 2:Rs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else p={eventTime:p,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=p,c=m):h=h.next=p,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Hi|=o,e.lanes=o,e.memoizedState=m}}function z0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Le(191,s));s.call(r)}}}var Oc={},Ra=ri(Oc),_c=ri(Oc),wc=ri(Oc);function Oi(e){if(e===Oc)throw Error(Le(174));return e}function Um(e,t){switch(zt(wc,t),zt(_c,e),zt(Ra,Oc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lp(t,e)}Vt(Ra),zt(Ra,t)}function Yo(){Vt(Ra),Vt(_c),Vt(wc)}function dy(e){Oi(wc.current);var t=Oi(Ra.current),n=lp(t,e.type);t!==n&&(zt(_c,e),zt(Ra,n))}function zm(e){_c.current===e&&(Vt(Ra),Vt(_c))}var Yt=ri(0);function Au(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mf=[];function $m(){for(var e=0;e<mf.length;e++)mf[e]._workInProgressVersionPrimary=null;mf.length=0}var eu=ps.ReactCurrentDispatcher,gf=ps.ReactCurrentBatchConfig,Wi=0,Jt=null,Tn=null,Fn=null,Du=!1,rc=!1,jc=0,jw=0;function Xn(){throw Error(Le(321))}function Wm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!va(e[n],t[n]))return!1;return!0}function Hm(e,t,n,r,s,i){if(Wi=i,Jt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,eu.current=e===null||e.memoizedState===null?Cw:Aw,e=n(r,s),rc){i=0;do{if(rc=!1,jc=0,25<=i)throw Error(Le(301));i+=1,Fn=Tn=null,t.updateQueue=null,eu.current=Dw,e=n(r,s)}while(rc)}if(eu.current=Lu,t=Tn!==null&&Tn.next!==null,Wi=0,Fn=Tn=Jt=null,Du=!1,t)throw Error(Le(300));return e}function Vm(){var e=jc!==0;return jc=0,e}function Pa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?Jt.memoizedState=Fn=e:Fn=Fn.next=e,Fn}function ta(){if(Tn===null){var e=Jt.alternate;e=e!==null?e.memoizedState:null}else e=Tn.next;var t=Fn===null?Jt.memoizedState:Fn.next;if(t!==null)Fn=t,Tn=e;else{if(e===null)throw Error(Le(310));Tn=e,e={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},Fn===null?Jt.memoizedState=Fn=e:Fn=Fn.next=e}return Fn}function Nc(e,t){return typeof t=="function"?t(e):t}function vf(e){var t=ta(),n=t.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=e;var r=Tn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((Wi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Jt.lanes|=h,Hi|=h}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,va(r,t.memoizedState)||(vr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Jt.lanes|=i,Hi|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function yf(e){var t=ta(),n=t.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);va(i,t.memoizedState)||(vr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function uy(){}function hy(e,t){var n=Jt,r=ta(),s=t(),i=!va(r.memoizedState,s);if(i&&(r.memoizedState=s,vr=!0),r=r.queue,Gm(my.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Fn!==null&&Fn.memoizedState.tag&1){if(n.flags|=2048,Sc(9,py.bind(null,n,r,s,t),void 0,null),On===null)throw Error(Le(349));Wi&30||fy(n,t,s)}return s}function fy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Jt.updateQueue,t===null?(t={lastEffect:null,stores:null},Jt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function py(e,t,n,r){t.value=n,t.getSnapshot=r,gy(t)&&vy(e)}function my(e,t,n){return n(function(){gy(t)&&vy(e)})}function gy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!va(e,n)}catch{return!0}}function vy(e){var t=us(e,1);t!==null&&ga(t,e,1,-1)}function $0(e){var t=Pa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nc,lastRenderedState:e},t.queue=e,e=e.dispatch=kw.bind(null,Jt,e),[t.memoizedState,e]}function Sc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Jt.updateQueue,t===null?(t={lastEffect:null,stores:null},Jt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function yy(){return ta().memoizedState}function tu(e,t,n,r){var s=Pa();Jt.flags|=e,s.memoizedState=Sc(1|t,n,void 0,r===void 0?null:r)}function Qu(e,t,n,r){var s=ta();r=r===void 0?null:r;var i=void 0;if(Tn!==null){var o=Tn.memoizedState;if(i=o.destroy,r!==null&&Wm(r,o.deps)){s.memoizedState=Sc(t,n,i,r);return}}Jt.flags|=e,s.memoizedState=Sc(1|t,n,i,r)}function W0(e,t){return tu(8390656,8,e,t)}function Gm(e,t){return Qu(2048,8,e,t)}function xy(e,t){return Qu(4,2,e,t)}function by(e,t){return Qu(4,4,e,t)}function _y(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wy(e,t,n){return n=n!=null?n.concat([e]):null,Qu(4,4,_y.bind(null,t,e),n)}function Km(){}function jy(e,t){var n=ta();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ny(e,t){var n=ta();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Sy(e,t,n){return Wi&21?(va(n,t)||(n=Lv(),Jt.lanes|=n,Hi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vr=!0),e.memoizedState=n)}function Nw(e,t){var n=Et;Et=n!==0&&4>n?n:4,e(!0);var r=gf.transition;gf.transition={};try{e(!1),t()}finally{Et=n,gf.transition=r}}function ky(){return ta().memoizedState}function Sw(e,t,n){var r=Ys(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Cy(e))Ay(t,n);else if(n=ly(e,t,n,r),n!==null){var s=dr();ga(n,e,r,s),Dy(n,t,r)}}function kw(e,t,n){var r=Ys(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cy(e))Ay(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,va(l,o)){var c=t.interleaved;c===null?(s.next=s,Mm(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=ly(e,t,s,r),n!==null&&(s=dr(),ga(n,e,r,s),Dy(n,t,r))}}function Cy(e){var t=e.alternate;return e===Jt||t!==null&&t===Jt}function Ay(e,t){rc=Du=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Dy(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sm(e,n)}}var Lu={readContext:ea,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},Cw={readContext:ea,useCallback:function(e,t){return Pa().memoizedState=[e,t===void 0?null:t],e},useContext:ea,useEffect:W0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,tu(4194308,4,_y.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tu(4194308,4,e,t)},useInsertionEffect:function(e,t){return tu(4,2,e,t)},useMemo:function(e,t){var n=Pa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Pa();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Sw.bind(null,Jt,e),[r.memoizedState,e]},useRef:function(e){var t=Pa();return e={current:e},t.memoizedState=e},useState:$0,useDebugValue:Km,useDeferredValue:function(e){return Pa().memoizedState=e},useTransition:function(){var e=$0(!1),t=e[0];return e=Nw.bind(null,e[1]),Pa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Jt,s=Pa();if(Kt){if(n===void 0)throw Error(Le(407));n=n()}else{if(n=t(),On===null)throw Error(Le(349));Wi&30||fy(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,W0(my.bind(null,r,i,e),[e]),r.flags|=2048,Sc(9,py.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Pa(),t=On.identifierPrefix;if(Kt){var n=ss,r=as;n=(r&~(1<<32-ma(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=jc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=jw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Aw={readContext:ea,useCallback:jy,useContext:ea,useEffect:Gm,useImperativeHandle:wy,useInsertionEffect:xy,useLayoutEffect:by,useMemo:Ny,useReducer:vf,useRef:yy,useState:function(){return vf(Nc)},useDebugValue:Km,useDeferredValue:function(e){var t=ta();return Sy(t,Tn.memoizedState,e)},useTransition:function(){var e=vf(Nc)[0],t=ta().memoizedState;return[e,t]},useMutableSource:uy,useSyncExternalStore:hy,useId:ky,unstable_isNewReconciler:!1},Dw={readContext:ea,useCallback:jy,useContext:ea,useEffect:Gm,useImperativeHandle:wy,useInsertionEffect:xy,useLayoutEffect:by,useMemo:Ny,useReducer:yf,useRef:yy,useState:function(){return yf(Nc)},useDebugValue:Km,useDeferredValue:function(e){var t=ta();return Tn===null?t.memoizedState=e:Sy(t,Tn.memoizedState,e)},useTransition:function(){var e=yf(Nc)[0],t=ta().memoizedState;return[e,t]},useMutableSource:uy,useSyncExternalStore:hy,useId:ky,unstable_isNewReconciler:!1};function ha(e,t){if(e&&e.defaultProps){t=Qt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Dp(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Qt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var eh={isMounted:function(e){return(e=e._reactInternals)?Yi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dr(),s=Ys(e),i=ls(r,s);i.payload=t,n!=null&&(i.callback=n),t=Ks(e,i,s),t!==null&&(ga(t,e,s,r),Qd(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dr(),s=Ys(e),i=ls(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ks(e,i,s),t!==null&&(ga(t,e,s,r),Qd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dr(),r=Ys(e),s=ls(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ks(e,s,r),t!==null&&(ga(t,e,r,n),Qd(t,e,r))}};function H0(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!vc(n,r)||!vc(s,i):!0}function Ly(e,t,n){var r=!1,s=ei,i=t.contextType;return typeof i=="object"&&i!==null?i=ea(i):(s=br(t)?zi:sr.current,r=t.contextTypes,i=(r=r!=null)?Go(e,s):ei),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function V0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&eh.enqueueReplaceState(t,t.state,null)}function Lp(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Bm(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ea(i):(i=br(t)?zi:sr.current,s.context=Go(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Dp(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&eh.enqueueReplaceState(s,s.state,null),Cu(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Jo(e,t){try{var n="",r=t;do n+=r_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function xf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ep(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Lw=typeof WeakMap=="function"?WeakMap:Map;function Ey(e,t,n){n=ls(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Pu||(Pu=!0,Up=r),Ep(e,t)},n}function Py(e,t,n){n=ls(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ep(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ep(e,t),typeof r!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function G0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Lw;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Ww.bind(null,e,t,n),t.then(e,e))}function K0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Z0(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ls(-1,1),t.tag=2,Ks(n,t,1))),n.lanes|=1),e)}var Ew=ps.ReactCurrentOwner,vr=!1;function cr(e,t,n,r){t.child=e===null?oy(t,null,n,r):Zo(t,e.child,n,r)}function Y0(e,t,n,r,s){n=n.render;var i=t.ref;return Oo(t,s),r=Hm(e,t,n,r,i,s),n=Vm(),e!==null&&!vr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hs(e,t,s)):(Kt&&n&&Tm(t),t.flags|=1,cr(e,t,r,s),t.child)}function J0(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!ng(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Ty(e,t,i,r,s)):(e=su(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:vc,n(o,r)&&e.ref===t.ref)return hs(e,t,s)}return t.flags|=1,e=Js(i,r),e.ref=t.ref,e.return=t,t.child=e}function Ty(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(vc(i,r)&&e.ref===t.ref)if(vr=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(vr=!0);else return t.lanes=e.lanes,hs(e,t,s)}return Pp(e,t,n,r,s)}function qy(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(Eo,Tr),Tr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,zt(Eo,Tr),Tr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,zt(Eo,Tr),Tr|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,zt(Eo,Tr),Tr|=r;return cr(e,t,s,n),t.child}function Iy(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pp(e,t,n,r,s){var i=br(n)?zi:sr.current;return i=Go(t,i),Oo(t,s),n=Hm(e,t,n,r,i,s),r=Vm(),e!==null&&!vr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hs(e,t,s)):(Kt&&r&&Tm(t),t.flags|=1,cr(e,t,n,s),t.child)}function X0(e,t,n,r,s){if(br(n)){var i=!0;wu(t)}else i=!1;if(Oo(t,s),t.stateNode===null)nu(e,t),Ly(t,n,r),Lp(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=ea(d):(d=br(n)?zi:sr.current,d=Go(t,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&V0(t,o,r,d),Rs=!1;var g=t.memoizedState;o.state=g,Cu(t,r,o,s),c=t.memoizedState,l!==r||g!==c||xr.current||Rs?(typeof h=="function"&&(Dp(t,n,h,r),c=t.memoizedState),(l=Rs||H0(t,n,l,r,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,cy(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ha(t.type,l),o.props=d,m=t.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ea(c):(c=br(n)?zi:sr.current,c=Go(t,c));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==c)&&V0(t,o,r,c),Rs=!1,g=t.memoizedState,o.state=g,Cu(t,r,o,s);var j=t.memoizedState;l!==m||g!==j||xr.current||Rs?(typeof p=="function"&&(Dp(t,n,p,r),j=t.memoizedState),(d=Rs||H0(t,n,d,r,g,j,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,j,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),o.props=r,o.state=j,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Tp(e,t,n,r,i,s)}function Tp(e,t,n,r,s,i){Iy(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&R0(t,n,!1),hs(e,t,i);r=t.stateNode,Ew.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Zo(t,e.child,null,i),t.child=Zo(t,null,l,i)):cr(e,t,l,i),t.memoizedState=r.state,s&&R0(t,n,!0),t.child}function Fy(e){var t=e.stateNode;t.pendingContext?F0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&F0(e,t.context,!1),Um(e,t.containerInfo)}function Q0(e,t,n,r,s){return Ko(),Im(s),t.flags|=256,cr(e,t,n,r),t.child}var qp={dehydrated:null,treeContext:null,retryLane:0};function Ip(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ry(e,t,n){var r=t.pendingProps,s=Yt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),zt(Yt,s&1),e===null)return Cp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rh(o,r,0,null),e=Bi(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ip(n),t.memoizedState=qp,e):Zm(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Pw(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Js(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Js(l,i):(i=Bi(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Ip(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=qp,r}return i=e.child,e=i.sibling,r=Js(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Zm(e,t){return t=rh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Id(e,t,n,r){return r!==null&&Im(r),Zo(t,e.child,null,n),e=Zm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Pw(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=xf(Error(Le(422))),Id(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=rh({mode:"visible",children:r.children},s,0,null),i=Bi(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Zo(t,e.child,null,o),t.child.memoizedState=Ip(o),t.memoizedState=qp,i);if(!(t.mode&1))return Id(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Le(419)),r=xf(i,r,void 0),Id(e,t,o,r)}if(l=(o&e.childLanes)!==0,vr||l){if(r=On,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,us(e,s),ga(r,e,s,-1))}return tg(),r=xf(Error(Le(421))),Id(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Hw.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ir=Gs(s.nextSibling),Rr=t,Kt=!0,pa=null,e!==null&&(Yr[Jr++]=as,Yr[Jr++]=ss,Yr[Jr++]=$i,as=e.id,ss=e.overflow,$i=t),t=Zm(t,r.children),t.flags|=4096,t)}function e1(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ap(e.return,t,n)}function bf(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Oy(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(cr(e,t,r.children,n),r=Yt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&e1(e,n,t);else if(e.tag===19)e1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(zt(Yt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Au(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),bf(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Au(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}bf(t,!0,n,null,i);break;case"together":bf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Hi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Le(153));if(t.child!==null){for(e=t.child,n=Js(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Js(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Tw(e,t,n){switch(t.tag){case 3:Fy(t),Ko();break;case 5:dy(t);break;case 1:br(t.type)&&wu(t);break;case 4:Um(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;zt(Su,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(zt(Yt,Yt.current&1),t.flags|=128,null):n&t.child.childLanes?Ry(e,t,n):(zt(Yt,Yt.current&1),e=hs(e,t,n),e!==null?e.sibling:null);zt(Yt,Yt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Oy(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),zt(Yt,Yt.current),r)break;return null;case 22:case 23:return t.lanes=0,qy(e,t,n)}return hs(e,t,n)}var My,Fp,By,Uy;My=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fp=function(){};By=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Oi(Ra.current);var i=null;switch(n){case"input":s=ap(e,s),r=ap(e,r),i=[];break;case"select":s=Qt({},s,{value:void 0}),r=Qt({},r,{value:void 0}),i=[];break;case"textarea":s=op(e,s),r=op(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=bu)}cp(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(dc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(dc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Wt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Uy=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ul(e,t){if(!Kt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qw(e,t,n){var r=t.pendingProps;switch(qm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(t),null;case 1:return br(t.type)&&_u(),Qn(t),null;case 3:return r=t.stateNode,Yo(),Vt(xr),Vt(sr),$m(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Td(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pa!==null&&(Wp(pa),pa=null))),Fp(e,t),Qn(t),null;case 5:zm(t);var s=Oi(wc.current);if(n=t.type,e!==null&&t.stateNode!=null)By(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Le(166));return Qn(t),null}if(e=Oi(Ra.current),Td(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Ta]=t,r[bc]=i,e=(t.mode&1)!==0,n){case"dialog":Wt("cancel",r),Wt("close",r);break;case"iframe":case"object":case"embed":Wt("load",r);break;case"video":case"audio":for(s=0;s<Zl.length;s++)Wt(Zl[s],r);break;case"source":Wt("error",r);break;case"img":case"image":case"link":Wt("error",r),Wt("load",r);break;case"details":Wt("toggle",r);break;case"input":c0(r,i),Wt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Wt("invalid",r);break;case"textarea":u0(r,i),Wt("invalid",r)}cp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Pd(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Pd(r.textContent,l,e),s=["children",""+l]):dc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Wt("scroll",r)}switch(n){case"input":Nd(r),d0(r,i,!0);break;case"textarea":Nd(r),h0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bu)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=mv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ta]=t,e[bc]=r,My(e,t,!1,!1),t.stateNode=e;e:{switch(o=dp(n,r),n){case"dialog":Wt("cancel",e),Wt("close",e),s=r;break;case"iframe":case"object":case"embed":Wt("load",e),s=r;break;case"video":case"audio":for(s=0;s<Zl.length;s++)Wt(Zl[s],e);s=r;break;case"source":Wt("error",e),s=r;break;case"img":case"image":case"link":Wt("error",e),Wt("load",e),s=r;break;case"details":Wt("toggle",e),s=r;break;case"input":c0(e,r),s=ap(e,r),Wt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Qt({},r,{value:void 0}),Wt("invalid",e);break;case"textarea":u0(e,r),s=op(e,r),Wt("invalid",e);break;default:s=r}cp(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?yv(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gv(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&uc(e,c):typeof c=="number"&&uc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(dc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Wt("scroll",e):c!=null&&xm(e,i,c,o))}switch(n){case"input":Nd(e),d0(e,r,!1);break;case"textarea":Nd(e),h0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Qs(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?qo(e,!!r.multiple,i,!1):r.defaultValue!=null&&qo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=bu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qn(t),null;case 6:if(e&&t.stateNode!=null)Uy(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Le(166));if(n=Oi(wc.current),Oi(Ra.current),Td(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ta]=t,(i=r.nodeValue!==n)&&(e=Rr,e!==null))switch(e.tag){case 3:Pd(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pd(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ta]=t,t.stateNode=r}return Qn(t),null;case 13:if(Vt(Yt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Kt&&Ir!==null&&t.mode&1&&!(t.flags&128))sy(),Ko(),t.flags|=98560,i=!1;else if(i=Td(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Le(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Le(317));i[Ta]=t}else Ko(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qn(t),i=!1}else pa!==null&&(Wp(pa),pa=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Yt.current&1?qn===0&&(qn=3):tg())),t.updateQueue!==null&&(t.flags|=4),Qn(t),null);case 4:return Yo(),Fp(e,t),e===null&&yc(t.stateNode.containerInfo),Qn(t),null;case 10:return Om(t.type._context),Qn(t),null;case 17:return br(t.type)&&_u(),Qn(t),null;case 19:if(Vt(Yt),i=t.memoizedState,i===null)return Qn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Ul(i,!1);else{if(qn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Au(e),o!==null){for(t.flags|=128,Ul(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return zt(Yt,Yt.current&1|2),t.child}e=e.sibling}i.tail!==null&&gn()>Xo&&(t.flags|=128,r=!0,Ul(i,!1),t.lanes=4194304)}else{if(!r)if(e=Au(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ul(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Kt)return Qn(t),null}else 2*gn()-i.renderingStartTime>Xo&&n!==1073741824&&(t.flags|=128,r=!0,Ul(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=gn(),t.sibling=null,n=Yt.current,zt(Yt,r?n&1|2:n&1),t):(Qn(t),null);case 22:case 23:return eg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Tr&1073741824&&(Qn(t),t.subtreeFlags&6&&(t.flags|=8192)):Qn(t),null;case 24:return null;case 25:return null}throw Error(Le(156,t.tag))}function Iw(e,t){switch(qm(t),t.tag){case 1:return br(t.type)&&_u(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yo(),Vt(xr),Vt(sr),$m(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zm(t),null;case 13:if(Vt(Yt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Le(340));Ko()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Vt(Yt),null;case 4:return Yo(),null;case 10:return Om(t.type._context),null;case 22:case 23:return eg(),null;case 24:return null;default:return null}}var Fd=!1,ar=!1,Fw=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Lo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){on(e,t,r)}else n.current=null}function Rp(e,t,n){try{n()}catch(r){on(e,t,r)}}var t1=!1;function Rw(e,t){if(bp=vu,e=Vv(),Pm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,m=e,g=null;t:for(;;){for(var p;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(p=m.firstChild)!==null;)g=m,m=p;for(;;){if(m===e)break t;if(g===n&&++d===s&&(l=o),g===i&&++h===r&&(c=o),(p=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(_p={focusedElem:e,selectionRange:n},vu=!1,Ie=t;Ie!==null;)if(t=Ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ie=e;else for(;Ie!==null;){t=Ie;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var N=j.memoizedProps,C=j.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?N:ha(t.type,N),C);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(S){on(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Ie=e;break}Ie=t.return}return j=t1,t1=!1,j}function ac(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rp(t,n,i)}s=s.next}while(s!==r)}}function th(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Op(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zy(e){var t=e.alternate;t!==null&&(e.alternate=null,zy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ta],delete t[bc],delete t[Np],delete t[xw],delete t[bw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $y(e){return e.tag===5||e.tag===3||e.tag===4}function n1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$y(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=bu));else if(r!==4&&(e=e.child,e!==null))for(Mp(e,t,n),e=e.sibling;e!==null;)Mp(e,t,n),e=e.sibling}function Bp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Bp(e,t,n),e=e.sibling;e!==null;)Bp(e,t,n),e=e.sibling}var Wn=null,fa=!1;function Ts(e,t,n){for(n=n.child;n!==null;)Wy(e,t,n),n=n.sibling}function Wy(e,t,n){if(Fa&&typeof Fa.onCommitFiberUnmount=="function")try{Fa.onCommitFiberUnmount(Gu,n)}catch{}switch(n.tag){case 5:ar||Lo(n,t);case 6:var r=Wn,s=fa;Wn=null,Ts(e,t,n),Wn=r,fa=s,Wn!==null&&(fa?(e=Wn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Wn.removeChild(n.stateNode));break;case 18:Wn!==null&&(fa?(e=Wn,n=n.stateNode,e.nodeType===8?ff(e.parentNode,n):e.nodeType===1&&ff(e,n),mc(e)):ff(Wn,n.stateNode));break;case 4:r=Wn,s=fa,Wn=n.stateNode.containerInfo,fa=!0,Ts(e,t,n),Wn=r,fa=s;break;case 0:case 11:case 14:case 15:if(!ar&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Rp(n,t,o),s=s.next}while(s!==r)}Ts(e,t,n);break;case 1:if(!ar&&(Lo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){on(n,t,l)}Ts(e,t,n);break;case 21:Ts(e,t,n);break;case 22:n.mode&1?(ar=(r=ar)||n.memoizedState!==null,Ts(e,t,n),ar=r):Ts(e,t,n);break;default:Ts(e,t,n)}}function r1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Fw),t.forEach(function(r){var s=Vw.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function da(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Wn=l.stateNode,fa=!1;break e;case 3:Wn=l.stateNode.containerInfo,fa=!0;break e;case 4:Wn=l.stateNode.containerInfo,fa=!0;break e}l=l.return}if(Wn===null)throw Error(Le(160));Wy(i,o,s),Wn=null,fa=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){on(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Hy(t,e),t=t.sibling}function Hy(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(da(t,e),Aa(e),r&4){try{ac(3,e,e.return),th(3,e)}catch(N){on(e,e.return,N)}try{ac(5,e,e.return)}catch(N){on(e,e.return,N)}}break;case 1:da(t,e),Aa(e),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(da(t,e),Aa(e),r&512&&n!==null&&Lo(n,n.return),e.flags&32){var s=e.stateNode;try{uc(s,"")}catch(N){on(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&fv(s,i),dp(l,o);var d=dp(l,i);for(o=0;o<c.length;o+=2){var h=c[o],m=c[o+1];h==="style"?yv(s,m):h==="dangerouslySetInnerHTML"?gv(s,m):h==="children"?uc(s,m):xm(s,h,m,d)}switch(l){case"input":sp(s,i);break;case"textarea":pv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?qo(s,!!i.multiple,p,!1):g!==!!i.multiple&&(i.defaultValue!=null?qo(s,!!i.multiple,i.defaultValue,!0):qo(s,!!i.multiple,i.multiple?[]:"",!1))}s[bc]=i}catch(N){on(e,e.return,N)}}break;case 6:if(da(t,e),Aa(e),r&4){if(e.stateNode===null)throw Error(Le(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){on(e,e.return,N)}}break;case 3:if(da(t,e),Aa(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mc(t.containerInfo)}catch(N){on(e,e.return,N)}break;case 4:da(t,e),Aa(e);break;case 13:da(t,e),Aa(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xm=gn())),r&4&&r1(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(ar=(d=ar)||h,da(t,e),ar=d):da(t,e),Aa(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(Ie=e,h=e.child;h!==null;){for(m=Ie=h;Ie!==null;){switch(g=Ie,p=g.child,g.tag){case 0:case 11:case 14:case 15:ac(4,g,g.return);break;case 1:Lo(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(N){on(r,n,N)}}break;case 5:Lo(g,g.return);break;case 22:if(g.memoizedState!==null){s1(m);continue}}p!==null?(p.return=g,Ie=p):s1(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=vv("display",o))}catch(N){on(e,e.return,N)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(N){on(e,e.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:da(t,e),Aa(e),r&4&&r1(e);break;case 21:break;default:da(t,e),Aa(e)}}function Aa(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($y(n)){var r=n;break e}n=n.return}throw Error(Le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(uc(s,""),r.flags&=-33);var i=n1(e);Bp(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=n1(e);Mp(e,l,o);break;default:throw Error(Le(161))}}catch(c){on(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ow(e,t,n){Ie=e,Vy(e)}function Vy(e,t,n){for(var r=(e.mode&1)!==0;Ie!==null;){var s=Ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ar;l=Fd;var d=ar;if(Fd=o,(ar=c)&&!d)for(Ie=s;Ie!==null;)o=Ie,c=o.child,o.tag===22&&o.memoizedState!==null?i1(s):c!==null?(c.return=o,Ie=c):i1(s);for(;i!==null;)Ie=i,Vy(i),i=i.sibling;Ie=s,Fd=l,ar=d}a1(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ie=i):a1(e)}}function a1(e){for(;Ie!==null;){var t=Ie;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ar||th(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ar)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ha(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&z0(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}z0(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&mc(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}ar||t.flags&512&&Op(t)}catch(g){on(t,t.return,g)}}if(t===e){Ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ie=n;break}Ie=t.return}}function s1(e){for(;Ie!==null;){var t=Ie;if(t===e){Ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ie=n;break}Ie=t.return}}function i1(e){for(;Ie!==null;){var t=Ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{th(4,t)}catch(c){on(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){on(t,s,c)}}var i=t.return;try{Op(t)}catch(c){on(t,i,c)}break;case 5:var o=t.return;try{Op(t)}catch(c){on(t,o,c)}}}catch(c){on(t,t.return,c)}if(t===e){Ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ie=l;break}Ie=t.return}}var Mw=Math.ceil,Eu=ps.ReactCurrentDispatcher,Ym=ps.ReactCurrentOwner,Qr=ps.ReactCurrentBatchConfig,_t=0,On=null,Nn=null,Gn=0,Tr=0,Eo=ri(0),qn=0,kc=null,Hi=0,nh=0,Jm=0,sc=null,gr=null,Xm=0,Xo=1/0,ts=null,Pu=!1,Up=null,Zs=null,Rd=!1,Us=null,Tu=0,ic=0,zp=null,ru=-1,au=0;function dr(){return _t&6?gn():ru!==-1?ru:ru=gn()}function Ys(e){return e.mode&1?_t&2&&Gn!==0?Gn&-Gn:ww.transition!==null?(au===0&&(au=Lv()),au):(e=Et,e!==0||(e=window.event,e=e===void 0?16:Rv(e.type)),e):1}function ga(e,t,n,r){if(50<ic)throw ic=0,zp=null,Error(Le(185));Ic(e,n,r),(!(_t&2)||e!==On)&&(e===On&&(!(_t&2)&&(nh|=n),qn===4&&Ms(e,Gn)),_r(e,r),n===1&&_t===0&&!(t.mode&1)&&(Xo=gn()+500,Xu&&ai()))}function _r(e,t){var n=e.callbackNode;w_(e,t);var r=gu(e,e===On?Gn:0);if(r===0)n!==null&&m0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&m0(n),t===1)e.tag===0?_w(o1.bind(null,e)):ny(o1.bind(null,e)),vw(function(){!(_t&6)&&ai()}),n=null;else{switch(Ev(r)){case 1:n=Nm;break;case 4:n=Av;break;case 16:n=mu;break;case 536870912:n=Dv;break;default:n=mu}n=e5(n,Gy.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Gy(e,t){if(ru=-1,au=0,_t&6)throw Error(Le(327));var n=e.callbackNode;if(Mo()&&e.callbackNode!==n)return null;var r=gu(e,e===On?Gn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=qu(e,r);else{t=r;var s=_t;_t|=2;var i=Zy();(On!==e||Gn!==t)&&(ts=null,Xo=gn()+500,Mi(e,t));do try{zw();break}catch(l){Ky(e,l)}while(!0);Rm(),Eu.current=i,_t=s,Nn!==null?t=0:(On=null,Gn=0,t=qn)}if(t!==0){if(t===2&&(s=mp(e),s!==0&&(r=s,t=$p(e,s))),t===1)throw n=kc,Mi(e,0),Ms(e,r),_r(e,gn()),n;if(t===6)Ms(e,r);else{if(s=e.current.alternate,!(r&30)&&!Bw(s)&&(t=qu(e,r),t===2&&(i=mp(e),i!==0&&(r=i,t=$p(e,i))),t===1))throw n=kc,Mi(e,0),Ms(e,r),_r(e,gn()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Le(345));case 2:Ti(e,gr,ts);break;case 3:if(Ms(e,r),(r&130023424)===r&&(t=Xm+500-gn(),10<t)){if(gu(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){dr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=jp(Ti.bind(null,e,gr,ts),t);break}Ti(e,gr,ts);break;case 4:if(Ms(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-ma(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mw(r/1960))-r,10<r){e.timeoutHandle=jp(Ti.bind(null,e,gr,ts),r);break}Ti(e,gr,ts);break;case 5:Ti(e,gr,ts);break;default:throw Error(Le(329))}}}return _r(e,gn()),e.callbackNode===n?Gy.bind(null,e):null}function $p(e,t){var n=sc;return e.current.memoizedState.isDehydrated&&(Mi(e,t).flags|=256),e=qu(e,t),e!==2&&(t=gr,gr=n,t!==null&&Wp(t)),e}function Wp(e){gr===null?gr=e:gr.push.apply(gr,e)}function Bw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!va(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ms(e,t){for(t&=~Jm,t&=~nh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ma(t),r=1<<n;e[n]=-1,t&=~r}}function o1(e){if(_t&6)throw Error(Le(327));Mo();var t=gu(e,0);if(!(t&1))return _r(e,gn()),null;var n=qu(e,t);if(e.tag!==0&&n===2){var r=mp(e);r!==0&&(t=r,n=$p(e,r))}if(n===1)throw n=kc,Mi(e,0),Ms(e,t),_r(e,gn()),n;if(n===6)throw Error(Le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ti(e,gr,ts),_r(e,gn()),null}function Qm(e,t){var n=_t;_t|=1;try{return e(t)}finally{_t=n,_t===0&&(Xo=gn()+500,Xu&&ai())}}function Vi(e){Us!==null&&Us.tag===0&&!(_t&6)&&Mo();var t=_t;_t|=1;var n=Qr.transition,r=Et;try{if(Qr.transition=null,Et=1,e)return e()}finally{Et=r,Qr.transition=n,_t=t,!(_t&6)&&ai()}}function eg(){Tr=Eo.current,Vt(Eo)}function Mi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,gw(n)),Nn!==null)for(n=Nn.return;n!==null;){var r=n;switch(qm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_u();break;case 3:Yo(),Vt(xr),Vt(sr),$m();break;case 5:zm(r);break;case 4:Yo();break;case 13:Vt(Yt);break;case 19:Vt(Yt);break;case 10:Om(r.type._context);break;case 22:case 23:eg()}n=n.return}if(On=e,Nn=e=Js(e.current,null),Gn=Tr=t,qn=0,kc=null,Jm=nh=Hi=0,gr=sc=null,Ri!==null){for(t=0;t<Ri.length;t++)if(n=Ri[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ri=null}return e}function Ky(e,t){do{var n=Nn;try{if(Rm(),eu.current=Lu,Du){for(var r=Jt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Du=!1}if(Wi=0,Fn=Tn=Jt=null,rc=!1,jc=0,Ym.current=null,n===null||n.return===null){qn=1,kc=t,Nn=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Gn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=K0(o);if(p!==null){p.flags&=-257,Z0(p,o,l,i,t),p.mode&1&&G0(i,d,t),t=p,c=d;var j=t.updateQueue;if(j===null){var N=new Set;N.add(c),t.updateQueue=N}else j.add(c);break e}else{if(!(t&1)){G0(i,d,t),tg();break e}c=Error(Le(426))}}else if(Kt&&l.mode&1){var C=K0(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Z0(C,o,l,i,t),Im(Jo(c,l));break e}}i=c=Jo(c,l),qn!==4&&(qn=2),sc===null?sc=[i]:sc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=Ey(i,c,t);U0(i,y);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Zs===null||!Zs.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=Py(i,l,t);U0(i,S);break e}}i=i.return}while(i!==null)}Jy(n)}catch(R){t=R,Nn===n&&n!==null&&(Nn=n=n.return);continue}break}while(!0)}function Zy(){var e=Eu.current;return Eu.current=Lu,e===null?Lu:e}function tg(){(qn===0||qn===3||qn===2)&&(qn=4),On===null||!(Hi&268435455)&&!(nh&268435455)||Ms(On,Gn)}function qu(e,t){var n=_t;_t|=2;var r=Zy();(On!==e||Gn!==t)&&(ts=null,Mi(e,t));do try{Uw();break}catch(s){Ky(e,s)}while(!0);if(Rm(),_t=n,Eu.current=r,Nn!==null)throw Error(Le(261));return On=null,Gn=0,qn}function Uw(){for(;Nn!==null;)Yy(Nn)}function zw(){for(;Nn!==null&&!f_();)Yy(Nn)}function Yy(e){var t=Qy(e.alternate,e,Tr);e.memoizedProps=e.pendingProps,t===null?Jy(e):Nn=t,Ym.current=null}function Jy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Iw(n,t),n!==null){n.flags&=32767,Nn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qn=6,Nn=null;return}}else if(n=qw(n,t,Tr),n!==null){Nn=n;return}if(t=t.sibling,t!==null){Nn=t;return}Nn=t=e}while(t!==null);qn===0&&(qn=5)}function Ti(e,t,n){var r=Et,s=Qr.transition;try{Qr.transition=null,Et=1,$w(e,t,n,r)}finally{Qr.transition=s,Et=r}return null}function $w(e,t,n,r){do Mo();while(Us!==null);if(_t&6)throw Error(Le(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Le(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(j_(e,i),e===On&&(Nn=On=null,Gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rd||(Rd=!0,e5(mu,function(){return Mo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qr.transition,Qr.transition=null;var o=Et;Et=1;var l=_t;_t|=4,Ym.current=null,Rw(e,n),Hy(n,e),cw(_p),vu=!!bp,_p=bp=null,e.current=n,Ow(n),p_(),_t=l,Et=o,Qr.transition=i}else e.current=n;if(Rd&&(Rd=!1,Us=e,Tu=s),i=e.pendingLanes,i===0&&(Zs=null),v_(n.stateNode),_r(e,gn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Pu)throw Pu=!1,e=Up,Up=null,e;return Tu&1&&e.tag!==0&&Mo(),i=e.pendingLanes,i&1?e===zp?ic++:(ic=0,zp=e):ic=0,ai(),null}function Mo(){if(Us!==null){var e=Ev(Tu),t=Qr.transition,n=Et;try{if(Qr.transition=null,Et=16>e?16:e,Us===null)var r=!1;else{if(e=Us,Us=null,Tu=0,_t&6)throw Error(Le(331));var s=_t;for(_t|=4,Ie=e.current;Ie!==null;){var i=Ie,o=i.child;if(Ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ie=d;Ie!==null;){var h=Ie;switch(h.tag){case 0:case 11:case 15:ac(8,h,i)}var m=h.child;if(m!==null)m.return=h,Ie=m;else for(;Ie!==null;){h=Ie;var g=h.sibling,p=h.return;if(zy(h),h===d){Ie=null;break}if(g!==null){g.return=p,Ie=g;break}Ie=p}}}var j=i.alternate;if(j!==null){var N=j.child;if(N!==null){j.child=null;do{var C=N.sibling;N.sibling=null,N=C}while(N!==null)}}Ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ie=o;else e:for(;Ie!==null;){if(i=Ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ac(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ie=y;break e}Ie=i.return}}var b=e.current;for(Ie=b;Ie!==null;){o=Ie;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ie=w;else e:for(o=b;Ie!==null;){if(l=Ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:th(9,l)}}catch(R){on(l,l.return,R)}if(l===o){Ie=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,Ie=S;break e}Ie=l.return}}if(_t=s,ai(),Fa&&typeof Fa.onPostCommitFiberRoot=="function")try{Fa.onPostCommitFiberRoot(Gu,e)}catch{}r=!0}return r}finally{Et=n,Qr.transition=t}}return!1}function l1(e,t,n){t=Jo(n,t),t=Ey(e,t,1),e=Ks(e,t,1),t=dr(),e!==null&&(Ic(e,1,t),_r(e,t))}function on(e,t,n){if(e.tag===3)l1(e,e,n);else for(;t!==null;){if(t.tag===3){l1(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zs===null||!Zs.has(r))){e=Jo(n,e),e=Py(t,e,1),t=Ks(t,e,1),e=dr(),t!==null&&(Ic(t,1,e),_r(t,e));break}}t=t.return}}function Ww(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=dr(),e.pingedLanes|=e.suspendedLanes&n,On===e&&(Gn&n)===n&&(qn===4||qn===3&&(Gn&130023424)===Gn&&500>gn()-Xm?Mi(e,0):Jm|=n),_r(e,t)}function Xy(e,t){t===0&&(e.mode&1?(t=Cd,Cd<<=1,!(Cd&130023424)&&(Cd=4194304)):t=1);var n=dr();e=us(e,t),e!==null&&(Ic(e,t,n),_r(e,n))}function Hw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xy(e,n)}function Vw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Le(314))}r!==null&&r.delete(t),Xy(e,n)}var Qy;Qy=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||xr.current)vr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return vr=!1,Tw(e,t,n);vr=!!(e.flags&131072)}else vr=!1,Kt&&t.flags&1048576&&ry(t,Nu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;nu(e,t),e=t.pendingProps;var s=Go(t,sr.current);Oo(t,n),s=Hm(null,t,r,e,s,n);var i=Vm();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,br(r)?(i=!0,wu(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bm(t),s.updater=eh,t.stateNode=s,s._reactInternals=t,Lp(t,r,e,n),t=Tp(null,t,r,!0,i,n)):(t.tag=0,Kt&&i&&Tm(t),cr(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(nu(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Kw(r),e=ha(r,e),s){case 0:t=Pp(null,t,r,e,n);break e;case 1:t=X0(null,t,r,e,n);break e;case 11:t=Y0(null,t,r,e,n);break e;case 14:t=J0(null,t,r,ha(r.type,e),n);break e}throw Error(Le(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ha(r,s),Pp(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ha(r,s),X0(e,t,r,s,n);case 3:e:{if(Fy(t),e===null)throw Error(Le(387));r=t.pendingProps,i=t.memoizedState,s=i.element,cy(e,t),Cu(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Jo(Error(Le(423)),t),t=Q0(e,t,r,n,s);break e}else if(r!==s){s=Jo(Error(Le(424)),t),t=Q0(e,t,r,n,s);break e}else for(Ir=Gs(t.stateNode.containerInfo.firstChild),Rr=t,Kt=!0,pa=null,n=oy(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ko(),r===s){t=hs(e,t,n);break e}cr(e,t,r,n)}t=t.child}return t;case 5:return dy(t),e===null&&Cp(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,wp(r,s)?o=null:i!==null&&wp(r,i)&&(t.flags|=32),Iy(e,t),cr(e,t,o,n),t.child;case 6:return e===null&&Cp(t),null;case 13:return Ry(e,t,n);case 4:return Um(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Zo(t,null,r,n):cr(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ha(r,s),Y0(e,t,r,s,n);case 7:return cr(e,t,t.pendingProps,n),t.child;case 8:return cr(e,t,t.pendingProps.children,n),t.child;case 12:return cr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,zt(Su,r._currentValue),r._currentValue=o,i!==null)if(va(i.value,o)){if(i.children===s.children&&!xr.current){t=hs(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ls(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ap(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Le(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ap(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}cr(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Oo(t,n),s=ea(s),r=r(s),t.flags|=1,cr(e,t,r,n),t.child;case 14:return r=t.type,s=ha(r,t.pendingProps),s=ha(r.type,s),J0(e,t,r,s,n);case 15:return Ty(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ha(r,s),nu(e,t),t.tag=1,br(r)?(e=!0,wu(t)):e=!1,Oo(t,n),Ly(t,r,s),Lp(t,r,s,n),Tp(null,t,r,!0,e,n);case 19:return Oy(e,t,n);case 22:return qy(e,t,n)}throw Error(Le(156,t.tag))};function e5(e,t){return Cv(e,t)}function Gw(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(e,t,n,r){return new Gw(e,t,n,r)}function ng(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Kw(e){if(typeof e=="function")return ng(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_m)return 11;if(e===wm)return 14}return 2}function Js(e,t){var n=e.alternate;return n===null?(n=Xr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function su(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")ng(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case _o:return Bi(n.children,s,i,t);case bm:o=8,s|=8;break;case ep:return e=Xr(12,n,t,s|2),e.elementType=ep,e.lanes=i,e;case tp:return e=Xr(13,n,t,s),e.elementType=tp,e.lanes=i,e;case np:return e=Xr(19,n,t,s),e.elementType=np,e.lanes=i,e;case dv:return rh(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lv:o=10;break e;case cv:o=9;break e;case _m:o=11;break e;case wm:o=14;break e;case Fs:o=16,r=null;break e}throw Error(Le(130,e==null?e:typeof e,""))}return t=Xr(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Bi(e,t,n,r){return e=Xr(7,e,r,t),e.lanes=n,e}function rh(e,t,n,r){return e=Xr(22,e,r,t),e.elementType=dv,e.lanes=n,e.stateNode={isHidden:!1},e}function _f(e,t,n){return e=Xr(6,e,null,t),e.lanes=n,e}function wf(e,t,n){return t=Xr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zw(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tf(0),this.expirationTimes=tf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rg(e,t,n,r,s,i,o,l,c){return e=new Zw(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Xr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bm(i),e}function Yw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function t5(e){if(!e)return ei;e=e._reactInternals;e:{if(Yi(e)!==e||e.tag!==1)throw Error(Le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(br(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Le(171))}if(e.tag===1){var n=e.type;if(br(n))return ty(e,n,t)}return t}function n5(e,t,n,r,s,i,o,l,c){return e=rg(n,r,!0,e,s,i,o,l,c),e.context=t5(null),n=e.current,r=dr(),s=Ys(n),i=ls(r,s),i.callback=t??null,Ks(n,i,s),e.current.lanes=s,Ic(e,s,r),_r(e,r),e}function ah(e,t,n,r){var s=t.current,i=dr(),o=Ys(s);return n=t5(n),t.context===null?t.context=n:t.pendingContext=n,t=ls(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ks(s,t,o),e!==null&&(ga(e,s,o,i),Qd(e,s,o)),o}function Iu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function c1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ag(e,t){c1(e,t),(e=e.alternate)&&c1(e,t)}function Jw(){return null}var r5=typeof reportError=="function"?reportError:function(e){console.error(e)};function sg(e){this._internalRoot=e}sh.prototype.render=sg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Le(409));ah(e,t,null,null)};sh.prototype.unmount=sg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vi(function(){ah(null,e,null,null)}),t[ds]=null}};function sh(e){this._internalRoot=e}sh.prototype.unstable_scheduleHydration=function(e){if(e){var t=qv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Os.length&&t!==0&&t<Os[n].priority;n++);Os.splice(n,0,e),n===0&&Fv(e)}};function ig(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ih(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function d1(){}function Xw(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Iu(o);i.call(d)}}var o=n5(t,r,e,0,null,!1,!1,"",d1);return e._reactRootContainer=o,e[ds]=o.current,yc(e.nodeType===8?e.parentNode:e),Vi(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Iu(c);l.call(d)}}var c=rg(e,0,!1,null,null,!1,!1,"",d1);return e._reactRootContainer=c,e[ds]=c.current,yc(e.nodeType===8?e.parentNode:e),Vi(function(){ah(t,c,n,r)}),c}function oh(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Iu(o);l.call(c)}}ah(t,o,e,s)}else o=Xw(n,t,e,s,r);return Iu(o)}Pv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Kl(t.pendingLanes);n!==0&&(Sm(t,n|1),_r(t,gn()),!(_t&6)&&(Xo=gn()+500,ai()))}break;case 13:Vi(function(){var r=us(e,1);if(r!==null){var s=dr();ga(r,e,1,s)}}),ag(e,1)}};km=function(e){if(e.tag===13){var t=us(e,134217728);if(t!==null){var n=dr();ga(t,e,134217728,n)}ag(e,134217728)}};Tv=function(e){if(e.tag===13){var t=Ys(e),n=us(e,t);if(n!==null){var r=dr();ga(n,e,t,r)}ag(e,t)}};qv=function(){return Et};Iv=function(e,t){var n=Et;try{return Et=e,t()}finally{Et=n}};hp=function(e,t,n){switch(t){case"input":if(sp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ju(r);if(!s)throw Error(Le(90));hv(r),sp(r,s)}}}break;case"textarea":pv(e,n);break;case"select":t=n.value,t!=null&&qo(e,!!n.multiple,t,!1)}};_v=Qm;wv=Vi;var Qw={usingClientEntryPoint:!1,Events:[Rc,So,Ju,xv,bv,Qm]},zl={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ej={bundleType:zl.bundleType,version:zl.version,rendererPackageName:zl.rendererPackageName,rendererConfig:zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Sv(e),e===null?null:e.stateNode},findFiberByHostInstance:zl.findFiberByHostInstance||Jw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{Gu=Od.inject(ej),Fa=Od}catch{}}Mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qw;Mr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ig(t))throw Error(Le(200));return Yw(e,t,null,n)};Mr.createRoot=function(e,t){if(!ig(e))throw Error(Le(299));var n=!1,r="",s=r5;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=rg(e,1,!1,null,null,n,!1,r,s),e[ds]=t.current,yc(e.nodeType===8?e.parentNode:e),new sg(t)};Mr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Le(188)):(e=Object.keys(e).join(","),Error(Le(268,e)));return e=Sv(t),e=e===null?null:e.stateNode,e};Mr.flushSync=function(e){return Vi(e)};Mr.hydrate=function(e,t,n){if(!ih(t))throw Error(Le(200));return oh(null,e,t,!0,n)};Mr.hydrateRoot=function(e,t,n){if(!ig(e))throw Error(Le(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=r5;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=n5(t,null,e,1,n??null,s,!1,i,o),e[ds]=t.current,yc(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new sh(t)};Mr.render=function(e,t,n){if(!ih(t))throw Error(Le(200));return oh(null,e,t,!1,n)};Mr.unmountComponentAtNode=function(e){if(!ih(e))throw Error(Le(40));return e._reactRootContainer?(Vi(function(){oh(null,null,e,!1,function(){e._reactRootContainer=null,e[ds]=null})}),!0):!1};Mr.unstable_batchedUpdates=Qm;Mr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ih(n))throw Error(Le(200));if(e==null||e._reactInternals===void 0)throw Error(Le(38));return oh(e,t,n,!1,r)};Mr.version="18.3.1-next-f1338f8080-20240426";function a5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a5)}catch(e){console.error(e)}}a5(),av.exports=Mr;var tj=av.exports,u1=tj;Xf.createRoot=u1.createRoot,Xf.hydrateRoot=u1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cc(){return Cc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cc.apply(this,arguments)}var zs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zs||(zs={}));const h1="popstate";function nj(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:o,hash:l}=r.location;return Hp("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Fu(s)}return aj(t,n,null,e)}function Xt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function s5(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rj(){return Math.random().toString(36).substr(2,8)}function f1(e,t){return{usr:e.state,key:e.key,idx:t}}function Hp(e,t,n,r){return n===void 0&&(n=null),Cc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rl(t):t,{state:n,key:t&&t.key||r||rj()})}function Fu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function rl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function aj(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=zs.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(Cc({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){l=zs.Pop;let C=h(),y=C==null?null:C-d;d=C,c&&c({action:l,location:N.location,delta:y})}function g(C,y){l=zs.Push;let b=Hp(N.location,C,y);d=h()+1;let w=f1(b,d),S=N.createHref(b);try{o.pushState(w,"",S)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(S)}i&&c&&c({action:l,location:N.location,delta:1})}function p(C,y){l=zs.Replace;let b=Hp(N.location,C,y);d=h();let w=f1(b,d),S=N.createHref(b);o.replaceState(w,"",S),i&&c&&c({action:l,location:N.location,delta:0})}function j(C){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof C=="string"?C:Fu(C);return b=b.replace(/ $/,"%20"),Xt(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let N={get action(){return l},get location(){return e(s,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(h1,m),c=C,()=>{s.removeEventListener(h1,m),c=null}},createHref(C){return t(s,C)},createURL:j,encodeLocation(C){let y=j(C);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:p,go(C){return o.go(C)}};return N}var p1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(p1||(p1={}));function sj(e,t,n){return n===void 0&&(n="/"),ij(e,t,n)}function ij(e,t,n,r){let s=typeof t=="string"?rl(t):t,i=Qo(s.pathname||"/",n);if(i==null)return null;let o=i5(e);oj(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=yj(i);l=gj(o[c],d)}return l}function i5(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Xt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Xs([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(Xt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),i5(i.children,t,h,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:pj(d,i.index),routesMeta:h})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of o5(i.path))s(i,o,c)}),t}function o5(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=o5(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function oj(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:mj(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lj=/^:[\w-]+$/,cj=3,dj=2,uj=1,hj=10,fj=-2,m1=e=>e==="*";function pj(e,t){let n=e.split("/"),r=n.length;return n.some(m1)&&(r+=fj),t&&(r+=dj),n.filter(s=>!m1(s)).reduce((s,i)=>s+(lj.test(i)?cj:i===""?uj:hj),r)}function mj(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function gj(e,t,n){let{routesMeta:r}=e,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?t:t.slice(i.length)||"/",m=Vp({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),g=c.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Xs([i,m.pathname]),pathnameBase:wj(Xs([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Xs([i,m.pathnameBase]))}return o}function Vp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=vj(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,m)=>{let{paramName:g,isOptional:p}=h;if(g==="*"){let N=l[m]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const j=l[m];return p&&!j?d[g]=void 0:d[g]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function vj(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),s5(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function yj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return s5(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Qo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function xj(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?rl(e):e;return{pathname:n?n.startsWith("/")?n:bj(n,t):t,search:jj(r),hash:Nj(s)}}function bj(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function jf(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _j(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function og(e,t){let n=_j(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function lg(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=rl(e):(s=Cc({},e),Xt(!s.pathname||!s.pathname.includes("?"),jf("?","pathname","search",s)),Xt(!s.pathname||!s.pathname.includes("#"),jf("#","pathname","hash",s)),Xt(!s.search||!s.search.includes("#"),jf("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?t[m]:"/"}let c=xj(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Xs=e=>e.join("/").replace(/\/\/+/g,"/"),wj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Nj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Sj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const l5=["post","put","patch","delete"];new Set(l5);const kj=["get",...l5];new Set(kj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ac(){return Ac=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ac.apply(this,arguments)}const lh=T.createContext(null),c5=T.createContext(null),ms=T.createContext(null),ch=T.createContext(null),si=T.createContext({outlet:null,matches:[],isDataRoute:!1}),d5=T.createContext(null);function Cj(e,t){let{relative:n}=t===void 0?{}:t;al()||Xt(!1);let{basename:r,navigator:s}=T.useContext(ms),{hash:i,pathname:o,search:l}=dh(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Xs([r,o])),s.createHref({pathname:c,search:l,hash:i})}function al(){return T.useContext(ch)!=null}function Ji(){return al()||Xt(!1),T.useContext(ch).location}function u5(e){T.useContext(ms).static||T.useLayoutEffect(e)}function sl(){let{isDataRoute:e}=T.useContext(si);return e?Bj():Aj()}function Aj(){al()||Xt(!1);let e=T.useContext(lh),{basename:t,future:n,navigator:r}=T.useContext(ms),{matches:s}=T.useContext(si),{pathname:i}=Ji(),o=JSON.stringify(og(s,n.v7_relativeSplatPath)),l=T.useRef(!1);return u5(()=>{l.current=!0}),T.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=lg(d,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Xs([t,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[t,r,o,i,e])}function dh(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=T.useContext(ms),{matches:s}=T.useContext(si),{pathname:i}=Ji(),o=JSON.stringify(og(s,r.v7_relativeSplatPath));return T.useMemo(()=>lg(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function Dj(e,t){return Lj(e,t)}function Lj(e,t,n,r){al()||Xt(!1);let{navigator:s}=T.useContext(ms),{matches:i}=T.useContext(si),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ji(),h;if(t){var m;let C=typeof t=="string"?rl(t):t;c==="/"||(m=C.pathname)!=null&&m.startsWith(c)||Xt(!1),h=C}else h=d;let g=h.pathname||"/",p=g;if(c!=="/"){let C=c.replace(/^\//,"").split("/");p="/"+g.replace(/^\//,"").split("/").slice(C.length).join("/")}let j=sj(e,{pathname:p}),N=Ij(j&&j.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Xs([c,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Xs([c,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,r);return t&&N?T.createElement(ch.Provider,{value:{location:Ac({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:zs.Pop}},N):N}function Ej(){let e=Mj(),t=Sj(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),n?T.createElement("pre",{style:s},n):null,null)}const Pj=T.createElement(Ej,null);class Tj extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?T.createElement(si.Provider,{value:this.props.routeContext},T.createElement(d5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qj(e){let{routeContext:t,match:n,children:r}=e,s=T.useContext(lh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(si.Provider,{value:t},r)}function Ij(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||Xt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:g,errors:p}=n,j=m.route.loader&&g[m.route.id]===void 0&&(!p||p[m.route.id]===void 0);if(m.route.lazy||j){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,g)=>{let p,j=!1,N=null,C=null;n&&(p=l&&m.route.id?l[m.route.id]:void 0,N=m.route.errorElement||Pj,c&&(d<0&&g===0?(Uj("route-fallback"),j=!0,C=null):d===g&&(j=!0,C=m.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,g+1)),b=()=>{let w;return p?w=N:j?w=C:m.route.Component?w=T.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=h,T.createElement(qj,{match:m,routeContext:{outlet:h,matches:y,isDataRoute:n!=null},children:w})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?T.createElement(Tj,{location:n.location,revalidation:n.revalidation,component:N,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var h5=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(h5||{}),f5=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(f5||{});function Fj(e){let t=T.useContext(lh);return t||Xt(!1),t}function Rj(e){let t=T.useContext(c5);return t||Xt(!1),t}function Oj(e){let t=T.useContext(si);return t||Xt(!1),t}function p5(e){let t=Oj(),n=t.matches[t.matches.length-1];return n.route.id||Xt(!1),n.route.id}function Mj(){var e;let t=T.useContext(d5),n=Rj(),r=p5();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Bj(){let{router:e}=Fj(h5.UseNavigateStable),t=p5(f5.UseNavigateStable),n=T.useRef(!1);return u5(()=>{n.current=!0}),T.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ac({fromRouteId:t},i)))},[e,t])}const g1={};function Uj(e,t,n){g1[e]||(g1[e]=!0)}function zj(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Gp(e){let{to:t,replace:n,state:r,relative:s}=e;al()||Xt(!1);let{future:i,static:o}=T.useContext(ms),{matches:l}=T.useContext(si),{pathname:c}=Ji(),d=sl(),h=lg(t,og(l,i.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(h);return T.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function mt(e){Xt(!1)}function $j(e){let{basename:t="/",children:n=null,location:r,navigationType:s=zs.Pop,navigator:i,static:o=!1,future:l}=e;al()&&Xt(!1);let c=t.replace(/^\/*/,"/"),d=T.useMemo(()=>({basename:c,navigator:i,static:o,future:Ac({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=rl(r));let{pathname:h="/",search:m="",hash:g="",state:p=null,key:j="default"}=r,N=T.useMemo(()=>{let C=Qo(h,c);return C==null?null:{location:{pathname:C,search:m,hash:g,state:p,key:j},navigationType:s}},[c,h,m,g,p,j,s]);return N==null?null:T.createElement(ms.Provider,{value:d},T.createElement(ch.Provider,{children:n,value:N}))}function uh(e){let{children:t,location:n}=e;return Dj(Kp(t),n)}new Promise(()=>{});function Kp(e,t){t===void 0&&(t=[]);let n=[];return T.Children.forEach(e,(r,s)=>{if(!T.isValidElement(r))return;let i=[...t,s];if(r.type===T.Fragment){n.push.apply(n,Kp(r.props.children,i));return}r.type!==mt&&Xt(!1),!r.props.index||!r.props.children||Xt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Kp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ru.apply(this,arguments)}function m5(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Wj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Hj(e,t){return e.button===0&&(!t||t==="_self")&&!Wj(e)}const Vj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Gj=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Kj="6";try{window.__reactRouterVersion=Kj}catch{}const Zj=T.createContext({isTransitioning:!1}),Yj="startTransition",v1=Wb[Yj];function Jj(e){let{basename:t,children:n,future:r,window:s}=e,i=T.useRef();i.current==null&&(i.current=nj({window:s,v5Compat:!0}));let o=i.current,[l,c]=T.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=T.useCallback(m=>{d&&v1?v1(()=>c(m)):c(m)},[c,d]);return T.useLayoutEffect(()=>o.listen(h),[o,h]),T.useEffect(()=>zj(r),[r]),T.createElement($j,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Xj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qr=T.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:m}=t,g=m5(t,Vj),{basename:p}=T.useContext(ms),j,N=!1;if(typeof d=="string"&&Qj.test(d)&&(j=d,Xj))try{let w=new URL(window.location.href),S=d.startsWith("//")?new URL(w.protocol+d):new URL(d),R=Qo(S.pathname,p);S.origin===w.origin&&R!=null?d=R+S.search+S.hash:N=!0}catch{}let C=Cj(d,{relative:s}),y=t4(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:m});function b(w){r&&r(w),w.defaultPrevented||y(w)}return T.createElement("a",Ru({},g,{href:j||C,onClick:N||i?r:b,ref:n,target:c}))}),mn=T.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:h}=t,m=m5(t,Gj),g=dh(c,{relative:m.relative}),p=Ji(),j=T.useContext(c5),{navigator:N,basename:C}=T.useContext(ms),y=j!=null&&n4(g)&&d===!0,b=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,w=p.pathname,S=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;s||(w=w.toLowerCase(),S=S?S.toLowerCase():null,b=b.toLowerCase()),S&&C&&(S=Qo(S,C)||S);const R=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let W=w===b||!o&&w.startsWith(b)&&w.charAt(R)==="/",U=S!=null&&(S===b||!o&&S.startsWith(b)&&S.charAt(b.length)==="/"),_={isActive:W,isPending:U,isTransitioning:y},D=W?r:void 0,z;typeof i=="function"?z=i(_):z=[i,W?"active":null,U?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(_):l;return T.createElement(qr,Ru({},m,{"aria-current":D,className:z,ref:n,style:L,to:c,viewTransition:d}),typeof h=="function"?h(_):h)});var Zp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Zp||(Zp={}));var y1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(y1||(y1={}));function e4(e){let t=T.useContext(lh);return t||Xt(!1),t}function t4(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=sl(),d=Ji(),h=dh(e,{relative:o});return T.useCallback(m=>{if(Hj(m,n)){m.preventDefault();let g=r!==void 0?r:Fu(d)===Fu(h);c(e,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,h,r,s,n,e,i,o,l])}function n4(e,t){t===void 0&&(t={});let n=T.useContext(Zj);n==null&&Xt(!1);let{basename:r}=e4(Zp.useViewTransitionState),s=dh(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Qo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Qo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Vp(s.pathname,o)!=null||Vp(s.pathname,i)!=null}const r4="http://localhost:3001/api",Yp=()=>localStorage.getItem("ncadbook_token"),Jp=e=>{localStorage.setItem("ncadbook_token",e)},cg=()=>{localStorage.removeItem("ncadbook_token")},ht=async(e,t={})=>{const n=Yp(),r={"Content-Type":"application/json",...t.headers};n&&(r.Authorization=`Bearer ${n}`);const s={...t,headers:r};try{const i=await fetch(`${r4}${e}`,s),o=i.headers.get("content-type");if(!o||!o.includes("application/json")){if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);return await i.text()}const l=await i.json();if(!i.ok)throw i.status===401&&(cg(),window.location.href="/NCADbook/"),new Error(l.error||`HTTP ${i.status}`);return l}catch(i){throw console.error("API request failed:",i),i}},Yl={login:async(e,t)=>{const n=await ht("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return n.token&&Jp(n.token),n},demoLogin:async e=>{const t=await ht("/auth/demo-login",{method:"POST",body:JSON.stringify({role:e})});return t.token&&Jp(t.token),t},register:async e=>await ht("/auth/register",{method:"POST",body:JSON.stringify(e)}),getCurrentUser:async()=>await ht("/auth/me"),updatePassword:async(e,t)=>await ht("/auth/password",{method:"PUT",body:JSON.stringify({current_password:e,new_password:t})}),logout:()=>{cg(),window.location.href="/NCADbook/"}},yr={getAll:async(e={})=>{const t=new URLSearchParams(e).toString(),n=t?`/equipment?${t}`:"/equipment";return await ht(n)},getById:async e=>await ht(`/equipment/${e}`),checkAvailability:async(e,t,n)=>await ht(`/equipment/${e}/availability?start_date=${t}&end_date=${n}`),create:async e=>await ht("/equipment",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await ht(`/equipment/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>await ht(`/equipment/${e}`,{method:"DELETE"}),getNotes:async e=>await ht(`/equipment/${e}/notes`),addNote:async(e,t)=>await ht(`/equipment/${e}/notes`,{method:"POST",body:JSON.stringify(t)}),deleteNote:async(e,t)=>await ht(`/equipment/${e}/notes/${t}`,{method:"DELETE"})},jn={getAll:async(e={})=>{const t=new URLSearchParams(e).toString(),n=t?`/bookings?${t}`:"/bookings";return await ht(n)},getById:async e=>await ht(`/bookings/${e}`),create:async e=>await ht("/bookings",{method:"POST",body:JSON.stringify(e)}),approve:async e=>await ht(`/bookings/${e}/approve`,{method:"PUT"}),deny:async(e,t)=>await ht(`/bookings/${e}/deny`,{method:"PUT",body:JSON.stringify({reason:t})}),return:async e=>await ht(`/bookings/${e}/return`,{method:"PUT"})},Po={getAll:async(e={})=>{const t=new URLSearchParams(e).toString(),n=t?`/users?${t}`:"/users";return await ht(n)},getById:async e=>await ht(`/users/${e}`),create:async e=>await ht("/users",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await ht(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>await ht(`/users/${e}`,{method:"DELETE"}),addStrike:async(e,t)=>await ht(`/users/${e}/strikes`,{method:"POST",body:JSON.stringify(t)}),getStrikes:async e=>await ht(`/users/${e}/strikes`),revokeStrike:async(e,t,n)=>await ht(`/users/${e}/strikes/${t}/revoke`,{method:"PUT",body:JSON.stringify({reason:n})})},Jl={getAll:async(e={})=>{const t=new URLSearchParams(e).toString(),n=t?`/departments?${t}`:"/departments";return await ht(n)},getById:async e=>await ht(`/departments/${e}`),create:async e=>await ht("/departments",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await ht(`/departments/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>await ht(`/departments/${e}`,{method:"DELETE"})},Dc={getAll:async()=>await ht("/settings"),getByKey:async e=>await ht(`/settings/${e}`),update:async(e,t,n)=>await ht(`/settings/${e}`,{method:"PUT",body:JSON.stringify({value:t,description:n})}),delete:async e=>await ht(`/settings/${e}`,{method:"DELETE"})},is={getAll:async(e={})=>{const t=new URLSearchParams(e).toString(),n=t?`/kits?${t}`:"/kits";return await ht(n)},getById:async e=>await ht(`/kits/${e}`),create:async e=>await ht("/kits",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>await ht(`/kits/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>await ht(`/kits/${e}`,{method:"DELETE"})},x1={getToken:Yp,setToken:Jp,removeToken:cg,hasToken:()=>!!Yp()};console.log(" Auth Service - Using Backend API");const Bo={async login(e,t){console.log(" API login attempt:",e);try{const n=await Yl.login(e,t);return localStorage.setItem("ncadbook_user",JSON.stringify(n.user)),console.log(" API login successful:",n.user.email,n.user.role),n.user}catch(n){throw console.error(" Login failed:",n),n}},async logout(){Yl.logout(),localStorage.removeItem("ncadbook_user")},async getCurrentUser(){const e=localStorage.getItem("ncadbook_user");if(!e)return null;if(x1.hasToken())try{const t=await Yl.getCurrentUser();return localStorage.setItem("ncadbook_user",JSON.stringify(t.user)),t.user}catch{return console.warn("Token invalid, clearing auth cache"),localStorage.removeItem("ncadbook_user"),x1.removeToken(),null}return JSON.parse(e)},async register(e){try{const t=await Yl.register(e);return localStorage.setItem("ncadbook_user",JSON.stringify(t.user)),t.user}catch(t){throw console.error(" Registration failed:",t),t}},hasPermission(e,t){const n={student:1,staff:2,department_admin:3,master_admin:4};return n[e==null?void 0:e.role]>=n[t]}},g5=T.createContext(null);function a4({children:e}){const[t,n]=T.useState(null),[r,s]=T.useState(!0);T.useEffect(()=>{(async()=>{try{const d=await Bo.getCurrentUser();n(d)}catch(d){console.error("Failed to load user:",d)}finally{s(!1)}})()},[]);const l={user:t,loading:r,login:async(c,d)=>{const h=await Bo.login(c,d);return n(h),h},logout:async()=>{await Bo.logout(),n(null)},isAuthenticated:!!t};return a.jsx(g5.Provider,{value:l,children:e})}function en(){const e=T.useContext(g5);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const s4=T.createContext();function i4({children:e}){const[t,n]=T.useState(()=>{const i=localStorage.getItem("ncad-theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});T.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("ncad-theme",t)},[t]);const s={theme:t,setTheme:n,toggleTheme:()=>{n(i=>i==="light"?"dark":"light")},isDark:t==="dark"};return a.jsx(s4.Provider,{value:s,children:e})}class o4 extends T.Component{constructor(n){super(n);Ct(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"error-boundary",role:"alert",children:a.jsxs("div",{className:"error-boundary-content",children:[a.jsx("h2",{children:"Something went wrong"}),a.jsx("p",{children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),!1,a.jsxs("div",{className:"error-actions",children:[a.jsx("button",{onClick:this.handleReset,className:"btn btn-primary","data-testid":"error-reset-btn",children:"Try Again"}),a.jsx("button",{onClick:()=>window.location.href="/",className:"btn btn-secondary","data-testid":"error-home-btn",children:"Go to Home"})]})]})}):this.props.children}}const l4=[{id:"sp1",name:"Studio A - Main Film Studio",capacity:20,description:"Large film studio with 5m ceiling, green screen wall, and professional lighting grid",department:"Moving Image",equipment_available:"Green screen (6m x 4m), lighting grid, C-stands, sandbags",status:"available",hourly_booking:!0},{id:"sp2",name:"Studio B - Photography Studio",capacity:8,description:"Medium studio with white cyclorama and product photography setup",department:"Moving Image",equipment_available:"White cyclorama, product table, backdrop support",status:"available",hourly_booking:!0},{id:"sp3",name:"Edit Suite 1",capacity:4,description:"Professional editing room with Mac Studio and dual 4K monitors",department:"Moving Image",equipment_available:'Mac Studio (M2 Ultra), 2x LG 32" 4K monitors, DaVinci Resolve, Adobe CC',status:"available",hourly_booking:!0},{id:"sp4",name:"Edit Suite 2",capacity:4,description:"Editing room with color grading setup",department:"Moving Image",equipment_available:"Mac Studio (M2 Max), calibrated monitor, Blackmagic panel",status:"available",hourly_booking:!0},{id:"sp5",name:"Sound Recording Booth",capacity:3,description:"Acoustically treated recording space",department:"Moving Image",equipment_available:"Rode NT1, audio interface, boom arm, acoustic treatment",status:"available",hourly_booking:!0},{id:"sp6",name:"Animation Lab",capacity:12,description:"Stop-motion and digital animation workspace",department:"Moving Image",equipment_available:"Stop-motion rigs, lighting, animation software",status:"available",hourly_booking:!0},{id:"sp7",name:"Design Lab 1",capacity:16,description:"Computer lab with iMac workstations",department:"Graphic Design",equipment_available:'16x iMac 27" (M3), Adobe CC, Figma, Sketch',status:"available",hourly_booking:!0},{id:"sp8",name:"Design Lab 2",capacity:16,description:"Computer lab with PC workstations",department:"Graphic Design",equipment_available:"16x Dell workstations, Adobe CC, Rhino, AutoCAD",status:"available",hourly_booking:!0},{id:"sp9",name:"Print Workshop",capacity:8,description:"Screen printing and risograph studio",department:"Graphic Design",equipment_available:"Risograph, screen printing stations, drying racks",status:"available",hourly_booking:!0},{id:"sp10",name:"Photography Studio GD",capacity:6,description:"Product photography studio for graphic design students",department:"Graphic Design",equipment_available:"Backdrop system, strobes, shooting table",status:"available",hourly_booking:!0},{id:"sp11",name:"Critique Room",capacity:20,description:"Presentation space with projector and pin-up walls",department:"Graphic Design",equipment_available:"4K projector, pin boards, presentation podium",status:"available",hourly_booking:!0},{id:"sp12",name:"Illustration Studio 1",capacity:18,description:"Traditional illustration workspace with natural light",department:"Illustration",equipment_available:"Drawing tables, easels, natural north-facing light",status:"available",hourly_booking:!0},{id:"sp13",name:"Illustration Studio 2",capacity:18,description:"Mixed media workspace",department:"Illustration",equipment_available:"Drawing tables, sink, storage cabinets",status:"available",hourly_booking:!0},{id:"sp14",name:"Digital Illustration Lab",capacity:12,description:"Computer lab with Cintiq displays",department:"Illustration",equipment_available:"12x Wacom Cintiq 22, Adobe CC, Procreate on iPad",status:"available",hourly_booking:!0},{id:"sp15",name:"Life Drawing Studio",capacity:20,description:"Large studio for life drawing sessions",department:"Illustration",equipment_available:"Easels, model platform, adjustable lighting",status:"available",hourly_booking:!0}],c4=[{id:"bk1",user_id:"4",equipment_id:"eq1",start_date:"2025-10-05",end_date:"2025-10-08",status:"pending",purpose:"Final year film project - documentary shoot",created_at:"2025-10-01T10:00:00Z"},{id:"bk2",user_id:"10",equipment_id:"eq3",start_date:"2025-10-06",end_date:"2025-10-09",status:"pending",purpose:"Narrative short film - location filming",created_at:"2025-10-01T11:30:00Z"},{id:"bk3",user_id:"15",equipment_id:"eq49",start_date:"2025-10-07",end_date:"2025-10-10",status:"pending",purpose:"Music video production - studio setup",created_at:"2025-10-01T14:00:00Z"},{id:"bk4",user_id:"20",equipment_id:"eq88",start_date:"2025-10-08",end_date:"2025-10-11",status:"pending",purpose:"Commercial project requiring smooth camera movement",created_at:"2025-10-01T15:45:00Z"},{id:"bk5",user_id:"25",equipment_id:"eq101",start_date:"2025-10-09",end_date:"2025-10-12",status:"pending",purpose:"Video editing for thesis project",created_at:"2025-10-01T16:20:00Z"},{id:"bk6",user_id:"12",equipment_id:"eq4",start_date:"2025-10-03",end_date:"2025-10-06",status:"approved",purpose:"Interview series for documentary",created_at:"2025-09-28T09:00:00Z",approved_by:"2",approved_at:"2025-09-29T10:00:00Z"},{id:"bk7",user_id:"18",equipment_id:"eq12",start_date:"2025-10-04",end_date:"2025-10-07",status:"approved",purpose:"Event coverage - college open day",created_at:"2025-09-29T11:00:00Z",approved_by:"2",approved_at:"2025-09-30T14:00:00Z"},{id:"bk8",user_id:"22",equipment_id:"eq22",start_date:"2025-10-02",end_date:"2025-10-05",status:"approved",purpose:"Action shots for skateboarding documentary",created_at:"2025-09-27T13:00:00Z",approved_by:"2",approved_at:"2025-09-28T09:00:00Z"},{id:"bk9",user_id:"30",equipment_id:"eq31",start_date:"2025-10-05",end_date:"2025-10-08",status:"approved",purpose:"Portrait project using shallow depth of field",created_at:"2025-09-30T10:00:00Z",approved_by:"2",approved_at:"2025-10-01T09:00:00Z"},{id:"bk10",user_id:"35",equipment_id:"eq48",start_date:"2025-10-06",end_date:"2025-10-09",status:"approved",purpose:"Studio lighting for product photography",created_at:"2025-10-01T08:00:00Z",approved_by:"2",approved_at:"2025-10-01T10:30:00Z"},{id:"bk11",user_id:"40",equipment_id:"eq77",start_date:"2025-10-04",end_date:"2025-10-07",status:"approved",purpose:"Podcast recording series",created_at:"2025-09-29T15:00:00Z",approved_by:"5",approved_at:"2025-09-30T11:00:00Z"},{id:"bk12",user_id:"45",equipment_id:"eq102",start_date:"2025-10-03",end_date:"2025-10-10",status:"approved",purpose:"Motion graphics project for client brief",created_at:"2025-09-28T12:00:00Z",approved_by:"5",approved_at:"2025-09-29T09:00:00Z"},{id:"bk13",user_id:"50",equipment_id:"eq110",start_date:"2025-10-05",end_date:"2025-10-08",status:"approved",purpose:"Digital illustration for exhibition",created_at:"2025-09-30T14:00:00Z",approved_by:"5",approved_at:"2025-10-01T08:00:00Z"},{id:"bk14",user_id:"14",equipment_id:"eq5",start_date:"2025-09-20",end_date:"2025-09-23",status:"completed",purpose:"Short film production",created_at:"2025-09-15T10:00:00Z",approved_by:"2",approved_at:"2025-09-16T09:00:00Z",returned_at:"2025-09-23T15:00:00Z"},{id:"bk15",user_id:"19",equipment_id:"eq10",start_date:"2025-09-18",end_date:"2025-09-21",status:"completed",purpose:"Wedding videography practice",created_at:"2025-09-13T11:00:00Z",approved_by:"2",approved_at:"2025-09-14T10:00:00Z",returned_at:"2025-09-21T14:00:00Z"},{id:"bk16",user_id:"26",equipment_id:"eq50",start_date:"2025-09-15",end_date:"2025-09-18",status:"completed",purpose:"Studio portrait lighting",created_at:"2025-09-10T09:00:00Z",approved_by:"2",approved_at:"2025-09-11T08:00:00Z",returned_at:"2025-09-18T16:00:00Z"},{id:"bk17",user_id:"32",equipment_id:"eq75",start_date:"2025-09-22",end_date:"2025-09-25",status:"completed",purpose:"Interview audio recording",created_at:"2025-09-17T12:00:00Z",approved_by:"2",approved_at:"2025-09-18T09:00:00Z",returned_at:"2025-09-25T11:00:00Z"},{id:"bk18",user_id:"42",equipment_id:"eq103",start_date:"2025-09-19",end_date:"2025-09-26",status:"completed",purpose:"Graphic design portfolio work",created_at:"2025-09-14T10:00:00Z",approved_by:"5",approved_at:"2025-09-15T09:00:00Z",returned_at:"2025-09-26T15:00:00Z"},{id:"bk19",user_id:"16",equipment_id:"eq1",start_date:"2025-10-10",end_date:"2025-10-20",status:"denied",purpose:"Personal project",created_at:"2025-09-25T10:00:00Z",approved_by:"2",approved_at:"2025-09-26T09:00:00Z",denial_reason:"Booking period too long. Maximum 7 days for high-value equipment."},{id:"bk20",user_id:"28",equipment_id:"eq49",start_date:"2025-10-12",end_date:"2025-10-15",status:"denied",purpose:"Testing",created_at:"2025-09-27T11:00:00Z",approved_by:"2",approved_at:"2025-09-28T10:00:00Z",denial_reason:"Insufficient justification for professional lighting equipment. Please provide project details."},{id:"bk21",user_id:"24",equipment_id:"eq20",start_date:"2025-09-25",end_date:"2025-09-28",status:"overdue",purpose:"Action camera for sports filming",created_at:"2025-09-20T10:00:00Z",approved_by:"2",approved_at:"2025-09-21T09:00:00Z"},{id:"bk22",user_id:"38",equipment_id:"eq86",start_date:"2025-10-01",end_date:"2025-10-04",status:"cancelled",purpose:"Gimbal test for project",created_at:"2025-09-26T12:00:00Z",approved_by:"2",approved_at:"2025-09-27T10:00:00Z",cancelled_at:"2025-09-30T14:00:00Z"},{id:"bk23",user_id:"70",equipment_id:"eq141",start_date:"2025-10-06",end_date:"2025-10-09",status:"pending",purpose:"Digital painting for illustrated book project",created_at:"2025-10-01T12:00:00Z"},{id:"bk24",user_id:"75",equipment_id:"eq143",start_date:"2025-10-07",end_date:"2025-10-10",status:"pending",purpose:"Character design illustrations",created_at:"2025-10-01T13:30:00Z"},{id:"bk25",user_id:"55",equipment_id:"eq124",start_date:"2025-10-08",end_date:"2025-10-11",status:"pending",purpose:"High-resolution product photography for portfolio",created_at:"2025-10-01T14:45:00Z"}],d4=[{id:"sb1",user_id:"3",space_id:"sp1",booking_date:"2025-10-02",start_time:"09:00",end_time:"13:00",status:"approved",purpose:"Green screen filming for student project",created_at:"2025-09-28T10:00:00Z"},{id:"sb2",user_id:"3",space_id:"sp3",booking_date:"2025-10-03",start_time:"14:00",end_time:"18:00",status:"approved",purpose:"Video editing session",created_at:"2025-09-29T11:00:00Z"},{id:"sb3",user_id:"7",space_id:"sp6",booking_date:"2025-10-04",start_time:"10:00",end_time:"16:00",status:"approved",purpose:"Stop-motion animation workshop",created_at:"2025-09-30T09:00:00Z"},{id:"sb4",user_id:"8",space_id:"sp7",booking_date:"2025-10-05",start_time:"09:00",end_time:"12:00",status:"approved",purpose:"Design critique session with students",created_at:"2025-10-01T08:00:00Z"},{id:"sb5",user_id:"6",space_id:"sp12",booking_date:"2025-10-05",start_time:"13:00",end_time:"17:00",status:"approved",purpose:"Traditional illustration workshop",created_at:"2025-10-01T09:00:00Z"},{id:"sb6",user_id:"12",space_id:"sp2",booking_date:"2025-10-06",start_time:"10:00",end_time:"14:00",status:"pending",purpose:"Product photography shoot",created_at:"2025-10-01T10:00:00Z"},{id:"sb7",user_id:"41",space_id:"sp10",booking_date:"2025-10-06",start_time:"14:00",end_time:"18:00",status:"pending",purpose:"Portfolio photography session",created_at:"2025-10-01T11:00:00Z"},{id:"sb8",user_id:"72",space_id:"sp15",booking_date:"2025-10-07",start_time:"09:00",end_time:"13:00",status:"pending",purpose:"Life drawing practice",created_at:"2025-10-01T12:00:00Z"},{id:"sb9",user_id:"18",space_id:"sp5",booking_date:"2025-10-07",start_time:"15:00",end_time:"17:00",status:"pending",purpose:"Voiceover recording for film",created_at:"2025-10-01T13:00:00Z"},{id:"sb10",user_id:"52",space_id:"sp9",booking_date:"2025-10-08",start_time:"10:00",end_time:"16:00",status:"pending",purpose:"Screen printing posters",created_at:"2025-10-01T14:00:00Z"}],u4=[{id:"ff1",name:"room_booking",enabled:!0,description:"Enable room/space booking for staff",required_role:"staff"},{id:"ff2",name:"analytics_export",enabled:!0,description:"Enable analytics export (CSV/PDF)",required_role:"admin"},{id:"ff3",name:"equipment_notes",enabled:!0,description:"Enable equipment maintenance notes",required_role:"admin"},{id:"ff4",name:"csv_import",enabled:!1,description:"Enable CSV import for users/equipment",required_role:"master_admin"},{id:"ff5",name:"email_notifications",enabled:!1,description:"Enable email notifications via EmailJS",required_role:"admin"}],h4=[{id:"usa1",user_id:"4",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa2",user_id:"10",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa3",user_id:"11",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa4",user_id:"12",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa5",user_id:"13",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa6",user_id:"14",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa7",user_id:"15",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa8",user_id:"16",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa9",user_id:"17",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa10",user_id:"18",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa11",user_id:"19",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa12",user_id:"20",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa13",user_id:"21",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa14",user_id:"22",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa15",user_id:"23",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa16",user_id:"24",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa17",user_id:"25",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa18",user_id:"26",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa19",user_id:"27",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa20",user_id:"28",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa21",user_id:"29",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa22",user_id:"30",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa23",user_id:"31",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa24",user_id:"32",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa25",user_id:"33",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa26",user_id:"34",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa27",user_id:"35",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa28",user_id:"36",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa29",user_id:"37",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa30",user_id:"38",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa31",user_id:"39",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa32",user_id:"40",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa33",user_id:"41",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa34",user_id:"42",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa35",user_id:"43",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa36",user_id:"44",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa37",user_id:"45",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa38",user_id:"46",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa39",user_id:"47",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa40",user_id:"48",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa41",user_id:"49",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa42",user_id:"50",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa43",user_id:"51",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa44",user_id:"52",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa45",user_id:"53",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa46",user_id:"54",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa47",user_id:"55",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa48",user_id:"56",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa49",user_id:"57",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa50",user_id:"58",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa51",user_id:"59",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa52",user_id:"60",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa53",user_id:"61",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa54",user_id:"62",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa55",user_id:"63",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa56",user_id:"64",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa57",user_id:"65",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa58",user_id:"66",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa59",user_id:"67",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa60",user_id:"68",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa61",user_id:"69",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa62",user_id:"70",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa63",user_id:"71",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa64",user_id:"72",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa65",user_id:"73",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa66",user_id:"74",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa67",user_id:"75",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa68",user_id:"76",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa69",user_id:"77",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa70",user_id:"78",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa71",user_id:"79",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa72",user_id:"80",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa73",user_id:"81",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa74",user_id:"82",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa75",user_id:"83",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa76",user_id:"84",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa77",user_id:"85",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa78",user_id:"86",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa79",user_id:"87",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa80",user_id:"88",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa81",user_id:"89",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa82",user_id:"90",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa83",user_id:"91",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa84",user_id:"92",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa85",user_id:"93",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa86",user_id:"94",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa87",user_id:"95",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa88",user_id:"96",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa89",user_id:"97",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa90",user_id:"98",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa91",user_id:"99",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa92",user_id:"100",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa93",user_id:"3",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa94",user_id:"7",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa95",user_id:"8",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa96",user_id:"6",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"}],f4=[{id:"ida1",from_sub_area_id:"sa5",to_sub_area_id:"sa6",granted_by:"1",granted_at:"2024-09-01T00:00:00Z",expires_at:null,is_active:!0,notes:"For collaborative film/photo projects"},{id:"ida2",from_sub_area_id:"sa4",to_sub_area_id:"sa7",granted_by:"1",granted_at:"2024-09-01T00:00:00Z",expires_at:null,is_active:!0,notes:"For digital illustration workflows"},{id:"ida3",from_sub_area_id:"sa2",to_sub_area_id:"sa5",granted_by:"1",granted_at:"2024-09-01T00:00:00Z",expires_at:"2024-12-01T00:00:00Z",is_active:!0,notes:"Semester 1 video art project"},{id:"ida4",from_sub_area_id:"sa1",to_sub_area_id:"sa7",granted_by:"1",granted_at:"2024-09-01T00:00:00Z",expires_at:null,is_active:!0,notes:"Interdisciplinary design projects"},{id:"ida5",from_sub_area_id:"sa1",to_sub_area_id:"sa4",granted_by:"1",granted_at:"2024-09-01T00:00:00Z",expires_at:null,is_active:!0,notes:"Illustration for communication design"}],p4=[{id:"ar1",requesting_admin_id:"2",from_sub_area_id:"sa5",to_sub_area_id:"sa6",status:"pending",reason:"Our students need access to DSLR cameras for film photography projects in Semester 2",requested_at:"2025-09-25T10:00:00Z",reviewed_by:null,reviewed_at:null,notes:null},{id:"ar2",requesting_admin_id:"104",from_sub_area_id:"sa4",to_sub_area_id:"sa7",status:"approved",reason:"Students need access to digital design tools for illustration workflows",requested_at:"2025-09-15T09:30:00Z",reviewed_by:"1",reviewed_at:"2025-09-16T14:20:00Z",notes:"Approved - interdisciplinary access grant created (ida2)"},{id:"ar3",requesting_admin_id:"5",from_sub_area_id:"sa7",to_sub_area_id:"sa2",status:"denied",reason:"Students want to experiment with fine art media for experimental design projects",requested_at:"2025-09-10T11:00:00Z",reviewed_by:"1",reviewed_at:"2025-09-12T10:15:00Z",notes:"Denied - Fine Art equipment is limited and prioritized for Fine Art students. Please submit specific project proposals for case-by-case approval."},{id:"ar4",requesting_admin_id:"103",from_sub_area_id:"sa3",to_sub_area_id:"sa5",status:"pending",reason:"Need video equipment to document sculpture installations and create time-lapse videos",requested_at:"2025-09-28T14:45:00Z",reviewed_by:null,reviewed_at:null,notes:null},{id:"ar5",requesting_admin_id:"101",from_sub_area_id:"sa1",to_sub_area_id:"sa4",status:"approved",reason:"Communication Design students need illustration tablets for visual communication projects",requested_at:"2025-09-01T08:00:00Z",reviewed_by:"1",reviewed_at:"2025-09-02T09:00:00Z",notes:"Approved - interdisciplinary access grant created (ida5)"},{id:"ar6",requesting_admin_id:"105",from_sub_area_id:"sa6",to_sub_area_id:"sa5",status:"pending",reason:"Need access to LED lighting equipment for studio photography sessions",requested_at:"2025-09-30T13:20:00Z",reviewed_by:null,reviewed_at:null,notes:null}],m4=[{key:"cross_department_browsing_enabled",value:!1,description:"Allow students to browse equipment from other departments",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"cross_department_booking_enabled",value:!1,description:"Allow students to book equipment from other departments",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"cross_department_approval_required",value:!0,description:"Require department admin approval for cross-department bookings",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"staff_cross_department_requests_enabled",value:!0,description:"Allow staff to request equipment from other departments",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"equipment_kits_enabled",value:!0,description:"Enable equipment kit functionality for department admins",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"room_bookings_enabled",value:!0,description:"Master toggle for entire room bookings system",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"room_bookings_visible_staff",value:!0,description:"Show room bookings in Staff portal",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"room_bookings_visible_dept_admin",value:!0,description:"Show room bookings in Department Admin portal",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"}],g4=[{id:"kit1",name:"Video Production Starter Kit",description:"Complete kit for basic video production - camera, tripod, mic, lighting",department_id:"COMMUNICATION_DESIGN",created_by:"2",created_at:"2024-02-01T14:00:00Z",is_active:!0,equipment_ids:["eq3","eq24","eq30","eq21"],image_url:"https://example.com/video-kit.jpg"},{id:"kit2",name:"Photography Essentials",description:"Essential photography kit - DSLR, tripod, reflector",department_id:"COMMUNICATION_DESIGN",created_by:"2",created_at:"2024-02-01T14:30:00Z",is_active:!0,equipment_ids:["eq4","eq25","eq40"],image_url:"https://example.com/photo-kit.jpg"},{id:"kit3",name:"Illustration Digital Kit",description:"Digital illustration setup - iPad Pro with Apple Pencil",department_id:"COMMUNICATION_DESIGN",created_by:"2",created_at:"2024-02-01T15:00:00Z",is_active:!0,equipment_ids:["eq16","eq17"],image_url:"https://example.com/illustration-kit.jpg"},{id:"kit4",name:"3D Printing Starter Kit",description:"Complete 3D printing setup with laptop and printer",department_id:"PRODUCT_DESIGN",created_by:"3",created_at:"2024-02-02T10:00:00Z",is_active:!0,equipment_ids:["eq41","eq46"],image_url:"https://example.com/3d-print-kit.jpg"},{id:"kit5",name:"VR Development Kit",description:"VR development setup - Quest 3 headset with development laptop",department_id:"PRODUCT_DESIGN",created_by:"3",created_at:"2024-02-02T10:30:00Z",is_active:!0,equipment_ids:["eq50","eq47"],image_url:"https://example.com/vr-kit.jpg"}],v4=[{id:"req1",requesting_user_id:"14",requesting_department_id:"COMMUNICATION_DESIGN",target_department_id:"MEDIA",equipment_type:"Canon 250D DSLR Kit",quantity:6,start_date:"2024-03-15",end_date:"2024-03-20",justification:"Running a 5-day video workshop for Fine Art Media students. Need 6 cameras for hands-on practice. Our department only has 2 available during this period.",status:"pending",created_at:"2024-02-20T09:00:00Z"},{id:"req2",requesting_user_id:"16",requesting_department_id:"PAINTING",target_department_id:"COMMUNICATION_DESIGN",equipment_type:'iPad Pro 12.9" + Apple Pencil',quantity:3,start_date:"2024-03-10",end_date:"2024-03-12",justification:"Digital painting workshop. Need tablets for student demonstrations.",status:"approved",reviewed_by:"2",reviewed_at:"2024-02-21T14:30:00Z",review_notes:"Approved. Equipment available for collection on March 10th at 9 AM from Room 204. Please return by 5 PM on March 12th. Contact me at admin.commdesign@ncad.ie if you need setup assistance.",created_at:"2024-02-20T11:00:00Z"},{id:"req3",requesting_user_id:"19",requesting_department_id:"SCULPTURE_APPLIED_MATERIALS",target_department_id:"PRODUCT_DESIGN",equipment_type:"Prusa i3 MK3S+ 3D Printer",quantity:2,start_date:"2024-03-01",end_date:"2024-03-05",justification:"Sculpture students need to print mold prototypes for ceramics project.",status:"denied",reviewed_by:"3",reviewed_at:"2024-02-21T16:00:00Z",review_notes:"Unfortunately our 3D printers are fully booked for our final year projects during this period. Please try again for a different date or contact Fine Art Media who may have alternative equipment.",created_at:"2024-02-20T15:00:00Z"},{id:"req4",requesting_user_id:"18",requesting_department_id:"MEDIA",target_department_id:"PRODUCT_DESIGN",equipment_type:"Meta Quest 3 VR Headset",quantity:1,start_date:"2024-03-18",end_date:"2024-03-22",justification:"VR installation project for photography student. Need headset for viewer interaction testing.",status:"pending",created_at:"2024-02-22T10:00:00Z"}],y4=[{id:"kitbook1",kit_id:"kit1",booking_ids:["book201","book202","book203","book204"],user_id:"24",start_date:"2024-03-05",end_date:"2024-03-08",status:"approved",created_at:"2024-02-25T11:00:00Z"},{id:"kitbook2",kit_id:"kit3",booking_ids:["book205","book206"],user_id:"25",start_date:"2024-03-10",end_date:"2024-03-12",status:"pending",created_at:"2024-02-26T14:00:00Z"}],x4=[{id:"grant1",requesting_department_id:"COMMUNICATION_DESIGN",lending_department_id:"MEDIA",equipment_type:"Sony A7 III Mirrorless Camera",quantity_available:3,start_date:"2024-03-01",end_date:"2024-06-30",status:"active",approved_by_lending_admin:"6",approved_by_master_admin:"1",collection_instructions:"Equipment available for collection from Media Department (Room 304, 3rd Floor). Collection hours: Mon-Fri 9 AM - 5 PM. Contact Lisa O'Brien at admin.media.photo@ncad.ie to arrange pickup. Please return equipment to the same location by 4 PM on your end date.",terms:"Students must handle equipment with care. Any damage must be reported immediately. Equipment must be returned on time or access will be revoked.",created_at:"2024-02-28T10:00:00Z",approved_at:"2024-02-28T14:30:00Z"},{id:"grant2",requesting_department_id:"PAINTING",lending_department_id:"COMMUNICATION_DESIGN",equipment_type:'iPad Pro 12.9" + Apple Pencil',quantity_available:5,start_date:"2024-03-10",end_date:"2024-04-30",status:"active",approved_by_lending_admin:"2",approved_by_master_admin:"1",collection_instructions:"iPad Pros available from Communication Design Equipment Store (Room 102, Ground Floor). Collection: Mon-Fri 10 AM - 4 PM. Contact Sarah Johnson at admin.commdesign@ncad.ie. Return to same location.",terms:"iPads must be returned fully charged. Do not install personal apps. Report any technical issues immediately.",created_at:"2024-03-08T11:00:00Z",approved_at:"2024-03-09T09:00:00Z"},{id:"grant3",requesting_department_id:"MEDIA",lending_department_id:"PRODUCT_DESIGN",equipment_type:"Meta Quest 3 VR Headset",quantity_available:2,start_date:"2024-03-15",end_date:"2024-05-15",status:"active",approved_by_lending_admin:"3",approved_by_master_admin:"1",collection_instructions:"VR headsets available from Product Design Lab (Room 205, 2nd Floor). Book collection time via admin.product@ncad.ie 24 hours in advance. Return with all accessories (controllers, charging cable, case).",terms:"Handle VR equipment with extreme care. Clean lenses before return. Maximum loan period: 3 days per booking.",created_at:"2024-03-12T14:00:00Z",approved_at:"2024-03-13T10:30:00Z"}],b4=[{id:"sa_comm_design",name:"Communication Design",school:"School of Design",created_at:"2024-01-01"},{id:"sa_product",name:"Product Design",school:"School of Design",created_at:"2024-01-01"},{id:"sa_painting",name:"Painting",school:"School of Fine Art",created_at:"2024-01-01"},{id:"sa_print",name:"Print",school:"School of Fine Art",created_at:"2024-01-01"},{id:"sa_media",name:"Media",school:"School of Fine Art",created_at:"2024-01-01"},{id:"sa_sculpture",name:"Sculpture & Applied Materials",school:"School of Fine Art",created_at:"2024-01-01"},{id:"sa_education",name:"Education",school:"School of Education",created_at:"2024-01-01"},{id:"sa_visual_culture",name:"Visual Culture",school:"School of Visual Culture",created_at:"2024-01-01"},{id:"sa_fy_ground",name:"First Year - Ground Floor",school:"First Year Studies",created_at:"2024-01-01"},{id:"sa_fy_top",name:"First Year - Top Floor",school:"First Year Studies",created_at:"2024-01-01"}],Da={DESIGN:"School of Design",FINE_ART:"School of Fine Art",EDUCATION:"School of Education",VISUAL_CULTURE:"School of Visual Culture",FIRST_YEAR:"First Year Studies"},_4={COMMUNICATION_DESIGN:{name:"Communication Design",school:Da.DESIGN,category:"Design",description:"Graphic Design, Illustration, Moving Image, Fashion, Textiles"},PRODUCT_DESIGN:{name:"Product Design",school:Da.DESIGN,category:"Design",description:"Industrial Design, Interaction Design, 3D Design"},PAINTING:{name:"Painting",school:Da.FINE_ART,category:"Fine Art",description:"Traditional and contemporary painting"},PRINT:{name:"Print",school:Da.FINE_ART,category:"Fine Art",description:"Printmaking, etching, screen printing, lithography"},MEDIA:{name:"Media",school:Da.FINE_ART,category:"Fine Art",description:"Photography, Video Studio, Physical Computing/Printing",hasMultipleAdmins:!0,adminRoles:["Photography Admin","Video Studio Admin","Physical Computing Admin"]},SCULPTURE_APPLIED_MATERIALS:{name:"Sculpture & Applied Materials",school:Da.FINE_ART,category:"Fine Art",description:"Sculpture, Ceramics, Glass, Mixed Media"},EDUCATION:{name:"Education",school:Da.EDUCATION,category:"Education",description:"All education programs (BA, Joint Honours, Professional Master)"},VISUAL_CULTURE:{name:"Visual Culture",school:Da.VISUAL_CULTURE,category:"Visual Culture",description:"Theory, History, Critical Studies (BA, MA, MFA)"},FIRST_YEAR_GROUND_FLOOR:{name:"First Year - Ground Floor",school:Da.FIRST_YEAR,category:"Foundation",description:"Design Building Ground Floor Equipment Pool"},FIRST_YEAR_TOP_FLOOR:{name:"First Year - Top Floor",school:Da.FIRST_YEAR,category:"Foundation",description:"Design Building Top Floor Equipment Pool"}},hh=()=>Object.entries(_4).map(([e,t])=>({id:e,name:t.name,school:t.school,category:t.category,displayName:`${t.name} (${t.school})`})),w4=[{id:"1",email:"master@ncad.ie",password:"master123",first_name:"Master",surname:"Admin",full_name:"Master Admin",role:"master_admin",department:"COMMUNICATION_DESIGN",created_at:"2024-01-01"},{id:"201",email:"viewonly@ncad.ie",password:"demo123",first_name:"View",surname:"Only",full_name:"View Only Staff",role:"view_only_staff",department:"COMMUNICATION_DESIGN",created_at:"2024-03-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!1,can_view_history:!0,can_view_analytics:!1}},{id:"202",email:"accounts@ncad.ie",password:"demo123",first_name:"Accounts",surname:"Officer",full_name:"Accounts Officer",role:"accounts_officer",department:"ADMINISTRATION",created_at:"2024-03-01",finance_permissions:{can_view_costs:!0,can_export_finance:!0,can_view_all_depts:!0}},{id:"203",email:"payroll@ncad.ie",password:"demo123",first_name:"Payroll",surname:"Coordinator",full_name:"Payroll Coordinator",role:"payroll_coordinator",department:"ADMINISTRATION",created_at:"2024-03-01",payroll_permissions:{can_view_staff_allocations:!0,can_export_payroll:!0}},{id:"204",email:"it@ncad.ie",password:"demo123",first_name:"IT",surname:"Support",full_name:"IT Support Technician",role:"it_support",department:"ADMINISTRATION",created_at:"2024-03-01",it_permissions:{can_manage_equipment:!0,can_view_logs:!0,can_reset_passwords:!1}},{id:"205",email:"budget@ncad.ie",password:"demo123",first_name:"Budget",surname:"Manager",full_name:"Budget Manager",role:"budget_manager",department:"ADMINISTRATION",created_at:"2024-03-01",budget_permissions:{can_view_budgets:!0,can_forecast_costs:!0,can_export_reports:!0}},{id:"2",email:"admin.commdesign@ncad.ie",password:"admin123",first_name:"Sarah",surname:"Johnson",full_name:"Sarah Johnson",role:"department_admin",managed_department_id:"sa_comm_design",department:"COMMUNICATION_DESIGN",created_at:"2024-01-15"},{id:"3",email:"admin.product@ncad.ie",password:"admin123",first_name:"Mark",surname:"Williams",full_name:"Mark Williams",role:"department_admin",managed_department_id:"sa_product",department:"PRODUCT_DESIGN",created_at:"2024-01-15"},{id:"4",email:"admin.painting@ncad.ie",password:"admin123",first_name:"Emma",surname:"Clarke",full_name:"Emma Clarke",role:"department_admin",managed_department_id:"sa_painting",department:"PAINTING",created_at:"2024-01-15"},{id:"5",email:"admin.print@ncad.ie",password:"admin123",first_name:"Robert",surname:"Taylor",full_name:"Robert Taylor",role:"department_admin",managed_department_id:"sa_print",department:"PRINT",created_at:"2024-01-15"},{id:"6",email:"admin.media.photo@ncad.ie",password:"admin123",first_name:"Lisa",surname:"O'Brien",full_name:"Lisa O'Brien",role:"department_admin",managed_department_id:"sa_media",department:"MEDIA",media_role:"Photography Admin",created_at:"2024-01-15"},{id:"7",email:"admin.media.video@ncad.ie",password:"admin123",first_name:"David",surname:"Murphy",full_name:"David Murphy",role:"department_admin",managed_department_id:"sa_media",department:"MEDIA",media_role:"Video Studio Admin",created_at:"2024-01-15"},{id:"8",email:"admin.media.physcomp@ncad.ie",password:"admin123",first_name:"Jennifer",surname:"Walsh",full_name:"Jennifer Walsh",role:"department_admin",managed_department_id:"sa_media",department:"MEDIA",media_role:"Physical Computing Admin",created_at:"2024-01-15"},{id:"9",email:"admin.sculpture@ncad.ie",password:"admin123",first_name:"Thomas",surname:"Anderson",full_name:"Thomas Anderson",role:"department_admin",managed_department_id:"sa_sculpture",department:"SCULPTURE_APPLIED_MATERIALS",created_at:"2024-01-15"},{id:"10",email:"admin.education@ncad.ie",password:"admin123",first_name:"Patricia",surname:"Moore",full_name:"Patricia Moore",role:"department_admin",managed_department_id:"sa_education",department:"EDUCATION",created_at:"2024-01-15"},{id:"11",email:"admin.visualculture@ncad.ie",password:"admin123",first_name:"Michael",surname:"Brown",full_name:"Michael Brown",role:"department_admin",managed_department_id:"sa_visual_culture",department:"VISUAL_CULTURE",created_at:"2024-01-15"},{id:"12",email:"admin.fy.ground@ncad.ie",password:"admin123",first_name:"Helen",surname:"Ryan",full_name:"Helen Ryan",role:"department_admin",managed_department_id:"sa_fy_ground",department:"FIRST_YEAR_GROUND_FLOOR",created_at:"2024-01-15"},{id:"13",email:"admin.fy.top@ncad.ie",password:"admin123",first_name:"James",surname:"Kelly",full_name:"James Kelly",role:"department_admin",managed_department_id:"sa_fy_top",department:"FIRST_YEAR_TOP_FLOOR",created_at:"2024-01-15"},{id:"14",email:"staff.commdesign@ncad.ie",password:"staff123",first_name:"Anna",surname:"Collins",full_name:"Anna Collins",role:"staff",department:"COMMUNICATION_DESIGN",managed_department_id:"sa_comm_design",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!0,can_export_data:!0,can_request_access:!0,email_notifications:!0,modified_by:"admin.commdesign@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"15",email:"staff.product@ncad.ie",password:"staff123",first_name:"Brian",surname:"Hughes",full_name:"Brian Hughes",role:"staff",department:"PRODUCT_DESIGN",managed_department_id:"sa_product",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.product@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"16",email:"staff.painting@ncad.ie",password:"staff123",first_name:"Claire",surname:"Doyle",full_name:"Claire Doyle",role:"staff",department:"PAINTING",managed_department_id:"sa_painting",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!1,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.painting@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"17",email:"staff.print@ncad.ie",password:"staff123",first_name:"Daniel",surname:"Quinn",full_name:"Daniel Quinn",role:"staff",department:"PRINT",managed_department_id:"sa_print",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.print@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"18",email:"staff.media@ncad.ie",password:"staff123",first_name:"Fiona",surname:"McCarthy",full_name:"Fiona McCarthy",role:"staff",department:"MEDIA",managed_department_id:"sa_media",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!0,can_export_data:!0,can_request_access:!0,email_notifications:!0,modified_by:"admin.media.photo@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"19",email:"staff.sculpture@ncad.ie",password:"staff123",first_name:"Gary",surname:"O'Connor",full_name:"Gary O'Connor",role:"staff",department:"SCULPTURE_APPLIED_MATERIALS",managed_department_id:"sa_sculpture",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!1,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.sculpture@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"20",email:"staff.education@ncad.ie",password:"staff123",first_name:"Hannah",surname:"Byrne",full_name:"Hannah Byrne",role:"staff",department:"EDUCATION",managed_department_id:"sa_education",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.education@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"21",email:"staff.visualculture@ncad.ie",password:"staff123",first_name:"Ian",surname:"Brennan",full_name:"Ian Brennan",role:"staff",department:"VISUAL_CULTURE",managed_department_id:"sa_visual_culture",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!1,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.visualculture@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"22",email:"staff.fy.ground@ncad.ie",password:"staff123",first_name:"Jane",surname:"Keegan",full_name:"Jane Keegan",role:"staff",department:"FIRST_YEAR_GROUND_FLOOR",managed_department_id:"sa_fy_ground",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.fy.ground@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"23",email:"staff.fy.top@ncad.ie",password:"staff123",first_name:"Kevin",surname:"Dunne",full_name:"Kevin Dunne",role:"staff",department:"FIRST_YEAR_TOP_FLOOR",managed_department_id:"sa_fy_top",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.fy.top@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},...Array.from({length:40},(e,t)=>({id:String(24+t),email:`commdesign.student${t+1}@student.ncad.ie`,password:"student123",first_name:"CommDesign",surname:`Student${t+1}`,full_name:`CommDesign Student${t+1}`,role:"student",department:"COMMUNICATION_DESIGN",created_at:"2024-09-01"})),...Array.from({length:20},(e,t)=>({id:String(64+t),email:`product.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Product",surname:`Student${t+1}`,full_name:`Product Student${t+1}`,role:"student",department:"PRODUCT_DESIGN",created_at:"2024-09-01"})),...Array.from({length:12},(e,t)=>({id:String(84+t),email:`painting.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Painting",surname:`Student${t+1}`,full_name:`Painting Student${t+1}`,role:"student",department:"PAINTING",created_at:"2024-09-01"})),...Array.from({length:10},(e,t)=>({id:String(96+t),email:`print.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Print",surname:`Student${t+1}`,full_name:`Print Student${t+1}`,role:"student",department:"PRINT",created_at:"2024-09-01"})),...Array.from({length:25},(e,t)=>({id:String(106+t),email:`media.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Media",surname:`Student${t+1}`,full_name:`Media Student${t+1}`,role:"student",department:"MEDIA",created_at:"2024-09-01"})),...Array.from({length:10},(e,t)=>({id:String(131+t),email:`sculpture.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Sculpture",surname:`Student${t+1}`,full_name:`Sculpture Student${t+1}`,role:"student",department:"SCULPTURE_APPLIED_MATERIALS",created_at:"2024-09-01"})),...Array.from({length:5},(e,t)=>({id:String(141+t),email:`education.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Education",surname:`Student${t+1}`,full_name:`Education Student${t+1}`,role:"student",department:"EDUCATION",created_at:"2024-09-01"})),...Array.from({length:2},(e,t)=>({id:String(146+t),email:`visualculture.student${t+1}@student.ncad.ie`,password:"student123",first_name:"VisualCulture",surname:`Student${t+1}`,full_name:`VisualCulture Student${t+1}`,role:"student",department:"VISUAL_CULTURE",created_at:"2024-09-01"})),{id:"148",email:"fy.ground.student1@student.ncad.ie",password:"student123",first_name:"FYGround",surname:"Student1",full_name:"FYGround Student1",role:"student",department:"FIRST_YEAR_GROUND_FLOOR",created_at:"2024-09-01"},{id:"149",email:"fy.top.student1@student.ncad.ie",password:"student123",first_name:"FYTop",surname:"Student1",full_name:"FYTop Student1",role:"student",department:"FIRST_YEAR_TOP_FLOOR",created_at:"2024-09-01"},{id:"150",email:"demo@ncad.ie",password:"demo123",first_name:"Demo",surname:"Student",full_name:"Demo Student",role:"student",department:"COMMUNICATION_DESIGN",created_at:"2024-01-01"}],j4=[{id:"eq1",product_name:"Canon EOS R5",tracking_number:"CD-CAM-001",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Mirrorless full-frame camera",link_to_image:"https://example.com/eosr5.jpg",created_at:"2024-01-10"},{id:"eq2",product_name:"Canon EOS R5",tracking_number:"CD-CAM-002",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Mirrorless full-frame camera",link_to_image:"https://example.com/eosr5.jpg",created_at:"2024-01-10"},{id:"eq3",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-003",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq4",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-004",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq5",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-005",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq6",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-006",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq7",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-007",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq8",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-008",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq9",product_name:'MacBook Pro 16"',tracking_number:"CD-COMP-001",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Apple Silicon M2 Pro",link_to_image:"https://example.com/macbookpro.jpg",created_at:"2024-01-10"},{id:"eq10",product_name:'MacBook Pro 16"',tracking_number:"CD-COMP-002",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Apple Silicon M2 Pro",link_to_image:"https://example.com/macbookpro.jpg",created_at:"2024-01-10"},{id:"eq11",product_name:'MacBook Pro 16"',tracking_number:"CD-COMP-003",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Apple Silicon M2 Pro",link_to_image:"https://example.com/macbookpro.jpg",created_at:"2024-01-10"},{id:"eq12",product_name:'MacBook Pro 16"',tracking_number:"CD-COMP-004",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Apple Silicon M2 Pro",link_to_image:"https://example.com/macbookpro.jpg",created_at:"2024-01-10"},{id:"eq13",product_name:'MacBook Pro 16"',tracking_number:"CD-COMP-005",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Apple Silicon M2 Pro",link_to_image:"https://example.com/macbookpro.jpg",created_at:"2024-01-10"},{id:"eq14",product_name:"Wacom Cintiq Pro 24",tracking_number:"CD-TAB-001",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Pen display tablet",link_to_image:"https://example.com/cintiq.jpg",created_at:"2024-01-10"},{id:"eq15",product_name:"Wacom Cintiq Pro 24",tracking_number:"CD-TAB-002",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Pen display tablet",link_to_image:"https://example.com/cintiq.jpg",created_at:"2024-01-10"},{id:"eq16",product_name:'iPad Pro 12.9" + Apple Pencil',tracking_number:"CD-TAB-003",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Tablet for illustration",link_to_image:"https://example.com/ipadpro.jpg",created_at:"2024-01-10"},{id:"eq17",product_name:'iPad Pro 12.9" + Apple Pencil',tracking_number:"CD-TAB-004",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Tablet for illustration",link_to_image:"https://example.com/ipadpro.jpg",created_at:"2024-01-10"},{id:"eq18",product_name:'iPad Pro 12.9" + Apple Pencil',tracking_number:"CD-TAB-005",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Tablet for illustration",link_to_image:"https://example.com/ipadpro.jpg",created_at:"2024-01-10"},{id:"eq19",product_name:"Epson SureColor P800",tracking_number:"CD-PRINT-001",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional photo printer",link_to_image:"https://example.com/epsonp800.jpg",created_at:"2024-01-10"},{id:"eq20",product_name:"Epson SureColor P800",tracking_number:"CD-PRINT-002",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional photo printer",link_to_image:"https://example.com/epsonp800.jpg",created_at:"2024-01-10"},{id:"eq21",product_name:"Godox SL-60W LED Light",tracking_number:"CD-LIGHT-001",category:"Lighting",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Continuous LED light",link_to_image:"https://example.com/sl60.jpg",created_at:"2024-01-10"},{id:"eq22",product_name:"Godox SL-60W LED Light",tracking_number:"CD-LIGHT-002",category:"Lighting",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Continuous LED light",link_to_image:"https://example.com/sl60.jpg",created_at:"2024-01-10"},{id:"eq23",product_name:"Godox SL-60W LED Light",tracking_number:"CD-LIGHT-003",category:"Lighting",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Continuous LED light",link_to_image:"https://example.com/sl60.jpg",created_at:"2024-01-10"},{id:"eq24",product_name:"Manfrotto 055 Tripod",tracking_number:"CD-SUPP-001",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional aluminum tripod",link_to_image:"https://example.com/manfrotto055.jpg",created_at:"2024-01-10"},{id:"eq25",product_name:"Manfrotto 055 Tripod",tracking_number:"CD-SUPP-002",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional aluminum tripod",link_to_image:"https://example.com/manfrotto055.jpg",created_at:"2024-01-10"},{id:"eq26",product_name:"Manfrotto 055 Tripod",tracking_number:"CD-SUPP-003",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional aluminum tripod",link_to_image:"https://example.com/manfrotto055.jpg",created_at:"2024-01-10"},{id:"eq27",product_name:"Manfrotto 055 Tripod",tracking_number:"CD-SUPP-004",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional aluminum tripod",link_to_image:"https://example.com/manfrotto055.jpg",created_at:"2024-01-10"},{id:"eq28",product_name:"DJI Ronin-SC Gimbal",tracking_number:"CD-SUPP-005",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Handheld stabilizer",link_to_image:"https://example.com/ronin.jpg",created_at:"2024-01-10"},{id:"eq29",product_name:"DJI Ronin-SC Gimbal",tracking_number:"CD-SUPP-006",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Handheld stabilizer",link_to_image:"https://example.com/ronin.jpg",created_at:"2024-01-10"},{id:"eq30",product_name:"Rode VideoMic Pro+",tracking_number:"CD-AUDIO-001",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"On-camera microphone",link_to_image:"https://example.com/rodemicpro.jpg",created_at:"2024-01-10"},{id:"eq31",product_name:"Rode VideoMic Pro+",tracking_number:"CD-AUDIO-002",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"On-camera microphone",link_to_image:"https://example.com/rodemicpro.jpg",created_at:"2024-01-10"},{id:"eq32",product_name:"Zoom H6 Audio Recorder",tracking_number:"CD-AUDIO-003",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Portable audio recorder",link_to_image:"https://example.com/zoomh6.jpg",created_at:"2024-01-10"},{id:"eq33",product_name:"Zoom H6 Audio Recorder",tracking_number:"CD-AUDIO-004",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Portable audio recorder",link_to_image:"https://example.com/zoomh6.jpg",created_at:"2024-01-10"},{id:"eq34",product_name:"Blackmagic Pocket Cinema 4K",tracking_number:"CD-CAM-009",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Digital film camera",link_to_image:"https://example.com/bmpcc4k.jpg",created_at:"2024-01-10"},{id:"eq35",product_name:"Blackmagic Pocket Cinema 4K",tracking_number:"CD-CAM-010",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Digital film camera",link_to_image:"https://example.com/bmpcc4k.jpg",created_at:"2024-01-10"},{id:"eq36",product_name:"Brother P-touch Label Maker",tracking_number:"CD-MISC-001",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Label printer",link_to_image:"https://example.com/ptouch.jpg",created_at:"2024-01-10"},{id:"eq37",product_name:"Epson FastFoto FF-680W Scanner",tracking_number:"CD-SCAN-001",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"High-speed photo scanner",link_to_image:"https://example.com/fastfoto.jpg",created_at:"2024-01-10"},{id:"eq38",product_name:"Epson FastFoto FF-680W Scanner",tracking_number:"CD-SCAN-002",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"High-speed photo scanner",link_to_image:"https://example.com/fastfoto.jpg",created_at:"2024-01-10"},{id:"eq39",product_name:"X-Rite ColorChecker Passport",tracking_number:"CD-COLOR-001",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Color calibration tool",link_to_image:"https://example.com/colorchecker.jpg",created_at:"2024-01-10"},{id:"eq40",product_name:"Lastolite Reflector Kit",tracking_number:"CD-LIGHT-004",category:"Lighting",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"5-in-1 reflector set",link_to_image:"https://example.com/lastolite.jpg",created_at:"2024-01-10"},{id:"eq41",product_name:"Prusa i3 MK3S+ 3D Printer",tracking_number:"PD-3DP-001",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"FDM 3D printer",link_to_image:"https://example.com/prusa.jpg",created_at:"2024-01-11"},{id:"eq42",product_name:"Prusa i3 MK3S+ 3D Printer",tracking_number:"PD-3DP-002",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"FDM 3D printer",link_to_image:"https://example.com/prusa.jpg",created_at:"2024-01-11"},{id:"eq43",product_name:"Prusa i3 MK3S+ 3D Printer",tracking_number:"PD-3DP-003",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"FDM 3D printer",link_to_image:"https://example.com/prusa.jpg",created_at:"2024-01-11"},{id:"eq44",product_name:"Formlabs Form 3+ SLA Printer",tracking_number:"PD-3DP-004",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Resin 3D printer",link_to_image:"https://example.com/form3.jpg",created_at:"2024-01-11"},{id:"eq45",product_name:"Formlabs Form 3+ SLA Printer",tracking_number:"PD-3DP-005",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Resin 3D printer",link_to_image:"https://example.com/form3.jpg",created_at:"2024-01-11"},{id:"eq46",product_name:"Dell XPS 15 Laptop",tracking_number:"PD-COMP-001",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"High-performance laptop",link_to_image:"https://example.com/xps15.jpg",created_at:"2024-01-11"},{id:"eq47",product_name:"Dell XPS 15 Laptop",tracking_number:"PD-COMP-002",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"High-performance laptop",link_to_image:"https://example.com/xps15.jpg",created_at:"2024-01-11"},{id:"eq48",product_name:"Dell XPS 15 Laptop",tracking_number:"PD-COMP-003",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"High-performance laptop",link_to_image:"https://example.com/xps15.jpg",created_at:"2024-01-11"},{id:"eq49",product_name:"Dell XPS 15 Laptop",tracking_number:"PD-COMP-004",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"High-performance laptop",link_to_image:"https://example.com/xps15.jpg",created_at:"2024-01-11"},{id:"eq50",product_name:"Meta Quest 3 VR Headset",tracking_number:"PD-VR-001",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Virtual reality headset",link_to_image:"https://example.com/quest3.jpg",created_at:"2024-01-11"},{id:"eq51",product_name:"Meta Quest 3 VR Headset",tracking_number:"PD-VR-002",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Virtual reality headset",link_to_image:"https://example.com/quest3.jpg",created_at:"2024-01-11"},{id:"eq52",product_name:"Meta Quest 3 VR Headset",tracking_number:"PD-VR-003",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Virtual reality headset",link_to_image:"https://example.com/quest3.jpg",created_at:"2024-01-11"},{id:"eq53",product_name:"Arduino Starter Kit",tracking_number:"PD-ELEC-001",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Electronics prototyping kit",link_to_image:"https://example.com/arduino.jpg",created_at:"2024-01-11"},{id:"eq54",product_name:"Arduino Starter Kit",tracking_number:"PD-ELEC-002",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Electronics prototyping kit",link_to_image:"https://example.com/arduino.jpg",created_at:"2024-01-11"},{id:"eq55",product_name:"Dremel 4300 Rotary Tool",tracking_number:"PD-TOOL-001",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Multi-purpose rotary tool",link_to_image:"https://example.com/dremel.jpg",created_at:"2024-01-11"},{id:"eq56",product_name:"Dremel 4300 Rotary Tool",tracking_number:"PD-TOOL-002",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Multi-purpose rotary tool",link_to_image:"https://example.com/dremel.jpg",created_at:"2024-01-11"},{id:"eq57",product_name:"Caliper Digital Measuring Tool",tracking_number:"PD-MEAS-001",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Precision measurement",link_to_image:"https://example.com/caliper.jpg",created_at:"2024-01-11"},{id:"eq58",product_name:"Hot Glue Gun Set",tracking_number:"PD-TOOL-003",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Adhesive tool",link_to_image:"https://example.com/gluegun.jpg",created_at:"2024-01-11"},{id:"eq59",product_name:"Canon EOS 90D DSLR",tracking_number:"PD-CAM-001",category:"Camera",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Product photography camera",link_to_image:"https://example.com/eos90d.jpg",created_at:"2024-01-11"},{id:"eq60",product_name:"Canon EOS 90D DSLR",tracking_number:"PD-CAM-002",category:"Camera",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Product photography camera",link_to_image:"https://example.com/eos90d.jpg",created_at:"2024-01-11"},{id:"eq61",product_name:"Godox V1 Flash",tracking_number:"PD-LIGHT-001",category:"Lighting",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Round head flash",link_to_image:"https://example.com/v1flash.jpg",created_at:"2024-01-11"},{id:"eq62",product_name:"Godox V1 Flash",tracking_number:"PD-LIGHT-002",category:"Lighting",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Round head flash",link_to_image:"https://example.com/v1flash.jpg",created_at:"2024-01-11"},{id:"eq63",product_name:"Manfrotto Tripod",tracking_number:"PD-SUPP-001",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Aluminum tripod",link_to_image:"https://example.com/manfrotto.jpg",created_at:"2024-01-11"},{id:"eq64",product_name:"Manfrotto Tripod",tracking_number:"PD-SUPP-002",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Aluminum tripod",link_to_image:"https://example.com/manfrotto.jpg",created_at:"2024-01-11"},{id:"eq65",product_name:"Wacom Intuos Pro Tablet",tracking_number:"PD-TAB-001",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Drawing tablet",link_to_image:"https://example.com/wacom.jpg",created_at:"2024-01-11"}],$l="ncadbook_demo_data";class N4{constructor(){this.initializeStorage()}initializeStorage(){if(!localStorage.getItem($l)){const n={users:w4,equipment:j4,sub_areas:b4,system_settings:m4,equipment_kits:g4,cross_department_requests:v4,kit_bookings:y4,department_access_grants:x4,spaces:l4,bookings:c4,spaceBookings:d4,featureFlags:u4,user_sub_areas:h4,interdisciplinary_access:f4,access_requests:p4,strike_history:[],currentUser:null};localStorage.setItem($l,JSON.stringify(n))}}getData(){const t=localStorage.getItem($l);return t?JSON.parse(t):null}setData(t){localStorage.setItem($l,JSON.stringify(t))}saveData(t){this.setData(t)}async query(t,n={}){await this.simulateDelay();let s=this.getData()[t]||[];return Object.keys(n).forEach(i=>{s=s.filter(o=>o[i]===n[i])}),s}async findOne(t,n){return(await this.query(t,n))[0]||null}async insert(t,n){await this.simulateDelay();const r=this.getData();return r[t]||(r[t]=[]),r[t].push(n),this.setData(r),n}async update(t,n,r){await this.simulateDelay();const s=this.getData();let i=0;return s[t]=s[t].map(o=>Object.keys(n).every(c=>o[c]===n[c])?(i++,{...o,...r}):o),this.setData(s),i}async delete(t,n){await this.simulateDelay();const r=this.getData(),s=r[t].length;return r[t]=r[t].filter(i=>!Object.keys(n).every(o=>i[o]===n[o])),this.setData(r),s-r[t].length}setCurrentUser(t){const n=this.getData();n.currentUser=t,this.setData(n)}getCurrentUser(){return this.getData().currentUser}clearCurrentUser(){const t=this.getData();t.currentUser=null,this.setData(t)}simulateDelay(){return new Promise(t=>setTimeout(t,100+Math.random()*200))}reset(){localStorage.removeItem($l),this.initializeStorage()}}const Te=new N4;function dg(){const[e,t]=T.useState([]),[n,r]=T.useState(!1),[s,i]=T.useState(0);T.useEffect(()=>{o();const m=setInterval(o,3e4);return()=>clearInterval(m)},[]);const o=async()=>{var g;const m=Te.getCurrentUser();if(m)try{const p=Te.getData(),j=[];if(m.role==="student")p.bookings.filter(C=>C.user_id===m.id).forEach(C=>{C.status!=="pending"&&j.push({id:`booking-${C.id}`,type:C.status==="approved"?"success":"error",message:`Booking for ${C.equipment_name} has been ${C.status}`,timestamp:C.updated_at||C.created_at,read:!1})});else if(m.role==="department_admin"||m.role==="master_admin"){const N=p.bookings.filter(C=>C.status==="pending");if(N.length>0&&j.push({id:"pending-bookings",type:"info",message:`${N.length} booking${N.length>1?"s":""} awaiting approval`,timestamp:new Date().toISOString(),read:!1}),m.role==="master_admin"){const C=((g=p.access_requests)==null?void 0:g.filter(y=>y.status==="pending"))||[];C.length>0&&j.push({id:"access-requests",type:"info",message:`${C.length} access request${C.length>1?"s":""} pending review`,timestamp:new Date().toISOString(),read:!1})}}j.sort((N,C)=>new Date(C.timestamp)-new Date(N.timestamp)),t(j.slice(0,10)),i(j.filter(N=>!N.read).length)}catch(p){console.error("Failed to load notifications:",p)}},l=m=>{t(g=>g.map(p=>p.id===m?{...p,read:!0}:p)),i(g=>Math.max(0,g-1))},c=()=>{t(m=>m.map(g=>({...g,read:!0}))),i(0)},d=m=>{switch(m){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}},h=m=>{const g=new Date(m),j=new Date-g,N=Math.floor(j/6e4),C=Math.floor(j/36e5),y=Math.floor(j/864e5);return N<1?"Just now":N<60?`${N}m ago`:C<24?`${C}h ago`:y<7?`${y}d ago`:g.toLocaleDateString()};return a.jsxs("div",{className:"notification-center",children:[a.jsxs("button",{className:"notification-bell",onClick:()=>r(!n),"aria-label":`Notifications. ${s} unread`,"data-testid":"notification-bell",children:[a.jsx("span",{className:"bell-icon",children:""}),s>0&&a.jsx("span",{className:"notification-badge","data-testid":"notification-count",children:s>9?"9+":s})]}),n&&a.jsxs("div",{className:"notification-dropdown","data-testid":"notification-dropdown",children:[a.jsxs("div",{className:"notification-header",children:[a.jsx("h3",{children:"Notifications"}),s>0&&a.jsx("button",{onClick:c,className:"btn-text","data-testid":"mark-all-read-btn",children:"Mark all as read"})]}),a.jsx("div",{className:"notification-list",children:e.length===0?a.jsx("div",{className:"notification-empty",children:"No notifications"}):e.map(m=>a.jsxs("div",{className:`notification-item ${m.read?"read":"unread"}`,onClick:()=>!m.read&&l(m.id),"data-testid":"notification-item",children:[a.jsx("span",{className:`notification-icon notification-${m.type}`,children:d(m.type)}),a.jsxs("div",{className:"notification-content",children:[a.jsx("p",{className:"notification-message",children:m.message}),a.jsx("span",{className:"notification-time",children:h(m.timestamp)})]}),!m.read&&a.jsx("span",{className:"unread-dot"})]},m.id))})]})]})}function ug(){const e=sl(),t=Ji(),{user:n}=en();if(!n)return null;const s=(()=>{switch(n.role){case"student":return[{path:"/student/equipment",icon:"",label:"Browse",testId:"nav-browse"},{path:"/student/bookings",icon:"",label:"Bookings",testId:"nav-bookings"},{path:"/student",icon:"",label:"Dashboard",testId:"nav-dashboard"}];case"staff":return[{path:"/staff",icon:"",label:"Dashboard",testId:"nav-dashboard"},{path:"/staff/rooms",icon:"",label:"Rooms",testId:"nav-rooms"},{path:"/staff/equipment",icon:"",label:"Equipment",testId:"nav-equipment"},{path:"/staff/bookings",icon:"",label:"Bookings",testId:"nav-bookings"}];case"department_admin":return[{path:"/admin",icon:"",label:"Dashboard",testId:"nav-dashboard"},{path:"/admin/bookings",icon:"",label:"Approvals",testId:"nav-approvals"},{path:"/admin/equipment",icon:"",label:"Equipment",testId:"nav-equipment"},{path:"/admin/staff",icon:"",label:"Staff",testId:"nav-staff"}];case"master_admin":return[{path:"/admin",icon:"",label:"Dashboard",testId:"nav-dashboard"},{path:"/admin/users",icon:"",label:"Users",testId:"nav-users"},{path:"/admin/analytics",icon:"",label:"Analytics",testId:"nav-analytics"},{path:"/admin/settings",icon:"",label:"Settings",testId:"nav-settings"}];default:return[]}})(),i=l=>!!(l===t.pathname||l!=="/"&&t.pathname.startsWith(l)),o=l=>{e(l)};return a.jsx("nav",{className:"mobile-bottom-nav","data-testid":"mobile-bottom-nav",children:s.map(l=>a.jsxs("button",{className:`nav-item ${i(l.path)?"active":""}`,onClick:()=>o(l.path),"data-testid":l.testId,"aria-label":l.label,"aria-current":i(l.path)?"page":void 0,children:[a.jsx("span",{className:"nav-icon",role:"img","aria-hidden":"true",children:l.icon}),a.jsx("span",{className:"nav-label",children:l.label})]},l.path))})}function wr(){const[e,t]=T.useState(null),[n,r]=T.useState(!0);return T.useEffect(()=>{(async()=>{try{const l=await Bo.getCurrentUser();t(l)}catch(l){console.error("Failed to load user:",l)}finally{r(!1)}})()},[]),{user:e,loading:n,login:async(o,l)=>{const c=await Bo.login(o,l);return t(c),c},logout:async()=>{await Bo.logout(),t(null)},isAuthenticated:!!e}}const v5={getUserKits(e){const t=localStorage.getItem(`user_kits_${e}`);return t?JSON.parse(t):[]},saveUserKit(e,t){const n=this.getUserKits(e),r={id:Date.now().toString(),name:t.name,equipment_ids:t.equipment_ids,created_at:new Date().toISOString(),type:"user"};return n.push(r),localStorage.setItem(`user_kits_${e}`,JSON.stringify(n)),r},deleteUserKit(e,t){const r=this.getUserKits(e).filter(s=>s.id!==t);localStorage.setItem(`user_kits_${e}`,JSON.stringify(r))},updateUserKit(e,t,n){const s=this.getUserKits(e).map(i=>i.id===t?{...i,...n,updated_at:new Date().toISOString()}:i);localStorage.setItem(`user_kits_${e}`,JSON.stringify(s))},getAdminKits(){const e=localStorage.getItem("admin_kits");return e?JSON.parse(e):[]},saveAdminKit(e){const t=this.getAdminKits(),n={id:Date.now().toString(),name:e.name,description:e.description,equipment_ids:e.equipment_ids,department:e.department||"all",created_at:new Date().toISOString(),type:"admin"};return t.push(n),localStorage.setItem("admin_kits",JSON.stringify(t)),n},deleteAdminKit(e){const n=this.getAdminKits().filter(r=>r.id!==e);localStorage.setItem("admin_kits",JSON.stringify(n))},updateAdminKit(e,t){const r=this.getAdminKits().map(s=>s.id===e?{...s,...t,updated_at:new Date().toISOString()}:s);localStorage.setItem("admin_kits",JSON.stringify(r))},getAllKitsForUser(e,t){const n=this.getUserKits(e),r=this.getAdminKits().filter(s=>s.department==="all"||s.department===t);return[...n,...r]}};function y5({onClose:e,onSuccess:t}){const{user:n}=en(),[r,s]=T.useState(1),[i,o]=T.useState(""),[l,c]=T.useState(""),[d,h]=T.useState([]),[m,g]=T.useState([]),[p,j]=T.useState(""),[N,C]=T.useState(!1),[y,b]=T.useState(""),[w,S]=T.useState(!1),[R,W]=T.useState("");T.useEffect(()=>{r===2&&i&&l&&U()},[r,i,l]);const U=async()=>{C(!0);try{const O=await yr.getAll({status:"available"});h(O.equipment||[])}catch(O){b("Failed to load available equipment"),console.error(O),h([])}finally{C(!1)}},_=O=>{if(O.preventDefault(),b(""),!i||!l){b("Please select both start and end dates");return}const P=new Date(i),A=new Date(l),Z=new Date;if(Z.setHours(0,0,0,0),P<Z){b("Start date cannot be in the past");return}if(A<P){b("End date must be after start date");return}s(2)},D=O=>{g(P=>P.find(Z=>Z.id===O.id)?P.filter(Z=>Z.id!==O.id):[...P,O])},z=async O=>{if(O.preventDefault(),b(""),m.length===0){b("Please select at least one item");return}if(!p.trim()){b("Please provide a purpose for this booking");return}C(!0);try{w&&R.trim()&&v5.saveUserKit(n.id,{name:R,equipment_ids:m.map(P=>P.id)});for(const P of m)await jn.create({equipment_id:P.id,start_date:i,end_date:l,purpose:p,booking_type:"standard"});t()}catch(P){b("Failed to create booking: "+P.message),C(!1)}},L=[...new Set(d.map(O=>O.category))];return a.jsx("div",{className:"modal-overlay",onClick:e,children:a.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),style:{maxWidth:"800px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Book Multiple Items"}),a.jsx("button",{onClick:e,className:"modal-close","aria-label":"Close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2rem",position:"relative"},children:[a.jsxs("div",{style:{flex:1,textAlign:"center",zIndex:1},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:r>=1?"var(--primary-color)":"var(--border-color)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",fontWeight:"bold"},children:"1"}),a.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:r>=1?"var(--primary-color)":"var(--text-secondary)"},children:"Select Dates"})]}),a.jsxs("div",{style:{flex:1,textAlign:"center",zIndex:1},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:r>=2?"var(--primary-color)":"var(--border-color)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",fontWeight:"bold"},children:"2"}),a.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:r>=2?"var(--primary-color)":"var(--text-secondary)"},children:"Select Equipment"})]}),a.jsxs("div",{style:{flex:1,textAlign:"center",zIndex:1},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:r>=3?"var(--primary-color)":"var(--border-color)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",fontWeight:"bold"},children:"3"}),a.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:r>=3?"var(--primary-color)":"var(--text-secondary)"},children:"Confirm"})]}),a.jsx("div",{style:{position:"absolute",top:"20px",left:"20%",right:"20%",height:"2px",background:"var(--border-color)",zIndex:0}})]}),y&&a.jsx("div",{className:"error-message",style:{marginBottom:"1rem"},children:y}),r===1&&a.jsxs("form",{onSubmit:_,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Start Date *"}),a.jsx("input",{type:"date",value:i,onChange:O=>o(O.target.value),className:"form-input",required:!0,"data-testid":"start-date-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"End Date *"}),a.jsx("input",{type:"date",value:l,onChange:O=>c(O.target.value),className:"form-input",required:!0,"data-testid":"end-date-input"})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:e,className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary","data-testid":"next-to-equipment-btn",children:"Next: Select Equipment"})]})]}),r===2&&a.jsxs("div",{children:[a.jsxs("div",{style:{background:"var(--surface)",padding:"1rem",borderRadius:"var(--border-radius)",marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{margin:"0 0 0.5rem 0"},children:"Selected Dates"}),a.jsxs("p",{style:{margin:0,color:"var(--text-secondary)"},children:[new Date(i).toLocaleDateString()," - ",new Date(l).toLocaleDateString()]}),m.length>0&&a.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontWeight:"bold",color:"var(--primary-color)"},children:[m.length," item",m.length!==1?"s":""," selected"]})]}),N?a.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Loading available equipment..."}):a.jsxs(a.Fragment,{children:[L.map(O=>{const P=d.filter(A=>A.category===O);return P.length===0?null:a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text-primary)"},children:O}),a.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:P.map(A=>{const Z=m.find(re=>re.id===A.id);return a.jsxs("div",{onClick:()=>D(A),style:{padding:"1rem",border:`2px solid ${Z?"var(--primary-color)":"var(--border-color)"}`,borderRadius:"var(--border-radius)",cursor:"pointer",background:Z?"rgba(102, 126, 234, 0.1)":"white",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"1rem"},"data-testid":"equipment-selection-item",children:[a.jsx("input",{type:"checkbox",checked:Z,onChange:()=>{},style:{width:"20px",height:"20px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:A.product_name}),a.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:A.description})]}),a.jsx("div",{className:"equipment-category-label",style:{fontSize:"0.875rem"},children:A.category})]},A.id)})})]},O)}),d.length===0&&a.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"No equipment available for the selected dates."})]}),a.jsxs("div",{className:"modal-actions",style:{marginTop:"1.5rem"},children:[a.jsx("button",{onClick:()=>s(1),className:"btn btn-secondary",children:"Back"}),a.jsx("button",{onClick:()=>s(3),className:"btn btn-primary",disabled:m.length===0,"data-testid":"next-to-confirm-btn",children:"Next: Confirm Booking"})]})]}),r===3&&a.jsxs("form",{onSubmit:z,children:[a.jsxs("div",{style:{background:"var(--surface)",padding:"1.5rem",borderRadius:"var(--border-radius)",marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Booking Summary"}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Dates:"}),a.jsxs("div",{style:{color:"var(--text-secondary)"},children:[new Date(i).toLocaleDateString()," - ",new Date(l).toLocaleDateString()]})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Equipment (",m.length," item",m.length!==1?"s":"","):"]}),a.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"var(--text-secondary)"},children:m.map(O=>a.jsxs("li",{children:[O.product_name," (",O.category,")"]},O.id))})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{children:["Purpose / Justification *",a.jsx("span",{className:"required",children:" Required for booking approval"})]}),a.jsx("textarea",{value:p,onChange:O=>j(O.target.value),placeholder:"Please describe how you plan to use this equipment...",rows:4,required:!0,"data-testid":"booking-purpose"})]}),a.jsxs("div",{style:{background:"rgba(102, 126, 234, 0.1)",padding:"1rem",borderRadius:"var(--border-radius)",border:"1px solid var(--primary-color)",marginBottom:"1rem"},children:[a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",marginBottom:w?"0.75rem":"0"},children:[a.jsx("input",{type:"checkbox",checked:w,onChange:O=>S(O.target.checked),style:{width:"18px",height:"18px"},"data-testid":"save-as-kit-checkbox"}),a.jsx("span",{style:{fontWeight:"600"},children:"Save this selection as a reusable kit"})]}),w&&a.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[a.jsx("label",{style:{fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Kit Name *"}),a.jsx("input",{type:"text",value:R,onChange:O=>W(O.target.value),placeholder:"e.g., 'Documentary Filming Kit' or 'Studio Photography Setup'",className:"form-input",required:w,"data-testid":"kit-name-input"}),a.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",margin:"0.5rem 0 0 0"},children:"This kit will appear in your dashboard for quick rebooking."})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:()=>s(2),className:"btn btn-secondary",disabled:N,children:"Back"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:N,"data-testid":"submit-booking-btn",children:N?"Submitting...":"Submit Booking Request"})]})]})]})]})})}function Sn(){const[e,t]=T.useState([]),n=T.useCallback((s,i="success")=>{const o=Date.now();t(l=>[...l,{id:o,message:s,type:i}])},[]),r=T.useCallback(s=>{t(i=>i.filter(o=>o.id!==s))},[]);return{toasts:e,showToast:n,removeToast:r}}function kn({message:e,type:t="success",onClose:n,duration:r=3e3}){return T.useEffect(()=>{const s=setTimeout(()=>{n()},r);return()=>clearTimeout(s)},[r,n]),a.jsxs("div",{className:`toast toast-${t}`,role:"alert","data-testid":"toast-notification",children:[a.jsxs("div",{className:"toast-content",children:[a.jsxs("span",{className:"toast-icon",children:[t==="success"&&"",t==="error"&&"",t==="info"&&""]}),a.jsx("span",{className:"toast-message",children:e})]}),a.jsx("button",{className:"toast-close",onClick:n,"aria-label":"Close notification",children:""})]})}function S4(){const{user:e}=wr(),t=sl(),[n,r]=T.useState([]),[s,i]=T.useState([]),[o,l]=T.useState(!1),[c,d]=T.useState(!1),{toasts:h,showToast:m,removeToast:g}=Sn();T.useEffect(()=>{p()},[e]);const p=async()=>{if(e)try{const b=await jn.getAll({user_id:e.id});r(b.bookings||[]);const w=v5.getAllKitsForUser(e.id,e.department);i(w)}catch(b){console.error("Failed to load dashboard data:",b),r([])}},j=n.filter(b=>b.status==="approved").length,N=n.filter(b=>b.status==="pending").length,C=n.length,y=()=>{m("Booking created successfully!","success"),d(!1),p()};return a.jsxs("div",{className:"student-dashboard",children:[a.jsxs("div",{className:"student-welcome",children:[a.jsxs("h2",{children:["Welcome, ",e==null?void 0:e.first_name,"! "]}),a.jsx("p",{children:"Your equipment booking dashboard"})]}),a.jsxs("div",{className:"student-dashboard-grid",children:[a.jsxs("div",{className:"student-card student-stat-card",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-2)"},children:[a.jsxs("h3",{children:[a.jsx("span",{className:"student-card-icon",children:""})," Your Stats"]}),a.jsx("button",{onClick:()=>l(!o),className:"btn btn-secondary btn-sm",style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem"},children:o?"Simple":"Detailed"})]}),o?a.jsxs("div",{className:"student-stat-grid",children:[a.jsxs("div",{className:"student-stat-item",children:[a.jsx("strong",{children:C}),a.jsx("span",{children:"Total"})]}),a.jsxs("div",{className:"student-stat-item",children:[a.jsx("strong",{children:j}),a.jsx("span",{children:"Active"})]}),a.jsxs("div",{className:"student-stat-item",children:[a.jsx("strong",{children:N}),a.jsx("span",{children:"Pending"})]}),a.jsxs("div",{className:"student-stat-item",children:[a.jsx("strong",{children:n.filter(b=>b.status==="completed").length}),a.jsx("span",{children:"Completed"})]})]}):a.jsxs("div",{children:[a.jsx("div",{className:"student-stat-number",children:j}),a.jsx("div",{className:"student-stat-label",children:"Active Bookings"}),N>0&&a.jsx("div",{style:{marginTop:"var(--space-2)",padding:"var(--space-2)",background:"var(--theme-warning-bg)",borderRadius:"var(--radius-sm)"},children:a.jsxs("span",{style:{fontSize:"var(--text-sm)",color:"var(--theme-warning-text)",fontWeight:"var(--font-semibold)"},children:[" ",N," pending approval"]})})]})]}),a.jsxs("div",{className:"student-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"student-card-icon",children:""})," Recent Activity"]}),n.length===0?a.jsxs("div",{className:"student-empty-state",children:[a.jsx("div",{className:"student-empty-state-icon",children:""}),a.jsx("p",{children:"No recent activity"})]}):a.jsx("div",{className:"student-activity-list",children:n.slice(0,3).map(b=>a.jsxs("div",{className:"student-activity-item",children:[a.jsx("div",{className:"student-activity-title",children:b.equipment_name}),a.jsxs("div",{className:"student-activity-meta",children:[a.jsx("span",{children:new Date(b.start_date).toLocaleDateString()}),a.jsx("span",{className:`student-status-badge ${b.status}`,children:b.status})]})]},b.id))})]}),a.jsxs("div",{className:"student-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"student-card-icon",children:""})," Saved Kits (",s.length,")"]}),s.length===0?a.jsxs("div",{className:"student-empty-state",children:[a.jsx("div",{className:"student-empty-state-icon",children:""}),a.jsx("p",{children:"No saved kits yet. Create custom kits when booking equipment!"})]}):a.jsx("div",{className:"student-kit-list",children:s.map(b=>{var w;return a.jsxs("div",{className:`student-kit-item ${b.type==="admin"?"admin-kit":""}`,onClick:()=>{m(`Booking kit: ${b.name}`,"info"),d(!0)},role:"button",tabIndex:0,onKeyPress:S=>{(S.key==="Enter"||S.key===" ")&&(m(`Booking kit: ${b.name}`,"info"),d(!0))},children:[a.jsxs("div",{className:"student-kit-name",children:[b.type==="admin"?"":""," ",b.name]}),a.jsxs("div",{className:"student-kit-meta",children:[((w=b.equipment_ids)==null?void 0:w.length)||0," items",b.type==="admin"&&"  Admin Kit"]})]},b.id)})})]}),a.jsxs("div",{className:"student-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"student-card-icon",children:""})," Quick Actions"]}),a.jsxs("div",{className:"student-quick-actions",children:[a.jsx("button",{onClick:()=>d(!0),className:"student-action-btn","data-testid":"quick-book-multiple",children:" Book Multiple Items"}),a.jsx("button",{onClick:()=>t("/student/equipment"),className:"student-action-btn secondary",children:" Browse Equipment"})]})]})]}),c&&a.jsx(y5,{onClose:()=>d(!1),onSuccess:y}),h.map(b=>a.jsx(kn,{message:b.message,type:b.type,onClose:()=>g(b.id)},b.id))]})}const Xp={async createBooking(e){const{equipment_id:t,start_date:n,end_date:r,purpose:s}=e;try{return(await jn.create({equipment_id:t,start_date:n,end_date:r,purpose:s,booking_type:"standard"})).booking}catch(i){throw new Error(i.message||"Failed to create booking")}},async getUserBookings(e){try{return(await jn.getAll({user_id:e})).bookings||[]}catch(t){return console.error("Failed to get user bookings:",t),[]}},async getBookingById(e){try{return(await jn.getById(e)).booking}catch(t){throw new Error(t.message||"Failed to get booking")}},async cancelBooking(e){try{await jn.delete(e)}catch(t){throw new Error(t.message||"Failed to cancel booking")}},async checkConflicts(e,t,n){try{return((await jn.getAll({equipment_id:e,status:"approved"})).bookings||[]).filter(i=>{if(["cancelled","denied","completed"].includes(i.status))return!1;const o=new Date(i.start_date),l=new Date(i.end_date),c=new Date(t),d=new Date(n);return c<=l&&d>=o})}catch(r){return console.error("Failed to check conflicts:",r),[]}},async getBookingsWithEquipment(e){try{return(await jn.getAll({user_id:e})).bookings||[]}catch(t){return console.error("Failed to get bookings with equipment:",t),[]}}};class Mc{constructor(t=0,n="Network Error"){this.status=t,this.text=n}}const k4=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},Vn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:k4()},hg=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},C4=(e,t="https://api.emailjs.com")=>{if(!e)return;const n=hg(e);Vn.publicKey=n.publicKey,Vn.blockHeadless=n.blockHeadless,Vn.storageProvider=n.storageProvider,Vn.blockList=n.blockList,Vn.limitRate=n.limitRate,Vn.origin=n.origin||t},x5=async(e,t,n={})=>{const r=await fetch(Vn.origin+e,{method:"POST",headers:n,body:t}),s=await r.text(),i=new Mc(r.status,s);if(r.ok)return i;throw i},b5=(e,t,n)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},A4=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},_5=e=>e.webdriver||!e.languages||e.languages.length===0,w5=()=>new Mc(451,"Unavailable For Headless Browser"),D4=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},L4=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},E4=(e,t)=>e instanceof FormData?e.get(t):e[t],j5=(e,t)=>{if(L4(e))return!1;D4(e.list,e.watchVariable);const n=E4(t,e.watchVariable);return typeof n!="string"?!1:e.list.includes(n)},N5=()=>new Mc(403,"Forbidden"),P4=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},T4=async(e,t,n)=>{const r=Number(await n.get(e)||0);return t-Date.now()+r},S5=async(e,t,n)=>{if(!t.throttle||!n)return!1;P4(t.throttle,t.id);const r=t.id||e;return await T4(r,t.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},k5=()=>new Mc(429,"Too Many Requests"),q4=async(e,t,n,r)=>{const s=hg(r),i=s.publicKey||Vn.publicKey,o=s.blockHeadless||Vn.blockHeadless,l=s.storageProvider||Vn.storageProvider,c={...Vn.blockList,...s.blockList},d={...Vn.limitRate,...s.limitRate};return o&&_5(navigator)?Promise.reject(w5()):(b5(i,e,t),A4(n),n&&j5(c,n)?Promise.reject(N5()):await S5(location.pathname,d,l)?Promise.reject(k5()):x5("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:e,template_id:t,template_params:n}),{"Content-type":"application/json"}))},I4=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},F4=e=>typeof e=="string"?document.querySelector(e):e,R4=async(e,t,n,r)=>{const s=hg(r),i=s.publicKey||Vn.publicKey,o=s.blockHeadless||Vn.blockHeadless,l=Vn.storageProvider||s.storageProvider,c={...Vn.blockList,...s.blockList},d={...Vn.limitRate,...s.limitRate};if(o&&_5(navigator))return Promise.reject(w5());const h=F4(n);b5(i,e,t),I4(h);const m=new FormData(h);return j5(c,m)?Promise.reject(N5()):await S5(location.pathname,d,l)?Promise.reject(k5()):(m.append("lib_version","4.4.1"),m.append("service_id",e),m.append("template_id",t),m.append("user_id",i),x5("/api/v1.0/email/send-form",m))},Li={init:C4,send:q4,sendForm:R4,EmailJSResponseStatus:Mc},pn={serviceId:"YOUR_SERVICE_ID",publicKey:"YOUR_PUBLIC_KEY",templates:{bookingConfirmation:"template_booking_confirm",bookingApproved:"template_booking_approved",bookingDenied:"template_booking_denied",bookingOverdue:"template_booking_overdue",bookingReminder:"template_booking_reminder"}};class O4{constructor(){pn.publicKey!=="YOUR_PUBLIC_KEY"&&Li.init(pn.publicKey)}isConfigured(){return pn.serviceId!=="YOUR_SERVICE_ID"&&pn.publicKey!=="YOUR_PUBLIC_KEY"}async sendBookingConfirmation(t,n,r){if(!this.isConfigured())return console.warn("EmailJS not configured. Skipping email notification."),{success:!1,error:"EmailJS not configured"};try{const s=r.map(l=>l.product_name).join(", "),i={to_email:n.email,to_name:n.full_name,booking_id:t.id,equipment_list:s,start_date:new Date(t.start_date).toLocaleDateString(),end_date:new Date(t.end_date).toLocaleDateString(),purpose:t.purpose||"N/A",status:t.status},o=await Li.send(pn.serviceId,pn.templates.bookingConfirmation,i);return console.log("Booking confirmation email sent:",o),{success:!0,response:o}}catch(s){return console.error("Failed to send booking confirmation email:",s),{success:!1,error:s.message}}}async sendBookingApproved(t,n,r,s){if(!this.isConfigured())return console.warn("EmailJS not configured. Skipping email notification."),{success:!1,error:"EmailJS not configured"};try{const i=r.map(c=>c.product_name).join(", "),o={to_email:n.email,to_name:n.full_name,booking_id:t.id,equipment_list:i,start_date:new Date(t.start_date).toLocaleDateString(),end_date:new Date(t.end_date).toLocaleDateString(),approved_by:s.full_name,approved_at:new Date().toLocaleString(),return_instructions:"Please return equipment on time to avoid late fees."},l=await Li.send(pn.serviceId,pn.templates.bookingApproved,o);return console.log("Booking approval email sent:",l),{success:!0,response:l}}catch(i){return console.error("Failed to send booking approval email:",i),{success:!1,error:i.message}}}async sendBookingDenied(t,n,r,s,i){if(!this.isConfigured())return console.warn("EmailJS not configured. Skipping email notification."),{success:!1,error:"EmailJS not configured"};try{const o=r.map(d=>d.product_name).join(", "),l={to_email:n.email,to_name:n.full_name,booking_id:t.id,equipment_list:o,start_date:new Date(t.start_date).toLocaleDateString(),end_date:new Date(t.end_date).toLocaleDateString(),denied_by:s.full_name,denied_at:new Date().toLocaleString(),denial_reason:i||"No reason provided",support_email:"equipment@ncad.ie"},c=await Li.send(pn.serviceId,pn.templates.bookingDenied,l);return console.log("Booking denial email sent:",c),{success:!0,response:c}}catch(o){return console.error("Failed to send booking denial email:",o),{success:!1,error:o.message}}}async sendOverdueReminder(t,n,r,s){if(!this.isConfigured())return console.warn("EmailJS not configured. Skipping email notification."),{success:!1,error:"EmailJS not configured"};try{const i=r.map(c=>c.product_name).join(", "),o={to_email:n.email,to_name:n.full_name,booking_id:t.id,equipment_list:i,end_date:new Date(t.end_date).toLocaleDateString(),days_overdue:s,late_fee_warning:s>7?"Late fees may apply.":"",return_location:"Equipment Store, Building A",support_email:"equipment@ncad.ie"},l=await Li.send(pn.serviceId,pn.templates.bookingOverdue,o);return console.log("Overdue reminder email sent:",l),{success:!0,response:l}}catch(i){return console.error("Failed to send overdue reminder email:",i),{success:!1,error:i.message}}}async sendBookingReminder(t,n,r,s){if(!this.isConfigured())return console.warn("EmailJS not configured. Skipping email notification."),{success:!1,error:"EmailJS not configured"};try{const i=r.map(c=>c.product_name).join(", "),o={to_email:n.email,to_name:n.full_name,booking_id:t.id,equipment_list:i,start_date:new Date(t.start_date).toLocaleDateString(),end_date:new Date(t.end_date).toLocaleDateString(),days_until_pickup:s,pickup_location:"Equipment Store, Building A",pickup_hours:"Mon-Fri: 9am-5pm"},l=await Li.send(pn.serviceId,pn.templates.bookingReminder,o);return console.log("Booking reminder email sent:",l),{success:!0,response:l}}catch(i){return console.error("Failed to send booking reminder email:",i),{success:!1,error:i.message}}}updateConfig(t){t.serviceId&&(pn.serviceId=t.serviceId),t.publicKey&&(pn.publicKey=t.publicKey,Li.init(t.publicKey)),t.templates&&(pn.templates={...pn.templates,...t.templates})}getConfig(){return{serviceId:pn.serviceId,publicKey:pn.publicKey,templates:{...pn.templates},isConfigured:this.isConfigured()}}}const Hn=new O4;function M4({equipmentId:e,selectedStartDate:t,selectedEndDate:n}){const[r,s]=T.useState([]),[i,o]=T.useState(new Date);T.useEffect(()=>{e&&l()},[e,i]);const l=async()=>{try{const R=(await jn.getAll({equipment_id:e,status:"approved"})).bookings||[];s(R)}catch(S){console.error("Failed to load bookings:",S),s([])}},c=S=>{const R=S.getFullYear(),W=S.getMonth(),U=new Date(R,W,1),D=new Date(R,W+1,0).getDate(),z=U.getDay();return{daysInMonth:D,startDayOfWeek:z,year:R,month:W}},d=S=>{const R=S.toISOString().split("T")[0];return r.some(W=>{const U=new Date(W.start_date),_=new Date(W.end_date),D=new Date(R);return D>=U&&D<=_})},h=S=>{if(!t||!n)return!1;const R=S.toISOString().split("T")[0],W=new Date(t),U=new Date(n),_=new Date(R);return _>=W&&_<=U},m=S=>{const R=new Date;return R.setHours(0,0,0,0),S<R},{daysInMonth:g,startDayOfWeek:p,year:j,month:N}=c(i),C=()=>{o(new Date(j,N-1))},y=()=>{o(new Date(j,N+1))},b=["January","February","March","April","May","June","July","August","September","October","November","December"],w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return a.jsxs("div",{className:"booking-conflict-calendar","data-testid":"conflict-calendar",children:[a.jsxs("div",{className:"calendar-header",children:[a.jsx("button",{onClick:C,className:"btn btn-secondary btn-sm","aria-label":"Previous month","data-testid":"prev-month-btn",children:"Previous"}),a.jsxs("h3",{children:[b[N]," ",j]}),a.jsx("button",{onClick:y,className:"btn btn-secondary btn-sm","aria-label":"Next month","data-testid":"next-month-btn",children:"Next"})]}),a.jsxs("div",{className:"calendar-legend",children:[a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-color available"}),a.jsx("span",{children:"Available"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-color booked"}),a.jsx("span",{children:"Booked"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-color selected"}),a.jsx("span",{children:"Your Selection"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-color past"}),a.jsx("span",{children:"Past"})]})]}),a.jsxs("div",{className:"calendar-grid",children:[a.jsx("div",{className:"calendar-days-header",children:w.map(S=>a.jsx("div",{className:"calendar-day-name",children:S},S))}),a.jsxs("div",{className:"calendar-days",children:[Array.from({length:p}).map((S,R)=>a.jsx("div",{className:"calendar-day empty"},`empty-${R}`)),Array.from({length:g}).map((S,R)=>{const W=R+1,U=new Date(j,N,W),_=d(U),D=h(U),z=m(U),L=["calendar-day",_&&"booked",D&&"selected",z&&"past"].filter(Boolean).join(" ");return a.jsx("div",{className:L,"data-testid":`calendar-day-${W}`,"aria-label":`${b[N]} ${W}, ${j}${_?" - Booked":""}${D?" - Selected":""}`,children:W},W)})]})]}),a.jsx("div",{className:"calendar-info",children:a.jsx("p",{children:"This calendar shows when this equipment is already booked. Select dates that are available."})})]})}function B4({selectedStartDate:e,selectedEndDate:t,onStartDateChange:n,onEndDateChange:r,minDate:s=new Date,unavailableDates:i=[],mode:o="range"}){const[l,c]=T.useState(new Date),[d,h]=T.useState(!0),[m,g]=T.useState(!1),[p,j]=T.useState(null),N=T.useRef(null),C=T.useRef(0),y=oe=>{const E=oe.getFullYear(),q=oe.getMonth(),G=new Date(E,q,1),te=new Date(E,q+1,0).getDate(),ce=G.getDay();return{daysInMonth:te,startingDayOfWeek:ce,year:E,month:q}},{daysInMonth:b,startingDayOfWeek:w,year:S,month:R}=y(l),W=()=>{c(new Date(l.getFullYear(),l.getMonth()-1,1))},U=()=>{c(new Date(l.getFullYear(),l.getMonth()+1,1))},_=oe=>{C.current=oe.touches[0].clientX},D=oe=>{const E=oe.changedTouches[0].clientX,q=C.current-E;q>50?U():q<-50&&W()},z=oe=>i.some(E=>E.toDateString()===oe.toDateString()),L=oe=>{const E=new Date(s);return E.setHours(0,0,0,0),oe.setHours(0,0,0,0),oe<E},O=oe=>{if(!e)return!1;const E=oe.toDateString(),q=e.toDateString();if(o==="single"||!t)return E===q;const G=t.toDateString();return E===q||E===G},P=oe=>!e||!t||o==="single"?!1:oe>e&&oe<t,A=oe=>{const E=new Date(S,R,oe);if(!(L(E)||z(E))){if(o==="single"){n(E);return}d||!e?(n(E),r(null),h(!1)):(E<e?(r(e),n(E)):r(E),h(!0))}},Z=oe=>{if(o!=="range")return;const E=new Date(S,R,oe);L(E)||z(E)||(g(!0),j(E),n(E),r(null))},re=oe=>{if(!m||o!=="range")return;const E=new Date(S,R,oe);L(E)||z(E)||(E>p?r(E):(n(E),r(p)))},ie=()=>{g(!1),j(null),h(!0)};T.useEffect(()=>(document.addEventListener("mouseup",ie),()=>document.removeEventListener("mouseup",ie)),[]);const K=oe=>{const E=new Date(S,R,oe),q=["calendar-day"];return L(E)&&q.push("disabled"),z(E)&&q.push("unavailable"),O(E)&&q.push("selected"),P(E)&&q.push("in-range"),E.toDateString()===new Date().toDateString()&&q.push("today"),q.join(" ")},ne=()=>{const oe=[];for(let E=0;E<w;E++)oe.push(a.jsx("div",{className:"calendar-day empty"},`empty-${E}`));for(let E=1;E<=b;E++)oe.push(a.jsx("button",{type:"button",className:K(E),onClick:()=>A(E),onMouseDown:()=>Z(E),onMouseEnter:()=>re(E),disabled:L(new Date(S,R,E))||z(new Date(S,R,E)),"data-testid":`calendar-day-${E}`,"aria-label":`${R+1}/${E}/${S}`,children:E},E));return oe},pe=["January","February","March","April","May","June","July","August","September","October","November","December"];return a.jsxs("div",{className:"mobile-calendar",ref:N,onTouchStart:_,onTouchEnd:D,"data-testid":"mobile-calendar",children:[a.jsxs("div",{className:"calendar-header",children:[a.jsx("button",{type:"button",className:"calendar-nav-btn",onClick:W,"aria-label":"Previous month","data-testid":"prev-month-btn",children:""}),a.jsxs("h3",{className:"calendar-month-year",children:[pe[R]," ",S]}),a.jsx("button",{type:"button",className:"calendar-nav-btn",onClick:U,"aria-label":"Next month","data-testid":"next-month-btn",children:""})]}),a.jsxs("div",{className:"calendar-weekdays",children:[a.jsx("div",{className:"calendar-weekday",children:"Sun"}),a.jsx("div",{className:"calendar-weekday",children:"Mon"}),a.jsx("div",{className:"calendar-weekday",children:"Tue"}),a.jsx("div",{className:"calendar-weekday",children:"Wed"}),a.jsx("div",{className:"calendar-weekday",children:"Thu"}),a.jsx("div",{className:"calendar-weekday",children:"Fri"}),a.jsx("div",{className:"calendar-weekday",children:"Sat"})]}),a.jsx("div",{className:"calendar-grid","data-testid":"calendar-grid",children:ne()}),o==="range"&&a.jsxs("div",{className:"calendar-hint",children:[d&&!e&&a.jsx("span",{children:"Tap to select start date"}),!d&&e&&!t&&a.jsx("span",{children:"Tap to select end date"}),e&&t&&a.jsx("span",{children:"Drag to select range or tap to change"})]})]})}function C5({equipment:e,onClose:t,onSuccess:n}){const{user:r}=wr(),[s,i]=T.useState(""),[o,l]=T.useState(""),[c,d]=T.useState(null),[h,m]=T.useState(null),[g,p]=T.useState(""),[j,N]=T.useState(""),[C,y]=T.useState({}),[b,w]=T.useState(!1),[S,R]=T.useState(window.innerWidth<=768),W=()=>{var P;return r?r.role==="student"||r.role==="department_admin"||r.role==="master_admin"?!0:r.role==="staff"?((P=r.view_permissions)==null?void 0:P.can_create_bookings)!==!1:!0:!1},U=()=>{const P={};return s||(P.startDate="Start date is required"),o?s&&o<s&&(P.endDate="End date must be after start date"):P.endDate="End date is required",e.requires_justification&&(!g||g.trim().length<10)&&(P.purpose="Purpose must be at least 10 characters"),P},_=async P=>{P.preventDefault(),N(""),y({});const A=U();if(Object.keys(A).length>0){y(A);return}w(!0);try{const Z=await Xp.createBooking({equipment_id:e.id,start_date:s,end_date:o,purpose:g,user_id:r.id});try{const re=[e],ie=await Hn.sendBookingConfirmation(Z,r,re);!ie.success&&Hn.isConfigured()&&console.warn("Email notification failed, but booking was created:",ie.error)}catch(re){console.error("Failed to send booking confirmation email:",re)}n(Z),t()}catch(Z){N(Z.message)}finally{w(!1)}},D=new Date().toISOString().split("T")[0],z=P=>{d(P),i(O(P))},L=P=>{m(P),P&&l(O(P))},O=P=>{if(!P)return"";const A=P.getFullYear(),Z=String(P.getMonth()+1).padStart(2,"0"),re=String(P.getDate()).padStart(2,"0");return`${A}-${Z}-${re}`};return W()?a.jsx("div",{className:"modal-overlay",onClick:t,"data-testid":"modal-overlay",children:a.jsxs("div",{className:"modal-content modal",onClick:P=>P.stopPropagation(),"data-testid":"booking-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Book Equipment"}),a.jsx("button",{className:"modal-close",onClick:t,"aria-label":"Close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"equipment-summary",children:[a.jsx("h3",{children:e.product_name}),a.jsxs("p",{children:[e.category," - ",e.department]})]}),e.isCrossDepartment&&a.jsxs("div",{className:"cross-department-notice",style:{marginTop:"1rem",marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#e3f2fd",border:"2px solid #2196f3",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.75rem"},children:[a.jsx("span",{style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:""}),a.jsx("h4",{style:{margin:0,color:"#1976d2",fontSize:"1.1rem"},children:"Cross-Department Equipment"})]}),a.jsxs("p",{style:{margin:"0.5rem 0",color:"#333",fontSize:"0.95rem"},children:[a.jsx("strong",{children:"From:"})," ",e.lendingDepartment]}),a.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #bbdefb"},children:[a.jsx("h5",{style:{margin:"0 0 0.5rem 0",color:"#1976d2",fontSize:"0.9rem"},children:" Collection Instructions"}),a.jsx("p",{style:{margin:0,fontSize:"0.875rem",lineHeight:"1.5",color:"#333",whiteSpace:"pre-wrap"},children:e.collectionInstructions})]}),e.crossDeptTerms&&a.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",backgroundColor:"#fff8e1",borderRadius:"4px",border:"1px solid #ffe082"},children:[a.jsx("h5",{style:{margin:"0 0 0.5rem 0",color:"#f57c00",fontSize:"0.9rem"},children:" Terms & Conditions"}),a.jsx("p",{style:{margin:0,fontSize:"0.875rem",lineHeight:"1.5",color:"#333",whiteSpace:"pre-wrap"},children:e.crossDeptTerms})]})]}),a.jsxs("form",{onSubmit:_,"data-testid":"booking-form",noValidate:!0,children:[S?a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Select Dates"}),a.jsx(B4,{selectedStartDate:c,selectedEndDate:h,onStartDateChange:z,onEndDateChange:L,minDate:new Date,mode:"range"}),(C.startDate||C.endDate)&&a.jsx("div",{className:"field-error",role:"alert",children:C.startDate||C.endDate})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"start-date",children:"Start Date"}),a.jsx("input",{id:"start-date",name:"startDate",type:"date",value:s,onChange:P=>i(P.target.value),min:D,required:!0,"data-testid":"start-date-input",className:C.startDate?"error":""}),C.startDate&&a.jsx("div",{className:"field-error",role:"alert",children:C.startDate})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"end-date",children:"End Date"}),a.jsx("input",{id:"end-date",name:"endDate",type:"date",value:o,onChange:P=>l(P.target.value),min:s||D,required:!0,"data-testid":"end-date-input",className:C.endDate?"error":""}),C.endDate&&a.jsx("div",{className:"field-error",role:"alert",children:C.endDate})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"purpose",children:["Purpose/Justification",e.requires_justification&&a.jsx("span",{className:"required",children:" *Required (min 10 chars)"})]}),a.jsx("textarea",{id:"purpose",name:"purpose",value:g,onChange:P=>p(P.target.value),placeholder:"Describe how you will use this equipment...",rows:"4",required:e.requires_justification,"data-testid":"purpose-input",className:C.purpose?"error":""}),C.purpose&&a.jsx("div",{className:"field-error",role:"alert",children:C.purpose})]}),s&&o&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Booking Availability Calendar"}),a.jsx(M4,{equipmentId:e.id,selectedStartDate:s,selectedEndDate:o})]}),j&&a.jsx("div",{className:"error-message",role:"alert",children:j}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary","data-testid":"cancel-booking-btn",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,"data-testid":"submit-booking-btn",children:b?"Creating Booking...":"Create Booking"})]})]})]})]})}):a.jsx("div",{className:"modal-overlay",onClick:t,"data-testid":"modal-overlay",children:a.jsxs("div",{className:"modal-content modal",onClick:P=>P.stopPropagation(),"data-testid":"booking-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Access Restricted"}),a.jsx("button",{className:"modal-close",onClick:t,"aria-label":"Close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"restriction-message",style:{textAlign:"center",padding:"2rem",background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"8px"},children:[a.jsx("h3",{style:{color:"#856404",marginBottom:"1rem"},children:"Cannot Create Booking"}),a.jsx("p",{style:{color:"#856404",marginBottom:"0.5rem"},children:"You do not have permission to create equipment bookings."}),a.jsx("p",{style:{color:"#856404"},children:"Please contact your department admin to request access."})]}),a.jsx("div",{className:"modal-actions",style:{marginTop:"1.5rem",display:"flex",justifyContent:"center"},children:a.jsx("button",{onClick:t,className:"btn btn-secondary",children:"Close"})})]})]})})}const U4={camera:"",lens:"",lighting:"",audio:"",video:"",tripod:"",computer:"",software:"",storage:"",accessory:"",default:""},z4=(e="",t="")=>{const n=`${e} ${t}`.toLowerCase();return n.match(/camera|canon|nikon|sony|dslr|mirrorless/)?"camera":n.match(/lens|mm|f\/|zoom|prime|telephoto|wide/)?"lens":n.match(/light|led|softbox|reflector|flash|strobe/)?"lighting":n.match(/mic|microphone|audio|recorder|sound|boom/)?"audio":n.match(/video|camcorder|recorder/)?"video":n.match(/tripod|stand|mount|rig|gimbal/)?"tripod":n.match(/computer|laptop|mac|pc|imac/)?"computer":n.match(/software|license|adobe|final cut/)?"software":n.match(/sd card|memory|hard drive|ssd|storage/)?"storage":n.match(/cable|adapter|charger|battery|bag|case/)?"accessory":"default"};function A5({equipment:e,size:t="medium",showCategory:n=!1}){const[r,s]=T.useState(!1),[i,o]=T.useState(!0),l=z4(e==null?void 0:e.product_name,e==null?void 0:e.description),c=U4[l],d=(e==null?void 0:e.link_to_image)&&!r,h=()=>{s(!0),o(!1)},m=()=>{o(!1)};return a.jsx("div",{className:`equipment-image equipment-image--${t}`,children:d?a.jsxs(a.Fragment,{children:[i&&a.jsx("div",{className:"equipment-image-skeleton",children:a.jsx("span",{className:"equipment-image-placeholder-icon",children:c})}),a.jsx("img",{src:e.link_to_image,alt:e.product_name,onError:h,onLoad:m,loading:"lazy",className:i?"equipment-image-hidden":"equipment-image-loaded"})]}):a.jsxs("div",{className:"equipment-image-placeholder",children:[a.jsx("span",{className:"equipment-image-placeholder-icon",children:c}),n&&a.jsx("span",{className:"equipment-image-category",children:l})]})})}function $4({equipment:e,onClose:t,onBookClick:n}){return e?a.jsx("div",{className:"modal-overlay",onClick:t,"data-testid":"modal-overlay",children:a.jsxs("div",{className:"modal-content equipment-details",onClick:r=>r.stopPropagation(),"data-testid":"equipment-details",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:e.product_name}),a.jsx("button",{className:"btn-close",onClick:t,"aria-label":"Close details",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx(A5,{equipment:e,size:"detail",showCategory:!0}),a.jsxs("div",{className:"equipment-details-info",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Category:"}),a.jsx("span",{className:"value",children:e.category})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Department:"}),a.jsx("span",{className:"value",children:e.department})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Status:"}),a.jsx("span",{className:`status status-${e.status}`,children:e.status})]}),a.jsxs("div",{className:"detail-row detail-description",children:[a.jsx("span",{className:"label",children:"Description:"}),a.jsx("p",{className:"value",children:e.description})]}),e.link_to_image&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Manufacturer Link:"}),a.jsx("a",{href:e.link_to_image,target:"_blank",rel:"noopener noreferrer",children:"View Product Info"})]})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"btn btn-secondary",onClick:t,children:"Close"}),e.status==="available"&&n&&a.jsx("button",{className:"btn btn-primary",onClick:()=>{t(),n(e)},"data-testid":"book-from-details-btn",children:"Book Equipment"})]})]})}):null}function fh({onSearch:e,placeholder:t="Search...",debounceMs:n=300,ariaLabel:r="Search"}){const[s,i]=T.useState(""),o=T.useRef(null);T.useEffect(()=>(o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{e(s)},n),()=>{o.current&&clearTimeout(o.current)}),[s,n,e]);const l=()=>{i(""),e("")};return a.jsxs("div",{className:"search-bar",role:"search",children:[a.jsx("label",{htmlFor:"search-input",className:"visually-hidden",children:r}),a.jsx("input",{id:"search-input",type:"text",value:s,onChange:c=>i(c.target.value),placeholder:t,className:"search-input","aria-label":r,"data-testid":"search-input"}),s&&a.jsx("button",{onClick:l,className:"btn-clear-search","aria-label":"Clear search","data-testid":"clear-search-btn",children:"Clear"})]})}function Lc({currentPage:e,totalItems:t,itemsPerPage:n=20,onPageChange:r,loading:s=!1}){const i=Math.ceil(t/n);if(i<=1)return null;const o=(e-1)*n+1,l=Math.min(e*n,t),c=()=>{e>1&&r(e-1)},d=()=>{e<i&&r(e+1)},h=g=>{r(g)},m=()=>{const g=[];if(i<=5)for(let j=1;j<=i;j++)g.push(j);else{let j=Math.max(1,e-2),N=Math.min(i,e+2);e<=3?N=5:e>=i-2&&(j=i-5+1),j>1&&(g.push(1),j>2&&g.push("..."));for(let C=j;C<=N;C++)g.push(C);N<i&&(N<i-1&&g.push("..."),g.push(i))}return g};return a.jsxs("div",{className:"pagination",role:"navigation","aria-label":"Pagination",children:[a.jsxs("div",{className:"pagination-info",children:["Showing ",o," to ",l," of ",t," items"]}),a.jsxs("div",{className:"pagination-controls",children:[a.jsx("button",{onClick:c,disabled:e===1||s,className:"btn btn-secondary btn-sm","aria-label":"Previous page","data-testid":"pagination-prev",children:"Previous"}),a.jsx("div",{className:"pagination-pages",children:m().map((g,p)=>g==="..."?a.jsx("span",{className:"pagination-ellipsis",children:"..."},`ellipsis-${p}`):a.jsx("button",{onClick:()=>h(g),disabled:s,className:`btn btn-sm ${e===g?"btn-primary":"btn-secondary"}`,"aria-label":`Page ${g}`,"aria-current":e===g?"page":void 0,"data-testid":`pagination-page-${g}`,children:g},g))}),a.jsx("button",{onClick:d,disabled:e===i||s,className:"btn btn-secondary btn-sm","aria-label":"Next page","data-testid":"pagination-next",children:"Next"})]}),a.jsx("div",{className:"pagination-mobile",children:e<i&&a.jsx("button",{onClick:d,disabled:s,className:"btn btn-primary btn-block","data-testid":"load-more-btn",children:s?"Loading...":"Load More"})})]})}function Ec({type:e="card",count:t=3}){const n=()=>{switch(e){case"card":return a.jsxs("div",{className:"skeleton-card",children:[a.jsx("div",{className:"skeleton-image"}),a.jsxs("div",{className:"skeleton-content",children:[a.jsx("div",{className:"skeleton-title"}),a.jsx("div",{className:"skeleton-text"}),a.jsx("div",{className:"skeleton-text",style:{width:"70%"}}),a.jsx("div",{className:"skeleton-button"})]})]});case"table-row":return a.jsxs("tr",{className:"skeleton-row",children:[a.jsx("td",{children:a.jsx("div",{className:"skeleton-text"})}),a.jsx("td",{children:a.jsx("div",{className:"skeleton-text",style:{width:"60%"}})}),a.jsx("td",{children:a.jsx("div",{className:"skeleton-text",style:{width:"80%"}})}),a.jsx("td",{children:a.jsx("div",{className:"skeleton-text",style:{width:"50%"}})}),a.jsx("td",{children:a.jsx("div",{className:"skeleton-button"})})]});case"list-item":return a.jsxs("div",{className:"skeleton-list-item",children:[a.jsx("div",{className:"skeleton-text"}),a.jsx("div",{className:"skeleton-text",style:{width:"80%"}})]});default:return a.jsxs("div",{className:"skeleton-block",children:[a.jsx("div",{className:"skeleton-text"}),a.jsx("div",{className:"skeleton-text",style:{width:"90%"}}),a.jsx("div",{className:"skeleton-text",style:{width:"75%"}})]})}};return a.jsx("div",{className:"loading-skeleton","aria-busy":"true","aria-label":"Loading content",children:Array.from({length:t}).map((r,s)=>a.jsx("div",{children:n()},s))})}function W4({onFilterChange:e}){const[t,n]=T.useState("all"),[r,s]=T.useState(""),i=l=>{n(l),e(l==="custom"&&r?{type:"custom",date:r}:{type:l})},o=l=>{s(l),l&&(n("custom"),e({type:"custom",date:l}))};return a.jsxs("div",{className:"availability-filter",role:"group","aria-label":"Filter by availability",children:[a.jsx("div",{className:"filter-label",children:a.jsx("strong",{children:"Availability:"})}),a.jsxs("div",{className:"filter-options",children:[a.jsx("button",{onClick:()=>i("all"),className:t==="all"?"btn btn-primary btn-sm":"btn btn-secondary btn-sm","data-testid":"filter-all",children:"All Equipment"}),a.jsx("button",{onClick:()=>i("available"),className:t==="available"?"btn btn-primary btn-sm":"btn btn-secondary btn-sm","data-testid":"filter-available-now",children:"Available Now"}),a.jsx("button",{onClick:()=>i("custom"),className:t==="custom"?"btn btn-primary btn-sm":"btn btn-secondary btn-sm","data-testid":"filter-custom-date",children:"Available on Date"})]}),t==="custom"&&a.jsxs("div",{className:"custom-date-picker",children:[a.jsx("label",{htmlFor:"availability-date",className:"visually-hidden",children:"Select date"}),a.jsx("input",{id:"availability-date",type:"date",value:r,onChange:l=>o(l.target.value),min:new Date().toISOString().split("T")[0],className:"date-input","data-testid":"custom-date-input"})]})]})}function fg({onRefresh:e,children:t}){const[n,r]=T.useState(0),[s,i]=T.useState(!1),[o,l]=T.useState(!1),[c,d]=T.useState(0),h=T.useRef(null),m=80,g=120,p=w=>{var R;(((R=h.current)==null?void 0:R.scrollTop)||window.scrollY)===0&&!o&&(d(w.touches[0].clientY),i(!0))},j=w=>{if(!s||o)return;const R=w.touches[0].clientY-c;if(R>0){R>10&&w.preventDefault();const U=Math.min(R*.5,g);r(U)}},N=async()=>{if(s)if(i(!1),n>=m&&!o){l(!0),window.navigator.vibrate&&window.navigator.vibrate(50);try{await e()}catch(w){console.error("Refresh failed:",w)}finally{setTimeout(()=>{l(!1),r(0)},500)}}else r(0)},C=()=>o?360:n/m*180,y=()=>o?1:Math.min(n/m,1),b=()=>o?"Refreshing...":n>=m?"Release to refresh":n>0?"Pull to refresh":"";return a.jsxs("div",{ref:h,className:"pull-to-refresh-container",onTouchStart:p,onTouchMove:j,onTouchEnd:N,"data-testid":"pull-to-refresh-container",children:[a.jsxs("div",{className:`pull-indicator ${o?"refreshing":""}`,style:{transform:`translateY(${n}px)`,opacity:y(),transition:s?"none":"transform 0.3s ease-out, opacity 0.3s ease-out"},"data-testid":"pull-indicator",children:[a.jsx("div",{className:`spinner ${o?"spinning":""}`,style:{transform:`rotate(${C()}deg)`,transition:o?"none":"transform 0.2s ease-out"},children:a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"3",strokeLinecap:"round"})})}),a.jsx("span",{className:"status-message",children:b()})]}),a.jsx("div",{className:"pull-to-refresh-content",style:{transform:`translateY(${n}px)`,transition:s?"none":"transform 0.3s ease-out"},children:t})]})}async function D5(e,t=!0){try{const n={department_id:e};return t&&(n.is_active=!0),(await is.getAll(n)).kits||[]}catch(n){throw console.error("Error fetching equipment kits:",n),n}}async function pg(e){try{return(await is.getById(e)).kit}catch(t){throw console.error("Error fetching kit:",t),t}}async function H4(e){try{return(await is.create(e)).kit}catch(t){throw console.error("Error creating kit:",t),t}}async function V4(e,t){try{return(await is.update(e,t)).kit}catch(n){throw console.error("Error updating kit:",n),n}}async function G4(e){try{await is.delete(e)}catch(t){throw console.error("Error deleting kit:",t),t}}async function L5(e,t,n){try{const r=await pg(e),i=(await jn.getAll({status:"approved",start_date:t,end_date:n})).bookings||[],o=[],l=r.equipment_ids||[];for(const c of l){const d=i.filter(h=>{if(h.equipment_id!==c)return!1;const m=new Date(h.start_date),g=new Date(h.end_date),p=new Date(t),j=new Date(n);return p<=g&&j>=m});if(d.length>0){const h=r.equipment.find(m=>m.id===c);o.push({equipment:h,conflictingBookings:d})}}return{available:o.length===0,unavailableItems:o}}catch(r){throw console.error("Error checking kit availability:",r),r}}async function K4(e){const{kitId:t,userId:n,startDate:r,endDate:s,justification:i}=e;try{if(!(await L5(t,r,s)).available)throw new Error("Some equipment in this kit is not available for the selected dates");const l=await pg(t),c=[],d=l.equipment_ids||[];for(const h of d){const m=await jn.create({equipment_id:h,user_id:n,start_date:r,end_date:s,justification:i||`Part of kit booking: ${l.name}`,kit_id:t});m.booking&&c.push(m.booking.id)}return{kit_id:t,booking_ids:c,status:"pending",message:`Created ${c.length} bookings for kit ${l.name}`}}catch(o){throw console.error("Error booking kit:",o),o}}function Z4({onBookingSuccess:e}){const{user:t}=en(),[n,r]=T.useState([]),[s,i]=T.useState(null),[o,l]=T.useState(null),[c,d]=T.useState(!0),[h,m]=T.useState({start:"",end:""}),[g,p]=T.useState(null),[j,N]=T.useState(!1),[C,y]=T.useState(!1),[b,w]=T.useState("");T.useEffect(()=>{S()},[]);const S=async()=>{d(!0);try{const _=await D5(t.department,!0);r(_)}catch(_){console.error("Failed to load kits:",_)}finally{d(!1)}},R=async _=>{i(_),m({start:"",end:""}),p(null),w("");try{const D=await pg(_.id);l(D)}catch(D){console.error("Failed to load kit details:",D)}},W=async()=>{if(!h.start||!h.end){alert("Please select both start and end dates");return}N(!0);try{const _=await L5(s.id,h.start,h.end);p(_)}catch(_){console.error("Failed to check availability:",_),alert("Failed to check availability")}finally{N(!1)}},U=async()=>{if(!g||!g.available){alert("Please check availability first");return}if(b.trim().length<30){alert("Please provide a justification (minimum 30 characters)");return}y(!0);try{await K4({kitId:s.id,userId:t.id,startDate:h.start,endDate:h.end,justification:b.trim()}),alert(`Kit booked successfully! ${o.equipment_ids.length} individual bookings created. Awaiting admin approval.`),i(null),l(null),m({start:"",end:""}),p(null),w(""),e&&e()}catch(_){console.error("Failed to book kit:",_),alert(_.message||"Failed to book kit")}finally{y(!1)}};return c?a.jsx("div",{className:"kit-browser",children:a.jsx("p",{children:"Loading equipment kits..."})}):n.length===0?a.jsx("div",{className:"kit-browser",children:a.jsx("div",{className:"empty-state-small",children:a.jsx("p",{children:"No equipment kits available for your department yet."})})}):a.jsxs("div",{className:"kit-browser",children:[a.jsx("h3",{children:"Equipment Kits"}),a.jsx("p",{className:"kit-browser-subtitle",children:"Book pre-configured equipment bundles for common use cases"}),a.jsx("div",{className:"kits-list",children:n.map(_=>a.jsxs("div",{className:`kit-item ${(s==null?void 0:s.id)===_.id?"selected":""}`,onClick:()=>R(_),children:[_.image_url&&a.jsx("div",{className:"kit-item-image",children:a.jsx("img",{src:_.image_url,alt:_.name})}),a.jsxs("div",{className:"kit-item-info",children:[a.jsx("h4",{children:_.name}),a.jsx("p",{children:_.description}),a.jsxs("small",{children:[_.equipment_ids.length," items in this kit"]})]})]},_.id))}),s&&o&&a.jsxs("div",{className:"kit-details-panel",children:[a.jsxs("h4",{children:["Book: ",s.name]}),a.jsxs("div",{className:"kit-equipment",children:[a.jsx("strong",{children:"Equipment in this kit:"}),a.jsx("ul",{children:o.equipment.map(_=>a.jsxs("li",{children:[_.product_name," (",_.tracking_number,") - ",a.jsx("span",{className:`status-${_.status}`,children:_.status})]},_.id))})]}),a.jsxs("div",{className:"booking-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Start Date"}),a.jsx("input",{type:"date",value:h.start,onChange:_=>m({...h,start:_.target.value}),min:new Date().toISOString().split("T")[0]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"End Date"}),a.jsx("input",{type:"date",value:h.end,onChange:_=>m({...h,end:_.target.value}),min:h.start||new Date().toISOString().split("T")[0]})]})]}),a.jsx("button",{onClick:W,className:"btn btn-secondary btn-sm",disabled:!h.start||!h.end||j,children:j?"Checking...":"Check Availability"}),g&&a.jsx("div",{className:`availability-result ${g.available?"available":"unavailable"}`,children:g.available?a.jsxs("p",{children:[a.jsx("strong",{children:" All equipment available!"})," You can proceed with booking."]}):a.jsxs("div",{children:[a.jsx("p",{children:a.jsx("strong",{children:" Some equipment unavailable"})}),a.jsx("ul",{children:g.unavailableItems.map((_,D)=>a.jsxs("li",{children:[_.equipment.product_name," - Booked ",_.conflictingBookings.length," time(s)"]},D))}),a.jsx("p",{className:"suggestion",children:"Please select different dates or book individual items instead."})]})}),(g==null?void 0:g.available)&&a.jsxs("div",{className:"justification-section",children:[a.jsx("label",{children:"Justification *"}),a.jsx("textarea",{value:b,onChange:_=>w(_.target.value),placeholder:"Explain why you need this equipment kit (minimum 30 characters)...",rows:"3",minLength:"30"}),a.jsxs("small",{className:b.length<30?"text-error":"text-success",children:[b.length," / 30 characters minimum"]})]}),a.jsxs("div",{className:"booking-actions",children:[a.jsx("button",{onClick:()=>{i(null),l(null),p(null)},className:"btn btn-secondary",children:"Cancel"}),(g==null?void 0:g.available)&&a.jsx("button",{onClick:U,className:"btn btn-primary",disabled:C||b.length<30,children:C?"Booking...":`Book Kit (${o.equipment_ids.length} items)`})]})]})]})]})}async function ph(){try{return(await Jl.getAll()).departments||[]}catch(e){throw console.error("Failed to get departments:",e),e}}async function Y4(e,t,n=null,r="",s=null){try{const i={id:`ida${Date.now()}`,from_sub_area_id:e,to_sub_area_id:t,granted_by:s,granted_at:new Date().toISOString(),expires_at:n,is_active:!0,notes:r||""};return await Te.insert("interdisciplinary_access",i),i}catch(i){throw console.error("Failed to grant access:",i),i}}async function J4(e,t,n,r){try{const s={id:`ar${Date.now()}`,requesting_admin_id:e,from_sub_area_id:t,to_sub_area_id:n,status:"pending",reason:r||"",requested_at:new Date().toISOString(),reviewed_by:null,reviewed_at:null,notes:null};return await Te.insert("access_requests",s),s}catch(s){throw console.error("Failed to create access request:",s),s}}async function X4(e=null){try{let t=await Te.query("access_requests");return e&&(t=t.filter(n=>n.status===e)),t}catch(t){throw console.error("Failed to get access requests:",t),t}}async function Q4(e){try{return await Te.query("access_requests",{requesting_admin_id:e})}catch(t){throw console.error("Failed to get department admin requests:",t),t}}async function e3(e,t,n=null){try{const r=await Te.findOne("access_requests",{id:e});if(!r)throw new Error("Access request not found");if(r.status!=="pending")throw new Error("Can only approve pending requests");const s=await Y4(r.from_sub_area_id,r.to_sub_area_id,n,`Created from access request ${e}`,t);return await Te.update("access_requests",{id:e},{status:"approved",reviewed_by:t,reviewed_at:new Date().toISOString(),notes:`Approved - interdisciplinary access grant created (${s.id})`}),{request:await Te.findOne("access_requests",{id:e}),grant:s}}catch(r){throw console.error("Failed to approve access request:",r),r}}async function t3(e,t,n){try{const r=await Te.findOne("access_requests",{id:e});if(!r)throw new Error("Access request not found");if(r.status!=="pending")throw new Error("Can only deny pending requests");return await Te.update("access_requests",{id:e},{status:"denied",reviewed_by:t,reviewed_at:new Date().toISOString(),notes:n||"Request denied"}),await Te.findOne("access_requests",{id:e})}catch(r){throw console.error("Failed to deny access request:",r),r}}async function E5(e){try{const t=await Dc.getByKey(e);return t.setting?t.setting.value:null}catch(t){throw console.error("Error fetching system setting:",t),t}}async function n3(){try{return(await Dc.getAll()).settings||[]}catch(e){throw console.error("Error fetching system settings:",e),e}}async function r3(e,t,n=""){try{return(await Dc.update(e,t,n)).setting}catch(r){throw console.error("Error updating system setting:",r),r}}async function a3(){const e=await E5("cross_department_browsing_enabled");return e===!0||e==="true"}async function s3(){const e=await E5("equipment_kits_enabled");return e===!0||e==="true"}function P5(){const{user:e}=en(),[t,n]=T.useState([]),[r,s]=T.useState([]),[i,o]=T.useState(!0),[l,c]=T.useState("all"),[d,h]=T.useState("large"),[m,g]=T.useState(null),[p,j]=T.useState(!1),[N,C]=T.useState(!1),[y,b]=T.useState(!1),[w,S]=T.useState([]),[R,W]=T.useState("all"),[U,_]=T.useState(""),[D,z]=T.useState(1),L=20,[O,P]=T.useState({type:"all"}),{toasts:A,showToast:Z,removeToast:re}=Sn(),[ie,K]=T.useState(!1),[ne,pe]=T.useState("my_department"),[oe,E]=T.useState(!1),q=()=>{var ye;return e?e.role==="student"||e.role==="department_admin"||e.role==="master_admin"?!0:e.role==="staff"?((ye=e.view_permissions)==null?void 0:ye.can_view_catalog)!==!1:!0:!1};T.useEffect(()=>{G()},[]),T.useEffect(()=>{te(),H()},[l,R,ne]);const G=async()=>{try{const ye=await a3();K(ye);const ke=await s3();E(ke)}catch(ye){console.error("Failed to check system settings:",ye)}};T.useEffect(()=>{(async()=>{let ke=t;if(U.trim()){const qe=U.toLowerCase();ke=ke.filter(Ee=>Ee.product_name.toLowerCase().includes(qe)||Ee.description.toLowerCase().includes(qe)||Ee.category.toLowerCase().includes(qe))}O.type==="available"?ke=ke.filter(qe=>qe.status==="available"):O.type==="custom"&&O.date&&(ke=ke.filter(qe=>qe.status==="available")),s(ke),z(1)})()},[t,U,O]);const H=async()=>{try{const ye=await ph();S(ye)}catch(ye){console.error("Failed to load departments:",ye)}},te=async()=>{o(!0);try{const ye={};if(l!=="all"&&(ye.category=l),(e==null?void 0:e.role)==="student"){const Ee=["Moving Image Design","Graphic Design","Illustration"];Ee.includes(e.department)&&(ne==="my_department"||Ee.includes(ne))||(ne==="my_department"||!ie?ye.department=e.department:ne!=="all"&&(ye.department=ne))}else R!=="all"&&(ye.department=R);const qe=(await yr.getAll(ye)).equipment||[];n(qe)}catch(ye){console.error("Failed to load equipment:",ye),n([])}finally{o(!1)}},ce=["all","Camera","Computer","Lighting","Support"],ae=ye=>{g(ye),b(!0)},ee=ye=>{if(ye.status!=="available"){Z("This equipment is not available for booking","error");return}g(ye),j(!0)},ue=()=>{Z("Booking created successfully! Awaiting admin approval.","success"),j(!1)},xe=()=>{Z("Multiple bookings created successfully! Awaiting admin approval.","success"),C(!1),te()},Ne=ye=>{_(ye)},Se=ye=>{z(ye),window.scrollTo({top:0,behavior:"smooth"})},ve=async()=>{await te(),await loadSubAreas()},Q=(D-1)*L,nt=Q+L,Ye=r.slice(Q,nt);return!i&&!q()?a.jsxs("div",{className:"access-restricted",children:[a.jsxs("div",{className:"restriction-message",children:[a.jsx("h2",{children:"Access Restricted"}),a.jsx("p",{children:"You do not have permission to view the equipment catalog."}),a.jsx("p",{children:"Please contact your department admin to request access."})]}),a.jsx("style",{jsx:!0,children:`
          .access-restricted {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 60vh;
            padding: 2rem;
          }
          .restriction-message {
            text-align: center;
            max-width: 500px;
            padding: 2rem;
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
          }
          .restriction-message h2 {
            color: #856404;
            margin-bottom: 1rem;
          }
          .restriction-message p {
            color: #856404;
            margin-bottom: 0.5rem;
          }
        `})]}):a.jsxs("div",{className:"equipment-browse",children:[a.jsxs(fg,{onRefresh:ve,children:[a.jsxs("div",{className:"browse-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[a.jsx("h2",{children:"Browse Equipment"}),a.jsx("button",{onClick:()=>C(!0),className:"btn btn-primary","data-testid":"book-multiple-items-btn",style:{whiteSpace:"nowrap"},children:"Book Multiple Items"})]}),a.jsx(fh,{onSearch:Ne,placeholder:"Search equipment by name, description, or category...",ariaLabel:"Search equipment"}),a.jsx(W4,{onFilterChange:P}),e&&e.role==="student"&&oe&&a.jsx(Z4,{onBookingSuccess:te}),a.jsxs("div",{className:"filter-controls-compact",style:{display:"grid",gridTemplateColumns:w.length>0&&(e==null?void 0:e.role)!=="student"||(e==null?void 0:e.role)==="student"&&ie?"repeat(auto-fit, minmax(200px, 1fr))":"1fr",gap:"1rem",marginTop:"1rem",marginBottom:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"category-filter",style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",fontSize:"0.875rem"},children:"Category"}),a.jsx("select",{id:"category-filter",value:l,onChange:ye=>c(ye.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #ced4da",fontSize:"0.95rem",cursor:"pointer",backgroundColor:"white"},children:ce.map(ye=>a.jsx("option",{value:ye,children:ye==="all"?"All Categories":ye},ye))})]}),(e==null?void 0:e.role)==="student"&&ie&&w.length>0&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"student-department-filter",style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",fontSize:"0.875rem"},children:"Department"}),a.jsxs("select",{id:"student-department-filter",value:ne,onChange:ye=>pe(ye.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #ced4da",fontSize:"0.95rem",cursor:"pointer",backgroundColor:"white"},children:[a.jsxs("option",{value:"my_department",children:["My Department (",e.department,")"]}),a.jsx("option",{value:"all",children:"All Departments"}),w.filter(ye=>ye.id!==e.department).map(ye=>a.jsx("option",{value:ye.id,children:ye.name},ye.id))]})]}),w.length>0&&(e==null?void 0:e.role)!=="student"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"department-filter",style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",fontSize:"0.875rem"},children:"Department"}),a.jsxs("select",{id:"department-filter",value:R,onChange:ye=>W(ye.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #ced4da",fontSize:"0.95rem",cursor:"pointer",backgroundColor:"white"},children:[a.jsx("option",{value:"all",children:"All Departments"}),w.map(ye=>a.jsx("option",{value:ye.id,children:ye.name},ye.id))]})]})]}),a.jsxs("div",{className:"view-toggle",children:[a.jsx("button",{className:`btn-view ${d==="large"?"active":""}`,onClick:()=>h("large"),"data-testid":"view-large-btn",children:"Large Details"}),a.jsx("button",{className:`btn-view ${d==="compact"?"active":""}`,onClick:()=>h("compact"),"data-testid":"view-compact-btn",children:"Compact List"})]}),i?d==="large"?a.jsx("div",{className:"equipment-grid",children:a.jsx(Ec,{type:"card",count:6})}):a.jsxs("table",{className:"equipment-table-compact",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Equipment"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:a.jsx(Ec,{type:"table-row",count:8})})]}):r.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"No equipment found matching your search criteria."})}):d==="large"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"equipment-grid",children:Ye.map(ye=>a.jsxs("div",{className:"equipment-card","data-testid":"equipment-card",children:[a.jsx("div",{onClick:()=>ae(ye),style:{cursor:"pointer"},children:a.jsx(A5,{equipment:ye,size:"medium"})}),a.jsxs("div",{className:"equipment-info",children:[a.jsx("h3",{onClick:()=>ae(ye),style:{cursor:"pointer"},children:ye.product_name}),a.jsx("p",{className:"category",children:ye.category}),a.jsx("p",{className:"description",children:ye.description}),a.jsxs("div",{className:"equipment-meta",children:[a.jsx("span",{className:`status status-${ye.status}`,children:ye.status}),a.jsx("span",{className:"department",children:ye.department})]}),ye.isCrossDepartment&&a.jsxs("div",{className:"cross-department-badge",style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"4px",fontSize:"0.875rem"},children:[a.jsx("strong",{style:{color:"#1976d2"},children:" Cross-Department Access"}),a.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",color:"#666"},children:["From ",ye.lendingDepartment]})]}),ye.isInterdisciplinary&&a.jsxs("div",{className:"interdisciplinary-badge",children:["Available via ",getSubAreaName(ye.fromSubAreaId)]}),a.jsx("button",{className:"btn btn-primary btn-block",onClick:ke=>{ke.stopPropagation(),ee(ye)},disabled:ye.status!=="available","data-testid":"book-equipment-btn",children:ye.status==="available"?"Book Equipment":"Not Available"})]})]},ye.id))}),a.jsx(Lc,{currentPage:D,totalItems:r.length,itemsPerPage:L,onPageChange:Se,loading:i})]}):a.jsxs(a.Fragment,{children:[a.jsxs("table",{className:"equipment-table-compact","data-testid":"equipment-table-compact",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Equipment"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Ye.map(ye=>a.jsxs("tr",{"data-testid":"equipment-row-compact",children:[a.jsx("td",{onClick:()=>ae(ye),style:{cursor:"pointer",fontWeight:"600"},children:ye.product_name}),a.jsx("td",{children:ye.category}),a.jsxs("td",{children:[ye.department,ye.isCrossDepartment&&a.jsxs("div",{style:{marginTop:"0.25rem",fontSize:"0.75rem",color:"#1976d2",fontWeight:"600"},children:[" From ",ye.lendingDepartment]}),ye.isInterdisciplinary&&a.jsxs("div",{className:"interdisciplinary-badge",style:{marginTop:"0.25rem"},children:["Via ",getSubAreaName(ye.fromSubAreaId)]})]}),a.jsx("td",{children:a.jsx("span",{className:`status status-${ye.status}`,children:ye.status})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>ee(ye),disabled:ye.status!=="available","data-testid":"book-equipment-btn-compact",children:ye.status==="available"?"Book":"Unavailable"})})]},ye.id))})]}),a.jsx(Lc,{currentPage:D,totalItems:r.length,itemsPerPage:L,onPageChange:Se,loading:i})]})]}),y&&m&&a.jsx($4,{equipment:m,onClose:()=>b(!1),onBookClick:ee}),p&&m&&a.jsx(C5,{equipment:m,onClose:()=>j(!1),onSuccess:ue}),N&&a.jsx(y5,{onClose:()=>C(!1),onSuccess:xe}),A.map(ye=>a.jsx(kn,{message:ye.message,type:ye.type,onClose:()=>re(ye.id)},ye.id))]})}class i3{exportToCSV(t,n,r=null){if(!t||t.length===0){console.warn("No data to export");return}const s=r||Object.keys(t[0]).map(c=>({key:c,label:c})),i=s.map(c=>this.escapeCSVValue(c.label)).join(","),o=t.map(c=>s.map(d=>{const h=this.getNestedValue(c,d.key);return this.escapeCSVValue(h)}).join(",")),l=[i,...o].join(`
`);this.downloadFile(l,`${n}.csv`,"text/csv;charset=utf-8;")}exportBookingsToCSV(t,n="bookings"){const r=[{key:"equipment.product_name",label:"Equipment"},{key:"equipment.category",label:"Category"},{key:"start_date",label:"Start Date"},{key:"end_date",label:"End Date"},{key:"status",label:"Status"},{key:"purpose",label:"Purpose"},{key:"created_at",label:"Requested Date"}],s=t.map(i=>({...i,start_date:this.formatDate(i.start_date),end_date:this.formatDate(i.end_date),created_at:this.formatDate(i.created_at)}));this.exportToCSV(s,n,r)}exportEquipmentToCSV(t,n="equipment"){const r=[{key:"product_name",label:"Product Name"},{key:"category",label:"Category"},{key:"department",label:"Department"},{key:"status",label:"Status"},{key:"tracking_number",label:"Tracking Number"},{key:"description",label:"Description"}];this.exportToCSV(t,n,r)}exportToPDF(t,n){const r=window.open("","_blank");r.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>${n}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              padding: 20px;
              max-width: 800px;
              margin: 0 auto;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin: 20px 0;
            }
            th, td {
              border: 1px solid #ddd;
              padding: 12px;
              text-align: left;
            }
            th {
              background-color: #f4f4f4;
              font-weight: bold;
            }
            h1 {
              color: #333;
              border-bottom: 2px solid #333;
              padding-bottom: 10px;
            }
            .no-print {
              margin: 20px 0;
            }
            @media print {
              .no-print {
                display: none;
              }
            }
          </style>
        </head>
        <body>
          <div class="no-print">
            <button onclick="window.print()">Print / Save as PDF</button>
            <button onclick="window.close()">Close</button>
          </div>
          ${t}
        </body>
      </html>
    `),r.document.close()}exportBookingsToPDF(t,n="My Bookings Report"){const r=t.map(i=>{var o,l;return`
      <tr>
        <td>${((o=i.equipment)==null?void 0:o.product_name)||"Unknown"}</td>
        <td>${((l=i.equipment)==null?void 0:l.category)||"N/A"}</td>
        <td>${this.formatDate(i.start_date)}</td>
        <td>${this.formatDate(i.end_date)}</td>
        <td><strong>${i.status}</strong></td>
      </tr>
    `}).join(""),s=`
      <h1>${n}</h1>
      <p><strong>Generated:</strong> ${this.formatDate(new Date)}</p>
      <p><strong>Total Bookings:</strong> ${t.length}</p>
      <table>
        <thead>
          <tr>
            <th>Equipment</th>
            <th>Category</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          ${r}
        </tbody>
      </table>
    `;this.exportToPDF(s,n.replace(/\s+/g,"_"))}escapeCSVValue(t){if(t==null)return"";const n=String(t);return n.includes(",")||n.includes('"')||n.includes(`
`)?`"${n.replace(/"/g,'""')}"`:n}getNestedValue(t,n){return n.split(".").reduce((r,s)=>r==null?void 0:r[s],t)||""}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}downloadFile(t,n,r){const s=new Blob([t],{type:r}),i=URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}}const b1=new i3;function T5(){const{user:e}=wr(),[t,n]=T.useState([]),[r,s]=T.useState(!0),[i,o]=T.useState(!1),[l,c]=T.useState(null),{toasts:d,showToast:h,removeToast:m}=Sn(),g=()=>{var _;return e?e.role==="student"||e.role==="department_admin"||e.role==="master_admin"?!0:e.role==="staff"?((_=e.view_permissions)==null?void 0:_.can_view_history)!==!1:!0:!1},p=()=>{var _;return e?e.role==="student"||e.role==="department_admin"||e.role==="master_admin"?!0:e.role==="staff"?((_=e.view_permissions)==null?void 0:_.can_cancel_bookings)!==!1:!0:!1},j=()=>{var _;return e?e.role==="student"||e.role==="department_admin"||e.role==="master_admin"?!0:e.role==="staff"?((_=e.view_permissions)==null?void 0:_.can_export_data)!==!1:!0:!1};T.useEffect(()=>{N()},[e]);const N=async()=>{s(!0);try{const _=await Xp.getBookingsWithEquipment(e.id);n(_.sort((D,z)=>new Date(z.created_at)-new Date(D.created_at)))}catch(_){console.error("Failed to load bookings:",_)}finally{s(!1)}},C=async _=>{try{await Xp.cancelBooking(_),await N(),h("Booking cancelled successfully","success")}catch(D){h("Failed to cancel booking: "+D.message,"error")}},y=_=>({pending:"warning",approved:"success",denied:"error",cancelled:"secondary",active:"primary",completed:"success"})[_]||"secondary",b=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),w=_=>{c(_.equipment),o(!0)},S=()=>{h("Booking created successfully! Awaiting admin approval.","success"),o(!1),c(null),N()},R=()=>{b1.exportBookingsToCSV(t,`my_bookings_${new Date().toISOString().split("T")[0]}`),h("Bookings exported to CSV","success")},W=()=>{b1.exportBookingsToPDF(t,"My Bookings Report"),h("Opening PDF export...","success")},U=async()=>{await N()};return r?a.jsx("div",{className:"loading",children:"Loading your bookings..."}):g()?t.length===0?a.jsxs("div",{className:"empty-state","data-testid":"no-bookings",children:[a.jsx("h2",{children:"No Bookings Yet"}),a.jsx("p",{children:"You haven't made any equipment bookings."}),a.jsx(qr,{to:`/${e.role}/equipment`,className:"btn btn-primary",children:"Browse Equipment"})]}):a.jsxs("div",{className:"my-bookings",children:[a.jsxs(fg,{onRefresh:U,children:[a.jsxs("div",{className:"bookings-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[a.jsxs("div",{children:[a.jsx("h2",{children:"My Bookings"}),a.jsxs("p",{className:"subtitle",children:[t.length," total booking(s)"]})]}),j()&&a.jsxs("div",{className:"export-actions",children:[a.jsx("button",{onClick:R,className:"btn btn-secondary btn-sm","data-testid":"export-csv-btn",children:"Export CSV"}),a.jsx("button",{onClick:W,className:"btn btn-secondary btn-sm","data-testid":"export-pdf-btn",children:"Export PDF"})]})]}),a.jsx("div",{className:"bookings-list","data-testid":"bookings-list",children:t.map(_=>{var D,z;return a.jsxs("div",{className:"booking-item booking-card","data-testid":"booking-card",children:[a.jsxs("div",{className:"booking-header",children:[a.jsxs("div",{children:[a.jsx("h3",{children:((D=_.equipment)==null?void 0:D.product_name)||"Unknown Equipment"}),a.jsx("p",{className:"category",children:(z=_.equipment)==null?void 0:z.category})]}),a.jsx("span",{className:`status-badge status-${y(_.status)}`,children:_.status})]}),a.jsxs("div",{className:"booking-details",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Dates:"}),a.jsxs("span",{children:[b(_.start_date)," - ",b(_.end_date)]})]}),_.purpose&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Purpose:"}),a.jsx("span",{children:_.purpose})]}),_.denial_reason&&a.jsxs("div",{className:"detail-row error",children:[a.jsx("span",{className:"label",children:"Denial Reason:"}),a.jsx("span",{children:_.denial_reason})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Created:"}),a.jsx("span",{children:b(_.created_at)})]})]}),a.jsxs("div",{className:"booking-actions",children:[_.status==="pending"&&p()&&a.jsx("button",{onClick:()=>C(_.id),className:"btn btn-secondary btn-sm","data-testid":"cancel-booking-btn",children:"Cancel Booking"}),_.status==="pending"&&!p()&&a.jsx("span",{style:{fontSize:"0.85rem",color:"#666",fontStyle:"italic"},children:"Cannot cancel (no permission)"}),(_.status==="completed"||_.status==="denied")&&_.equipment&&a.jsx("button",{onClick:()=>w(_),className:"btn btn-primary btn-sm","data-testid":"rebook-btn",children:"Book Again"})]})]},_.id)})})]}),i&&l&&a.jsx(C5,{equipment:l,onClose:()=>{o(!1),c(null)},onSuccess:S}),d.map(_=>a.jsx(kn,{message:_.message,type:_.type,onClose:()=>m(_.id)},_.id))]}):a.jsxs("div",{className:"access-restricted",children:[a.jsxs("div",{className:"restriction-message",children:[a.jsx("h2",{children:"Access Restricted"}),a.jsx("p",{children:"You do not have permission to view booking history."}),a.jsx("p",{children:"Please contact your department admin to request access."})]}),a.jsx("style",{jsx:!0,children:`
          .access-restricted {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 60vh;
            padding: 2rem;
          }
          .restriction-message {
            text-align: center;
            max-width: 500px;
            padding: 2rem;
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
          }
          .restriction-message h2 {
            color: #856404;
            margin-bottom: 1rem;
          }
          .restriction-message p {
            color: #856404;
            margin-bottom: 0.5rem;
          }
        `})]})}function o3(){const{user:e,logout:t}=en();return a.jsxs("div",{className:"student-portal",children:[a.jsx("header",{className:"student-header",children:a.jsxs("div",{className:"student-header-content",children:[a.jsx("h1",{children:" NCADbook"}),a.jsxs("div",{className:"student-header-actions",children:[a.jsx(dg,{}),a.jsx("span",{className:"student-user-info",children:e==null?void 0:e.full_name}),a.jsx("button",{onClick:t,className:"btn btn-secondary btn-sm",children:"Logout"})]})]})}),a.jsxs("nav",{className:"student-nav",children:[a.jsx(mn,{to:"/student",end:!0,className:({isActive:n})=>`student-nav-link ${n?"active":""}`,children:" Dashboard"}),a.jsx(mn,{to:"/student/equipment",className:({isActive:n})=>`student-nav-link ${n?"active":""}`,children:" Browse Equipment"}),a.jsx(mn,{to:"/student/bookings",className:({isActive:n})=>`student-nav-link ${n?"active":""}`,children:" My Bookings"})]}),a.jsx("main",{className:"student-main",children:a.jsxs(uh,{children:[a.jsx(mt,{index:!0,element:a.jsx(S4,{})}),a.jsx(mt,{path:"equipment",element:a.jsx(P5,{})}),a.jsx(mt,{path:"bookings",element:a.jsx(T5,{})})]})}),a.jsx(ug,{})]})}function l3(){const{user:e}=wr(),[t,n]=T.useState({myBookings:0,pendingApprovals:0,departmentEquipment:0,availableEquipment:0}),[r,s]=T.useState(!0);T.useEffect(()=>{i()},[e]);const i=async()=>{if(e)try{const l=(await jn.getAll({user_id:e.id})).bookings||[];let c=0;(e.role==="staff"||e.role==="department_admin"||e.role==="master_admin")&&(c=((await jn.getAll({status:"pending"})).bookings||[]).length);const h=(await yr.getAll({department:e.department})).equipment||[],m=h.filter(g=>g.status==="available");n({myBookings:l.filter(g=>g.status!=="cancelled"&&g.status!=="denied").length,pendingApprovals:c,departmentEquipment:h.length,availableEquipment:m.length})}catch(o){console.error("Failed to load stats:",o),n({myBookings:0,pendingApprovals:0,departmentEquipment:0,availableEquipment:0})}finally{s(!1)}};return r?a.jsxs("div",{className:"staff-dashboard",children:[a.jsx("div",{className:"staff-skeleton"}),a.jsx("div",{className:"staff-skeleton"}),a.jsx("div",{className:"staff-skeleton"})]}):a.jsxs("div",{className:"staff-dashboard","data-testid":"staff-dashboard",children:[a.jsxs("div",{className:"staff-welcome",children:[a.jsxs("h2",{children:["Welcome, ",e==null?void 0:e.first_name,"! "]}),a.jsx("p",{children:"Staff Dashboard - Equipment & Space Management"})]}),a.jsxs("div",{className:"staff-stats-grid",children:[a.jsxs("div",{className:"staff-stat-card",children:[a.jsx("div",{className:"staff-stat-icon",children:""}),a.jsx("div",{className:"staff-stat-number",children:t.myBookings}),a.jsx("div",{className:"staff-stat-label",children:"My Bookings"})]}),(e.role==="staff"||e.role==="department_admin"||e.role==="master_admin")&&a.jsxs(qr,{to:"/admin/booking-approvals",className:"staff-stat-card",style:{textDecoration:"none",cursor:"pointer"},children:[a.jsx("div",{className:"staff-stat-icon",children:""}),a.jsx("div",{className:"staff-stat-number",style:{color:t.pendingApprovals>0?"#ff9800":"inherit"},children:t.pendingApprovals}),a.jsx("div",{className:"staff-stat-label",children:"Pending Approvals"})]}),a.jsxs("div",{className:"staff-stat-card",children:[a.jsx("div",{className:"staff-stat-icon",children:""}),a.jsx("div",{className:"staff-stat-number",children:t.departmentEquipment}),a.jsx("div",{className:"staff-stat-label",children:"Department Equipment"})]}),a.jsxs("div",{className:"staff-stat-card",children:[a.jsx("div",{className:"staff-stat-icon",children:""}),a.jsx("div",{className:"staff-stat-number",children:t.availableEquipment}),a.jsx("div",{className:"staff-stat-label",children:"Available Now"})]})]}),a.jsxs("div",{className:"staff-dashboard-grid",children:[a.jsxs("div",{className:"staff-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"staff-card-icon",children:""})," Quick Actions"]}),a.jsxs("div",{className:"staff-quick-actions",children:[a.jsx(qr,{to:"/staff/rooms",className:"staff-action-btn","data-testid":"book-room-link",children:" Book a Room"}),a.jsx(qr,{to:"/staff/equipment",className:"staff-action-btn secondary","data-testid":"browse-equipment-link",children:" Browse Equipment"}),a.jsx(qr,{to:"/staff/bookings",className:"staff-action-btn secondary","data-testid":"view-bookings-link",children:" My Bookings"}),a.jsx(qr,{to:"/staff/cross-department-requests",className:"staff-action-btn secondary",children:" Request Equipment"})]})]}),a.jsxs("div",{className:"staff-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"staff-card-icon",children:""})," Staff Features"]}),a.jsxs("ul",{className:"staff-features-list",children:[a.jsx("li",{children:"Book rooms and spaces by the hour"}),a.jsx("li",{children:"Book equipment for projects"}),a.jsx("li",{children:"Manage all bookings in one place"}),a.jsx("li",{children:"Auto-approved room bookings"}),a.jsx("li",{children:"Request cross-department equipment"})]})]})]})]})}const qa={async createSpaceBooking(e){const{space_id:t,booking_date:n,start_time:r,end_time:s,user_id:i,purpose:o}=e;if((await this.checkConflicts(t,n,r,s)).length>0)throw new Error("Space is already booked for selected time slot");const c={id:"sb"+Date.now(),user_id:i,space_id:t,booking_date:n,start_time:r,end_time:s,purpose:o,status:"approved",created_at:new Date().toISOString(),approved_at:new Date().toISOString()};return await Te.insert("spaceBookings",c),c},async getUserSpaceBookings(e){return await Te.query("spaceBookings",{user_id:e})},async getSpaceBookingById(e){return await Te.findOne("spaceBookings",{id:e})},async cancelSpaceBooking(e){await Te.update("spaceBookings",{id:e},{status:"cancelled",cancelled_at:new Date().toISOString()})},async checkConflicts(e,t,n,r){return(await Te.query("spaceBookings",{space_id:e})).filter(i=>{if(i.status==="cancelled"||i.booking_date!==t)return!1;const o=this.timeToMinutes(i.start_time),l=this.timeToMinutes(i.end_time),c=this.timeToMinutes(n),d=this.timeToMinutes(r);return c<l&&d>o})},async getSpaceBookingsWithDetails(e){const t=await this.getUserSpaceBookings(e);return await Promise.all(t.map(async r=>{const s=await Te.findOne("spaces",{id:r.space_id});return{...r,space:s}}))},async getSpaceBookingsForDate(e,t){return(await Te.query("spaceBookings",{space_id:e})).filter(r=>r.booking_date===t&&r.status!=="cancelled")},timeToMinutes(e){const[t,n]=e.split(":").map(Number);return t*60+n},minutesToTime(e){const t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}};function c3({selectedRoom:e,onDateTimeSelect:t,selectedDates:n=[],recurringPattern:r=null}){var L,O;const[s,i]=T.useState(new Date),[o,l]=T.useState({}),[c,d]=T.useState({}),[h,m]=T.useState(!1),[g,p]=T.useState(!1),[j,N]=T.useState(null);T.useEffect(()=>{e&&C()},[e,s]);const C=async()=>{if(e){m(!0);try{const P=s.getFullYear(),A=s.getMonth(),Z=new Date(P,A+1,0).getDate(),re={};for(let ie=1;ie<=Z;ie++){const K=new Date(P,A,ie),ne=K.toISOString().split("T")[0];if(K<new Date().setHours(0,0,0,0)){re[ne]={available:!1,isPast:!0};continue}const pe=await qa.getSpaceBookingsForDate(e.id,ne),oe=9,E=pe.length,q=oe-E;re[ne]={available:q>0,totalSlots:oe,bookedSlots:E,availableSlots:q,bookings:pe}}l(re)}catch(P){console.error("Failed to load availability:",P)}finally{m(!1)}}},y=()=>{const P=[];for(let A=9;A<18;A++)P.push({start:`${A.toString().padStart(2,"0")}:00`,end:`${(A+1).toString().padStart(2,"0")}:00`,label:`${A}:00 - ${A+1}:00`});return P},b=(P,A)=>{const Z=o[P];return!Z||!Z.bookings?!1:Z.bookings.some(re=>{const ie=qa.timeToMinutes(re.start_time),K=qa.timeToMinutes(re.end_time),ne=qa.timeToMinutes(A.start),pe=qa.timeToMinutes(A.end);return ne<K&&pe>ie})},w=P=>{const A=P.toISOString().split("T")[0],Z=o[A];!Z||!Z.available||Z.isPast||(N(A),p(!0))},S=P=>{if(!j||b(j,P))return;const Z=c[j]||[];if(Z.findIndex(ie=>ie.start===P.start)>=0){const ie=Z.filter(K=>K.start!==P.start);d({...c,[j]:ie})}else d({...c,[j]:[...Z,P]})},R=()=>{t&&t(j,c[j]||[]),p(!1)},W=()=>{i(new Date(s.getFullYear(),s.getMonth()-1))},U=()=>{i(new Date(s.getFullYear(),s.getMonth()+1))},_=()=>{var K;const P=s.getFullYear(),A=s.getMonth(),Z=new Date(P,A,1).getDay(),re=new Date(P,A+1,0).getDate(),ie=[];for(let ne=0;ne<Z;ne++)ie.push(a.jsx("div",{className:"calendar-day empty"},`empty-${ne}`));for(let ne=1;ne<=re;ne++){const pe=new Date(P,A,ne),oe=pe.toISOString().split("T")[0],E=o[oe]||{},q=E.isPast,G=oe===new Date().toISOString().split("T")[0],H=((K=c[oe])==null?void 0:K.length)>0;let te="calendar-day";q?te+=" past":E.available?H?te+=" selected":E.availableSlots===E.totalSlots?te+=" fully-available":E.availableSlots>0&&(te+=" partially-available"):te+=" unavailable",G&&(te+=" today"),ie.push(a.jsxs("div",{className:te,onClick:()=>w(pe),title:E.available?`${E.availableSlots}/${E.totalSlots} slots available`:"No slots available",children:[a.jsx("div",{className:"day-number",children:ne}),!q&&E.available&&a.jsx("div",{className:"availability-indicator",children:a.jsx("div",{className:"availability-bar",style:{width:`${E.availableSlots/E.totalSlots*100}%`}})}),H&&a.jsx("div",{className:"selected-badge",children:c[oe].length})]},ne))}return ie},D=["January","February","March","April","May","June","July","August","September","October","November","December"],z=y();return a.jsxs("div",{className:"room-calendar",children:[a.jsxs("div",{className:"calendar-header",children:[a.jsx("button",{onClick:W,className:"btn-month-nav","aria-label":"Previous month",children:""}),a.jsxs("h3",{className:"calendar-month",children:[D[s.getMonth()]," ",s.getFullYear()]}),a.jsx("button",{onClick:U,className:"btn-month-nav","aria-label":"Next month",children:""})]}),a.jsxs("div",{className:"calendar-legend",children:[a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color fully-available"}),a.jsx("span",{children:"Fully Available"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color partially-available"}),a.jsx("span",{children:"Partially Available"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color unavailable"}),a.jsx("span",{children:"Unavailable"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color selected"}),a.jsx("span",{children:"Selected"})]})]}),a.jsxs("div",{className:"calendar-weekdays",children:[a.jsx("div",{children:"Sun"}),a.jsx("div",{children:"Mon"}),a.jsx("div",{children:"Tue"}),a.jsx("div",{children:"Wed"}),a.jsx("div",{children:"Thu"}),a.jsx("div",{children:"Fri"}),a.jsx("div",{children:"Sat"})]}),a.jsx("div",{className:"calendar-grid",children:h?a.jsx("div",{className:"calendar-loading",children:"Loading availability..."}):_()}),g&&j&&a.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:a.jsxs("div",{className:"modal-content time-modal",onClick:P=>P.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:"Select Time Slots"}),a.jsx("button",{className:"btn-close",onClick:()=>p(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"time-modal-date",children:new Date(j).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsx("div",{className:"time-slots-grid",children:z.map(P=>{var ie;const A=b(j,P),Z=(ie=c[j])==null?void 0:ie.some(K=>K.start===P.start);let re="time-slot";return A?re+=" booked":Z&&(re+=" selected"),a.jsxs("button",{className:re,onClick:()=>S(P),disabled:A,children:[P.label,A&&a.jsx("span",{className:"slot-badge",children:"Booked"}),Z&&!A&&a.jsx("span",{className:"slot-badge",children:""})]},P.start)})})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"btn btn-secondary",onClick:()=>p(!1),children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:R,disabled:!((L=c[j])!=null&&L.length),children:["Confirm (",((O=c[j])==null?void 0:O.length)||0," slots)"]})]})]})})]})}const Ut={NONE:"none",DAILY:"daily",WEEKLY:"weekly",BIWEEKLY:"biweekly",MONTHLY:"monthly"},Nf=[{value:0,label:"Sun"},{value:1,label:"Mon"},{value:2,label:"Tue"},{value:3,label:"Wed"},{value:4,label:"Thu"},{value:5,label:"Fri"},{value:6,label:"Sat"}];function d3({onPatternChange:e,initialPattern:t=null}){const[n,r]=T.useState((t==null?void 0:t.type)||Ut.NONE),[s,i]=T.useState((t==null?void 0:t.days)||[]),[o,l]=T.useState((t==null?void 0:t.weekdaysOnly)||!0),[c,d]=T.useState((t==null?void 0:t.endDate)||""),[h,m]=T.useState((t==null?void 0:t.occurrences)||10),g=w=>{if(r(w),(w===Ut.WEEKLY||w===Ut.BIWEEKLY)&&s.length===0){const S=new Date().getDay();i([S])}y(w,s,o,c,h)},p=w=>{let S;s.includes(w)?S=s.filter(R=>R!==w):S=[...s,w].sort((R,W)=>R-W),i(S),y(n,S,o,c,h)},j=w=>{l(w),y(n,s,w,c,h)},N=w=>{d(w),y(n,s,o,w,h)},C=w=>{m(w),y(n,s,o,c,w)},y=(w,S,R,W,U)=>{if(w===Ut.NONE){e(null);return}const _={type:w,days:w===Ut.WEEKLY||w===Ut.BIWEEKLY?S:[],weekdaysOnly:w===Ut.DAILY?R:!1,endDate:W,occurrences:parseInt(U)||10};e(_)},b=()=>{if(n===Ut.NONE)return"No recurrence";let w="";switch(n){case Ut.DAILY:w=o?"Every weekday":"Every day";break;case Ut.WEEKLY:s.length===0?w="Weekly (select days)":w=`Every ${s.map(R=>Nf[R].label).join(", ")}`;break;case Ut.BIWEEKLY:s.length===0?w="Bi-weekly (select days)":w=`Every other ${s.map(R=>Nf[R].label).join(", ")}`;break;case Ut.MONTHLY:w="Monthly on the same day";break}return c?w+=` until ${new Date(c).toLocaleDateString()}`:w+=` for ${h} occurrences`,w};return a.jsxs("div",{className:"recurring-booking-selector",children:[a.jsxs("div",{className:"recurring-header",children:[a.jsx("h4",{children:"Recurring Booking"}),a.jsx("p",{className:"recurring-description",children:b()})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Recurrence Pattern"}),a.jsxs("select",{value:n,onChange:w=>g(w.target.value),className:"select-input",children:[a.jsx("option",{value:Ut.NONE,children:"One-time booking"}),a.jsx("option",{value:Ut.DAILY,children:"Daily"}),a.jsx("option",{value:Ut.WEEKLY,children:"Weekly"}),a.jsx("option",{value:Ut.BIWEEKLY,children:"Bi-weekly"}),a.jsx("option",{value:Ut.MONTHLY,children:"Monthly"})]})]}),n===Ut.DAILY&&a.jsx("div",{className:"form-group",children:a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:o,onChange:w=>j(w.target.checked)}),a.jsx("span",{children:"Weekdays only (Mon-Fri)"})]})}),(n===Ut.WEEKLY||n===Ut.BIWEEKLY)&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Select Days"}),a.jsx("div",{className:"weekday-selector",children:Nf.map(w=>a.jsx("button",{type:"button",className:`weekday-btn ${s.includes(w.value)?"selected":""}`,onClick:()=>p(w.value),children:w.label},w.value))})]}),n!==Ut.NONE&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"End Recurrence"}),a.jsxs("div",{className:"recurrence-end-options",children:[a.jsxs("label",{className:"radio-label",children:[a.jsx("input",{type:"radio",name:"end-type",checked:!c,onChange:()=>N("")}),a.jsx("span",{children:"After"}),a.jsx("input",{type:"number",min:"1",max:"52",value:h,onChange:w=>C(w.target.value),disabled:!!c,className:"occurrences-input"}),a.jsx("span",{children:"occurrences"})]}),a.jsxs("label",{className:"radio-label",children:[a.jsx("input",{type:"radio",name:"end-type",checked:!!c,onChange:()=>{const w=new Date;w.setMonth(w.getMonth()+3),N(w.toISOString().split("T")[0])}}),a.jsx("span",{children:"On date"}),a.jsx("input",{type:"date",value:c,onChange:w=>N(w.target.value),disabled:!c,min:new Date().toISOString().split("T")[0],className:"date-input"})]})]})]}),a.jsxs("div",{className:"recurrence-warning",children:[a.jsx("span",{className:"warning-icon",children:""}),a.jsx("p",{children:"Recurring bookings will be created for all available slots matching this pattern. Conflicts will be skipped."})]})]})]})}function u3(e,t){if(!t||t.type===Ut.NONE)return[e];const n=[],r=new Date(e);let s=new Date(r),i=0;const o=t.endDate?365:t.occurrences;for(;i<o;){let l=!1;switch(t.type){case Ut.DAILY:if(t.weekdaysOnly){const d=s.getDay();l=d>=1&&d<=5}else l=!0;break;case Ut.WEEKLY:l=t.days.includes(s.getDay());break;case Ut.BIWEEKLY:l=Math.floor((s-r)/(7*24*60*60*1e3))%2===0&&t.days.includes(s.getDay());break;case Ut.MONTHLY:l=s.getDate()===r.getDate();break}if(l){const c=s.toISOString().split("T")[0];if(t.endDate&&c>t.endDate)break;n.push(c),i++}if(s.setDate(s.getDate()+1),t.endDate&&s>new Date(t.endDate))break}return n}function h3(){const{user:e}=wr(),[t,n]=T.useState([]),[r,s]=T.useState(null),[i,o]=T.useState({}),[l,c]=T.useState(null),[d,h]=T.useState(!1),[m,g]=T.useState(""),[p,j]=T.useState(!0),[N,C]=T.useState("calendar"),{toasts:y,showToast:b,removeToast:w}=Sn();T.useEffect(()=>{S()},[]);const S=async()=>{try{const L=await Te.query("spaces");n(L),L.length>0&&s(L[0])}catch(L){console.error("Failed to load spaces:",L)}finally{j(!1)}},R=(L,O)=>{if(O.length===0){const{[L]:P,...A}=i;o(A)}else o({...i,[L]:O})},W=L=>{c(L)},U=()=>Object.values(i).reduce((L,O)=>L+O.length,0),_=()=>Object.keys(i).length,D=()=>{if(U()===0){b("Please select at least one date and time slot","error");return}h(!0)},z=async()=>{if(!m.trim()){b("Please provide a purpose for the booking","error");return}try{let L=Object.keys(i);if(l){const re=L[0],ie=i[re],K=u3(re,l),ne={};K.forEach(pe=>{ne[pe]=ie}),L=K,o(ne)}const O=L.map(async re=>{const ie=i[re];if(!ie||ie.length===0)return null;const K=[...ie].sort((oe,E)=>qa.timeToMinutes(oe.start)-qa.timeToMinutes(E.start)),ne=K[0].start,pe=K[K.length-1].end;return qa.createSpaceBooking({space_id:r.id,booking_date:re,start_time:ne,end_time:pe,user_id:e.id,purpose:m})}),P=await Promise.allSettled(O),A=P.filter(re=>re.status==="fulfilled").length,Z=P.filter(re=>re.status==="rejected").length;h(!1),g(""),o({}),c(null),Z===0?b(`Successfully created ${A} booking${A!==1?"s":""}!`,"success"):b(`Created ${A} booking(s), ${Z} failed (likely conflicts)`,"warning")}catch(L){b("Failed to create bookings: "+L.message,"error")}};return p?a.jsx("div",{className:"loading",children:"Loading spaces..."}):a.jsxs("div",{className:"room-booking-calendar",children:[a.jsx("h2",{children:"Room & Space Booking"}),a.jsx("p",{className:"subtitle",children:"Select dates and times from the calendar below"}),a.jsxs("div",{className:"booking-controls",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"space-select",children:"Select Space"}),a.jsx("select",{id:"space-select",value:(r==null?void 0:r.id)||"",onChange:L=>{const O=t.find(P=>P.id===L.target.value);s(O),o({})},className:"select-input",children:t.map(L=>a.jsxs("option",{value:L.id,children:[L.name," (Capacity: ",L.capacity,")"]},L.id))})]}),a.jsxs("div",{className:"view-toggle-group",children:[a.jsx("button",{className:`btn ${N==="calendar"?"btn-primary":"btn-secondary"}`,onClick:()=>C("calendar"),children:" Calendar View"}),a.jsx("button",{className:`btn ${N==="legacy"?"btn-primary":"btn-secondary"}`,onClick:()=>C("legacy"),children:" Day View"})]})]}),r&&a.jsxs("div",{className:"space-details",children:[a.jsx("h3",{children:r.name}),a.jsx("p",{children:r.description}),a.jsxs("p",{className:"equipment-list",children:[a.jsx("strong",{children:"Available Equipment:"})," ",r.equipment_available]})]}),N==="calendar"?a.jsxs(a.Fragment,{children:[a.jsx(c3,{selectedRoom:r,onDateTimeSelect:R,selectedDates:Object.keys(i)}),a.jsx(d3,{onPatternChange:W}),U()>0&&a.jsxs("div",{className:"booking-summary-card",children:[a.jsxs("div",{className:"summary-content",children:[a.jsx("h4",{children:"Booking Summary"}),a.jsxs("p",{children:[a.jsxs("strong",{children:[_()," date",_()!==1?"s":""]})," selected with ",a.jsxs("strong",{children:[U()," time slot",U()!==1?"s":""]})]}),l&&l.type!=="none"&&a.jsx("p",{className:"recurring-info",children:" Recurring pattern will be applied"})]}),a.jsx("button",{onClick:D,className:"btn btn-primary btn-lg",children:"Proceed to Book"})]})]}):a.jsx("div",{className:"legacy-view-message",children:a.jsx("p",{children:"Switch to Calendar View to see room availability and book multiple dates"})}),d&&a.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:a.jsxs("div",{className:"modal-content booking-modal",onClick:L=>L.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Confirm Booking"}),a.jsx("button",{className:"btn-close",onClick:()=>h(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"booking-summary",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Space:"})," ",r.name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Dates:"})," ",_()," date(s)"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Total Time Slots:"})," ",U()]}),l&&l.type!=="none"&&a.jsxs("div",{className:"recurring-summary",children:[a.jsx("p",{className:"recurring-badge",children:" Recurring Booking"}),a.jsx("p",{children:"Pattern will be applied to generate multiple bookings"})]}),a.jsxs("div",{className:"dates-list",children:[a.jsx("h4",{children:"Selected Dates & Times:"}),Object.entries(i).slice(0,5).map(([L,O])=>{const P=[...O].sort((A,Z)=>qa.timeToMinutes(A.start)-qa.timeToMinutes(Z.start));return a.jsxs("div",{className:"date-entry",children:[a.jsx("strong",{children:new Date(L).toLocaleDateString()}),a.jsxs("span",{children:[" ",P[0].start," - ",P[P.length-1].end]})]},L)}),Object.keys(i).length>5&&a.jsxs("p",{className:"more-dates",children:["... and ",Object.keys(i).length-5," more"]})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"purpose",children:"Purpose"}),a.jsx("textarea",{id:"purpose",value:m,onChange:L=>g(L.target.value),placeholder:"What will you use this space for?",rows:"3",required:!0})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{onClick:()=>h(!1),className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:z,className:"btn btn-primary",children:"Confirm Booking"})]})]})}),y.map(L=>a.jsx(kn,{message:L.message,type:L.type,onClose:()=>w(L.id)},L.id)),a.jsx("style",{jsx:!0,children:`
        .room-booking-calendar {
          padding: var(--space-4);
        }

        .booking-controls {
          display: flex;
          gap: var(--space-4);
          margin-bottom: var(--space-4);
          flex-wrap: wrap;
          align-items: flex-end;
        }

        .form-group {
          flex: 1;
          min-width: 250px;
        }

        .view-toggle-group {
          display: flex;
          gap: var(--space-2);
        }

        .space-details {
          background: var(--theme-bg-secondary);
          padding: var(--space-4);
          border-radius: var(--radius-lg);
          margin-bottom: var(--space-4);
        }

        .space-details h3 {
          margin: 0 0 var(--space-2) 0;
        }

        .space-details p {
          margin: var(--space-2) 0;
          color: var(--theme-text-secondary);
        }

        .equipment-list {
          font-size: var(--text-sm);
        }

        .booking-summary-card {
          background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
          color: white;
          padding: var(--space-4);
          border-radius: var(--radius-lg);
          margin-top: var(--space-4);
          display: flex;
          justify-content: space-between;
          align-items: center;
          flex-wrap: wrap;
          gap: var(--space-3);
        }

        .summary-content h4 {
          margin: 0 0 var(--space-2) 0;
        }

        .summary-content p {
          margin: var(--space-1) 0;
        }

        .recurring-info {
          font-style: italic;
          opacity: 0.9;
        }

        .btn-lg {
          padding: var(--space-3) var(--space-6);
          font-size: var(--text-lg);
          font-weight: var(--font-semibold);
        }

        .booking-modal {
          max-width: 600px;
        }

        .booking-summary {
          background: var(--theme-bg-secondary);
          padding: var(--space-4);
          border-radius: var(--radius-md);
          margin-bottom: var(--space-4);
        }

        .recurring-summary {
          background: #fef3c7;
          padding: var(--space-3);
          border-radius: var(--radius-sm);
          margin-top: var(--space-3);
        }

        .recurring-badge {
          color: #92400e;
          font-weight: var(--font-semibold);
          margin-bottom: var(--space-1);
        }

        .dates-list {
          margin-top: var(--space-3);
        }

        .dates-list h4 {
          font-size: var(--text-sm);
          margin-bottom: var(--space-2);
          text-transform: uppercase;
          color: var(--theme-text-secondary);
        }

        .date-entry {
          padding: var(--space-2);
          background: var(--theme-bg-tertiary);
          border-radius: var(--radius-sm);
          margin-bottom: var(--space-1);
          display: flex;
          justify-content: space-between;
        }

        .more-dates {
          font-style: italic;
          color: var(--theme-text-secondary);
          text-align: center;
          margin-top: var(--space-2);
        }

        .legacy-view-message {
          text-align: center;
          padding: var(--space-6);
          background: var(--theme-bg-secondary);
          border-radius: var(--radius-lg);
          color: var(--theme-text-secondary);
        }
      `})]})}async function q5(e){try{const t=await Te.query("equipment"),n=await Te.query("sub_areas"),r=t.filter(i=>i.product_name.toLowerCase().includes(e.toLowerCase())&&i.status==="available"),s={};return r.forEach(i=>{if(!s[i.department]){const o=n.find(l=>l.id===i.sub_area_id);s[i.department]={departmentId:i.department,departmentName:o?o.name:i.department,availableCount:0,equipmentIds:[]}}s[i.department].availableCount++,s[i.department].equipmentIds.push(i.id)}),Object.values(s).sort((i,o)=>o.availableCount-i.availableCount)}catch(t){throw console.error("Error getting equipment availability:",t),t}}async function I5(e,t){try{const n=await q5(e);if(n.length===0)return{routingType:"none",targetDepartments:[],message:`No departments have '${e}' available`};const r=n.find(s=>s.availableCount>=t);return r?{routingType:"single",targetDepartments:[r],message:`Request will be sent to ${r.departmentName} (${r.availableCount} available)`}:{routingType:"broadcast",targetDepartments:n,message:`Request exceeds any single department's capacity. Will be broadcast to all ${n.length} departments with this equipment type.`}}catch(n){throw console.error("Error determining request routing:",n),n}}async function f3(e){const{requestingUserId:t,requestingDepartmentId:n,equipmentType:r,quantity:s,startDate:i,endDate:o,justification:l}=e;try{const c=await I5(r,s);if(c.routingType==="none")throw new Error(c.message);const d=[];if(c.routingType==="single"){const h=c.targetDepartments[0],m={id:`req${Date.now()}`,requesting_user_id:t,requesting_department_id:n,target_department_id:h.departmentId,equipment_type:r,quantity:s,start_date:i,end_date:o,justification:l,status:"pending",routing_type:"single",created_at:new Date().toISOString()},g=Te.getData();g.cross_department_requests=g.cross_department_requests||[],g.cross_department_requests.push(m),Te.saveData(g),d.push(m)}else for(const h of c.targetDepartments){const m={id:`req${Date.now()}_${h.departmentId}`,requesting_user_id:t,requesting_department_id:n,target_department_id:h.departmentId,equipment_type:r,quantity:s,start_date:i,end_date:o,justification:l,status:"pending",routing_type:"broadcast",broadcast_group_id:`bcast${Date.now()}`,available_at_department:h.availableCount,created_at:new Date().toISOString()},g=Te.getData();g.cross_department_requests=g.cross_department_requests||[],g.cross_department_requests.push(m),Te.saveData(g),d.push(m)}return{routingType:c.routingType,message:c.message,requests:d}}catch(c){throw console.error("Error creating cross-department request:",c),c}}async function p3(e,t=null){try{let n=await Te.query("cross_department_requests",{target_department_id:e});t&&(n=n.filter(s=>s.status===t));const r=await Te.query("users");return n=n.map(s=>{const i=r.find(o=>o.id===s.requesting_user_id);return{...s,requesting_user_name:i?i.full_name:"Unknown",requesting_user_email:i?i.email:""}}),n}catch(n){throw console.error("Error fetching department requests:",n),n}}async function m3(e){try{const t=await Te.query("cross_department_requests",{requesting_user_id:e}),n=await Te.query("sub_areas");return t.map(r=>{const s=n.find(i=>i.id===r.target_department_id);return{...r,target_department_name:s?s.name:r.target_department_id}})}catch(t){throw console.error("Error fetching user requests:",t),t}}async function g3(e,t,n){try{const r=Te.getData(),s=r.cross_department_requests||[],i=s.findIndex(o=>o.id===e);if(i===-1)throw new Error("Request not found");return s[i]={...s[i],status:"approved",reviewed_by:t,reviewed_at:new Date().toISOString(),review_notes:n},r.cross_department_requests=s,Te.saveData(r),console.log(`Request ${e} approved. Staff will receive notification with instructions.`),s[i]}catch(r){throw console.error("Error approving request:",r),r}}async function v3(e,t,n){try{const r=Te.getData(),s=r.cross_department_requests||[],i=s.findIndex(o=>o.id===e);if(i===-1)throw new Error("Request not found");return s[i]={...s[i],status:"denied",reviewed_by:t,reviewed_at:new Date().toISOString(),review_notes:n},r.cross_department_requests=s,Te.saveData(r),s[i]}catch(r){throw console.error("Error denying request:",r),r}}async function y3(e){try{const t=Te.getData(),n=t.cross_department_requests||[],r=n.findIndex(s=>s.id===e);if(r===-1)throw new Error("Request not found");if(n[r].status!=="pending")throw new Error("Only pending requests can be cancelled");return n[r]={...n[r],status:"cancelled",cancelled_at:new Date().toISOString()},t.cross_department_requests=n,Te.saveData(t),n[r]}catch(t){throw console.error("Error cancelling request:",t),t}}function F5(){const e=sl(),{user:t}=en(),[n,r]=T.useState(""),[s,i]=T.useState(1),[o,l]=T.useState(""),[c,d]=T.useState(""),[h,m]=T.useState(""),[g,p]=T.useState(null),[j,N]=T.useState(null),[C,y]=T.useState(!1),[b,w]=T.useState(!1),{toasts:S,showToast:R,removeToast:W}=Sn(),[U,_]=T.useState([]);T.useEffect(()=>{D()},[]);const D=async()=>{try{const P=await Te.query("equipment"),A=[...new Set(P.map(Z=>Z.product_name))];_(A.sort())}catch(P){console.error("Failed to load equipment types:",P)}},z=async()=>{if(!n||s<1){R("Please select equipment type and quantity","error");return}w(!0);try{const P=await q5(n);p(P);const A=await I5(n,s);N(A)}catch(P){console.error("Failed to check availability:",P),R("Failed to check availability","error")}finally{w(!1)}},L=async P=>{if(P.preventDefault(),!n||s<1||!o||!c||h.trim().length<50){R("Please fill all required fields. Justification must be at least 50 characters.","error");return}y(!0);try{const A={requestingUserId:t.id,requestingDepartmentId:t.department,equipmentType:n,quantity:s,startDate:o,endDate:c,justification:h},Z=await f3(A);R(`Request created successfully! ${Z.routingType==="broadcast"?`Sent to ${Z.requests.length} departments`:"Sent to 1 department"}`,"success"),setTimeout(()=>{e("/staff/my-cross-department-requests")},1500)}catch(A){console.error("Failed to create request:",A),R(A.message||"Failed to create request","error")}finally{y(!1)}},O=()=>{e("/staff")};return a.jsxs("div",{className:"page-container",style:{maxWidth:"900px",margin:"0 auto",padding:"2rem 1rem"},children:[a.jsxs("div",{className:"page-header",style:{marginBottom:"2rem"},children:[a.jsx("button",{onClick:O,className:"btn btn-secondary btn-sm",style:{marginBottom:"1rem"},children:" Back"}),a.jsx("h2",{children:"Request Equipment from Another Department"}),a.jsx("p",{style:{color:"#666",marginTop:"0.5rem"},children:"Request equipment from other departments when your department doesn't have what you need"})]}),a.jsxs("div",{className:"cross-dept-request-form",children:[a.jsxs("form",{onSubmit:L,children:[a.jsxs("div",{className:"form-section",children:[a.jsx("h3",{children:"Equipment Details"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"equipment-type",children:"Equipment Type *"}),a.jsxs("select",{id:"equipment-type",value:n,onChange:P=>r(P.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select equipment type..."}),U.map(P=>a.jsx("option",{value:P,children:P},P))]}),a.jsx("small",{children:"Select the type of equipment you need"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"quantity",children:"Quantity *"}),a.jsx("input",{type:"number",id:"quantity",min:"1",max:"50",value:s,onChange:P=>i(parseInt(P.target.value)),required:!0}),a.jsx("small",{children:"How many items do you need?"})]}),a.jsx("button",{type:"button",onClick:z,className:"btn btn-secondary btn-sm",disabled:!n||s<1||b,style:{marginTop:"0.5rem"},children:b?"Checking...":"Check Availability"})]}),g&&a.jsxs("div",{className:"availability-preview",children:[a.jsx("h4",{children:"Equipment Availability Across Departments"}),g.length===0?a.jsxs("p",{className:"no-availability",children:['No departments have "',n,'" available']}):a.jsxs("table",{className:"availability-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Available"})]})}),a.jsx("tbody",{children:g.map(P=>a.jsxs("tr",{children:[a.jsx("td",{children:P.departmentName}),a.jsx("td",{className:"availability-count",children:P.availableCount})]},P.departmentId))})]})]}),j&&a.jsxs("div",{className:`routing-preview routing-${j.routingType}`,children:[a.jsxs("h4",{children:[j.routingType==="single"&&" Single Department Request",j.routingType==="broadcast"&&" Broadcast Request"]}),a.jsx("p",{children:j.message})]}),a.jsxs("div",{className:"form-section",children:[a.jsx("h3",{children:"Booking Dates"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"start-date",children:"Start Date *"}),a.jsx("input",{type:"date",id:"start-date",value:o,onChange:P=>l(P.target.value),min:new Date().toISOString().split("T")[0],required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"end-date",children:"End Date *"}),a.jsx("input",{type:"date",id:"end-date",value:c,onChange:P=>d(P.target.value),min:o||new Date().toISOString().split("T")[0],required:!0})]})]}),a.jsxs("div",{className:"form-section",children:[a.jsx("h3",{children:"Justification"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"justification",children:"Why do you need this equipment? *"}),a.jsx("textarea",{id:"justification",value:h,onChange:P=>m(P.target.value),rows:"5",placeholder:"Provide a detailed justification for your request (minimum 50 characters)...",required:!0,minLength:"50"}),a.jsxs("small",{className:h.length<50?"text-error":"text-success",children:[h.length," / 50 characters minimum"]})]})]}),a.jsxs("div",{className:"form-actions",style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"2rem",paddingTop:"1.5rem",borderTop:"1px solid #dee2e6"},children:[a.jsx("button",{type:"button",onClick:O,className:"btn btn-secondary",disabled:C,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:C||j&&j.routingType==="none",children:C?"Submitting...":"Submit Request"})]})]}),S.map(P=>a.jsx(kn,{message:P.message,type:P.type,onClose:()=>W(P.id)},P.id))]})]})}function x3(){const{user:e}=en(),[t,n]=T.useState([]),[r,s]=T.useState(!0),[i,o]=T.useState(!1),[l,c]=T.useState("all"),{toasts:d,showToast:h,removeToast:m}=Sn();T.useEffect(()=>{g()},[]);const g=async()=>{s(!0);try{const y=await m3(e.id);n(y)}catch(y){console.error("Failed to load requests:",y),h("Failed to load requests","error")}finally{s(!1)}},p=async y=>{if(confirm("Are you sure you want to cancel this request?"))try{await y3(y),h("Request cancelled successfully","success"),g()}catch(b){console.error("Failed to cancel request:",b),h(b.message||"Failed to cancel request","error")}},j=()=>{g()},N=l==="all"?t:t.filter(y=>y.status===l),C=y=>({pending:"status-pending",approved:"status-approved",denied:"status-denied",cancelled:"status-cancelled"})[y]||"";return r?a.jsxs("div",{className:"my-cross-dept-requests",children:[a.jsx("h2",{children:"My Cross-Department Requests"}),a.jsx("p",{children:"Loading requests..."})]}):a.jsxs("div",{className:"my-cross-dept-requests",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h2",{children:"My Cross-Department Equipment Requests"}),a.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary",children:"+ New Request"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsxs("button",{onClick:()=>c("all"),className:l==="all"?"tab-active":"tab",children:["All (",t.length,")"]}),a.jsxs("button",{onClick:()=>c("pending"),className:l==="pending"?"tab-active":"tab",children:["Pending (",t.filter(y=>y.status==="pending").length,")"]}),a.jsxs("button",{onClick:()=>c("approved"),className:l==="approved"?"tab-active":"tab",children:["Approved (",t.filter(y=>y.status==="approved").length,")"]}),a.jsxs("button",{onClick:()=>c("denied"),className:l==="denied"?"tab-active":"tab",children:["Denied (",t.filter(y=>y.status==="denied").length,")"]})]}),N.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsxs("p",{children:["No ",l!=="all"?l:""," requests found."]}),l==="all"&&a.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary",style:{marginTop:"1rem"},children:"Create Your First Request"})]}):a.jsx("div",{className:"requests-list",children:N.map(y=>a.jsxs("div",{className:"request-card",children:[a.jsxs("div",{className:"request-header",children:[a.jsxs("div",{children:[a.jsx("h3",{children:y.equipment_type}),a.jsx("span",{className:`status-badge ${C(y.status)}`,children:y.status.charAt(0).toUpperCase()+y.status.slice(1)})]}),y.status==="pending"&&a.jsx("button",{onClick:()=>p(y.id),className:"btn btn-secondary btn-sm",children:"Cancel Request"})]}),a.jsxs("div",{className:"request-details",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Target Department:"}),a.jsx("span",{className:"detail-value",children:y.target_department_name})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Quantity:"}),a.jsx("span",{className:"detail-value",children:y.quantity})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Dates:"}),a.jsxs("span",{className:"detail-value",children:[new Date(y.start_date).toLocaleDateString()," - ",new Date(y.end_date).toLocaleDateString()]})]}),y.routing_type&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Request Type:"}),a.jsx("span",{className:"detail-value",children:y.routing_type==="broadcast"?" Broadcast to Multiple Departments":" Single Department"})]})]}),a.jsxs("div",{className:"request-justification",children:[a.jsx("strong",{children:"Justification:"}),a.jsx("p",{children:y.justification})]}),y.status==="approved"&&y.review_notes&&a.jsxs("div",{className:"request-instructions approved",children:[a.jsx("strong",{children:" Approved - Collection Instructions:"}),a.jsx("p",{children:y.review_notes}),a.jsxs("small",{children:["Reviewed: ",new Date(y.reviewed_at).toLocaleString()]})]}),y.status==="denied"&&y.review_notes&&a.jsxs("div",{className:"request-instructions denied",children:[a.jsx("strong",{children:" Denied - Reason:"}),a.jsx("p",{children:y.review_notes}),a.jsxs("small",{children:["Reviewed: ",new Date(y.reviewed_at).toLocaleString()]})]}),a.jsx("div",{className:"request-metadata",children:a.jsxs("small",{children:["Created: ",new Date(y.created_at).toLocaleString()]})})]},y.id))}),i&&a.jsx(F5,{onClose:()=>o(!1),onSuccess:j}),d.map(y=>a.jsx(kn,{message:y.message,type:y.type,onClose:()=>m(y.id)},y.id)),a.jsx("style",{jsx:!0,children:`
        .my-cross-dept-requests {
          padding: 2rem;
        }

        .page-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 2rem;
        }

        .filter-tabs {
          display: flex;
          gap: 0.5rem;
          margin-bottom: 2rem;
          border-bottom: 2px solid #eee;
        }

        .tab,
        .tab-active {
          padding: 0.75rem 1.5rem;
          border: none;
          background: none;
          cursor: pointer;
          font-weight: 600;
          color: #666;
          border-bottom: 3px solid transparent;
          transition: all 0.2s;
        }

        .tab:hover {
          color: #333;
          background-color: #f5f5f5;
        }

        .tab-active {
          color: #1976d2;
          border-bottom-color: #1976d2;
        }

        .requests-list {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
        }

        .request-card {
          background: #fff;
          border: 1px solid #ddd;
          border-radius: 8px;
          padding: 1.5rem;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .request-header {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          margin-bottom: 1rem;
        }

        .request-header h3 {
          margin: 0 0 0.5rem 0;
          color: #333;
        }

        .status-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 12px;
          font-size: 0.875rem;
          font-weight: 600;
        }

        .status-pending {
          background-color: #fff3cd;
          color: #856404;
        }

        .status-approved {
          background-color: #d4edda;
          color: #155724;
        }

        .status-denied {
          background-color: #f8d7da;
          color: #721c24;
        }

        .status-cancelled {
          background-color: #e2e3e5;
          color: #383d41;
        }

        .request-details {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
          margin-bottom: 1rem;
        }

        .detail-row {
          display: flex;
          gap: 0.5rem;
        }

        .detail-label {
          font-weight: 600;
          color: #666;
          min-width: 150px;
        }

        .detail-value {
          color: #333;
        }

        .request-justification {
          margin-top: 1rem;
          padding: 1rem;
          background-color: #f5f5f5;
          border-radius: 4px;
        }

        .request-justification strong {
          display: block;
          margin-bottom: 0.5rem;
          color: #333;
        }

        .request-justification p {
          margin: 0;
          color: #555;
          line-height: 1.5;
        }

        .request-instructions {
          margin-top: 1rem;
          padding: 1rem;
          border-radius: 4px;
          border-left: 4px solid;
        }

        .request-instructions.approved {
          background-color: #e8f5e9;
          border-left-color: #4caf50;
        }

        .request-instructions.denied {
          background-color: #ffebee;
          border-left-color: #f44336;
        }

        .request-instructions strong {
          display: block;
          margin-bottom: 0.5rem;
          color: #333;
        }

        .request-instructions p {
          margin: 0 0 0.5rem 0;
          color: #555;
          line-height: 1.5;
        }

        .request-instructions small {
          color: #999;
          font-size: 0.85rem;
        }

        .request-metadata {
          margin-top: 1rem;
          padding-top: 1rem;
          border-top: 1px solid #eee;
        }

        .request-metadata small {
          color: #999;
        }

        .empty-state {
          text-align: center;
          padding: 3rem;
          color: #666;
        }

        @media (max-width: 768px) {
          .my-cross-dept-requests {
            padding: 1rem;
          }

          .page-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
          }

          .filter-tabs {
            flex-wrap: wrap;
          }

          .request-header {
            flex-direction: column;
            gap: 1rem;
          }

          .detail-label {
            min-width: 120px;
          }
        }
      `})]})}function b3(){const{user:e,logout:t}=en();return a.jsxs("div",{className:"staff-portal",children:[a.jsx("header",{className:"staff-header",children:a.jsxs("div",{className:"staff-header-content",children:[a.jsx("h1",{children:" NCADbook Staff"}),a.jsxs("div",{className:"staff-header-actions",children:[a.jsx(dg,{}),a.jsx("span",{className:"staff-user-info",children:e==null?void 0:e.full_name}),a.jsx("button",{onClick:t,className:"btn btn-secondary btn-sm",children:"Logout"})]})]})}),a.jsxs("nav",{className:"staff-nav",children:[a.jsx(mn,{to:"/staff",end:!0,className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" Dashboard"}),a.jsx(mn,{to:"/staff/rooms",className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" Book Rooms"}),a.jsx(mn,{to:"/staff/equipment",className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" Equipment"}),a.jsx(mn,{to:"/staff/bookings",className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" My Bookings"}),a.jsx(mn,{to:"/staff/cross-department-requests",className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" Request Equipment"}),a.jsx(mn,{to:"/staff/my-cross-department-requests",className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" My Requests"})]}),a.jsx("main",{className:"staff-main",children:a.jsxs(uh,{children:[a.jsx(mt,{index:!0,element:a.jsx(l3,{})}),a.jsx(mt,{path:"rooms",element:a.jsx(h3,{})}),a.jsx(mt,{path:"equipment",element:a.jsx(P5,{})}),a.jsx(mt,{path:"bookings",element:a.jsx(T5,{})}),a.jsx(mt,{path:"cross-department-requests",element:a.jsx(F5,{})}),a.jsx(mt,{path:"my-cross-department-requests",element:a.jsx(x3,{})})]})}),a.jsx(ug,{})]})}function _3(){const{user:e}=wr(),[t,n]=T.useState({totalBookings:0,pendingBookings:0,approvedBookings:0,totalEquipment:0,availableEquipment:0,totalUsers:0}),[r,s]=T.useState(!0);T.useEffect(()=>{i()},[]);const i=async()=>{try{const[o,l,c]=await Promise.all([jn.getAll(),yr.getAll(),Po.getAll()]),d=o.bookings||[],h=l.equipment||[],m=c.users||[];n({totalBookings:d.length,pendingBookings:d.filter(g=>g.status==="pending").length,approvedBookings:d.filter(g=>g.status==="approved").length,totalEquipment:h.length,availableEquipment:h.filter(g=>g.status==="available").length,totalUsers:m.filter(g=>g.role==="student").length})}catch(o){console.error("Failed to load stats:",o)}finally{s(!1)}};return r?a.jsx("div",{className:"admin-dashboard",children:a.jsx("div",{className:"admin-stats-grid",children:[1,2,3,4,5].map(o=>a.jsx("div",{className:"admin-skeleton"},o))})}):a.jsxs("div",{className:"admin-dashboard",children:[a.jsxs("div",{className:"admin-welcome",children:[a.jsxs("h2",{children:["Welcome, ",e==null?void 0:e.first_name,"! "]}),a.jsxs("p",{children:[(e==null?void 0:e.role)==="master_admin"?"Master Admin":"Department Admin"," Dashboard Overview"]})]}),a.jsxs("div",{className:"admin-stats-grid",children:[a.jsxs("div",{className:"admin-stat-card",children:[a.jsx("div",{className:"admin-stat-icon",children:""}),a.jsx("div",{className:"admin-stat-number",children:t.totalBookings}),a.jsx("div",{className:"admin-stat-label",children:"Total Bookings"})]}),a.jsxs("div",{className:"admin-stat-card",children:[a.jsx("div",{className:"admin-stat-icon",children:""}),a.jsx("div",{className:"admin-stat-number",children:t.pendingBookings}),a.jsx("div",{className:"admin-stat-label",children:"Pending Approval"})]}),a.jsxs("div",{className:"admin-stat-card",children:[a.jsx("div",{className:"admin-stat-icon",children:""}),a.jsx("div",{className:"admin-stat-number",children:t.approvedBookings}),a.jsx("div",{className:"admin-stat-label",children:"Approved"})]}),a.jsxs("div",{className:"admin-stat-card",children:[a.jsx("div",{className:"admin-stat-icon",children:""}),a.jsxs("div",{className:"admin-stat-number",children:[t.availableEquipment,"/",t.totalEquipment]}),a.jsx("div",{className:"admin-stat-label",children:"Equipment Available"})]}),a.jsxs("div",{className:"admin-stat-card",children:[a.jsx("div",{className:"admin-stat-icon",children:""}),a.jsx("div",{className:"admin-stat-number",children:t.totalUsers}),a.jsx("div",{className:"admin-stat-label",children:"Students"})]})]}),a.jsxs("div",{className:"admin-dashboard-grid",children:[a.jsxs("div",{className:"admin-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"admin-card-icon",children:""})," Quick Actions"]}),a.jsxs("div",{className:"admin-quick-actions",children:[a.jsxs("a",{href:"/admin/approvals",className:"admin-action-btn",children:[" Review Pending Bookings (",t.pendingBookings,")"]}),a.jsx("a",{href:"/admin/equipment",className:"admin-action-btn secondary",children:" Manage Equipment"}),(e==null?void 0:e.role)==="master_admin"&&a.jsx("a",{href:"/admin/users",className:"admin-action-btn secondary",children:" Manage Users"})]})]}),a.jsxs("div",{className:"admin-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"admin-card-icon",children:""})," Admin Info"]}),a.jsxs("div",{className:"admin-info-content",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Role:"})," ",(e==null?void 0:e.role)==="master_admin"?"Master Admin":"Department Admin"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Department:"})," ",(e==null?void 0:e.department)||"System"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",e==null?void 0:e.email]})]})]})]})]})}function w3({selectedCount:e,onApproveAll:t,onDenyAll:n,onClearSelection:r,loading:s=!1,actions:i=[]}){if(e===0)return null;const o=[{label:"Approve Selected",onClick:t,className:"btn-success",testId:"bulk-approve-btn"},{label:"Deny Selected",onClick:n,className:"btn-error",testId:"bulk-deny-btn"}],l=i.length>0?i:o;return a.jsxs("div",{className:"bulk-action-bar",role:"toolbar","aria-label":"Bulk actions",children:[a.jsxs("div",{className:"bulk-action-info",children:[a.jsxs("span",{className:"selected-count","data-testid":"selected-count",children:[e," item",e!==1?"s":""," selected"]}),a.jsx("button",{onClick:r,className:"btn-text",disabled:s,"data-testid":"clear-selection-btn",children:"Clear selection"})]}),a.jsx("div",{className:"bulk-action-buttons",children:l.map((c,d)=>a.jsx("button",{onClick:c.onClick,disabled:s,className:`btn btn-sm ${c.className||"btn-primary"}`,"data-testid":c.testId,children:s?"Processing...":c.label},d))})]})}function j3({booking:e,onApprove:t,onDeny:n,onSelectToggle:r,isSelected:s,formatDate:i,getStatusColor:o,children:l}){var D,z,L,O,P,A;const[c,d]=T.useState(0),[h,m]=T.useState(!1),[g,p]=T.useState(0),j=T.useRef(null),N=100,C=Z=>{e.status==="pending"&&(p(Z.touches[0].clientX),m(!0))},y=Z=>{if(!h||e.status!=="pending")return;const ie=Z.touches[0].clientX-g,K=150,ne=Math.max(-K,Math.min(K,ie));d(ne)},b=()=>{!h||e.status!=="pending"||(c>N?(t(e.id),window.navigator.vibrate&&window.navigator.vibrate(50)):c<-N&&(n(e),window.navigator.vibrate&&window.navigator.vibrate([50,50])),d(0),m(!1))},w=Z=>{e.status==="pending"&&(p(Z.clientX),m(!0))},S=Z=>{if(!h||e.status!=="pending")return;const ie=Z.clientX-g,K=150,ne=Math.max(-K,Math.min(K,ie));d(ne)},R=()=>{!h||e.status!=="pending"||(c>N?t(e.id):c<-N&&n(e),d(0),m(!1))};T.useEffect(()=>{const Z=re=>{h&&re.preventDefault()};return document.addEventListener("mousemove",S),document.addEventListener("mouseup",R),document.addEventListener("touchmove",Z,{passive:!1}),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",R),document.removeEventListener("touchmove",Z)}},[h,c]);const U=c>50?"approve":c<-50?"deny":null,_=Math.min(Math.abs(c)/N,1);return a.jsxs("div",{ref:j,className:`swipe-action-card ${h?"dragging":""} ${U?`hint-${U}`:""}`,style:{transform:`translateX(${c}px)`,transition:h?"none":"transform 0.3s ease-out"},onTouchStart:C,onTouchMove:y,onTouchEnd:b,onMouseDown:w,"data-testid":"swipe-action-card",children:[e.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"swipe-action-bg swipe-approve",style:{opacity:c>0?_:0},children:[a.jsx("span",{className:"action-icon",children:""}),a.jsx("span",{className:"action-text",children:"Approve"})]}),a.jsxs("div",{className:"swipe-action-bg swipe-deny",style:{opacity:c<0?_:0},children:[a.jsx("span",{className:"action-icon",children:""}),a.jsx("span",{className:"action-text",children:"Deny"})]})]}),a.jsxs("div",{className:"approval-item","data-testid":"booking-card",children:[a.jsxs("div",{className:"approval-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[e.status==="pending"&&r&&a.jsx("input",{type:"checkbox",checked:s,onChange:()=>r(e.id),"data-testid":`select-booking-${e.id}`,"aria-label":`Select booking for ${(D=e.equipment)==null?void 0:D.product_name}`,style:{marginTop:"0.25rem"},onClick:Z=>Z.stopPropagation()}),a.jsxs("div",{children:[a.jsx("h3",{children:((z=e.equipment)==null?void 0:z.product_name)||"Unknown Equipment"}),a.jsxs("p",{className:"student-name",children:["Requested by: ",((L=e.student)==null?void 0:L.full_name)||"Unknown","(",(O=e.student)==null?void 0:O.department,")"]})]})]}),a.jsx("span",{className:"status-badge status-"+o(e.status),children:e.status})]}),a.jsxs("div",{className:"approval-details",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Equipment:"}),a.jsxs("span",{children:[(P=e.equipment)==null?void 0:P.category," - ",(A=e.equipment)==null?void 0:A.tracking_number]})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Dates:"}),a.jsxs("span",{children:[i(e.start_date)," - ",i(e.end_date)]})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Purpose:"}),a.jsx("span",{children:e.purpose||"Not provided"})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Requested:"}),a.jsx("span",{children:i(e.created_at)})]}),e.denial_reason&&a.jsxs("div",{className:"detail-row error",children:[a.jsx("span",{className:"label",children:"Denial Reason:"}),a.jsx("span",{children:e.denial_reason})]})]}),l]})]})}function N3(){var ae;const{user:e}=wr(),[t,n]=T.useState([]),[r,s]=T.useState([]),[i,o]=T.useState(!0),[l,c]=T.useState("pending"),[d,h]=T.useState(null),[m,g]=T.useState(!1),[p,j]=T.useState(""),[N,C]=T.useState(""),[y,b]=T.useState(1),w=20,[S,R]=T.useState([]),[W,U]=T.useState(!1),{toasts:_,showToast:D,removeToast:z}=Sn();T.useEffect(()=>{L()},[l]),T.useEffect(()=>{let ee=t;if(N.trim()){const ue=N.toLowerCase();ee=ee.filter(xe=>{var Ne,Se,ve,Q;return((Ne=xe.equipment)==null?void 0:Ne.product_name.toLowerCase().includes(ue))||((Se=xe.student)==null?void 0:Se.full_name.toLowerCase().includes(ue))||((ve=xe.student)==null?void 0:ve.email.toLowerCase().includes(ue))||((Q=xe.purpose)==null?void 0:Q.toLowerCase().includes(ue))})}s(ee),b(1)},[t,N]);const L=async()=>{o(!0);try{const ee={};l!=="all"&&(ee.status=l);const Ne=((await jn.getAll(ee)).bookings||[]).map(Se=>({...Se,equipment:{id:Se.equipment_id,product_name:Se.equipment_name,category:Se.equipment_category,department:Se.equipment_department},student:{id:Se.user_id,full_name:Se.user_name,email:Se.user_email,department:Se.user_department}}));n(Ne.sort((Se,ve)=>new Date(ve.created_at)-new Date(Se.created_at)))}catch(ee){console.error("Failed to load bookings:",ee),D("Failed to load bookings","error"),n([])}finally{o(!1)}},O=async ee=>{try{const ue=t.find(xe=>xe.id===ee);await jn.approve(ee);try{const xe=[ue.equipment],Ne=await Hn.sendBookingApproved(ue,ue.student,xe,e);!Ne.success&&Hn.isConfigured()&&console.warn("Email notification failed:",Ne.error)}catch(xe){console.error("Failed to send approval email:",xe)}await L(),D("Booking approved successfully","success")}catch(ue){D("Failed to approve booking: "+ue.message,"error")}},P=ee=>{h(ee),g(!0)},A=async()=>{if(!p.trim()){D("Please provide a reason for denial","error");return}try{await jn.deny(d.id,p);try{const ee=[d.equipment],ue=await Hn.sendBookingDenied(d,d.student,ee,e,p);!ue.success&&Hn.isConfigured()&&console.warn("Email notification failed:",ue.error)}catch(ee){console.error("Failed to send denial email:",ee)}g(!1),j(""),h(null),await L(),D("Booking denied","success")}catch(ee){D("Failed to deny booking: "+ee.message,"error")}},Z=ee=>new Date(ee).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),re=ee=>({pending:"warning",approved:"success",denied:"error",cancelled:"secondary"})[ee]||"secondary",ie=ee=>{C(ee)},K=ee=>{b(ee),window.scrollTo({top:0,behavior:"smooth"})},ne=async()=>{await L()},pe=ee=>{R(ue=>ue.includes(ee)?ue.filter(xe=>xe!==ee):[...ue,ee])},oe=()=>{S.length===ce.length?R([]):R(ce.map(ee=>ee.id))},E=async()=>{U(!0);try{const ee=S.map(async ue=>{const xe=t.find(Ne=>Ne.id===ue);await jn.approve(ue);try{const Ne=[xe.equipment];await Hn.sendBookingApproved(xe,xe.student,Ne,e)}catch(Ne){console.error("Failed to send approval email:",Ne)}});await Promise.all(ee),await L(),R([]),D(`Successfully approved ${ee.length} booking(s)`,"success")}catch(ee){D("Failed to approve bookings: "+ee.message,"error")}finally{U(!1)}},q=()=>{S.length!==0&&(h(null),g(!0))},G=async()=>{if(!p.trim()){D("Please provide a reason for denial","error");return}U(!0);try{const ee=S.map(async ue=>{const xe=t.find(Ne=>Ne.id===ue);await jn.deny(ue,p);try{const Ne=[xe.equipment];await Hn.sendBookingDenied(xe,xe.student,Ne,e,p)}catch(Ne){console.error("Failed to send denial email:",Ne)}});await Promise.all(ee),await L(),R([]),g(!1),j(""),D(`Successfully denied ${ee.length} booking(s)`,"success")}catch(ee){D("Failed to deny bookings: "+ee.message,"error")}finally{U(!1)}},H=(y-1)*w,te=H+w,ce=r.slice(H,te);return a.jsxs("div",{className:"booking-approvals","data-testid":"booking-approvals",children:[a.jsxs(fg,{onRefresh:ne,children:[a.jsxs("div",{className:"approvals-header",children:[a.jsx("h2",{children:"Booking Approvals"}),a.jsx("div",{className:"filter-controls",children:["pending","approved","denied","cancelled","all"].map(ee=>a.jsx("button",{onClick:()=>c(ee),className:l===ee?"btn btn-primary btn-sm":"btn btn-secondary btn-sm","data-testid":`filter-${ee}`,children:ee.charAt(0).toUpperCase()+ee.slice(1)},ee))})]}),a.jsx(fh,{onSearch:ie,placeholder:"Search by equipment, student name, or purpose...",ariaLabel:"Search bookings"}),l==="pending"&&ce.length>0&&a.jsx(w3,{selectedCount:S.length,onApproveAll:E,onDenyAll:q,onClearSelection:()=>R([]),loading:W}),i?a.jsx("div",{className:"approvals-list",children:a.jsx(Ec,{type:"list-item",count:8})}):r.length===0?a.jsx("div",{className:"empty-state","data-testid":"empty-state",children:a.jsxs("p",{children:["No ",l!=="all"?l:""," bookings found",N?" matching your search":""]})}):a.jsxs(a.Fragment,{children:[l==="pending"&&ce.length>0&&a.jsx("div",{className:"select-all-container",style:{marginBottom:"1rem"},children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:S.length===ce.length&&ce.length>0,onChange:oe,"data-testid":"select-all-checkbox"}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:"Select All on Page"})]})}),a.jsx("div",{className:"approvals-list","data-testid":"bookings-list",children:ce.map(ee=>a.jsx(j3,{booking:ee,onApprove:O,onDeny:P,onSelectToggle:pe,isSelected:S.includes(ee.id),formatDate:Z,getStatusColor:re,children:ee.status==="pending"&&a.jsxs("div",{className:"approval-actions",children:[a.jsx("button",{onClick:()=>O(ee.id),className:"btn btn-primary btn-sm","data-testid":"approve-btn",children:"Approve"}),a.jsx("button",{onClick:()=>{h(ee),g(!0)},className:"btn btn-secondary btn-sm","data-testid":"deny-btn",children:"Deny"})]})},ee.id))}),a.jsx(Lc,{currentPage:y,totalItems:r.length,itemsPerPage:w,onPageChange:K,loading:i})]})]}),m&&a.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),"data-testid":"modal-overlay",children:a.jsxs("div",{className:"modal-content",onClick:ee=>ee.stopPropagation(),"data-testid":"deny-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{children:["Deny Booking",S.length>0?"s":""]}),a.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[S.length>0?a.jsxs("p",{children:["Deny ",a.jsx("strong",{children:S.length})," selected booking(s)?"]}):d?a.jsxs("p",{children:["Deny booking for ",a.jsx("strong",{children:(ae=d.equipment)==null?void 0:ae.product_name}),"?"]}):null,a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"deny-reason",children:"Reason for Denial (required)"}),a.jsx("textarea",{id:"deny-reason",value:p,onChange:ee=>j(ee.target.value),placeholder:"Explain why this booking is being denied...",rows:"4",required:!0,"data-testid":"deny-reason-input"})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:()=>g(!1),className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:S.length>0?G:A,className:"btn btn-primary","data-testid":"confirm-deny-btn",disabled:W,children:W?"Processing...":"Deny Booking"})]})]})]})}),_.map(ee=>a.jsx(kn,{message:ee.message,type:ee.type,onClose:()=>z(ee.id)},ee.id))]})}function S3({equipmentId:e,equipmentName:t}){const{user:n}=en(),[r,s]=T.useState([]),[i,o]=T.useState(!1),[l,c]=T.useState({type:"general",content:""}),[d,h]=T.useState(!1),[m,g]=T.useState("");T.useEffect(()=>{p()},[e]);const p=async()=>{try{const w=((await yr.getNotes(e)).notes||[]).map(S=>({id:S.id,equipment_id:S.equipment_id||e,note_type:S.note_type,note:S.note_content,creator_name:S.created_by_name,created_by:S.created_by,created_at:S.created_at}));s(w)}catch(y){console.error("Failed to load notes:",y),s([])}},j=async()=>{if(!l.content.trim()){g("Please enter a note");return}h(!0),g("");try{await yr.addNote(e,{note_type:l.type,note_content:l.content}),c({type:"general",content:""}),o(!1),await p()}catch(y){g(y.message||"Failed to add note")}finally{h(!1)}},N=y=>{const b={maintenance:"#3b82f6",damage:"#ef4444",usage:"#10b981",general:"#64748b"};return b[y]||b.general},C=y=>{const b={maintenance:"M",damage:"D",usage:"U",general:"G"};return b[y]||b.general};return!n||n.role!=="staff"&&n.role!=="department_admin"&&n.role!=="master_admin"?null:a.jsxs("div",{className:"equipment-notes-section",children:[a.jsxs("div",{className:"notes-header",children:[a.jsx("h3",{children:"Equipment Notes"}),a.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary btn-sm",children:"+ Add Note"})]}),r.length===0?a.jsx("div",{className:"empty-notes",children:a.jsx("p",{children:"No notes for this equipment yet."})}):a.jsx("div",{className:"notes-list",children:r.map(y=>a.jsxs("div",{className:"note-item",style:{borderLeftColor:N(y.note_type)},children:[a.jsxs("div",{className:"note-header",children:[a.jsxs("div",{className:"note-type",children:[a.jsx("span",{className:"note-icon",children:C(y.note_type)}),a.jsx("span",{className:"note-type-label",children:y.note_type})]}),a.jsxs("div",{className:"note-meta",children:[a.jsx("span",{className:"note-creator",children:y.creator_name}),a.jsx("span",{className:"note-date",children:new Date(y.created_at).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),a.jsx("div",{className:"note-content",children:y.note})]},y.id))}),i&&a.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:a.jsxs("div",{className:"modal-content",onClick:y=>y.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{children:["Add Note - ",t]}),a.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[m&&a.jsx("div",{className:"alert alert-error",style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#fee",color:"#c00",borderRadius:"4px"},children:m}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"note-type",children:"Note Type"}),a.jsxs("select",{id:"note-type",value:l.type,onChange:y=>c({...l,type:y.target.value}),className:"select-input",children:[a.jsx("option",{value:"general",children:"General"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"damage",children:"Damage"}),a.jsx("option",{value:"usage",children:"Usage"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"note-content",children:"Note"}),a.jsx("textarea",{id:"note-content",value:l.content,onChange:y=>c({...l,content:y.target.value}),placeholder:"Enter note details...",rows:"5",className:"form-textarea"})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:()=>{o(!1),g("")},className:"btn btn-secondary",disabled:d,children:"Cancel"}),a.jsx("button",{onClick:j,className:"btn btn-primary",disabled:d,children:d?"Adding...":"Add Note"})]})]})]})})]})}function k3({equipment:e,onClose:t,onSuccess:n,mode:r="add"}){const[s,i]=T.useState({product_name:"",tracking_number:"",description:"",category:"Camera",department:"Moving Image Design",status:"available",image_url:"",qr_code:"",requires_justification:!1}),[o,l]=T.useState(!1),[c,d]=T.useState({}),h=hh(),m=["Camera","Lens","Lighting","Audio","Grip & Support","Computer","Monitor","Storage","Accessories","Other"];T.useEffect(()=>{r==="edit"&&e&&i({product_name:e.product_name||"",tracking_number:e.tracking_number||"",description:e.description||"",category:e.category||"Camera",department:e.department||"Moving Image Design",status:e.status||"available",image_url:e.image_url||"",qr_code:e.qr_code||"",requires_justification:e.requires_justification||!1})},[e,r]);const g=N=>{const{name:C,value:y,type:b,checked:w}=N.target;i(S=>({...S,[C]:b==="checkbox"?w:y})),c[C]&&d(S=>({...S,[C]:""}))},p=()=>{const N={};return s.product_name.trim()||(N.product_name="Product name is required"),s.tracking_number.trim()||(N.tracking_number="Tracking number is required"),s.description.trim()||(N.description="Description is required"),s.category||(N.category="Category is required"),s.department||(N.department="Department is required"),d(N),Object.keys(N).length===0},j=async N=>{if(N.preventDefault(),!!p()){l(!0);try{r==="add"?await yr.create(s):await yr.update(e.id,s),n(),t()}catch(C){d({submit:C.message||"Failed to save equipment"})}finally{l(!1)}}};return a.jsxs("div",{className:"modal-overlay",onClick:t,children:[a.jsxs("div",{className:"modal-content equipment-form-modal",onClick:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:r==="add"?"Add Equipment":"Edit Equipment"}),a.jsx("button",{className:"modal-close",onClick:t,children:""})]}),a.jsxs("form",{onSubmit:j,className:"modal-body",children:[c.submit&&a.jsx("div",{className:"alert alert-error",style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#fee",color:"#c00",borderRadius:"4px"},children:c.submit}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"product_name",children:["Product Name ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("input",{type:"text",id:"product_name",name:"product_name",value:s.product_name,onChange:g,placeholder:"e.g., Canon EOS R5",className:c.product_name?"error":""}),c.product_name&&a.jsx("span",{className:"error-text",children:c.product_name})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"tracking_number",children:["Tracking Number ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("input",{type:"text",id:"tracking_number",name:"tracking_number",value:s.tracking_number,onChange:g,placeholder:"e.g., CAM-001",className:c.tracking_number?"error":""}),c.tracking_number&&a.jsx("span",{className:"error-text",children:c.tracking_number})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"category",children:["Category ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("select",{id:"category",name:"category",value:s.category,onChange:g,className:c.category?"error":"",children:m.map(N=>a.jsx("option",{value:N,children:N},N))}),c.category&&a.jsx("span",{className:"error-text",children:c.category})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"department",children:["Department ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("select",{id:"department",name:"department",value:s.department,onChange:g,className:c.department?"error":"",children:h.map(N=>a.jsx("option",{value:N.id,children:N.name},N.id))}),c.department&&a.jsx("span",{className:"error-text",children:c.department})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"status",children:"Status"}),a.jsxs("select",{id:"status",name:"status",value:s.status,onChange:g,children:[a.jsx("option",{value:"available",children:"Available"}),a.jsx("option",{value:"booked",children:"Booked"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"out_of_service",children:"Out of Service"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"qr_code",children:"QR Code"}),a.jsx("input",{type:"text",id:"qr_code",name:"qr_code",value:s.qr_code,onChange:g,placeholder:"Optional"})]}),a.jsxs("div",{className:"form-group full-width",children:[a.jsxs("label",{htmlFor:"description",children:["Description ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("textarea",{id:"description",name:"description",value:s.description,onChange:g,placeholder:"Enter detailed description...",rows:"4",className:c.description?"error":""}),c.description&&a.jsx("span",{className:"error-text",children:c.description})]}),a.jsxs("div",{className:"form-group full-width",children:[a.jsx("label",{htmlFor:"image_url",children:"Image URL"}),a.jsx("input",{type:"url",id:"image_url",name:"image_url",value:s.image_url,onChange:g,placeholder:"https://example.com/image.jpg"}),a.jsx("small",{children:"Enter a URL to an equipment image (optional)"})]}),a.jsxs("div",{className:"form-group full-width",children:[a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",name:"requires_justification",checked:s.requires_justification,onChange:g}),a.jsx("span",{children:"Requires booking justification"})]}),a.jsx("small",{children:"Students must provide a detailed reason when booking this equipment"})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",disabled:o,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:o?r==="add"?"Adding...":"Saving...":r==="add"?"Add Equipment":"Save Changes"})]})]})]}),a.jsx("style",{children:`
        .equipment-form-modal {
          max-width: 800px;
          max-height: 90vh;
          overflow-y: auto;
        }

        .form-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
        }

        .form-group.full-width {
          grid-column: 1 / -1;
        }

        .form-group {
          display: flex;
          flex-direction: column;
        }

        .form-group label {
          margin-bottom: 0.5rem;
          font-weight: 500;
          color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          padding: 0.75rem;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 1rem;
          background-color: #ffffff !important;
        }

        .form-group select {
          appearance: none !important;
          background-color: #ffffff !important;
          background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e") !important;
          background-repeat: no-repeat !important;
          background-position: right 12px center !important;
          background-size: 16px !important;
          padding-right: 40px !important;
          cursor: pointer;
          opacity: 1 !important;
        }

        .form-group input.error,
        .form-group select.error,
        .form-group textarea.error {
          border-color: #c00;
        }

        .error-text {
          color: #c00;
          font-size: 0.875rem;
          margin-top: 0.25rem;
        }

        .required {
          color: #c00;
        }

        .checkbox-label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-bottom: 0.5rem;
          cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] {
          width: 20px;
          height: 20px;
          cursor: pointer;
        }

        small {
          color: #666;
          font-size: 0.875rem;
        }

        @media (max-width: 768px) {
          .form-grid {
            grid-template-columns: 1fr;
          }

          .equipment-form-modal {
            max-width: 95%;
          }
        }
      `})]})}function C3(){const{user:e}=en(),[t,n]=T.useState([]),[r,s]=T.useState([]),[i,o]=T.useState(!0),[l,c]=T.useState("all"),[d,h]=T.useState(!1),[m,g]=T.useState(null),[p,j]=T.useState(""),[N,C]=T.useState(1),[y,b]=T.useState(!1),[w,S]=T.useState("add"),[R,W]=T.useState(!1),[U,_]=T.useState(null),D=20,{toasts:z,showToast:L,removeToast:O}=Sn(),P=hh(),A=(e==null?void 0:e.role)==="master_admin";T.useEffect(()=>{Z()},[l]),T.useEffect(()=>{let ae=t;if(p.trim()){const ee=p.toLowerCase();ae=ae.filter(ue=>ue.product_name.toLowerCase().includes(ee)||ue.description.toLowerCase().includes(ee)||ue.tracking_number.toLowerCase().includes(ee)||ue.category.toLowerCase().includes(ee))}s(ae),C(1)},[t,p]);const Z=async()=>{o(!0);try{const ae={};l!=="all"&&(ae.status=l),(e==null?void 0:e.role)==="department_admin"&&(ae.department=e.department);const ue=(await yr.getAll(ae)).equipment||[];n(ue)}catch(ae){console.error("Failed to load equipment:",ae),L("Failed to load equipment","error"),n([])}finally{o(!1)}},re=async(ae,ee)=>{try{await yr.update(ae,{status:ee}),await Z(),L("Equipment status updated","success")}catch(ue){L("Failed to update status: "+ue.message,"error")}},ie=async(ae,ee)=>{if(!A){L("Only Master Admin can change equipment department","error");return}try{await yr.update(ae,{department:ee}),await Z(),L("Equipment department updated","success")}catch(ue){L("Failed to update department: "+ue.message,"error")}},K=ae=>{j(ae)},ne=ae=>{C(ae),window.scrollTo({top:0,behavior:"smooth"})},pe=()=>{g(null),S("add"),b(!0)},oe=ae=>{g(ae),S("edit"),b(!0)},E=ae=>{_(ae),W(!0)},q=async()=>{if(U)try{await yr.delete(U.id),W(!1),_(null),await Z(),L("Equipment deleted successfully","success")}catch(ae){L("Failed to delete equipment: "+ae.message,"error")}},G=async()=>{b(!1),await Z(),L(w==="add"?"Equipment added successfully":"Equipment updated successfully","success")},H=(N-1)*D,te=H+D,ce=r.slice(H,te);return a.jsxs("div",{className:"equipment-management",children:[a.jsx("h2",{children:"Equipment Management"}),a.jsx("p",{className:"subtitle",children:"Manage equipment inventory and status"}),a.jsx(fh,{onSearch:K,placeholder:"Search by name, tracking number, or category...",ariaLabel:"Search equipment"}),a.jsxs("div",{className:"management-controls",children:[a.jsx("div",{className:"filter-controls",children:["all","available","booked","maintenance"].map(ae=>a.jsx("button",{onClick:()=>c(ae),className:l===ae?"btn btn-primary btn-sm":"btn btn-secondary btn-sm",children:ae.charAt(0).toUpperCase()+ae.slice(1)},ae))}),a.jsx("button",{onClick:pe,className:"btn btn-primary",children:"+ Add Equipment"})]}),i?a.jsx("div",{className:"equipment-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Equipment"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Tracking #"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:a.jsx(Ec,{type:"table-row",count:10})})]})}):r.length===0?a.jsx("div",{className:"empty-state",children:a.jsxs("p",{children:["No equipment found",p?" matching your search":""]})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"equipment-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Equipment"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Tracking #"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ce.map(ae=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("strong",{children:ae.product_name}),a.jsx("br",{}),a.jsx("small",{children:ae.description})]}),a.jsx("td",{children:ae.category}),a.jsx("td",{className:"tracking-number",children:ae.tracking_number}),a.jsx("td",{children:A?a.jsx("select",{value:ae.department,onChange:ee=>ie(ae.id,ee.target.value),className:"department-select",children:P.map(ee=>a.jsx("option",{value:ee.id,children:ee.name},ee.id))}):a.jsx("span",{children:ae.department})}),a.jsx("td",{children:a.jsxs("select",{value:ae.status,onChange:ee=>re(ae.id,ee.target.value),className:"status-select",children:[a.jsx("option",{value:"available",children:"Available"}),a.jsx("option",{value:"booked",children:"Booked"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"out_of_service",children:"Out of Service"})]})}),a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>{g(ae),h(!0)},className:"btn btn-secondary btn-sm",children:"View"}),a.jsx("button",{onClick:()=>oe(ae),className:"btn btn-primary btn-sm",children:"Edit"}),A&&a.jsx("button",{onClick:()=>E(ae),className:"btn btn-danger btn-sm",children:"Delete"})]})})]},ae.id))})]})}),a.jsx(Lc,{currentPage:N,totalItems:r.length,itemsPerPage:D,onPageChange:ne,loading:i})]}),d&&m&&a.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:a.jsxs("div",{className:"modal-content equipment-detail-modal",onClick:ae=>ae.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:m.product_name}),a.jsx("button",{className:"modal-close",onClick:()=>h(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"equipment-detail-info",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Tracking Number:"}),a.jsx("span",{className:"detail-value tracking-number",children:m.tracking_number})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Category:"}),a.jsx("span",{className:"detail-value",children:m.category})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Department:"}),a.jsx("span",{className:"detail-value",children:m.department})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Status:"}),a.jsx("span",{className:`status status-${m.status}`,children:m.status})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Description:"}),a.jsx("span",{className:"detail-value",children:m.description})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Requires Justification:"}),a.jsx("span",{className:"detail-value",children:m.requires_justification?"Yes":"No"})]})]}),a.jsx(S3,{equipmentId:m.id,equipmentName:m.product_name})]})]})}),y&&a.jsx(k3,{equipment:m,onClose:()=>b(!1),onSuccess:G,mode:w}),R&&U&&a.jsx("div",{className:"modal-overlay",onClick:()=>W(!1),children:a.jsxs("div",{className:"modal-content",onClick:ae=>ae.stopPropagation(),style:{maxWidth:"500px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Confirm Delete"}),a.jsx("button",{className:"modal-close",onClick:()=>W(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("p",{children:["Are you sure you want to delete ",a.jsx("strong",{children:U.product_name}),"?"]}),a.jsx("p",{style:{color:"#c00",marginTop:"1rem"},children:" This action cannot be undone."})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:()=>W(!1),className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:q,className:"btn btn-danger",children:"Delete Equipment"})]})]})}),z.map(ae=>a.jsx(kn,{message:ae.message,type:ae.type,onClose:()=>O(ae.id)},ae.id))]})}const A3="modulepreload",D3=function(e){return"/NCADbook/"+e},_1={},Sf=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=D3(c),c in _1)return;_1[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":A3,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,p)=>{m.addEventListener("load",g),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function Lt(e){"@babel/helpers - typeof";return Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(e)}var ya=Uint8Array,Fr=Uint16Array,mg=Int32Array,gg=new ya([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),vg=new ya([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w1=new ya([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),R5=function(e,t){for(var n=new Fr(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var s=new mg(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},O5=R5(gg,2),L3=O5.b,Qp=O5.r;L3[28]=258,Qp[258]=28;var E3=R5(vg,0),j1=E3.r,em=new Fr(32768);for(var Ht=0;Ht<32768;++Ht){var qs=(Ht&43690)>>1|(Ht&21845)<<1;qs=(qs&52428)>>2|(qs&13107)<<2,qs=(qs&61680)>>4|(qs&3855)<<4,em[Ht]=((qs&65280)>>8|(qs&255)<<8)>>1}var oc=function(e,t,n){for(var r=e.length,s=0,i=new Fr(t);s<r;++s)e[s]&&++i[e[s]-1];var o=new Fr(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(n){l=new Fr(1<<t);var c=15-t;for(s=0;s<r;++s)if(e[s])for(var d=s<<4|e[s],h=t-e[s],m=o[e[s]-1]++<<h,g=m|(1<<h)-1;m<=g;++m)l[em[m]>>c]=d}else for(l=new Fr(r),s=0;s<r;++s)e[s]&&(l[s]=em[o[e[s]-1]++]>>15-e[s]);return l},Gi=new ya(288);for(var Ht=0;Ht<144;++Ht)Gi[Ht]=8;for(var Ht=144;Ht<256;++Ht)Gi[Ht]=9;for(var Ht=256;Ht<280;++Ht)Gi[Ht]=7;for(var Ht=280;Ht<288;++Ht)Gi[Ht]=8;var Ou=new ya(32);for(var Ht=0;Ht<32;++Ht)Ou[Ht]=5;var P3=oc(Gi,9,0),T3=oc(Ou,5,0),M5=function(e){return(e+7)/8|0},q3=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new ya(e.subarray(t,n))},Qa=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Wl=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},kf=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var s=n.length,i=n.slice();if(!s)return{t:U5,l:0};if(s==1){var o=new ya(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(R,W){return R.f-W.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],d=0,h=1,m=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};h!=s-1;)l=n[n[d].f<n[m].f?d++:m++],c=n[d!=h&&n[d].f<n[m].f?d++:m++],n[h++]={s:-1,f:l.f+c.f,l,r:c};for(var g=i[0].s,r=1;r<s;++r)i[r].s>g&&(g=i[r].s);var p=new Fr(g+1),j=tm(n[h-1],p,0);if(j>t){var r=0,N=0,C=j-t,y=1<<C;for(i.sort(function(W,U){return p[U.s]-p[W.s]||W.f-U.f});r<s;++r){var b=i[r].s;if(p[b]>t)N+=y-(1<<j-p[b]),p[b]=t;else break}for(N>>=C;N>0;){var w=i[r].s;p[w]<t?N-=1<<t-p[w]++-1:++r}for(;r>=0&&N;--r){var S=i[r].s;p[S]==t&&(--p[S],++N)}j=t}return{t:new ya(p),l:j}},tm=function(e,t,n){return e.s==-1?Math.max(tm(e.l,t,n+1),tm(e.r,t,n+1)):t[e.s]=n},N1=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Fr(++t),r=0,s=e[0],i=1,o=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:n.subarray(0,r),n:t}},Hl=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},B5=function(e,t,n){var r=n.length,s=M5(t+2);e[s]=r&255,e[s+1]=r>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<r;++i)e[s+i+4]=n[i];return(s+4+r)*8},S1=function(e,t,n,r,s,i,o,l,c,d,h){Qa(t,h++,n),++s[256];for(var m=kf(s,15),g=m.t,p=m.l,j=kf(i,15),N=j.t,C=j.l,y=N1(g),b=y.c,w=y.n,S=N1(N),R=S.c,W=S.n,U=new Fr(19),_=0;_<b.length;++_)++U[b[_]&31];for(var _=0;_<R.length;++_)++U[R[_]&31];for(var D=kf(U,7),z=D.t,L=D.l,O=19;O>4&&!z[w1[O-1]];--O);var P=d+5<<3,A=Hl(s,Gi)+Hl(i,Ou)+o,Z=Hl(s,g)+Hl(i,N)+o+14+3*O+Hl(U,z)+2*U[16]+3*U[17]+7*U[18];if(c>=0&&P<=A&&P<=Z)return B5(t,h,e.subarray(c,c+d));var re,ie,K,ne;if(Qa(t,h,1+(Z<A)),h+=2,Z<A){re=oc(g,p,0),ie=g,K=oc(N,C,0),ne=N;var pe=oc(z,L,0);Qa(t,h,w-257),Qa(t,h+5,W-1),Qa(t,h+10,O-4),h+=14;for(var _=0;_<O;++_)Qa(t,h+3*_,z[w1[_]]);h+=3*O;for(var oe=[b,R],E=0;E<2;++E)for(var q=oe[E],_=0;_<q.length;++_){var G=q[_]&31;Qa(t,h,pe[G]),h+=z[G],G>15&&(Qa(t,h,q[_]>>5&127),h+=q[_]>>12)}}else re=P3,ie=Gi,K=T3,ne=Ou;for(var _=0;_<l;++_){var H=r[_];if(H>255){var G=H>>18&31;Wl(t,h,re[G+257]),h+=ie[G+257],G>7&&(Qa(t,h,H>>23&31),h+=gg[G]);var te=H&31;Wl(t,h,K[te]),h+=ne[te],te>3&&(Wl(t,h,H>>5&8191),h+=vg[te])}else Wl(t,h,re[H]),h+=ie[H]}return Wl(t,h,re[256]),h+ie[256]},I3=new mg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),U5=new ya(0),F3=function(e,t,n,r,s,i){var o=i.z||e.length,l=new ya(r+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(r,l.length-s),d=i.l,h=(i.r||0)&7;if(t){h&&(c[0]=i.r>>3);for(var m=I3[t-1],g=m>>13,p=m&8191,j=(1<<n)-1,N=i.p||new Fr(32768),C=i.h||new Fr(j+1),y=Math.ceil(n/3),b=2*y,w=function(ve){return(e[ve]^e[ve+1]<<y^e[ve+2]<<b)&j},S=new mg(25e3),R=new Fr(288),W=new Fr(32),U=0,_=0,D=i.i||0,z=0,L=i.w||0,O=0;D+2<o;++D){var P=w(D),A=D&32767,Z=C[P];if(N[A]=Z,C[P]=A,L<=D){var re=o-D;if((U>7e3||z>24576)&&(re>423||!d)){h=S1(e,c,0,S,R,W,_,z,O,D-O,h),z=U=_=0,O=D;for(var ie=0;ie<286;++ie)R[ie]=0;for(var ie=0;ie<30;++ie)W[ie]=0}var K=2,ne=0,pe=p,oe=A-Z&32767;if(re>2&&P==w(D-oe))for(var E=Math.min(g,re)-1,q=Math.min(32767,D),G=Math.min(258,re);oe<=q&&--pe&&A!=Z;){if(e[D+K]==e[D+K-oe]){for(var H=0;H<G&&e[D+H]==e[D+H-oe];++H);if(H>K){if(K=H,ne=oe,H>E)break;for(var te=Math.min(oe,H-2),ce=0,ie=0;ie<te;++ie){var ae=D-oe+ie&32767,ee=N[ae],ue=ae-ee&32767;ue>ce&&(ce=ue,Z=ae)}}}A=Z,Z=N[A],oe+=A-Z&32767}if(ne){S[z++]=268435456|Qp[K]<<18|j1[ne];var xe=Qp[K]&31,Ne=j1[ne]&31;_+=gg[xe]+vg[Ne],++R[257+xe],++W[Ne],L=D+K,++U}else S[z++]=e[D],++R[e[D]]}}for(D=Math.max(D,L);D<o;++D)S[z++]=e[D],++R[e[D]];h=S1(e,c,d,S,R,W,_,z,O,D-O,h),d||(i.r=h&7|c[h/8|0]<<3,h-=7,i.h=C,i.p=N,i.i=D,i.w=L)}else{for(var D=i.w||0;D<o+d;D+=65535){var Se=D+65535;Se>=o&&(c[h/8|0]=d,Se=o),h=B5(c,h+1,e.subarray(D,Se))}i.i=o}return q3(l,0,r+M5(h)+s)},z5=function(){var e=1,t=0;return{p:function(n){for(var r=e,s=t,i=n.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=r+=n[o];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}e=r,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},R3=function(e,t,n,r,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new ya(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return F3(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,s)},$5=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},O3=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=z5();s.p(t.dictionary),$5(e,2,s.d())}};function nm(e,t){t||(t={});var n=z5();n.p(e);var r=R3(e,t,t.dictionary?6:2,4);return O3(r,t),$5(r,r.length-4,n.d()),r}var M3=typeof TextDecoder<"u"&&new TextDecoder,B3=0;try{M3.decode(U5,{stream:!0}),B3=1}catch{}function U3(e){if(Array.isArray(e))return e}function z3(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function k1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $3(e,t){if(e){if(typeof e=="string")return k1(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k1(e,t):void 0}}function W3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C1(e,t){return U3(e)||z3(e,t)||$3(e,t)||W3()}function A1(e,t="utf8"){return new TextDecoder(t).decode(e)}const H3=new TextEncoder;function V3(e){return H3.encode(e)}const G3=1024*8,K3=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),Cf={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class yg{constructor(t=G3,n={}){Ct(this,"buffer");Ct(this,"byteLength");Ct(this,"byteOffset");Ct(this,"length");Ct(this,"offset");Ct(this,"lastWrittenByte");Ct(this,"littleEndian");Ct(this,"_data");Ct(this,"_mark");Ct(this,"_marks");let r=!1;typeof t=="number"?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const s=n.offset?n.offset>>>0:0,i=t.byteLength-s;let o=s;(ArrayBuffer.isView(t)||t instanceof yg)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+s),t=t.buffer),r?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=(this.offset+t)*2,s=new Uint8Array(r);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const r=Cf[n].BYTES_PER_ELEMENT*t,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+r);if(this.littleEndian===K3&&n!=="uint8"&&n!=="int8"){const l=new Uint8Array(this.buffer.slice(s,s+r));l.reverse();const c=new Cf[n](l.buffer);return this.offset+=r,c.reverse(),c}const o=new Cf[n](i);return this.offset+=r,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return A1(this.readBytes(t))}decodeText(t=1,n="utf8"){return A1(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(V3(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function il(e){let t=e.length;for(;--t>=0;)e[t]=0}const Z3=3,Y3=258,W5=29,J3=256,X3=J3+1+W5,H5=30,Q3=512,eN=new Array((X3+2)*2);il(eN);const tN=new Array(H5*2);il(tN);const nN=new Array(Q3);il(nN);const rN=new Array(Y3-Z3+1);il(rN);const aN=new Array(W5);il(aN);const sN=new Array(H5);il(sN);const iN=(e,t,n,r)=>{let s=e&65535|0,i=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do s=s+t[r++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0};var rm=iN;const oN=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},lN=new Uint32Array(oN()),cN=(e,t,n,r)=>{const s=lN,i=r+n;e^=-1;for(let o=r;o<i;o++)e=e>>>8^s[(e^t[o])&255];return e^-1};var La=cN,am={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},V5={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const dN=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var uN=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)dN(n,r)&&(e[r]=n[r])}}return e},hN=e=>{let t=0;for(let r=0,s=e.length;r<s;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,s=0,i=e.length;r<i;r++){let o=e[r];n.set(o,s),s+=o.length}return n},G5={assign:uN,flattenChunks:hN};let K5=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{K5=!1}const Pc=new Uint8Array(256);for(let e=0;e<256;e++)Pc[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Pc[254]=Pc[254]=1;var fN=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,s,i,o=e.length,l=0;for(s=0;s<o;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(l),i=0,s=0;i<l;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|n&63):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|n&63):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|n&63);return t};const pN=(e,t)=>{if(t<65534&&e.subarray&&K5)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var mN=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,s;const i=new Array(n*2);for(s=0,r=0;r<n;){let o=e[r++];if(o<128){i[s++]=o;continue}let l=Pc[o];if(l>4){i[s++]=65533,r+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&r<n;)o=o<<6|e[r++]&63,l--;if(l>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return pN(i,s)},gN=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Pc[e[n]]>t?n:t},sm={string2buf:fN,buf2string:mN,utf8border:gN};function vN(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var yN=vN;const Md=16209,xN=16191;var bN=function(t,n){let r,s,i,o,l,c,d,h,m,g,p,j,N,C,y,b,w,S,R,W,U,_,D,z;const L=t.state;r=t.next_in,D=t.input,s=r+(t.avail_in-5),i=t.next_out,z=t.output,o=i-(n-t.avail_out),l=i+(t.avail_out-257),c=L.dmax,d=L.wsize,h=L.whave,m=L.wnext,g=L.window,p=L.hold,j=L.bits,N=L.lencode,C=L.distcode,y=(1<<L.lenbits)-1,b=(1<<L.distbits)-1;e:do{j<15&&(p+=D[r++]<<j,j+=8,p+=D[r++]<<j,j+=8),w=N[p&y];t:for(;;){if(S=w>>>24,p>>>=S,j-=S,S=w>>>16&255,S===0)z[i++]=w&65535;else if(S&16){R=w&65535,S&=15,S&&(j<S&&(p+=D[r++]<<j,j+=8),R+=p&(1<<S)-1,p>>>=S,j-=S),j<15&&(p+=D[r++]<<j,j+=8,p+=D[r++]<<j,j+=8),w=C[p&b];n:for(;;){if(S=w>>>24,p>>>=S,j-=S,S=w>>>16&255,S&16){if(W=w&65535,S&=15,j<S&&(p+=D[r++]<<j,j+=8,j<S&&(p+=D[r++]<<j,j+=8)),W+=p&(1<<S)-1,W>c){t.msg="invalid distance too far back",L.mode=Md;break e}if(p>>>=S,j-=S,S=i-o,W>S){if(S=W-S,S>h&&L.sane){t.msg="invalid distance too far back",L.mode=Md;break e}if(U=0,_=g,m===0){if(U+=d-S,S<R){R-=S;do z[i++]=g[U++];while(--S);U=i-W,_=z}}else if(m<S){if(U+=d+m-S,S-=m,S<R){R-=S;do z[i++]=g[U++];while(--S);if(U=0,m<R){S=m,R-=S;do z[i++]=g[U++];while(--S);U=i-W,_=z}}}else if(U+=m-S,S<R){R-=S;do z[i++]=g[U++];while(--S);U=i-W,_=z}for(;R>2;)z[i++]=_[U++],z[i++]=_[U++],z[i++]=_[U++],R-=3;R&&(z[i++]=_[U++],R>1&&(z[i++]=_[U++]))}else{U=i-W;do z[i++]=z[U++],z[i++]=z[U++],z[i++]=z[U++],R-=3;while(R>2);R&&(z[i++]=z[U++],R>1&&(z[i++]=z[U++]))}}else if(S&64){t.msg="invalid distance code",L.mode=Md;break e}else{w=C[(w&65535)+(p&(1<<S)-1)];continue n}break}}else if(S&64)if(S&32){L.mode=xN;break e}else{t.msg="invalid literal/length code",L.mode=Md;break e}else{w=N[(w&65535)+(p&(1<<S)-1)];continue t}break}}while(r<s&&i<l);R=j>>3,r-=R,j-=R<<3,p&=(1<<j)-1,t.next_in=r,t.next_out=i,t.avail_in=r<s?5+(s-r):5-(r-s),t.avail_out=i<l?257+(l-i):257-(i-l),L.hold=p,L.bits=j};const mo=15,D1=852,L1=592,E1=0,Af=1,P1=2,_N=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),wN=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),jN=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),NN=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),SN=(e,t,n,r,s,i,o,l)=>{const c=l.bits;let d=0,h=0,m=0,g=0,p=0,j=0,N=0,C=0,y=0,b=0,w,S,R,W,U,_=null,D;const z=new Uint16Array(mo+1),L=new Uint16Array(mo+1);let O=null,P,A,Z;for(d=0;d<=mo;d++)z[d]=0;for(h=0;h<r;h++)z[t[n+h]]++;for(p=c,g=mo;g>=1&&z[g]===0;g--);if(p>g&&(p=g),g===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,l.bits=1,0;for(m=1;m<g&&z[m]===0;m++);for(p<m&&(p=m),C=1,d=1;d<=mo;d++)if(C<<=1,C-=z[d],C<0)return-1;if(C>0&&(e===E1||g!==1))return-1;for(L[1]=0,d=1;d<mo;d++)L[d+1]=L[d]+z[d];for(h=0;h<r;h++)t[n+h]!==0&&(o[L[t[n+h]]++]=h);if(e===E1?(_=O=o,D=20):e===Af?(_=_N,O=wN,D=257):(_=jN,O=NN,D=0),b=0,h=0,d=m,U=i,j=p,N=0,R=-1,y=1<<p,W=y-1,e===Af&&y>D1||e===P1&&y>L1)return 1;for(;;){P=d-N,o[h]+1<D?(A=0,Z=o[h]):o[h]>=D?(A=O[o[h]-D],Z=_[o[h]-D]):(A=96,Z=0),w=1<<d-N,S=1<<j,m=S;do S-=w,s[U+(b>>N)+S]=P<<24|A<<16|Z|0;while(S!==0);for(w=1<<d-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,h++,--z[d]===0){if(d===g)break;d=t[n+o[h]]}if(d>p&&(b&W)!==R){for(N===0&&(N=p),U+=m,j=d-N,C=1<<j;j+N<g&&(C-=z[j+N],!(C<=0));)j++,C<<=1;if(y+=1<<j,e===Af&&y>D1||e===P1&&y>L1)return 1;R=b&W,s[R]=p<<24|j<<16|U-i|0}}return b!==0&&(s[U+b]=d-N<<24|64<<16|0),l.bits=p,0};var lc=SN;const kN=0,Z5=1,Y5=2,{Z_FINISH:T1,Z_BLOCK:CN,Z_TREES:Bd,Z_OK:Ki,Z_STREAM_END:AN,Z_NEED_DICT:DN,Z_STREAM_ERROR:na,Z_DATA_ERROR:J5,Z_MEM_ERROR:X5,Z_BUF_ERROR:LN,Z_DEFLATED:q1}=V5,mh=16180,I1=16181,F1=16182,R1=16183,O1=16184,M1=16185,B1=16186,U1=16187,z1=16188,$1=16189,Mu=16190,es=16191,Df=16192,W1=16193,Lf=16194,H1=16195,V1=16196,G1=16197,K1=16198,Ud=16199,zd=16200,Z1=16201,Y1=16202,J1=16203,X1=16204,Q1=16205,Ef=16206,e2=16207,t2=16208,Gt=16209,Q5=16210,ex=16211,EN=852,PN=592,TN=15,qN=TN,n2=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function IN(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Xi=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<mh||t.mode>ex?1:0},tx=e=>{if(Xi(e))return na;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=mh,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(EN),t.distcode=t.distdyn=new Int32Array(PN),t.sane=1,t.back=-1,Ki},nx=e=>{if(Xi(e))return na;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,tx(e)},rx=(e,t)=>{let n;if(Xi(e))return na;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?na:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,nx(e))},ax=(e,t)=>{if(!e)return na;const n=new IN;e.state=n,n.strm=e,n.window=null,n.mode=mh;const r=rx(e,t);return r!==Ki&&(e.state=null),r},FN=e=>ax(e,qN);let r2=!0,Pf,Tf;const RN=e=>{if(r2){Pf=new Int32Array(512),Tf=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(lc(Z5,e.lens,0,288,Pf,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;lc(Y5,e.lens,0,32,Tf,0,e.work,{bits:5}),r2=!1}e.lencode=Pf,e.lenbits=9,e.distcode=Tf,e.distbits=5},sx=(e,t,n,r)=>{let s;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>r&&(s=r),i.window.set(t.subarray(n-r,n-r+s),i.wnext),r-=s,r?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},ON=(e,t)=>{let n,r,s,i,o,l,c,d,h,m,g,p,j,N,C=0,y,b,w,S,R,W,U,_;const D=new Uint8Array(4);let z,L;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Xi(e)||!e.output||!e.input&&e.avail_in!==0)return na;n=e.state,n.mode===es&&(n.mode=Df),o=e.next_out,s=e.output,c=e.avail_out,i=e.next_in,r=e.input,l=e.avail_in,d=n.hold,h=n.bits,m=l,g=c,_=Ki;e:for(;;)switch(n.mode){case mh:if(n.wrap===0){n.mode=Df;break}for(;h<16;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(n.wrap&2&&d===35615){n.wbits===0&&(n.wbits=15),n.check=0,D[0]=d&255,D[1]=d>>>8&255,n.check=La(n.check,D,2,0),d=0,h=0,n.mode=I1;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=Gt;break}if((d&15)!==q1){e.msg="unknown compression method",n.mode=Gt;break}if(d>>>=4,h-=4,U=(d&15)+8,n.wbits===0&&(n.wbits=U),U>15||U>n.wbits){e.msg="invalid window size",n.mode=Gt;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=d&512?$1:es,d=0,h=0;break;case I1:for(;h<16;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(n.flags=d,(n.flags&255)!==q1){e.msg="unknown compression method",n.mode=Gt;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Gt;break}n.head&&(n.head.text=d>>8&1),n.flags&512&&n.wrap&4&&(D[0]=d&255,D[1]=d>>>8&255,n.check=La(n.check,D,2,0)),d=0,h=0,n.mode=F1;case F1:for(;h<32;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.head&&(n.head.time=d),n.flags&512&&n.wrap&4&&(D[0]=d&255,D[1]=d>>>8&255,D[2]=d>>>16&255,D[3]=d>>>24&255,n.check=La(n.check,D,4,0)),d=0,h=0,n.mode=R1;case R1:for(;h<16;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.head&&(n.head.xflags=d&255,n.head.os=d>>8),n.flags&512&&n.wrap&4&&(D[0]=d&255,D[1]=d>>>8&255,n.check=La(n.check,D,2,0)),d=0,h=0,n.mode=O1;case O1:if(n.flags&1024){for(;h<16;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),n.flags&512&&n.wrap&4&&(D[0]=d&255,D[1]=d>>>8&255,n.check=La(n.check,D,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=M1;case M1:if(n.flags&1024&&(p=n.length,p>l&&(p=l),p&&(n.head&&(U=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+p),U)),n.flags&512&&n.wrap&4&&(n.check=La(n.check,r,p,i)),l-=p,i+=p,n.length-=p),n.length))break e;n.length=0,n.mode=B1;case B1:if(n.flags&2048){if(l===0)break e;p=0;do U=r[i+p++],n.head&&U&&n.length<65536&&(n.head.name+=String.fromCharCode(U));while(U&&p<l);if(n.flags&512&&n.wrap&4&&(n.check=La(n.check,r,p,i)),l-=p,i+=p,U)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=U1;case U1:if(n.flags&4096){if(l===0)break e;p=0;do U=r[i+p++],n.head&&U&&n.length<65536&&(n.head.comment+=String.fromCharCode(U));while(U&&p<l);if(n.flags&512&&n.wrap&4&&(n.check=La(n.check,r,p,i)),l-=p,i+=p,U)break e}else n.head&&(n.head.comment=null);n.mode=z1;case z1:if(n.flags&512){for(;h<16;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(n.wrap&4&&d!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Gt;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=es;break;case $1:for(;h<32;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}e.adler=n.check=n2(d),d=0,h=0,n.mode=Mu;case Mu:if(n.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,n.hold=d,n.bits=h,DN;e.adler=n.check=1,n.mode=es;case es:if(t===CN||t===Bd)break e;case Df:if(n.last){d>>>=h&7,h-=h&7,n.mode=Ef;break}for(;h<3;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}switch(n.last=d&1,d>>>=1,h-=1,d&3){case 0:n.mode=W1;break;case 1:if(RN(n),n.mode=Ud,t===Bd){d>>>=2,h-=2;break e}break;case 2:n.mode=V1;break;case 3:e.msg="invalid block type",n.mode=Gt}d>>>=2,h-=2;break;case W1:for(d>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Gt;break}if(n.length=d&65535,d=0,h=0,n.mode=Lf,t===Bd)break e;case Lf:n.mode=H1;case H1:if(p=n.length,p){if(p>l&&(p=l),p>c&&(p=c),p===0)break e;s.set(r.subarray(i,i+p),o),l-=p,i+=p,c-=p,o+=p,n.length-=p;break}n.mode=es;break;case V1:for(;h<14;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(n.nlen=(d&31)+257,d>>>=5,h-=5,n.ndist=(d&31)+1,d>>>=5,h-=5,n.ncode=(d&15)+4,d>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Gt;break}n.have=0,n.mode=G1;case G1:for(;n.have<n.ncode;){for(;h<3;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.lens[O[n.have++]]=d&7,d>>>=3,h-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,z={bits:n.lenbits},_=lc(kN,n.lens,0,19,n.lencode,0,n.work,z),n.lenbits=z.bits,_){e.msg="invalid code lengths set",n.mode=Gt;break}n.have=0,n.mode=K1;case K1:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[d&(1<<n.lenbits)-1],y=C>>>24,b=C>>>16&255,w=C&65535,!(y<=h);){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(w<16)d>>>=y,h-=y,n.lens[n.have++]=w;else{if(w===16){for(L=y+2;h<L;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(d>>>=y,h-=y,n.have===0){e.msg="invalid bit length repeat",n.mode=Gt;break}U=n.lens[n.have-1],p=3+(d&3),d>>>=2,h-=2}else if(w===17){for(L=y+3;h<L;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}d>>>=y,h-=y,U=0,p=3+(d&7),d>>>=3,h-=3}else{for(L=y+7;h<L;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}d>>>=y,h-=y,U=0,p=11+(d&127),d>>>=7,h-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Gt;break}for(;p--;)n.lens[n.have++]=U}}if(n.mode===Gt)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Gt;break}if(n.lenbits=9,z={bits:n.lenbits},_=lc(Z5,n.lens,0,n.nlen,n.lencode,0,n.work,z),n.lenbits=z.bits,_){e.msg="invalid literal/lengths set",n.mode=Gt;break}if(n.distbits=6,n.distcode=n.distdyn,z={bits:n.distbits},_=lc(Y5,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,z),n.distbits=z.bits,_){e.msg="invalid distances set",n.mode=Gt;break}if(n.mode=Ud,t===Bd)break e;case Ud:n.mode=zd;case zd:if(l>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,n.hold=d,n.bits=h,bN(e,g),o=e.next_out,s=e.output,c=e.avail_out,i=e.next_in,r=e.input,l=e.avail_in,d=n.hold,h=n.bits,n.mode===es&&(n.back=-1);break}for(n.back=0;C=n.lencode[d&(1<<n.lenbits)-1],y=C>>>24,b=C>>>16&255,w=C&65535,!(y<=h);){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(b&&!(b&240)){for(S=y,R=b,W=w;C=n.lencode[W+((d&(1<<S+R)-1)>>S)],y=C>>>24,b=C>>>16&255,w=C&65535,!(S+y<=h);){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}d>>>=S,h-=S,n.back+=S}if(d>>>=y,h-=y,n.back+=y,n.length=w,b===0){n.mode=Q1;break}if(b&32){n.back=-1,n.mode=es;break}if(b&64){e.msg="invalid literal/length code",n.mode=Gt;break}n.extra=b&15,n.mode=Z1;case Z1:if(n.extra){for(L=n.extra;h<L;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Y1;case Y1:for(;C=n.distcode[d&(1<<n.distbits)-1],y=C>>>24,b=C>>>16&255,w=C&65535,!(y<=h);){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(!(b&240)){for(S=y,R=b,W=w;C=n.distcode[W+((d&(1<<S+R)-1)>>S)],y=C>>>24,b=C>>>16&255,w=C&65535,!(S+y<=h);){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}d>>>=S,h-=S,n.back+=S}if(d>>>=y,h-=y,n.back+=y,b&64){e.msg="invalid distance code",n.mode=Gt;break}n.offset=w,n.extra=b&15,n.mode=J1;case J1:if(n.extra){for(L=n.extra;h<L;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Gt;break}n.mode=X1;case X1:if(c===0)break e;if(p=g-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Gt;break}p>n.wnext?(p-=n.wnext,j=n.wsize-p):j=n.wnext-p,p>n.length&&(p=n.length),N=n.window}else N=s,j=o-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do s[o++]=N[j++];while(--p);n.length===0&&(n.mode=zd);break;case Q1:if(c===0)break e;s[o++]=n.length,c--,n.mode=zd;break;case Ef:if(n.wrap){for(;h<32;){if(l===0)break e;l--,d|=r[i++]<<h,h+=8}if(g-=c,e.total_out+=g,n.total+=g,n.wrap&4&&g&&(e.adler=n.check=n.flags?La(n.check,s,g,o-g):rm(n.check,s,g,o-g)),g=c,n.wrap&4&&(n.flags?d:n2(d))!==n.check){e.msg="incorrect data check",n.mode=Gt;break}d=0,h=0}n.mode=e2;case e2:if(n.wrap&&n.flags){for(;h<32;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(n.wrap&4&&d!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Gt;break}d=0,h=0}n.mode=t2;case t2:_=AN;break e;case Gt:_=J5;break e;case Q5:return X5;case ex:default:return na}return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,n.hold=d,n.bits=h,(n.wsize||g!==e.avail_out&&n.mode<Gt&&(n.mode<Ef||t!==T1))&&sx(e,e.output,e.next_out,g-e.avail_out),m-=e.avail_in,g-=e.avail_out,e.total_in+=m,e.total_out+=g,n.total+=g,n.wrap&4&&g&&(e.adler=n.check=n.flags?La(n.check,s,g,e.next_out-g):rm(n.check,s,g,e.next_out-g)),e.data_type=n.bits+(n.last?64:0)+(n.mode===es?128:0)+(n.mode===Ud||n.mode===Lf?256:0),(m===0&&g===0||t===T1)&&_===Ki&&(_=LN),_},MN=e=>{if(Xi(e))return na;let t=e.state;return t.window&&(t.window=null),e.state=null,Ki},BN=(e,t)=>{if(Xi(e))return na;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Ki):na},UN=(e,t)=>{const n=t.length;let r,s,i;return Xi(e)||(r=e.state,r.wrap!==0&&r.mode!==Mu)?na:r.mode===Mu&&(s=1,s=rm(s,t,n,0),s!==r.check)?J5:(i=sx(e,t,n,n),i?(r.mode=Q5,X5):(r.havedict=1,Ki))};var zN=nx,$N=rx,WN=tx,HN=FN,VN=ax,GN=ON,KN=MN,ZN=BN,YN=UN,JN="pako inflate (from Nodeca project)",rs={inflateReset:zN,inflateReset2:$N,inflateResetKeep:WN,inflateInit:HN,inflateInit2:VN,inflate:GN,inflateEnd:KN,inflateGetHeader:ZN,inflateSetDictionary:YN,inflateInfo:JN};function XN(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var QN=XN;const ix=Object.prototype.toString,{Z_NO_FLUSH:eS,Z_FINISH:tS,Z_OK:Tc,Z_STREAM_END:qf,Z_NEED_DICT:If,Z_STREAM_ERROR:nS,Z_DATA_ERROR:a2,Z_MEM_ERROR:rS}=V5;function Bc(e){this.options=G5.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yN,this.strm.avail_out=0;let n=rs.inflateInit2(this.strm,t.windowBits);if(n!==Tc)throw new Error(am[n]);if(this.header=new QN,rs.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=sm.string2buf(t.dictionary):ix.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=rs.inflateSetDictionary(this.strm,t.dictionary),n!==Tc)))throw new Error(am[n])}Bc.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?tS:eS,ix.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=rs.inflate(n,o),i===If&&s&&(i=rs.inflateSetDictionary(n,s),i===Tc?i=rs.inflate(n,o):i===a2&&(i=If));n.avail_in>0&&i===qf&&n.state.wrap>0&&e[n.next_in]!==0;)rs.inflateReset(n),i=rs.inflate(n,o);switch(i){case nS:case a2:case If:case rS:return this.onEnd(i),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||i===qf))if(this.options.to==="string"){let c=sm.utf8border(n.output,n.next_out),d=n.next_out-c,h=sm.buf2string(n.output,c);n.next_out=d,n.avail_out=r-d,d&&n.output.set(n.output.subarray(c,c+d),0),this.onData(h)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(i===Tc&&l===0)){if(i===qf)return i=rs.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Bc.prototype.onData=function(e){this.chunks.push(e)};Bc.prototype.onEnd=function(e){e===Tc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=G5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function aS(e,t){const n=new Bc(t);if(n.push(e),n.err)throw n.msg||am[n.err];return n.result}var sS=Bc,iS=aS,oS={Inflate:sS,inflate:iS};const{Inflate:lS,inflate:cS}=oS;var s2=lS,dS=cS;const ox=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;ox[e]=t}const i2=4294967295;function uS(e,t,n){let r=e;for(let s=0;s<n;s++)r=ox[(r^t[s])&255]^r>>>8;return r}function hS(e,t){return(uS(i2,e,t)^i2)>>>0}function o2(e,t,n){const r=e.readUint32(),s=hS(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${s}`)}function lx(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function cx(e,t,n,r){let s=0;for(;s<r;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-r]&255}function dx(e,t,n,r){let s=0;if(n.length===0)for(;s<r;s++)t[s]=e[s];else for(;s<r;s++)t[s]=e[s]+n[s]&255}function ux(e,t,n,r,s){let i=0;if(n.length===0){for(;i<s;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+(t[i-s]>>1)&255}else{for(;i<s;i++)t[i]=e[i]+(n[i]>>1)&255;for(;i<r;i++)t[i]=e[i]+(t[i-s]+n[i]>>1)&255}}function hx(e,t,n,r,s){let i=0;if(n.length===0){for(;i<s;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-s]&255}else{for(;i<s;i++)t[i]=e[i]+n[i]&255;for(;i<r;i++)t[i]=e[i]+fS(t[i-s],n[i],n[i-s])&255}}function fS(e,t,n){const r=e+t-n,s=Math.abs(r-e),i=Math.abs(r-t),o=Math.abs(r-n);return s<=i&&s<=o?e:i<=o?t:n}function pS(e,t,n,r,s,i){switch(e){case 0:lx(t,n,s);break;case 1:cx(t,n,s,i);break;case 2:dx(t,n,r,s);break;case 3:ux(t,n,r,s,i);break;case 4:hx(t,n,r,s,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const mS=new Uint16Array([255]),gS=new Uint8Array(mS.buffer),vS=gS[0]===255;function yS(e){const{data:t,width:n,height:r,channels:s,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*s,c=new Uint8Array(r*n*l);let d=0;for(let h=0;h<7;h++){const m=o[h],g=Math.ceil((n-m.x)/m.xStep),p=Math.ceil((r-m.y)/m.yStep);if(g<=0||p<=0)continue;const j=g*l,N=new Uint8Array(j);for(let C=0;C<p;C++){const y=t[d++],b=t.subarray(d,d+j);d+=j;const w=new Uint8Array(j);pS(y,b,w,N,j,l),N.set(w);for(let S=0;S<g;S++){const R=m.x+S*m.xStep,W=m.y+C*m.yStep;if(!(R>=n||W>=r))for(let U=0;U<l;U++)c[(W*n+R)*l+U]=w[S*l+U]}}}if(i===16){const h=new Uint16Array(c.buffer);if(vS)for(let m=0;m<h.length;m++)h[m]=xS(h[m]);return h}else return c}function xS(e){return(e&255)<<8|e>>8&255}const bS=new Uint16Array([255]),_S=new Uint8Array(bS.buffer),wS=_S[0]===255,jS=new Uint8Array(0);function l2(e){const{data:t,width:n,height:r,channels:s,depth:i}=e,o=Math.ceil(i/8)*s,l=Math.ceil(i/8*s*n),c=new Uint8Array(r*l);let d=jS,h=0,m,g;for(let p=0;p<r;p++){switch(m=t.subarray(h+1,h+1+l),g=c.subarray(p*l,(p+1)*l),t[h]){case 0:lx(m,g,l);break;case 1:cx(m,g,l,o);break;case 2:dx(m,g,d,l);break;case 3:ux(m,g,d,l,o);break;case 4:hx(m,g,d,l,o);break;default:throw new Error(`Unsupported filter: ${t[h]}`)}d=g,h+=l+1}if(i===16){const p=new Uint16Array(c.buffer);if(wS)for(let j=0;j<p.length;j++)p[j]=NS(p[j]);return p}else return c}function NS(e){return(e&255)<<8|e>>8&255}const iu=Uint8Array.of(137,80,78,71,13,10,26,10);function c2(e){if(!SS(e.readBytes(iu.length)))throw new Error("wrong PNG signature")}function SS(e){if(e.length<iu.length)return!1;for(let t=0;t<iu.length;t++)if(e[t]!==iu[t])return!1;return!0}const kS="tEXt",CS=0,fx=new TextDecoder("latin1");function AS(e){if(LS(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const DS=/^[\u0000-\u00FF]*$/;function LS(e){if(!DS.test(e))throw new Error("invalid latin1 text")}function ES(e,t,n){const r=px(t);e[r]=PS(t,n-r.length-1)}function px(e){for(e.mark();e.readByte()!==CS;);const t=e.offset;e.reset();const n=fx.decode(e.readBytes(t-e.offset-1));return e.skip(1),AS(n),n}function PS(e,t){return fx.decode(e.readBytes(t))}const Pr={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Ff={UNKNOWN:-1,DEFLATE:0},d2={UNKNOWN:-1,ADAPTIVE:0},Rf={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},$d={NONE:0,BACKGROUND:1,PREVIOUS:2},Of={SOURCE:0,OVER:1};class TS extends yg{constructor(n,r={}){super(n);Ct(this,"_checkCrc");Ct(this,"_inflator");Ct(this,"_png");Ct(this,"_apng");Ct(this,"_end");Ct(this,"_hasPalette");Ct(this,"_palette");Ct(this,"_hasTransparency");Ct(this,"_transparency");Ct(this,"_compressionMethod");Ct(this,"_filterMethod");Ct(this,"_interlaceMethod");Ct(this,"_colorType");Ct(this,"_isAnimated");Ct(this,"_numberOfFrames");Ct(this,"_numberOfPlays");Ct(this,"_frames");Ct(this,"_writingDataChunks");const{checkCrc:s=!1}=r;this._checkCrc=s,this._inflator=new s2,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Ff.UNKNOWN,this._filterMethod=d2.UNKNOWN,this._interlaceMethod=Rf.UNKNOWN,this._colorType=Pr.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(c2(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(c2(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const s=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case kS:ES(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?o2(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const s=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=s+n;break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?o2(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=qS(this.readUint8());const r=this.readUint8();this._colorType=r;let s;switch(r){case Pr.GREYSCALE:s=1;break;case Pr.TRUECOLOUR:s=3;break;case Pr.INDEXED_COLOUR:s=1;break;case Pr.GREYSCALE_ALPHA:s=2;break;case Pr.TRUECOLOUR_ALPHA:s=4;break;case Pr.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Ff.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<r;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,s=this.offset+this.byteOffset;if(s+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Pr.GREYSCALE:case Pr.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Pr.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const s=this.readByte();this._palette[r].push(s)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Pr.UNKNOWN:case Pr.GREYSCALE_ALPHA:case Pr.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=px(this),s=this.readUint8();if(s!==Ff.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:dS(i)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),s=this.readByte();this._png.resolution={x:n,y:r,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(n);if(s){if(s.data=l2({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)r.data=s.data;else{const i=this._apng.frames.at(n-1);this.disposeFrame(s,i,r),this.addFrameDataToCanvas(r,s)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,s){switch(n.disposeOp){case $d.NONE:break;case $d.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*n.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)s.data[l+c]=0}break;case $d.PREVIOUS:s.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const s=1<<this._png.depth,i=(o,l)=>{const c=((o+r.yOffset)*this._png.width+r.xOffset+l)*this._png.channels,d=(o*r.width+l)*this._png.channels;return{index:c,frameIndex:d}};switch(r.blendOp){case Of.SOURCE:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:c,frameIndex:d}=i(o,l);for(let h=0;h<this._png.channels;h++)n.data[c+h]=r.data[d+h]}break;case Of.OVER:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:c,frameIndex:d}=i(o,l);for(let h=0;h<this._png.channels;h++){const m=r.data[d+this._png.channels-1]/s,g=h%(this._png.channels-1)===0?1:r.data[d+h],p=Math.floor(m*g+(1-m)*n.data[c+h]);n.data[c+h]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==d2.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Rf.NO_INTERLACE)this._png.data=l2({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Rf.ADAM7)this._png.data=yS({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:$d.NONE,blendOp:Of.SOURCE,data:n}),this._inflator=new s2,this._writingDataChunks=!1}}function qS(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var u2;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(u2||(u2={}));function IS(e,t){return new TS(e,t).decode()}var Xe=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Mf(){Xe.console&&typeof Xe.console.log=="function"&&Xe.console.log.apply(Xe.console,arguments)}var Rt={log:Mf,warn:function(e){Xe.console&&(typeof Xe.console.warn=="function"?Xe.console.warn.apply(Xe.console,arguments):Mf.call(null,arguments))},error:function(e){Xe.console&&(typeof Xe.console.error=="function"?Xe.console.error.apply(Xe.console,arguments):Mf(e))}};function Bf(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){qi(r.response,t,n)},r.onerror=function(){Rt.error("could not download file")},r.send()}function h2(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Wd(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var qi=Xe.saveAs||((typeof window>"u"?"undefined":Lt(window))!=="object"||window!==Xe?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=Xe.URL||Xe.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?h2(s.href)?Bf(e,t,n):Wd(s,s.target="_blank"):Wd(s)):(s.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){Wd(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(h2(e))Bf(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Wd(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Lt(i)!=="object"&&(Rt.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return Bf(e,t,n);var s=e.type==="application/octet-stream",i=/constructor/i.test(Xe.HTMLElement)||Xe.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Lt(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var h=l.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},l.readAsDataURL(e)}else{var c=Xe.URL||Xe.webkitURL,d=c.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function mx(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,i=n[r].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}var ou=Xe.atob.bind(Xe),f2=Xe.btoa.bind(Xe);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Uf(e,t){var n=e[0],r=e[1],s=e[2],i=e[3];n=er(n,r,s,i,t[0],7,-680876936),i=er(i,n,r,s,t[1],12,-389564586),s=er(s,i,n,r,t[2],17,606105819),r=er(r,s,i,n,t[3],22,-1044525330),n=er(n,r,s,i,t[4],7,-176418897),i=er(i,n,r,s,t[5],12,1200080426),s=er(s,i,n,r,t[6],17,-1473231341),r=er(r,s,i,n,t[7],22,-45705983),n=er(n,r,s,i,t[8],7,1770035416),i=er(i,n,r,s,t[9],12,-1958414417),s=er(s,i,n,r,t[10],17,-42063),r=er(r,s,i,n,t[11],22,-1990404162),n=er(n,r,s,i,t[12],7,1804603682),i=er(i,n,r,s,t[13],12,-40341101),s=er(s,i,n,r,t[14],17,-1502002290),n=tr(n,r=er(r,s,i,n,t[15],22,1236535329),s,i,t[1],5,-165796510),i=tr(i,n,r,s,t[6],9,-1069501632),s=tr(s,i,n,r,t[11],14,643717713),r=tr(r,s,i,n,t[0],20,-373897302),n=tr(n,r,s,i,t[5],5,-701558691),i=tr(i,n,r,s,t[10],9,38016083),s=tr(s,i,n,r,t[15],14,-660478335),r=tr(r,s,i,n,t[4],20,-405537848),n=tr(n,r,s,i,t[9],5,568446438),i=tr(i,n,r,s,t[14],9,-1019803690),s=tr(s,i,n,r,t[3],14,-187363961),r=tr(r,s,i,n,t[8],20,1163531501),n=tr(n,r,s,i,t[13],5,-1444681467),i=tr(i,n,r,s,t[2],9,-51403784),s=tr(s,i,n,r,t[7],14,1735328473),n=nr(n,r=tr(r,s,i,n,t[12],20,-1926607734),s,i,t[5],4,-378558),i=nr(i,n,r,s,t[8],11,-2022574463),s=nr(s,i,n,r,t[11],16,1839030562),r=nr(r,s,i,n,t[14],23,-35309556),n=nr(n,r,s,i,t[1],4,-1530992060),i=nr(i,n,r,s,t[4],11,1272893353),s=nr(s,i,n,r,t[7],16,-155497632),r=nr(r,s,i,n,t[10],23,-1094730640),n=nr(n,r,s,i,t[13],4,681279174),i=nr(i,n,r,s,t[0],11,-358537222),s=nr(s,i,n,r,t[3],16,-722521979),r=nr(r,s,i,n,t[6],23,76029189),n=nr(n,r,s,i,t[9],4,-640364487),i=nr(i,n,r,s,t[12],11,-421815835),s=nr(s,i,n,r,t[15],16,530742520),n=rr(n,r=nr(r,s,i,n,t[2],23,-995338651),s,i,t[0],6,-198630844),i=rr(i,n,r,s,t[7],10,1126891415),s=rr(s,i,n,r,t[14],15,-1416354905),r=rr(r,s,i,n,t[5],21,-57434055),n=rr(n,r,s,i,t[12],6,1700485571),i=rr(i,n,r,s,t[3],10,-1894986606),s=rr(s,i,n,r,t[10],15,-1051523),r=rr(r,s,i,n,t[1],21,-2054922799),n=rr(n,r,s,i,t[8],6,1873313359),i=rr(i,n,r,s,t[15],10,-30611744),s=rr(s,i,n,r,t[6],15,-1560198380),r=rr(r,s,i,n,t[13],21,1309151649),n=rr(n,r,s,i,t[4],6,-145523070),i=rr(i,n,r,s,t[11],10,-1120210379),s=rr(s,i,n,r,t[2],15,718787259),r=rr(r,s,i,n,t[9],21,-343485551),e[0]=$s(n,e[0]),e[1]=$s(r,e[1]),e[2]=$s(s,e[2]),e[3]=$s(i,e[3])}function gh(e,t,n,r,s,i){return t=$s($s(t,e),$s(r,i)),$s(t<<s|t>>>32-s,n)}function er(e,t,n,r,s,i,o){return gh(t&n|~t&r,e,t,s,i,o)}function tr(e,t,n,r,s,i,o){return gh(t&r|n&~r,e,t,s,i,o)}function nr(e,t,n,r,s,i,o){return gh(t^n^r,e,t,s,i,o)}function rr(e,t,n,r,s,i,o){return gh(n^(t|~r),e,t,s,i,o)}function gx(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Uf(r,FS(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Uf(r,s),t=0;t<16;t++)s[t]=0;return s[14]=8*n,Uf(r,s),r}function FS(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var p2="0123456789abcdef".split("");function RS(e){for(var t="",n=0;n<4;n++)t+=p2[e>>8*n+4&15]+p2[e>>8*n&15];return t}function OS(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function im(e){return gx(e).map(OS).join("")}var MS=function(e){for(var t=0;t<e.length;t++)e[t]=RS(e[t]);return e.join("")}(gx("hello"))!="5d41402abc4b2a76b9719d911017c592";function $s(e,t){if(MS){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function om(e,t){var n,r,s,i;if(e!==n){for(var o=(s=e,i=1+(256/e.length|0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var h=l[c];d=(d+h+o.charCodeAt(c))%256,l[c]=l[d],l[d]=h}n=e,r=l}else l=r;var m=t.length,g=0,p=0,j="";for(c=0;c<m;c++)p=(p+(h=l[g=(g+1)%256]))%256,l[g]=l[p],l[p]=h,o=l[(l[g]+l[p])%256],j+=String.fromCharCode(t.charCodeAt(c)^o);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var m2={print:4,modify:8,copy:16,"annot-forms":32};function yo(e,t,n,r){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(m2.perm!==void 0)throw new Error("Invalid permission: "+l);s+=m2[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=im(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=om(this.encryptionKey,this.padding)}function xo(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var s=e.charCodeAt(r);t+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):e[r]}return t}function g2(e){if(Lt(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var i=Math.random().toString(35);return t[n][i]=[r,!!s],i},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[n]){var o=t[n][i];try{o[0].apply(e,r)}catch(l){Xe.console&&Rt.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Bu(e){if(!(this instanceof Bu))return new Bu(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function vx(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Ii(e,t,n,r,s){if(!(this instanceof Ii))return new Ii(e,t,n,r,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,vx.call(this,r,s)}function To(e,t,n,r,s){if(!(this instanceof To))return new To(e,t,n,r,s);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,vx.call(this,r,s)}function We(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",h=null;Lt(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,s=e.format||s,i=e.compress||e.compressPdf||i,(h=e.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=g2;var j="1.3",N=p.__private__.getPdfVersion=function(){return j};p.__private__.setPdfVersion=function(v){j=v};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return C};var y=p.__private__.getPageFormat=function(v){return C[v]};s=s||"a4";var b="compat",w="advanced",S=b;function R(){this.saveGraphicsState(),Q(new Ze(Je,0,0,-Je,0,yi()*Je).toString()+" cm"),this.setFontSize(this.getFontSize()/Je),d="n",S=w}function W(){this.restoreGraphicsState(),d="S",S=b}var U=p.__private__.combineFontStyleAndFontWeight=function(v,I){if(v=="bold"&&I=="normal"||v=="bold"&&I==400||v=="normal"&&I=="italic"||v=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(v=I==400||I==="normal"?v==="italic"?"italic":"normal":I!=700&&I!=="bold"||v!=="normal"?(I==700?"bold":I)+""+v:"bold"),v};p.advancedAPI=function(v){var I=S===b;return I&&R.call(this),typeof v!="function"||(v(this),I&&W.call(this)),this},p.compatAPI=function(v){var I=S===w;return I&&W.call(this),typeof v!="function"||(v(this),I&&R.call(this)),this},p.isAdvancedAPI=function(){return S===w};var _,D=function(v){if(S!==w)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=p.roundToPrecision=p.__private__.roundToPrecision=function(v,I){var X=t||I;if(isNaN(v)||isNaN(X))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(X).replace(/0+$/,"")};_=p.hpf=p.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return z(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return z(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return z(v,16)};var L=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return z(v,2)},O=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return z(v,3)},P=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return S===b?v*Je:S===w?v:void 0},A=function(v){return P(function(I){return S===b?yi()-I:S===w?I:void 0}(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(t=parseInt(v,10))};var Z,re="00000000000000000000000000000000",ie=p.__private__.getFileId=function(){return re},K=p.__private__.setFileId=function(v){return re=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(cn=new yo(h.userPermissions,h.userPassword,h.ownerPassword,re)),re};p.setFileId=function(v){return K(v),this},p.getFileId=function(){return ie()};var ne=p.__private__.convertDateToPDFDate=function(v){var I=v.getTimezoneOffset(),X=I<0?"+":"-",se=Math.floor(Math.abs(I/60)),he=Math.abs(I%60),we=[X,G(se),"'",G(he),"'"].join("");return["D:",v.getFullYear(),G(v.getMonth()+1),G(v.getDate()),G(v.getHours()),G(v.getMinutes()),G(v.getSeconds()),we].join("")},pe=p.__private__.convertPDFDateToDate=function(v){var I=parseInt(v.substr(2,4),10),X=parseInt(v.substr(6,2),10)-1,se=parseInt(v.substr(8,2),10),he=parseInt(v.substr(10,2),10),we=parseInt(v.substr(12,2),10),Ae=parseInt(v.substr(14,2),10);return new Date(I,X,se,he,we,Ae,0)},oe=p.__private__.setCreationDate=function(v){var I;if(v===void 0&&(v=new Date),v instanceof Date)I=ne(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=v}return Z=I},E=p.__private__.getCreationDate=function(v){var I=Z;return v==="jsDate"&&(I=pe(Z)),I};p.setCreationDate=function(v){return oe(v),this},p.getCreationDate=function(v){return E(v)};var q,G=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},H=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},te=0,ce=[],ae=[],ee=0,ue=[],xe=[],Ne=!1,Se=ae;p.__private__.setCustomOutputDestination=function(v){Ne=!0,Se=v};var ve=function(v){Ne||(Se=v)};p.__private__.resetCustomOutputDestination=function(){Ne=!1,Se=ae};var Q=p.__private__.out=function(v){return v=v.toString(),ee+=v.length+1,Se.push(v),Se},nt=p.__private__.write=function(v){return Q(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Ye=p.__private__.getArrayBuffer=function(v){for(var I=v.length,X=new ArrayBuffer(I),se=new Uint8Array(X);I--;)se[I]=v.charCodeAt(I);return X},ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return ye};var ke=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return ke=S===w?v/Je:v,this};var qe,Ee=p.__private__.getFontSize=p.getFontSize=function(){return S===b?ke:ke*Je},st=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return st=v,this},p.__private__.getR2L=p.getR2L=function(){return st};var Ge,wt=p.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))qe=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');qe=v}else qe=parseInt(v,10)};p.__private__.getZoomMode=function(){return qe};var it,ot=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Ge=v};p.__private__.getPageMode=function(){return Ge};var Pt=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');it=v};p.__private__.getLayoutMode=function(){return it},p.__private__.setDisplayMode=p.setDisplayMode=function(v,I,X){return wt(v),Pt(I),ot(X),this};var ut={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(ut).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ut[v]},p.__private__.getDocumentProperties=function(){return ut},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var I in ut)ut.hasOwnProperty(I)&&v[I]&&(ut[I]=v[I]);return this},p.__private__.setDocumentProperty=function(v,I){if(Object.keys(ut).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ut[v]=I};var He,Je,Ve,Ot,jt,ze={},lt={},Tt=[],Ke={},vt={},ct={},ln={},Cn=null,qt=0,et=[],St=new g2(p),ii=e.hotfixes||[],Zn={},Ma={},_a=[],Ze=function v(I,X,se,he,we,Ae){if(!(this instanceof v))return new v(I,X,se,he,we,Ae);isNaN(I)&&(I=1),isNaN(X)&&(X=0),isNaN(se)&&(se=0),isNaN(he)&&(he=1),isNaN(we)&&(we=0),isNaN(Ae)&&(Ae=0),this._matrix=[I,X,se,he,we,Ae]};Object.defineProperty(Ze.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ze.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ze.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ze.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ze.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ze.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ze.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ze.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ze.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ze.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ze.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ze.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ze.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ze.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ze.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ze.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ze.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(v)},Ze.prototype.multiply=function(v){var I=v.sx*this.sx+v.shy*this.shx,X=v.sx*this.shy+v.shy*this.sy,se=v.shx*this.sx+v.sy*this.shx,he=v.shx*this.shy+v.sy*this.sy,we=v.tx*this.sx+v.ty*this.shx+this.tx,Ae=v.tx*this.shy+v.ty*this.sy+this.ty;return new Ze(I,X,se,he,we,Ae)},Ze.prototype.decompose=function(){var v=this.sx,I=this.shy,X=this.shx,se=this.sy,he=this.tx,we=this.ty,Ae=Math.sqrt(v*v+I*I),Oe=(v/=Ae)*X+(I/=Ae)*se;X-=v*Oe,se-=I*Oe;var Ue=Math.sqrt(X*X+se*se);return Oe/=Ue,v*(se/=Ue)<I*(X/=Ue)&&(v=-v,I=-I,Oe=-Oe,Ae=-Ae),{scale:new Ze(Ae,0,0,Ue,0,0),translate:new Ze(1,0,0,1,he,we),rotate:new Ze(v,I,-I,v,0,0),skew:new Ze(1,0,Oe,1,0,0)}},Ze.prototype.toString=function(v){return this.join(" ")},Ze.prototype.inversed=function(){var v=this.sx,I=this.shy,X=this.shx,se=this.sy,he=this.tx,we=this.ty,Ae=1/(v*se-I*X),Oe=se*Ae,Ue=-I*Ae,Qe=-X*Ae,rt=v*Ae;return new Ze(Oe,Ue,Qe,rt,-Oe*he-Qe*we,-Ue*he-rt*we)},Ze.prototype.applyToPoint=function(v){var I=v.x*this.sx+v.y*this.shx+this.tx,X=v.x*this.shy+v.y*this.sy+this.ty;return new gi(I,X)},Ze.prototype.applyToRectangle=function(v){var I=this.applyToPoint(v),X=this.applyToPoint(new gi(v.x+v.w,v.y+v.h));return new vl(I.x,I.y,X.x-I.x,X.y-I.y)},Ze.prototype.clone=function(){var v=this.sx,I=this.shy,X=this.shx,se=this.sy,he=this.tx,we=this.ty;return new Ze(v,I,X,se,he,we)},p.Matrix=Ze;var Ba=p.matrixMult=function(v,I){return I.multiply(v)},Ua=new Ze(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ua;var Ur=function(v,I){if(!vt[v]){var X=(I instanceof Ii?"Sh":"P")+(Object.keys(Ke).length+1).toString(10);I.id=X,vt[v]=X,Ke[X]=I,St.publish("addPattern",I)}};p.ShadingPattern=Ii,p.TilingPattern=To,p.addShadingPattern=function(v,I){return D("addShadingPattern()"),Ur(v,I),this},p.beginTilingPattern=function(v){D("beginTilingPattern()"),yl(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,I){D("endTilingPattern()"),I.stream=xe[q].join(`
`),Ur(v,I),St.publish("endTilingPattern",I),_a.pop().restore()};var zr,tn=p.__private__.newObject=function(){var v=In();return Mn(v,!0),v},In=p.__private__.newObjectDeferred=function(){return te++,ce[te]=function(){return ee},te},Mn=function(v,I){return I=typeof I=="boolean"&&I,ce[v]=ee,I&&Q(v+" 0 obj"),v},oi=p.__private__.newAdditionalObject=function(){var v={objId:In(),content:""};return ue.push(v),v},gs=In(),ra=In(),wa=p.__private__.decodeColorString=function(v){var I=v.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length!==5||I[4]!=="k"&&I[4]!=="K"||(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var X=parseFloat(I[0]);I=[X,X,X,"r"]}for(var se="#",he=0;he<3;he++)se+=("0"+Math.floor(255*parseFloat(I[he])).toString(16)).slice(-2);return se},aa=p.__private__.encodeColorString=function(v){var I;typeof v=="string"&&(v={ch1:v});var X=v.ch1,se=v.ch2,he=v.ch3,we=v.ch4,Ae=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof X=="string"&&X.charAt(0)!=="#"){var Oe=new mx(X);if(Oe.ok)X=Oe.toHex();else if(!/^\d*\.?\d*$/.test(X))throw new Error('Invalid color "'+X+'" passed to jsPDF.encodeColorString.')}if(typeof X=="string"&&/^#[0-9A-Fa-f]{3}$/.test(X)&&(X="#"+X[1]+X[1]+X[2]+X[2]+X[3]+X[3]),typeof X=="string"&&/^#[0-9A-Fa-f]{6}$/.test(X)){var Ue=parseInt(X.substr(1),16);X=Ue>>16&255,se=Ue>>8&255,he=255&Ue}if(se===void 0||we===void 0&&X===se&&se===he)I=typeof X=="string"?X+" "+Ae[0]:v.precision===2?L(X/255)+" "+Ae[0]:O(X/255)+" "+Ae[0];else if(we===void 0||Lt(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return["1.","1.","1.",Ae[1]].join(" ");I=typeof X=="string"?[X,se,he,Ae[1]].join(" "):v.precision===2?[L(X/255),L(se/255),L(he/255),Ae[1]].join(" "):[O(X/255),O(se/255),O(he/255),Ae[1]].join(" ")}else I=typeof X=="string"?[X,se,he,we,Ae[2]].join(" "):v.precision===2?[L(X),L(se),L(he),L(we),Ae[2]].join(" "):[O(X),O(se),O(he),O(we),Ae[2]].join(" ");return I},sa=p.__private__.getFilters=function(){return o},$r=p.__private__.putStream=function(v){var I=(v=v||{}).data||"",X=v.filters||sa(),se=v.alreadyAppliedFilters||[],he=v.addLength1||!1,we=I.length,Ae=v.objectId,Oe=function(An){return An};if(h!==null&&Ae===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Oe=cn.encryptor(Ae,0));var Ue={};X===!0&&(X=["FlateEncode"]);var Qe=v.additionalKeyValues||[],rt=(Ue=We.API.processDataByFilters!==void 0?We.API.processDataByFilters(I,X):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(se)?se.join(" "):se.toString());if(Ue.data.length!==0&&(Qe.push({key:"Length",value:Ue.data.length}),he===!0&&Qe.push({key:"Length1",value:we})),rt.length!=0)if(rt.split("/").length-1==1)Qe.push({key:"Filter",value:rt});else{Qe.push({key:"Filter",value:"["+rt+"]"});for(var Nt=0;Nt<Qe.length;Nt+=1)if(Qe[Nt].key==="DecodeParms"){for(var Zt=[],_n=0;_n<Ue.reverseChain.split("/").length-1;_n+=1)Zt.push("null");Zt.push(Qe[Nt].value),Qe[Nt].value="["+Zt.join(" ")+"]"}}Q("<<");for(var Mt=0;Mt<Qe.length;Mt++)Q("/"+Qe[Mt].key+" "+Qe[Mt].value);Q(">>"),Ue.data.length!==0&&(Q("stream"),Q(Oe(Ue.data)),Q("endstream"))},li=p.__private__.putPage=function(v){var I=v.number,X=v.data,se=v.objId,he=v.contentsObjId;Mn(se,!0),Q("<</Type /Page"),Q("/Parent "+v.rootDictionaryObjId+" 0 R"),Q("/Resources "+v.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(_(v.mediaBox.bottomLeftX))+" "+parseFloat(_(v.mediaBox.bottomLeftY))+" "+_(v.mediaBox.topRightX)+" "+_(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&Q("/CropBox ["+_(v.cropBox.bottomLeftX)+" "+_(v.cropBox.bottomLeftY)+" "+_(v.cropBox.topRightX)+" "+_(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&Q("/BleedBox ["+_(v.bleedBox.bottomLeftX)+" "+_(v.bleedBox.bottomLeftY)+" "+_(v.bleedBox.topRightX)+" "+_(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&Q("/TrimBox ["+_(v.trimBox.bottomLeftX)+" "+_(v.trimBox.bottomLeftY)+" "+_(v.trimBox.topRightX)+" "+_(v.trimBox.topRightY)+"]"),v.artBox!==null&&Q("/ArtBox ["+_(v.artBox.bottomLeftX)+" "+_(v.artBox.bottomLeftY)+" "+_(v.artBox.topRightX)+" "+_(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&Q("/UserUnit "+v.userUnit),St.publish("putPage",{objId:se,pageContext:et[I],pageNumber:I,page:X}),Q("/Contents "+he+" 0 R"),Q(">>"),Q("endobj");var we=X.join(`
`);return S===w&&(we+=`
Q`),Mn(he,!0),$r({data:we,filters:sa(),objectId:he}),Q("endobj"),se},ja=p.__private__.putPages=function(){var v,I,X=[];for(v=1;v<=qt;v++)et[v].objId=In(),et[v].contentsObjId=In();for(v=1;v<=qt;v++)X.push(li({number:v,data:xe[v],objId:et[v].objId,contentsObjId:et[v].contentsObjId,mediaBox:et[v].mediaBox,cropBox:et[v].cropBox,bleedBox:et[v].bleedBox,trimBox:et[v].trimBox,artBox:et[v].artBox,userUnit:et[v].userUnit,rootDictionaryObjId:gs,resourceDictionaryObjId:ra}));Mn(gs,!0),Q("<</Type /Pages");var se="/Kids [";for(I=0;I<qt;I++)se+=X[I]+" 0 R ";Q(se+"]"),Q("/Count "+qt),Q(">>"),Q("endobj"),St.publish("postPutPages")},ci=function(v){St.publish("putFont",{font:v,out:Q,newObject:tn,putStream:$r}),v.isAlreadyPutted!==!0&&(v.objectNumber=tn(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+xo(v.postScriptName)),Q("/Subtype /Type1"),typeof v.encoding=="string"&&Q("/Encoding /"+v.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},eo=function(v){v.objectNumber=tn();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[_(v.x),_(v.y),_(v.x+v.width),_(v.y+v.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var X=v.pages[1].join(`
`);$r({data:X,additionalKeyValues:I,objectId:v.objectNumber}),Q("endobj")},to=function(v,I){I||(I=21);var X=tn(),se=function(Ae,Oe){var Ue,Qe=[],rt=1/(Oe-1);for(Ue=0;Ue<1;Ue+=rt)Qe.push(Ue);if(Qe.push(1),Ae[0].offset!=0){var Nt={offset:0,color:Ae[0].color};Ae.unshift(Nt)}if(Ae[Ae.length-1].offset!=1){var Zt={offset:1,color:Ae[Ae.length-1].color};Ae.push(Zt)}for(var _n="",Mt=0,An=0;An<Qe.length;An++){for(Ue=Qe[An];Ue>Ae[Mt+1].offset;)Mt++;var wn=Ae[Mt].offset,Bn=(Ue-wn)/(Ae[Mt+1].offset-wn),Hr=Ae[Mt].color,fr=Ae[Mt+1].color;_n+=H(Math.round((1-Bn)*Hr[0]+Bn*fr[0]).toString(16))+H(Math.round((1-Bn)*Hr[1]+Bn*fr[1]).toString(16))+H(Math.round((1-Bn)*Hr[2]+Bn*fr[2]).toString(16))}return _n.trim()}(v.colors,I),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+I+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$r({data:se,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:X}),Q("endobj"),v.objectNumber=tn(),Q("<< /ShadingType "+v.type),Q("/ColorSpace /DeviceRGB");var we="/Coords ["+_(parseFloat(v.coords[0]))+" "+_(parseFloat(v.coords[1]))+" ";v.type===2?we+=_(parseFloat(v.coords[2]))+" "+_(parseFloat(v.coords[3])):we+=_(parseFloat(v.coords[2]))+" "+_(parseFloat(v.coords[3]))+" "+_(parseFloat(v.coords[4]))+" "+_(parseFloat(v.coords[5])),Q(we+="]"),v.matrix&&Q("/Matrix ["+v.matrix.toString()+"]"),Q("/Function "+X+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},no=function(v,I){var X=In(),se=tn();I.push({resourcesOid:X,objectOid:se}),v.objectNumber=se;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+v.boundingBox.map(_).join(" ")+"]"}),he.push({key:"XStep",value:_(v.xStep)}),he.push({key:"YStep",value:_(v.yStep)}),he.push({key:"Resources",value:X+" 0 R"}),v.matrix&&he.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),$r({data:v.stream,additionalKeyValues:he,objectId:v.objectNumber}),Q("endobj")},yh=function(v){for(var I in v.objectNumber=tn(),Q("<<"),v)switch(I){case"opacity":Q("/ca "+L(v[I]));break;case"stroke-opacity":Q("/CA "+L(v[I]))}Q(">>"),Q("endobj")},ol=function(v){Mn(v.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var I in Q("/Font <<"),ze)ze.hasOwnProperty(I)&&(m===!1||m===!0&&g.hasOwnProperty(I))&&Q("/"+I+" "+ze[I].objectNumber+" 0 R");Q(">>")}(),function(){if(Object.keys(Ke).length>0){for(var I in Q("/Shading <<"),Ke)Ke.hasOwnProperty(I)&&Ke[I]instanceof Ii&&Ke[I].objectNumber>=0&&Q("/"+I+" "+Ke[I].objectNumber+" 0 R");St.publish("putShadingPatternDict"),Q(">>")}}(),function(I){if(Object.keys(Ke).length>0){for(var X in Q("/Pattern <<"),Ke)Ke.hasOwnProperty(X)&&Ke[X]instanceof p.TilingPattern&&Ke[X].objectNumber>=0&&Ke[X].objectNumber<I&&Q("/"+X+" "+Ke[X].objectNumber+" 0 R");St.publish("putTilingPatternDict"),Q(">>")}}(v.objectOid),function(){if(Object.keys(ct).length>0){var I;for(I in Q("/ExtGState <<"),ct)ct.hasOwnProperty(I)&&ct[I].objectNumber>=0&&Q("/"+I+" "+ct[I].objectNumber+" 0 R");St.publish("putGStateDict"),Q(">>")}}(),function(){for(var I in Q("/XObject <<"),Zn)Zn.hasOwnProperty(I)&&Zn[I].objectNumber>=0&&Q("/"+I+" "+Zn[I].objectNumber+" 0 R");St.publish("putXobjectDict"),Q(">>")}(),Q(">>"),Q("endobj")},Uc=function(v){lt[v.fontName]=lt[v.fontName]||{},lt[v.fontName][v.fontStyle]=v.id},zc=function(v,I,X,se,he){var we={id:"F"+(Object.keys(ze).length+1).toString(10),postScriptName:v,fontName:I,fontStyle:X,encoding:se,isStandardFont:he||!1,metadata:{}};return St.publish("addFont",{font:we,instance:this}),ze[we.id]=we,Uc(we),we.id},Wr=p.__private__.pdfEscape=p.pdfEscape=function(v,I){return function(X,se){var he,we,Ae,Oe,Ue,Qe,rt,Nt,Zt;if(Ae=(se=se||{}).sourceEncoding||"Unicode",Ue=se.outputEncoding,(se.autoencode||Ue)&&ze[He].metadata&&ze[He].metadata[Ae]&&ze[He].metadata[Ae].encoding&&(Oe=ze[He].metadata[Ae].encoding,!Ue&&ze[He].encoding&&(Ue=ze[He].encoding),!Ue&&Oe.codePages&&(Ue=Oe.codePages[0]),typeof Ue=="string"&&(Ue=Oe[Ue]),Ue)){for(rt=!1,Qe=[],he=0,we=X.length;he<we;he++)(Nt=Ue[X.charCodeAt(he)])?Qe.push(String.fromCharCode(Nt)):Qe.push(X[he]),Qe[he].charCodeAt(0)>>8&&(rt=!0);X=Qe.join("")}for(he=X.length;rt===void 0&&he!==0;)X.charCodeAt(he-1)>>8&&(rt=!0),he--;if(!rt)return X;for(Qe=se.noBOM?[]:[254,255],he=0,we=X.length;he<we;he++){if((Zt=(Nt=X.charCodeAt(he))>>8)>>8)throw new Error("Character at position "+he+" of string '"+X+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(Zt),Qe.push(Nt-(Zt<<8))}return String.fromCharCode.apply(void 0,Qe)}(v,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ll=p.__private__.beginPage=function(v){xe[++qt]=[],et[qt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Wc(qt),ve(xe[q])},$c=function(v,I){var X,se,he;switch(n=I||n,typeof v=="string"&&(X=y(v.toLowerCase()),Array.isArray(X)&&(se=X[0],he=X[1])),Array.isArray(v)&&(se=v[0]*Je,he=v[1]*Je),isNaN(se)&&(se=s[0],he=s[1]),(se>14400||he>14400)&&(Rt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),se=Math.min(14400,se),he=Math.min(14400,he)),s=[se,he],n.substr(0,1)){case"l":he>se&&(s=[he,se]);break;case"p":se>he&&(s=[he,se])}ll(s),Ch(fl),Q(ao),ml!==0&&Q(ml+" J"),gl!==0&&Q(gl+" j"),St.publish("addPage",{pageNumber:qt})},cl=function(v){v>0&&v<=qt&&(xe.splice(v,1),et.splice(v,1),qt--,q>qt&&(q=qt),this.setPage(q))},Wc=function(v){v>0&&v<=qt&&(q=v)},Hc=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return xe.length-1},Vc=function(v,I,X){var se,he=void 0;return X=X||{},v=v!==void 0?v:ze[He].fontName,I=I!==void 0?I:ze[He].fontStyle,se=v.toLowerCase(),lt[se]!==void 0&&lt[se][I]!==void 0?he=lt[se][I]:lt[v]!==void 0&&lt[v][I]!==void 0?he=lt[v][I]:X.disableWarning===!1&&Rt.warn("Unable to look up font label for font '"+v+"', '"+I+"'. Refer to getFontList() for available fonts."),he||X.noFallback||(he=lt.times[I])==null&&(he=lt.times.normal),he},ro=p.__private__.putInfo=function(){var v=tn(),I=function(se){return se};for(var X in h!==null&&(I=cn.encryptor(v,0)),Q("<<"),Q("/Producer ("+Wr(I("jsPDF "+We.version))+")"),ut)ut.hasOwnProperty(X)&&ut[X]&&Q("/"+X.substr(0,1).toUpperCase()+X.substr(1)+" ("+Wr(I(ut[X]))+")");Q("/CreationDate ("+Wr(I(Z))+")"),Q(">>"),Q("endobj")},xh=p.__private__.putCatalog=function(v){var I=(v=v||{}).rootDictionaryObjId||gs;switch(tn(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+I+" 0 R"),qe||(qe="fullwidth"),qe){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var X=""+qe;X.substr(X.length-1)==="%"&&(qe=parseInt(qe)/100),typeof qe=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+L(qe)+"]")}switch(it||(it="continuous"),it){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}Ge&&Q("/PageMode /"+Ge),St.publish("putCatalog"),Q(">>"),Q("endobj")},bn=p.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(te+1)),Q("/Root "+te+" 0 R"),Q("/Info "+(te-1)+" 0 R"),h!==null&&Q("/Encrypt "+cn.oid+" 0 R"),Q("/ID [ <"+re+"> <"+re+"> ]"),Q(">>")},Gc=p.__private__.putHeader=function(){Q("%PDF-"+j),Q("%")},Kc=p.__private__.putXRef=function(){var v="0000000000";Q("xref"),Q("0 "+(te+1)),Q("0000000000 65535 f ");for(var I=1;I<=te;I++)typeof ce[I]=="function"?Q((v+ce[I]()).slice(-10)+" 00000 n "):ce[I]!==void 0?Q((v+ce[I]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},za=p.__private__.buildDocument=function(){var v;te=0,ee=0,ae=[],ce=[],ue=[],gs=In(),ra=In(),ve(ae),St.publish("buildDocument"),Gc(),ja(),function(){St.publish("putAdditionalObjects");for(var X=0;X<ue.length;X++){var se=ue[X];Mn(se.objId,!0),Q(se.content),Q("endobj")}St.publish("postPutAdditionalObjects")}(),v=[],function(){for(var X in ze)ze.hasOwnProperty(X)&&(m===!1||m===!0&&g.hasOwnProperty(X))&&ci(ze[X])}(),function(){var X;for(X in ct)ct.hasOwnProperty(X)&&yh(ct[X])}(),function(){for(var X in Zn)Zn.hasOwnProperty(X)&&eo(Zn[X])}(),function(X){var se;for(se in Ke)Ke.hasOwnProperty(se)&&(Ke[se]instanceof Ii?to(Ke[se]):Ke[se]instanceof To&&no(Ke[se],X))}(v),St.publish("putResources"),v.forEach(ol),ol({resourcesOid:ra,objectOid:Number.MAX_SAFE_INTEGER}),St.publish("postPutResources"),h!==null&&(cn.oid=tn(),Q("<<"),Q("/Filter /Standard"),Q("/V "+cn.v),Q("/R "+cn.r),Q("/U <"+cn.toHexString(cn.U)+">"),Q("/O <"+cn.toHexString(cn.O)+">"),Q("/P "+cn.P),Q(">>"),Q("endobj")),ro(),xh();var I=ee;return Kc(),bn(),Q("startxref"),Q(""+I),Q("%%EOF"),ve(xe[q]),ae.join(`
`)},di=p.__private__.getBlob=function(v){return new Blob([Ye(v)],{type:"application/pdf"})},ia=p.output=p.__private__.output=(zr=function(v,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",v){case void 0:return za();case"save":p.save(I.filename);break;case"arraybuffer":return Ye(za());case"blob":return di(za());case"bloburi":case"bloburl":if(Xe.URL!==void 0&&typeof Xe.URL.createObjectURL=="function")return Xe.URL&&Xe.URL.createObjectURL(di(za()))||void 0;Rt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var X="",se=za();try{X=f2(se)}catch{X=f2(unescape(encodeURIComponent(se)))}return"data:application/pdf;filename="+I.filename+";base64,"+X;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Xe)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(he=I.pdfObjectUrl,we="");var Ae='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",Oe=Xe.open();return Oe!==null&&Oe.document.write(Ae),Oe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Xe)==="[object Window]"){var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',Qe=Xe.open();if(Qe!==null){Qe.document.write(Ue);var rt=this;Qe.document.documentElement.querySelector("#pdfViewer").onload=function(){Qe.document.title=I.filename,Qe.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(rt.output("bloburl"))}}return Qe}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Xe)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',Zt=Xe.open();if(Zt!==null&&(Zt.document.write(Nt),Zt.document.title=I.filename),Zt||typeof safari>"u")return Zt;break;case"datauri":case"dataurl":return Xe.document.location.href=this.output("datauristring",I);default:return null}},zr.foo=function(){try{return zr.apply(this,arguments)}catch(X){var v=X.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var I="Error in function "+v.split(`
`)[0].split("<")[0]+": "+X.message;if(!Xe.console)throw new Error(I);Xe.console.error(I,X),Xe.alert&&alert(I)}},zr.foo.bar=zr,zr.foo),ui=function(v){return Array.isArray(ii)===!0&&ii.indexOf(v)>-1};switch(r){case"pt":Je=1;break;case"mm":Je=72/25.4;break;case"cm":Je=72/2.54;break;case"in":Je=72;break;case"px":Je=ui("px_scaling")==1?.75:96/72;break;case"pc":case"em":Je=12;break;case"ex":Je=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Je=r}var cn=null;oe(),K();var dl=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:et[v].objId,pageNumber:v,pageContext:et[v]}},bh=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in et)if(et[I].objId===v)break;return dl(I)},_h=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:et[q].objId,pageNumber:q,pageContext:et[q]}};p.addPage=function(){return $c.apply(this,arguments),this},p.setPage=function(){return Wc.apply(this,arguments),ve.call(this,xe[q]),this},p.insertPage=function(v){return this.addPage(),this.movePage(q,v),this},p.movePage=function(v,I){var X,se;if(v>I){X=xe[v],se=et[v];for(var he=v;he>I;he--)xe[he]=xe[he-1],et[he]=et[he-1];xe[I]=X,et[I]=se,this.setPage(I)}else if(v<I){X=xe[v],se=et[v];for(var we=v;we<I;we++)xe[we]=xe[we+1],et[we]=et[we+1];xe[I]=X,et[I]=se,this.setPage(I)}return this},p.deletePage=function(){return cl.apply(this,arguments),this},p.__private__.text=p.text=function(v,I,X,se,he){var we,Ae,Oe,Ue,Qe,rt,Nt,Zt,_n,Mt=(se=se||{}).scope||this;if(typeof v=="number"&&typeof I=="number"&&(typeof X=="string"||Array.isArray(X))){var An=X;X=I,I=v,v=An}if(arguments[3]instanceof Ze==0?(Oe=arguments[4],Ue=arguments[5],Lt(Nt=arguments[3])==="object"&&Nt!==null||(typeof Oe=="string"&&(Ue=Oe,Oe=null),typeof Nt=="string"&&(Ue=Nt,Nt=null),typeof Nt=="number"&&(Oe=Nt,Nt=null),se={flags:Nt,angle:Oe,align:Ue})):(D("The transform parameter of text() with a Matrix value"),_n=he),isNaN(I)||isNaN(X)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Mt;var wn,Bn="",Hr=typeof se.lineHeightFactor=="number"?se.lineHeightFactor:fi,fr=Mt.internal.scaleFactor;function nd(kt){return kt=kt.split("	").join(Array(se.TabLen||9).join(" ")),Wr(kt,Nt)}function lo(kt){for(var It,un=kt.concat(),Dn=[],Za=un.length;Za--;)typeof(It=un.shift())=="string"?Dn.push(It):Array.isArray(kt)&&(It.length===1||It[1]===void 0&&It[2]===void 0)?Dn.push(It[0]):Dn.push([It[0],It[1],It[2]]);return Dn}function xi(kt,It){var un;if(typeof kt=="string")un=It(kt)[0];else if(Array.isArray(kt)){for(var Dn,Za,Al=kt.concat(),ho=[],sd=Al.length;sd--;)typeof(Dn=Al.shift())=="string"?ho.push(It(Dn)[0]):Array.isArray(Dn)&&typeof Dn[0]=="string"&&(Za=It(Dn[0],Dn[1],Dn[2]),ho.push([Za[0],Za[1],Za[2]]));un=ho}return un}var xs=!1,bi=!0;if(typeof v=="string")xs=!0;else if(Array.isArray(v)){var _i=v.concat();Ae=[];for(var wi,Yn=_i.length;Yn--;)(typeof(wi=_i.shift())!="string"||Array.isArray(wi)&&typeof wi[0]!="string")&&(bi=!1);xs=bi}if(xs===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var ji=ke/Mt.internal.scaleFactor,Ni=ji*(Hr-1);switch(se.baseline){case"bottom":X-=Ni;break;case"top":X+=ji-Ni;break;case"hanging":X+=ji-2*Ni;break;case"middle":X+=ji/2-Ni}if((rt=se.maxWidth||0)>0&&(typeof v=="string"?v=Mt.splitTextToSize(v,rt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(kt,It){return kt.concat(Mt.splitTextToSize(It,rt))},[]))),we={text:v,x:I,y:X,options:se,mutex:{pdfEscape:Wr,activeFontKey:He,fonts:ze,activeFontSize:ke}},St.publish("preProcessText",we),v=we.text,Oe=(se=we.options).angle,_n instanceof Ze==0&&Oe&&typeof Oe=="number"){Oe*=Math.PI/180,se.rotationDirection===0&&(Oe=-Oe),S===w&&(Oe=-Oe);var xl=Math.cos(Oe),bl=Math.sin(Oe);_n=new Ze(xl,bl,-bl,xl,0,0)}else Oe&&Oe instanceof Ze&&(_n=Oe);S!==w||_n||(_n=Ua),(Qe=se.charSpace||io)!==void 0&&(Bn+=_(P(Qe))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Zt=se.horizontalScale)!==void 0&&(Bn+=_(100*Zt)+` Tz
`),se.lang;var nn=-1,Ga=se.renderingMode!==void 0?se.renderingMode:se.stroke,co=Mt.internal.getCurrentPageInfo().pageContext;switch(Ga){case 0:case!1:case"fill":nn=0;break;case 1:case!0:case"stroke":nn=1;break;case 2:case"fillThenStroke":nn=2;break;case 3:case"invisible":nn=3;break;case 4:case"fillAndAddForClipping":nn=4;break;case 5:case"strokeAndAddPathForClipping":nn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":nn=6;break;case 7:case"addToPathForClipping":nn=7}var rd=co.usedRenderingMode!==void 0?co.usedRenderingMode:-1;nn!==-1?Bn+=nn+` Tr
`:rd!==-1&&(Bn+=`0 Tr
`),nn!==-1&&(co.usedRenderingMode=nn),Ue=se.align||"left";var Vr,Si=ke*Hr,_l=Mt.internal.pageSize.getWidth(),wl=ze[He];Qe=se.charSpace||io,rt=se.maxWidth||0,Nt=Object.assign({autoencode:!0,noBOM:!0},se.flags);var bs=[],ki=function(kt){return Mt.getStringUnitWidth(kt,{font:wl,charSpace:Qe,fontSize:ke,doKerning:!1})*ke/fr};if(Object.prototype.toString.call(v)==="[object Array]"){var Nr;Ae=lo(v),Ue!=="left"&&(Vr=Ae.map(ki));var Sr,_s=0;if(Ue==="right"){I-=Vr[0],v=[],Yn=Ae.length;for(var Ka=0;Ka<Yn;Ka++)Ka===0?(Sr=$a(I),Nr=Wa(X)):(Sr=P(_s-Vr[Ka]),Nr=-Si),v.push([Ae[Ka],Sr,Nr]),_s=Vr[Ka]}else if(Ue==="center"){I-=Vr[0]/2,v=[],Yn=Ae.length;for(var ws=0;ws<Yn;ws++)ws===0?(Sr=$a(I),Nr=Wa(X)):(Sr=P((_s-Vr[ws])/2),Nr=-Si),v.push([Ae[ws],Sr,Nr]),_s=Vr[ws]}else if(Ue==="left"){v=[],Yn=Ae.length;for(var jl=0;jl<Yn;jl++)v.push(Ae[jl])}else if(Ue==="justify"&&wl.encoding==="Identity-H"){v=[],Yn=Ae.length,rt=rt!==0?rt:_l;for(var uo=0,dn=0;dn<Yn;dn++)if(Nr=dn===0?Wa(X):-Si,Sr=dn===0?$a(I):uo,dn<Yn-1){var ad=P((rt-Vr[dn])/(Ae[dn].split(" ").length-1)),Sa=Ae[dn].split(" ");v.push([Sa[0]+" ",Sr,Nr]),uo=0;for(var ka=1;ka<Sa.length;ka++){var Nl=(ki(Sa[ka-1]+" "+Sa[ka])-ki(Sa[ka]))*fr+ad;ka==Sa.length-1?v.push([Sa[ka],Nl,0]):v.push([Sa[ka]+" ",Nl,0]),uo-=Nl}}else v.push([Ae[dn],Sr,Nr]);v.push(["",uo,0])}else{if(Ue!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Yn=Ae.length,rt=rt!==0?rt:_l,dn=0;dn<Yn;dn++){Nr=dn===0?Wa(X):-Si,Sr=dn===0?$a(I):0;var Sl=Ae[dn].split(" ").length-1,kl=Sl>0?(rt-Vr[dn])/Sl:0;dn<Yn-1?bs.push(_(P(kl))):bs.push(0),v.push([Ae[dn],Sr,Nr])}}}(typeof se.R2L=="boolean"?se.R2L:st)===!0&&(v=xi(v,function(kt,It,un){return[kt.split("").reverse().join(""),It,un]})),we={text:v,x:I,y:X,options:se,mutex:{pdfEscape:Wr,activeFontKey:He,fonts:ze,activeFontSize:ke}},St.publish("postProcessText",we),v=we.text,wn=we.mutex.isHex||!1;var Cl=ze[He].encoding;Cl!=="WinAnsiEncoding"&&Cl!=="StandardEncoding"||(v=xi(v,function(kt,It,un){return[nd(kt),It,un]})),Ae=lo(v),v=[];for(var js,Ns,Ss,Ci=Array.isArray(Ae[0])?1:0,ks="",Ai=function(kt,It,un){var Dn="";return un instanceof Ze?(un=typeof se.angle=="number"?Ba(un,new Ze(1,0,0,1,kt,It)):Ba(new Ze(1,0,0,1,kt,It),un),S===w&&(un=Ba(new Ze(1,0,0,-1,0,0),un)),Dn=un.join(" ")+` Tm
`):Dn=_(kt)+" "+_(It)+` Td
`,Dn},Gr=0;Gr<Ae.length;Gr++){switch(ks="",Ci){case 1:Ss=(wn?"<":"(")+Ae[Gr][0]+(wn?">":")"),js=parseFloat(Ae[Gr][1]),Ns=parseFloat(Ae[Gr][2]);break;case 0:Ss=(wn?"<":"(")+Ae[Gr]+(wn?">":")"),js=$a(I),Ns=Wa(X)}bs!==void 0&&bs[Gr]!==void 0&&(ks=bs[Gr]+` Tw
`),Gr===0?v.push(ks+Ai(js,Ns,_n)+Ss):Ci===0?v.push(ks+Ss):Ci===1&&v.push(ks+Ai(js,Ns,_n)+Ss)}v=Ci===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var Ca=`BT
/`;return Ca+=He+" "+ke+` Tf
`,Ca+=_(ke*Hr)+` TL
`,Ca+=pi+`
`,Ca+=Bn,Ca+=v,Q(Ca+="ET"),g[He]=!0,Mt};var wh=p.__private__.clip=p.clip=function(v){return Q(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return wh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Q("n"),this};var Na=p.__private__.isValidStyle=function(v){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(I=!0),I};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return Na(v)&&(d=v),this};var Zc=p.__private__.getStyle=p.getStyle=function(v){var I=d;switch(v){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=v}return I},Yc=p.close=function(){return Q("h"),this};p.stroke=function(){return Q("S"),this},p.fill=function(v){return vs("f",v),this},p.fillEvenOdd=function(v){return vs("f*",v),this},p.fillStroke=function(v){return vs("B",v),this},p.fillStrokeEvenOdd=function(v){return vs("B*",v),this};var vs=function(v,I){Lt(I)==="object"?Nh(I,v):Q(v)},ul=function(v){v===null||S===w&&v===void 0||(v=Zc(v),Q(v))};function jh(v,I,X,se,he){var we=new To(I||this.boundingBox,X||this.xStep,se||this.yStep,this.gState,he||this.matrix);we.stream=this.stream;var Ae=v+"$$"+this.cloneIndex+++"$$";return Ur(Ae,we),we}var Nh=function(v,I){var X=vt[v.key],se=Ke[X];if(se instanceof Ii)Q("q"),Q(Sh(I)),se.gState&&p.setGState(se.gState),Q(v.matrix.toString()+" cm"),Q("/"+X+" sh"),Q("Q");else if(se instanceof To){var he=new Ze(1,0,0,-1,0,yi());v.matrix&&(he=he.multiply(v.matrix||Ua),X=jh.call(se,v.key,v.boundingBox,v.xStep,v.yStep,he).id),Q("q"),Q("/Pattern cs"),Q("/"+X+" scn"),se.gState&&p.setGState(se.gState),Q(I),Q("Q")}},Sh=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},hl=p.moveTo=function(v,I){return Q(_(P(v))+" "+_(A(I))+" m"),this},hi=p.lineTo=function(v,I){return Q(_(P(v))+" "+_(A(I))+" l"),this},ys=p.curveTo=function(v,I,X,se,he,we){return Q([_(P(v)),_(A(I)),_(P(X)),_(A(se)),_(P(he)),_(A(we)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,I,X,se,he){if(isNaN(v)||isNaN(I)||isNaN(X)||isNaN(se)||!Na(he))throw new Error("Invalid arguments passed to jsPDF.line");return S===b?this.lines([[X-v,se-I]],v,I,[1,1],he||"S"):this.lines([[X-v,se-I]],v,I,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,I,X,se,he,we){var Ae,Oe,Ue,Qe,rt,Nt,Zt,_n,Mt,An,wn,Bn;if(typeof v=="number"&&(Bn=X,X=I,I=v,v=Bn),se=se||[1,1],we=we||!1,isNaN(I)||isNaN(X)||!Array.isArray(v)||!Array.isArray(se)||!Na(he)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(hl(I,X),Ae=se[0],Oe=se[1],Qe=v.length,An=I,wn=X,Ue=0;Ue<Qe;Ue++)(rt=v[Ue]).length===2?(An=rt[0]*Ae+An,wn=rt[1]*Oe+wn,hi(An,wn)):(Nt=rt[0]*Ae+An,Zt=rt[1]*Oe+wn,_n=rt[2]*Ae+An,Mt=rt[3]*Oe+wn,An=rt[4]*Ae+An,wn=rt[5]*Oe+wn,ys(Nt,Zt,_n,Mt,An,wn));return we&&Yc(),ul(he),this},p.path=function(v){for(var I=0;I<v.length;I++){var X=v[I],se=X.c;switch(X.op){case"m":hl(se[0],se[1]);break;case"l":hi(se[0],se[1]);break;case"c":ys.apply(this,se);break;case"h":Yc()}}return this},p.__private__.rect=p.rect=function(v,I,X,se,he){if(isNaN(v)||isNaN(I)||isNaN(X)||isNaN(se)||!Na(he))throw new Error("Invalid arguments passed to jsPDF.rect");return S===b&&(se=-se),Q([_(P(v)),_(A(I)),_(P(X)),_(P(se)),"re"].join(" ")),ul(he),this},p.__private__.triangle=p.triangle=function(v,I,X,se,he,we,Ae){if(isNaN(v)||isNaN(I)||isNaN(X)||isNaN(se)||isNaN(he)||isNaN(we)||!Na(Ae))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[X-v,se-I],[he-X,we-se],[v-he,I-we]],v,I,[1,1],Ae,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,I,X,se,he,we,Ae){if(isNaN(v)||isNaN(I)||isNaN(X)||isNaN(se)||isNaN(he)||isNaN(we)||!Na(Ae))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Oe=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*X),we=Math.min(we,.5*se),this.lines([[X-2*he,0],[he*Oe,0,he,we-we*Oe,he,we],[0,se-2*we],[0,we*Oe,-he*Oe,we,-he,we],[2*he-X,0],[-he*Oe,0,-he,-we*Oe,-he,-we],[0,2*we-se],[0,-we*Oe,he*Oe,-we,he,-we]],v+he,I,[1,1],Ae,!0),this},p.__private__.ellipse=p.ellipse=function(v,I,X,se,he){if(isNaN(v)||isNaN(I)||isNaN(X)||isNaN(se)||!Na(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*X,Ae=4/3*(Math.SQRT2-1)*se;return hl(v+X,I),ys(v+X,I-Ae,v+we,I-se,v,I-se),ys(v-we,I-se,v-X,I-Ae,v-X,I),ys(v-X,I+Ae,v-we,I+se,v,I+se),ys(v+we,I+se,v+X,I+Ae,v+X,I),ul(he),this},p.__private__.circle=p.circle=function(v,I,X,se){if(isNaN(v)||isNaN(I)||isNaN(X)||!Na(se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,I,X,X,se)},p.setFont=function(v,I,X){return X&&(I=U(I,X)),He=Vc(v,I,{disableWarning:!1}),this};var kh=p.__private__.getFont=p.getFont=function(){return ze[Vc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,I,X={};for(v in lt)if(lt.hasOwnProperty(v))for(I in X[v]=[],lt[v])lt[v].hasOwnProperty(I)&&X[v].push(I);return X},p.addFont=function(v,I,X,se,he){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(X=U(X,se)),zc.call(this,v,I,X,he=he||"Identity-H")};var fi,fl=e.lineWidth||.200025,tt=p.__private__.getLineWidth=p.getLineWidth=function(){return fl},Ch=p.__private__.setLineWidth=p.setLineWidth=function(v){return fl=v,Q(_(P(v))+" w"),this};p.__private__.setLineDash=We.API.setLineDash=We.API.setLineDashPattern=function(v,I){if(v=v||[],I=I||0,isNaN(I)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(X){return _(P(X))}).join(" "),I=_(P(I)),Q("["+v+"] "+I+" d"),this};var Ah=p.__private__.getLineHeight=p.getLineHeight=function(){return ke*fi};p.__private__.getLineHeight=p.getLineHeight=function(){return ke*fi};var Dh=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(fi=v),this},Lh=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return fi};Dh(e.lineHeight);var $a=p.__private__.getHorizontalCoordinate=function(v){return P(v)},Wa=p.__private__.getVerticalCoordinate=function(v){return S===w?v:et[q].mediaBox.topRightY-et[q].mediaBox.bottomLeftY-P(v)},Eh=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return _($a(v))},Ph=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return _(Wa(v))},ao=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return wa(ao)},p.__private__.setStrokeColor=p.setDrawColor=function(v,I,X,se){return ao=aa({ch1:v,ch2:I,ch3:X,ch4:se,pdfColorType:"draw",precision:2}),Q(ao),this};var pl=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return wa(pl)},p.__private__.setFillColor=p.setFillColor=function(v,I,X,se){return pl=aa({ch1:v,ch2:I,ch3:X,ch4:se,pdfColorType:"fill",precision:2}),Q(pl),this};var pi=e.textColor||"0 g",so=p.__private__.getTextColor=p.getTextColor=function(){return wa(pi)};p.__private__.setTextColor=p.setTextColor=function(v,I,X,se){return pi=aa({ch1:v,ch2:I,ch3:X,ch4:se,pdfColorType:"text",precision:3}),this};var io=e.charSpace,Th=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(io||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return io=v,this};var ml=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var I=p.CapJoinStyles[v];if(I===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ml=I,Q(I+" J"),this};var gl=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var I=p.CapJoinStyles[v];if(I===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gl=I,Q(I+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(_(P(v))+" M"),this},p.GState=Bu,p.setGState=function(v){(v=typeof v=="string"?ct[ln[v]]:mi(null,v)).equals(Cn)||(Q("/"+v.id+" gs"),Cn=v)};var mi=function(v,I){if(!v||!ln[v]){var X=!1;for(var se in ct)if(ct.hasOwnProperty(se)&&ct[se].equals(I)){X=!0;break}if(X)I=ct[se];else{var he="GS"+(Object.keys(ct).length+1).toString(10);ct[he]=I,I.id=he}return v&&(ln[v]=I.id),St.publish("addGState",I),I}};p.addGState=function(v,I){return mi(v,I),this},p.saveGraphicsState=function(){return Q("q"),Tt.push({key:He,size:ke,color:pi}),this},p.restoreGraphicsState=function(){Q("Q");var v=Tt.pop();return He=v.key,ke=v.size,pi=v.color,Cn=null,this},p.setCurrentTransformationMatrix=function(v){return Q(v.toString()+" cm"),this},p.comment=function(v){return Q("#"+v),this};var gi=function(v,I){var X=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return X},set:function(we){isNaN(we)||(X=parseFloat(we))}});var se=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return se},set:function(we){isNaN(we)||(se=parseFloat(we))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(we){he=we.toString()}}),this},vl=function(v,I,X,se){gi.call(this,v,I),this.type="rect";var he=X||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(Ae){isNaN(Ae)||(he=parseFloat(Ae))}});var we=se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(Ae){isNaN(Ae)||(we=parseFloat(Ae))}}),this},oo=function(){this.page=qt,this.currentPage=q,this.pages=xe.slice(0),this.pagesContext=et.slice(0),this.x=Ve,this.y=Ot,this.matrix=jt,this.width=Jc(q),this.height=Ha(q),this.outputDestination=Se,this.id="",this.objectNumber=-1};oo.prototype.restore=function(){qt=this.page,q=this.currentPage,et=this.pagesContext,xe=this.pages,Ve=this.x,Ot=this.y,jt=this.matrix,Xc(q,this.width),Va(q,this.height),Se=this.outputDestination};var yl=function(v,I,X,se,he){_a.push(new oo),qt=q=0,xe=[],Ve=v,Ot=I,jt=he,ll([X,se])};for(var vi in p.beginFormObject=function(v,I,X,se,he){return yl(v,I,X,se,he),this},p.endFormObject=function(v){return function(I){if(Ma[I])_a.pop().restore();else{var X=new oo,se="Xo"+(Object.keys(Zn).length+1).toString(10);X.id=se,Ma[I]=se,Zn[se]=X,St.publish("addFormObject",X),_a.pop().restore()}}(v),this},p.doFormObject=function(v,I){var X=Zn[Ma[v]];return Q("q"),Q(I.toString()+" cm"),Q("/"+X.id+" Do"),Q("Q"),this},p.getFormObject=function(v){var I=Zn[Ma[v]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},p.save=function(v,I){return v=v||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(qi(di(za()),v),typeof qi.unload=="function"&&Xe.setTimeout&&setTimeout(qi.unload,911),this):new Promise(function(X,se){try{var he=qi(di(za()),v);typeof qi.unload=="function"&&Xe.setTimeout&&setTimeout(qi.unload,911),X(he)}catch(we){se(we.message)}})},We.API)We.API.hasOwnProperty(vi)&&(vi==="events"&&We.API.events.length?function(v,I){var X,se,he;for(he=I.length-1;he!==-1;he--)X=I[he][0],se=I[he][1],v.subscribe.apply(v,[X].concat(typeof se=="function"?[se]:se))}(St,We.API.events):p[vi]=We.API[vi]);function Jc(v){return et[v].mediaBox.topRightX-et[v].mediaBox.bottomLeftX}function Xc(v,I){et[v].mediaBox.topRightX=I+et[v].mediaBox.bottomLeftX}function Ha(v){return et[v].mediaBox.topRightY-et[v].mediaBox.bottomLeftY}function Va(v,I){et[v].mediaBox.topRightY=I+et[v].mediaBox.bottomLeftY}var Qc=p.getPageWidth=function(v){return Jc(v=v||q)/Je},ed=p.setPageWidth=function(v,I){Xc(v,I*Je)},yi=p.getPageHeight=function(v){return Ha(v=v||q)/Je},td=p.setPageHeight=function(v,I){Va(v,I*Je)};return p.internal={pdfEscape:Wr,getStyle:Zc,getFont:kh,getFontSize:Ee,getCharSpace:Th,getTextColor:so,getLineHeight:Ah,getLineHeightFactor:Lh,getLineWidth:tt,write:nt,getHorizontalCoordinate:$a,getVerticalCoordinate:Wa,getCoordinateString:Eh,getVerticalCoordinateString:Ph,collections:{},newObject:tn,newAdditionalObject:oi,newObjectDeferred:In,newObjectDeferredBegin:Mn,getFilters:sa,putStream:$r,events:St,scaleFactor:Je,pageSize:{getWidth:function(){return Qc(q)},setWidth:function(v){ed(q,v)},getHeight:function(){return yi(q)},setHeight:function(v){td(q,v)}},encryptionOptions:h,encryption:cn,getEncryptor:function(v){return h!==null?cn.encryptor(v,0):function(I){return I}},output:ia,getNumberOfPages:Hc,pages:xe,out:Q,f2:L,f3:O,getPageInfo:dl,getPageInfoByObjId:bh,getCurrentPageInfo:_h,getPDFVersion:N,Point:gi,Rectangle:vl,Matrix:Ze,hasHotfix:ui},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Qc(q)},set:function(v){ed(q,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return yi(q)},set:function(v){td(q,v)},enumerable:!0,configurable:!0}),(function(v){for(var I=0,X=ye.length;I<X;I++){var se=zc.call(this,v[I][0],v[I][1],v[I][2],ye[I][3],!0);m===!1&&(g[se]=!0);var he=v[I][0].split("-");Uc({id:se,fontName:he[0],fontStyle:he[1]||""})}St.publish("addFonts",{fonts:ze,dictionary:lt})}).call(p,ye),He="F1",$c(s,n),St.publish("initialized"),p}yo.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},yo.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yo.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},yo.prototype.processOwnerPassword=function(e,t){return om(im(t).substr(0,5),e)},yo.prototype.encryptor=function(e,t){var n=im(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return om(n,r)}},Bu.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Lt(e)!==Lt(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},We.API={events:[]},We.version="3.0.3";var sn=We.API,xg=1,Qi=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},go=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},at=function(e){return e.toFixed(2)},Is=function(e){return e.toFixed(5)};sn.__acroform__={};var jr=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},v2=function(e){return e*xg},Ea=function(e){var t=new xx,n=Re.internal.getHeight(e)||0,r=Re.internal.getWidth(e)||0;return t.BBox=[0,0,Number(at(r)),Number(at(n))],t},BS=sn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},US=sn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},zS=sn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},vn=sn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return zS(e,t-1)},yn=sn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return BS(e,t-1)},xn=sn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return US(e,t-1)},$S=sn.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=n(s)||0,c.lowerLeft_Y=r(i+l)||0,c.upperRight_X=n(s+o)||0,c.upperRight_Y=r(i)||0,[Number(at(c.lowerLeft_X)),Number(at(c.lowerLeft_Y)),Number(at(c.upperRight_X)),Number(at(c.upperRight_Y))]},WS=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=lm(e,n),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+at(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Ea(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},lm=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(L){return L.split(`
`)}):s.map(function(L){return[L]});var i=n,o=Re.internal.getHeight(e)||0;o=o<0?-o:o;var l=Re.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(L,O,P){if(L+1<s.length){var A=O+" "+s[L+1][0];return Hd(A,e,P).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,h,m=Hd("3",e,i).height,g=e.multiline?o-i:(o-m)/2,p=g+=2,j=0,N=0,C=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Hd(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",b=0,w=0;w<s.length;w++)if(s.hasOwnProperty(w)){var S=!1;if(s[w].length!==1&&C!==s[w].length-1){if((m+2)*(b+2)+2>o)continue e;y+=s[w][C],S=!0,N=w,w--}else{y=(y+=s[w][C]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var R=parseInt(w),W=c(R,y,i),U=w>=s.length-1;if(W&&!U){y+=" ",C=0;continue}if(W||U){if(U)N=R;else if(e.multiline&&(m+2)*(b+2)+2>o)continue e}else{if(!e.multiline||(m+2)*(b+2)+2>o)continue e;N=R}}for(var _="",D=j;D<=N;D++){var z=s[D];if(e.multiline){if(D===N){_+=z[C]+" ",C=(C+1)%z.length;continue}if(D===j){_+=z[z.length-1]+" ";continue}}_+=z[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,h=Hd(_,e,i).width,e.textAlign){case"right":d=l-h-2;break;case"center":d=(l-h)/2;break;default:d=2}t+=at(d)+" "+at(p)+` Td
`,t+="("+Qi(_)+`) Tj
`,t+=-at(d)+` 0 Td
`,p=-(i+2),h=0,j=S?N:N+1,b++,y=""}break}return r.text=t,r.fontSize=i,r},Hd=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},HS={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},VS=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},GS=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(xa.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(HS)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");xg=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new bx,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&VS(i,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,s){var i=!r;for(var o in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=$S(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Re.createDefaultAppearanceStream(l),Lt(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var h=WS(l);c.push({key:"AP",value:"<</N "+h+">>"}),s.internal.acroformPlugin.xForms.push(h)}if(l.appearanceStreamContent){var m="";for(var g in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(g)){var p=l.appearanceStreamContent[g];if(m+="/"+g+" ",m+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var j=p[o];typeof j=="function"&&(j=j.call(s,l)),m+="/"+o+" "+j+" ",s.internal.acroformPlugin.xForms.indexOf(j)>=0||s.internal.acroformPlugin.xForms.push(j)}}else typeof(j=p)=="function"&&(j=j.call(s,l)),m+="/"+o+" "+j,s.internal.acroformPlugin.xForms.indexOf(j)>=0||s.internal.acroformPlugin.xForms.push(j);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&function(N,C){for(var y in N)if(N.hasOwnProperty(y)){var b=y,w=N[y];C.internal.newObjectDeferredBegin(w.objId,!0),Lt(w)==="object"&&typeof w.putStream=="function"&&w.putStream(),delete N[b]}}(s.internal.acroformPlugin.xForms,s)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},yx=sn.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Lt(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),s+="("+Qi(r(e[i].toString()))+")"):s+=e[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},zf=function(e,t,n){var r=function(s){return s};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Qi(r(e))+")"},Ia=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ia.prototype.toString=function(){return this.objId+" 0 R"},Ia.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ia.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],s=this[r];s&&(Array.isArray(s)?e.push({key:r,value:yx(s,this.objId,this.scope)}):s instanceof Ia?(s.scope=this.scope,e.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:r,value:s}))}return e};var xx=function(){Ia.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};jr(xx,Ia);var bx=function(){Ia.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Qi(n(e))+")"}},set:function(n){e=n}})};jr(bx,Ia);var xa=function e(){Ia.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!vn(t,3)},set:function(y){y?this.F=yn(t,3):this.F=xn(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Uu)return;i="FieldObject"+e.FieldNum++}var y=function(b){return b};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Qi(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/xg:d},set:function(y){d=y}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(y){h=y}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof Uu||this instanceof Ui))return zf(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=y}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Rn==0?zf(g,this.objId,this.scope):g},set:function(y){y=y.toString(),g=this instanceof Rn==0?y.substr(0,1)==="("?go(y.substr(1,y.length-2)):go(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Rn==1?go(g.substr(1,g.length-1)):g},set:function(y){y=y.toString(),g=this instanceof Rn==1?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Rn==0?zf(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof Rn==0?y.substr(0,1)==="("?go(y.substr(1,y.length-2)):go(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Rn==1?go(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Rn==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(y){y=!!y,N=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(y){j=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,1)},set:function(y){y?this.Ff=yn(this.Ff,1):this.Ff=xn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,2)},set:function(y){y?this.Ff=yn(this.Ff,2):this.Ff=xn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,3)},set:function(y){y?this.Ff=yn(this.Ff,3):this.Ff=xn(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');C=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(C){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:C=2;break;case"center":case 1:C=1;break;default:C=0}}})};jr(xa,Ia);var Uo=function(){xa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return yx(t,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(r,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,18)},set:function(n){n?this.Ff=yn(this.Ff,18):this.Ff=xn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=yn(this.Ff,19):this.Ff=xn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,20)},set:function(n){n?(this.Ff=yn(this.Ff,20),t.sort()):this.Ff=xn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,22)},set:function(n){n?this.Ff=yn(this.Ff,22):this.Ff=xn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,23)},set:function(n){n?this.Ff=yn(this.Ff,23):this.Ff=xn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,27)},set:function(n){n?this.Ff=yn(this.Ff,27):this.Ff=xn(this.Ff,27)}}),this.hasAppearanceStream=!1};jr(Uo,xa);var zo=function(){Uo.call(this),this.fontName="helvetica",this.combo=!1};jr(zo,Uo);var $o=function(){zo.call(this),this.combo=!0};jr($o,zo);var lu=function(){$o.call(this),this.edit=!0};jr(lu,$o);var Rn=function(){xa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,15)},set:function(n){n?this.Ff=yn(this.Ff,15):this.Ff=xn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,16)},set:function(n){n?this.Ff=yn(this.Ff,16):this.Ff=xn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,17)},set:function(n){n?this.Ff=yn(this.Ff,17):this.Ff=xn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,26)},set:function(n){n?this.Ff=yn(this.Ff,26):this.Ff=xn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,s=[];for(r in s.push("<<"),t)s.push("/"+r+" ("+Qi(n(t[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){Lt(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};jr(Rn,xa);var cu=function(){Rn.call(this),this.pushButton=!0};jr(cu,Rn);var Wo=function(){Rn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};jr(Wo,Rn);var Uu=function(){var e,t;xa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+Qi(s(r[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Lt(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Re.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};jr(Uu,xa),Wo.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Wo.prototype.createOption=function(e){var t=new Uu;return t.Parent=this,t.optionName=e,this.Kids.push(t),KS.call(this.scope,t),t};var du=function(){Rn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Re.CheckBox.createAppearanceStream()};jr(du,Rn);var Ui=function(){xa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,13)},set:function(t){t?this.Ff=yn(this.Ff,13):this.Ff=xn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,21)},set:function(t){t?this.Ff=yn(this.Ff,21):this.Ff=xn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,23)},set:function(t){t?this.Ff=yn(this.Ff,23):this.Ff=xn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,24)},set:function(t){t?this.Ff=yn(this.Ff,24):this.Ff=xn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,25)},set:function(t){t?this.Ff=yn(this.Ff,25):this.Ff=xn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,26)},set:function(t){t?this.Ff=yn(this.Ff,26):this.Ff=xn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};jr(Ui,xa);var uu=function(){Ui.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,14)},set:function(e){e?this.Ff=yn(this.Ff,14):this.Ff=xn(this.Ff,14)}}),this.password=!0};jr(uu,Ui);var Re={CheckBox:{createAppearanceStream:function(){return{N:{On:Re.CheckBox.YesNormal},D:{On:Re.CheckBox.YesPushDown,Off:Re.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=lm(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+at(Re.internal.getWidth(e))+" "+at(Re.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+at(i.fontSize)+" Tf "+s),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Ea(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),s=[],i=Re.internal.getHeight(e),o=Re.internal.getWidth(e),l=lm(e,e.caption);return s.push("1 g"),s.push("0 0 "+at(o)+" "+at(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+at(o-1)+" "+at(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+at(l.fontSize)+" Tf "+r),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+at(Re.internal.getWidth(e))+" "+at(Re.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Re.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Re.RadioButton.Circle.YesNormal,t.D[e]=Re.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ea(e);t.scope=e.scope;var n=[],r=Re.internal.getWidth(e)<=Re.internal.getHeight(e)?Re.internal.getWidth(e)/4:Re.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Re.internal.Bezier_C,i=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Is(Re.internal.getWidth(e)/2)+" "+Is(Re.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=[],r=Re.internal.getWidth(e)<=Re.internal.getHeight(e)?Re.internal.getWidth(e)/4:Re.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Re.internal.Bezier_C).toFixed(5)),o=Number((r*Re.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Is(Re.internal.getWidth(e)/2)+" "+Is(Re.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Is(Re.internal.getWidth(e)/2)+" "+Is(Re.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=[],r=Re.internal.getWidth(e)<=Re.internal.getHeight(e)?Re.internal.getWidth(e)/4:Re.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Re.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Is(Re.internal.getWidth(e)/2)+" "+Is(Re.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Re.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Re.RadioButton.Cross.YesNormal,t.D[e]=Re.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ea(e);t.scope=e.scope;var n=[],r=Re.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+at(Re.internal.getWidth(e)-2)+" "+at(Re.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(at(r.x1.x)+" "+at(r.x1.y)+" m"),n.push(at(r.x2.x)+" "+at(r.x2.y)+" l"),n.push(at(r.x4.x)+" "+at(r.x4.y)+" m"),n.push(at(r.x3.x)+" "+at(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=Re.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+at(Re.internal.getWidth(e))+" "+at(Re.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+at(Re.internal.getWidth(e)-2)+" "+at(Re.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(at(n.x1.x)+" "+at(n.x1.y)+" m"),r.push(at(n.x2.x)+" "+at(n.x2.y)+" l"),r.push(at(n.x4.x)+" "+at(n.x4.y)+" m"),r.push(at(n.x3.x)+" "+at(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+at(Re.internal.getWidth(e))+" "+at(Re.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Re.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Re.internal.getWidth(e),n=Re.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Re.internal.getWidth=function(e){var t=0;return Lt(e)==="object"&&(t=v2(e.Rect[2])),t},Re.internal.getHeight=function(e){var t=0;return Lt(e)==="object"&&(t=v2(e.Rect[3])),t};var KS=sn.addField=function(e){if(GS(this,e),!(e instanceof xa))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};sn.AcroFormChoiceField=Uo,sn.AcroFormListBox=zo,sn.AcroFormComboBox=$o,sn.AcroFormEditBox=lu,sn.AcroFormButton=Rn,sn.AcroFormPushButton=cu,sn.AcroFormRadioButton=Wo,sn.AcroFormCheckBox=du,sn.AcroFormTextField=Ui,sn.AcroFormPasswordField=uu,sn.AcroFormAppearance=Re,sn.AcroForm={ChoiceField:Uo,ListBox:zo,ComboBox:$o,EditBox:lu,Button:Rn,PushButton:cu,RadioButton:Wo,CheckBox:du,TextField:Ui,PasswordField:uu,Appearance:Re},We.AcroForm={ChoiceField:Uo,ListBox:zo,ComboBox:$o,EditBox:lu,Button:Rn,PushButton:cu,RadioButton:Wo,CheckBox:du,TextField:Ui,PasswordField:uu,Appearance:Re};We.AcroForm;function _x(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(L,O){var P,A,Z,re,ie,K=n;if((O=O||n)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(W(L))for(ie in r)for(Z=r[ie],P=0;P<Z.length;P+=1){for(re=!0,A=0;A<Z[P].length;A+=1)if(Z[P][A]!==void 0&&Z[P][A]!==L[A]){re=!1;break}if(re===!0){K=ie;break}}else for(ie in r)for(Z=r[ie],P=0;P<Z.length;P+=1){for(re=!0,A=0;A<Z[P].length;A+=1)if(Z[P][A]!==void 0&&Z[P][A]!==L.charCodeAt(A)){re=!1;break}if(re===!0){K=ie;break}}return K===n&&O!==n&&(K=O),K},i=function L(O){for(var P=this.internal.write,A=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:O.width}),re.push({key:"Height",value:O.height}),O.colorSpace===y.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===y.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)&&O.transparency.length>0){for(var ie="",K=0,ne=O.transparency.length;K<ne;K++)ie+=O.transparency[K]+" "+O.transparency[K]+" ";re.push({key:"Mask",value:"["+ie+"]"})}O.sMask!==void 0&&re.push({key:"SMask",value:O.objectId+1+" 0 R"});var pe=O.filter!==void 0?["/"+O.filter]:void 0;if(A({data:O.data,additionalKeyValues:re,alreadyAppliedFilters:pe,objectId:O.objectId}),P("endobj"),"sMask"in O&&O.sMask!==void 0){var oe,E=(oe=O.sMaskBitsPerComponent)!==null&&oe!==void 0?oe:O.bitsPerComponent,q={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:E,data:O.sMask};"filter"in O&&(q.decodeParameters="/Predictor ".concat(O.predictor," /Colors 1 /BitsPerComponent ").concat(E," /Columns ").concat(O.width),q.filter=O.filter),L.call(this,q)}if(O.colorSpace===y.INDEXED){var G=this.internal.newObject();A({data:_(new Uint8Array(O.palette)),objectId:G}),P("endobj")}},o=function(){var L=this.internal.collections[t+"images"];for(var O in L)i.call(this,L[O])},l=function(){var L,O=this.internal.collections[t+"images"],P=this.internal.write;for(var A in O)P("/I"+(L=O[A]).index,L.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var L=this.internal.collections[t+"images"];return c.call(this),L},h=function(){return Object.keys(this.internal.collections[t+"images"]).length},m=function(L){return typeof e["process"+L.toUpperCase()]=="function"},g=function(L){return Lt(L)==="object"&&L.nodeType===1},p=function(L,O){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var P=""+L.getAttribute("src");if(P.indexOf("data:image/")===0)return ou(unescape(P).split("base64,").pop());var A=e.loadFile(P,!0);if(A!==void 0)return A}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var Z;switch(O){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;default:Z="image/jpeg"}return ou(L.toDataURL(Z,1).split("base64,").pop())}},j=function(L){var O=this.internal.collections[t+"images"];if(O){for(var P in O)if(L===O[P].alias)return O[P]}},N=function(L,O,P){return L||O||(L=-96,O=-96),L<0&&(L=-1*P.width*72/L/this.internal.scaleFactor),O<0&&(O=-1*P.height*72/O/this.internal.scaleFactor),L===0&&(L=O*P.width/P.height),O===0&&(O=L*P.height/P.width),[L,O]},C=function(L,O,P,A,Z,re){var ie=N.call(this,P,A,Z),K=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,pe=d.call(this);if(P=ie[0],A=ie[1],pe[Z.index]=Z,re){re*=Math.PI/180;var oe=Math.cos(re),E=Math.sin(re),q=function(H){return H.toFixed(4)},G=[q(oe),q(E),q(-1*E),q(oe),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,K(L),ne(O+A),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([K(P),"0","0",K(A),"0","0","cm"].join(" "))):this.internal.write([K(P),"0","0",K(A),K(L),ne(O+A),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(L){var O,P,A=0;if(typeof L=="string")for(P=L.length,O=0;O<P;O++)A=(A<<5)-A+L.charCodeAt(O),A|=0;else if(W(L))for(P=L.byteLength/2,O=0;O<P;O++)A=(A<<5)-A+L[O],A|=0;return A},S=e.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var O=!0;return L.length===0&&(O=!1),L.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(O=!1),O},R=e.__addimage__.extractImageFromDataUrl=function(L){if(L==null||!(L=L.trim()).startsWith("data:"))return null;var O=L.indexOf(",");return O<0?null:L.substring(0,O).trim().endsWith("base64")?L.substring(O+1):null};e.__addimage__.isArrayBuffer=function(L){return L instanceof ArrayBuffer};var W=e.__addimage__.isArrayBufferView=function(L){return L instanceof Int8Array||L instanceof Uint8Array||L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array},U=e.__addimage__.binaryStringToUint8Array=function(L){for(var O=L.length,P=new Uint8Array(O),A=0;A<O;A++)P[A]=L.charCodeAt(A);return P},_=e.__addimage__.arrayBufferToBinaryString=function(L){for(var O="",P=W(L)?L:new Uint8Array(L),A=0;A<P.length;A+=8192)O+=String.fromCharCode.apply(null,P.subarray(A,A+8192));return O};e.addImage=function(){var L,O,P,A,Z,re,ie,K,ne;if(typeof arguments[1]=="number"?(O=n,P=arguments[1],A=arguments[2],Z=arguments[3],re=arguments[4],ie=arguments[5],K=arguments[6],ne=arguments[7]):(O=arguments[1],P=arguments[2],A=arguments[3],Z=arguments[4],re=arguments[5],ie=arguments[6],K=arguments[7],ne=arguments[8]),Lt(L=arguments[0])==="object"&&!g(L)&&"imageData"in L){var pe=L;L=pe.imageData,O=pe.format||O||n,P=pe.x||P||0,A=pe.y||A||0,Z=pe.w||pe.width||Z,re=pe.h||pe.height||re,ie=pe.alias||ie,K=pe.compression||K,ne=pe.rotation||pe.angle||ne}var oe=this.internal.getFilters();if(K===void 0&&oe.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(P)||isNaN(A))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var E=D.call(this,L,O,ie,K);return C.call(this,P,A,Z,re,E,ne),this};var D=function(L,O,P,A){var Z,re,ie;if(typeof L=="string"&&s(L)===n){L=unescape(L);var K=z(L,!1);(K!==""||(K=e.loadFile(L,!0))!==void 0)&&(L=K)}if(g(L)&&(L=p(L,O)),O=s(L,O),!m(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((ie=P)==null||ie.length===0)&&(P=function(ne){return typeof ne=="string"||W(ne)?w(ne):W(ne.data)?w(ne.data):null}(L)),(Z=j.call(this,P))||(L instanceof Uint8Array||O==="RGBA"||(re=L,L=U(L)),Z=this["process"+O.toUpperCase()](L,h.call(this),P,function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in e.image_compression?ne:b.NONE}(A),re)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},z=e.__addimage__.convertBase64ToBinaryString=function(L,O){O=typeof O!="boolean"||O;var P,A="";if(typeof L=="string"){var Z;P=(Z=R(L))!==null&&Z!==void 0?Z:L;try{A=ou(P)}catch(re){if(O)throw S(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return A};e.getImageProperties=function(L){var O,P,A="";if(g(L)&&(L=p(L)),typeof L=="string"&&s(L)===n&&((A=z(L,!1))===""&&(A=e.loadFile(L)||""),L=A),P=s(L),!m(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(L instanceof Uint8Array||(L=U(L)),!(O=this["process"+P.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=P,O}})(We.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};We.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,h=!1,m=0;m<d.length&&!h;m++)switch((r=d[m]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var g=0;g<d.length;g++){r=d[g];var p=this.internal.pdfEscape,j=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(N.objId),b=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+p(y(r.contents))+")",i+=" /Popup "+C.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(y(b))+") >>",N.content=i;var w=N.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+w,r.open&&(i+=" /Open true"),i+=" >>",C.content=i,this.internal.write(N.objId,"0 R",C.objId,"0 R");break;case"freetext":s="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var S=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(j(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var R=this.annotations._nameMap[r.options.name];r.options.pageNumber=R.page,r.options.top=R.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(j(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;default:var W=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+W+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:d(r),w:c(n+s),h:d(r+i)},options:o,type:"link"})},e.textWithLink=function(n,r,s,i){var o,l,c=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var h=this.splitTextToSize(n,l).length;o=Math.ceil(d*h)}else l=c,o=d;return this.text(n,r,s,i),s+=.2*d,i.align==="center"&&(r-=c/2),i.align==="right"&&(r-=c),this.link(r,s-d,l,o,i),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(We.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(N){return t[N.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},l=e.__arabicParser__.isArabicEndLetter=function(N){return o(N)&&i(N)&&t[N.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(N){return o(N)&&s.indexOf(N.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return o(N)&&i(N)&&t[N.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(N){return o(N)&&i(N)&&t[N.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(N){return o(N)&&i(N)&&t[N.charCodeAt(0)].length>=3};var h=e.__arabicParser__.arabicLetterHasMedialForm=function(N){return o(N)&&i(N)&&t[N.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(N){var C=0,y=n,b="",w=0;for(C=0;C<N.length;C+=1)y[N.charCodeAt(C)]!==void 0?(w++,typeof(y=y[N.charCodeAt(C)])=="number"&&(b+=String.fromCharCode(y),y=n,w=0),C===N.length-1&&(y=n,b+=N.charAt(C-(w-1)),C-=w-1,w=0)):(y=n,b+=N.charAt(C-w),C-=w,w=0);return b};e.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&r[N.charCodeAt(0)]!==void 0};var g=e.__arabicParser__.getCorrectForm=function(N,C,y){return o(N)?i(N)===!1?-1:!d(N)||!o(C)&&!o(y)||!o(y)&&l(C)||l(N)&&!o(C)||l(N)&&c(C)||l(N)&&l(C)?0:h(N)&&o(C)&&!l(C)&&o(y)&&d(y)?3:l(N)||!o(y)?1:2:-1},p=function(N){var C=0,y=0,b=0,w="",S="",R="",W=(N=N||"").split("\\s+"),U=[];for(C=0;C<W.length;C+=1){for(U.push(""),y=0;y<W[C].length;y+=1)w=W[C][y],S=W[C][y-1],R=W[C][y+1],o(w)?(b=g(w,S,R),U[C]+=b!==-1?String.fromCharCode(t[w.charCodeAt(0)][b]):w):U[C]+=w;U[C]=m(U[C])}return U.join(" ")},j=e.__arabicParser__.processArabic=e.processArabic=function(){var N,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(C)){var b=0;for(y=[],b=0;b<C.length;b+=1)Array.isArray(C[b])?y.push([p(C[b][0]),C[b][1],C[b][2]]):y.push([p(C[b])]);N=y}else N=p(C);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};e.events.push(["preProcessText",j])}(We.API),We.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(We.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(N){c=N}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(N){d=N}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(N){h=N}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(N){m=N}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(N){g=N}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(N){j=N}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){r.call(this);var h=(d=d||{}).fontSize||this.getFontSize(),m=d.font||this.getFont(),g=d.scaleFactor||this.internal.scaleFactor,p=0,j=0,N=0,C=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,S){return w.concat(C.splitTextToSize(S,y))},[])):c=Array.isArray(c)?c:[c];for(var b=0;b<c.length;b++)p<(N=this.getStringUnitWidth(c[b],{font:m})*h)&&(p=N);return p!==0&&(j=c.length),{w:p/=g,h:Math.max((j*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/g,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,p&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-h,c.y+h,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+h,{align:"center",baseline:"top",maxWidth:c.width-h-h}):this.text(c.text,c.x+h,c.y+h,{align:"left",baseline:"top",maxWidth:c.width-h-h})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,h,m,g){if(r.call(this),!h)throw new Error("No data for PDF table.");var p,j,N,C,y=[],b=[],w=[],S={},R={},W=[],U=[],_=(g=g||{}).autoSize||!1,D=g.printHeaders!==!1,z=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,L=g.margins||Object.assign({width:this.getPageWidth()},t),O=typeof g.padding=="number"?g.padding:3,P=g.headerBackgroundColor||"#c8c8c8",A=g.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=A,this.setFontSize(z),m==null)b=y=Object.keys(h[0]),w=y.map(function(){return"left"});else if(Array.isArray(m)&&Lt(m[0])==="object")for(y=m.map(function(pe){return pe.name}),b=m.map(function(pe){return pe.prompt||pe.name||""}),w=m.map(function(pe){return pe.align||"left"}),p=0;p<m.length;p+=1)R[m[p].name]=.7499990551181103*m[p].width;else Array.isArray(m)&&typeof m[0]=="string"&&(b=y=m,w=y.map(function(){return"left"}));if(_||Array.isArray(m)&&typeof m[0]=="string")for(p=0;p<y.length;p+=1){for(S[C=y[p]]=h.map(function(pe){return pe[C]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(b[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=S[C],this.setFont(void 0,"normal"),N=0;N<j.length;N+=1)W.push(this.getTextDimensions(j[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[C]=Math.max.apply(null,W)+O+O,W=[]}if(D){var Z={};for(p=0;p<y.length;p+=1)Z[y[p]]={},Z[y[p]].text=b[p],Z[y[p]].align=w[p];var re=l.call(this,Z,R);U=y.map(function(pe){return new i(c,d,R[pe],re,Z[pe].text,void 0,Z[pe].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var ie=m.reduce(function(pe,oe){return pe[oe.name]=oe.align,pe},{});for(p=0;p<h.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:h[p]},this);var K=l.call(this,h[p],R);for(N=0;N<y.length;N+=1){var ne=h[p][y[N]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:N,data:ne},this),o.call(this,new i(c,d,R[y[N]],K,ne,p+2,ie[y[N]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var h=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(p){var j=c[p];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,d[p]-h-h)},this).map(function(p){return this.getLineHeightFactor()*p.length*m/g+h+h},this).reduce(function(p,j){return Math.max(p,j)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){h=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(h.y=this.internal.__cell__.margins.top||0,g.push(h)),h.lineNumber=c;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(j)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),n=!1}}(We.API);var wx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jx=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],cm=_x(jx),Nx=[100,200,300,400,500,600,700,800,900],ZS=_x(Nx);function $f(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return wx[i=i||"normal"]?i:"normal"}(e.style),r=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),s=function(i){return typeof cm[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,n,r].join(" ")}}}function y2(e,t,n,r){var s;for(s=n;s>=0&&s<t.length;s+=r)if(e[t[s]])return e[t[s]];for(s=n;s>=0&&s<t.length;s-=r)if(e[t[s]])return e[t[s]]}var YS={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},x2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function b2(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function _2(e){return e.trimLeft()}function JS(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function XS(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Vd,w2,j2,vo,Gd,N2,S2,k2,Wf=["times"];function C2(e,t,n,r,s){var i=4,o=D2;switch(s){case We.API.image_compression.FAST:i=1,o=A2;break;case We.API.image_compression.MEDIUM:i=6,o=L2;break;case We.API.image_compression.SLOW:i=9,o=E2}e=function(c,d,h,m){for(var g,p=c.length/d,j=new Uint8Array(c.length+p),N=[QS,A2,D2,L2,E2],C=0;C<p;C+=1){var y=C*d,b=c.subarray(y,y+d);if(m)j.set(m(b,h,g),y+C);else{for(var w=N.length,S=[],R=0;R<w;R+=1)S[R]=N[R](b,h,g);var W=tk(S.concat());j.set(S[W],y+C)}g=b}return j}(e,t,Math.ceil(n*r/8),o);var l=nm(e,{level:i});return We.API.__addimage__.arrayBufferToBinaryString(l)}function QS(e){var t=Array.apply([],e);return t.unshift(0),t}function A2(e,t){var n=e.length,r=[];r[0]=1;for(var s=0;s<n;s+=1){var i=e[s-t]||0;r[s+1]=e[s]-i+256&255}return r}function D2(e,t,n){var r=e.length,s=[];s[0]=2;for(var i=0;i<r;i+=1){var o=n&&n[i]||0;s[i+1]=e[i]-o+256&255}return s}function L2(e,t,n){var r=e.length,s=[];s[0]=3;for(var i=0;i<r;i+=1){var o=e[i-t]||0,l=n&&n[i]||0;s[i+1]=e[i]+256-(o+l>>>1)&255}return s}function E2(e,t,n){var r=e.length,s=[];s[0]=4;for(var i=0;i<r;i+=1){var o=ek(e[i-t]||0,n&&n[i]||0,n&&n[i-t]||0);s[i+1]=e[i]-o+256&255}return s}function ek(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),s=Math.abs(e-n),i=Math.abs(e+t-n-n);return r<=s&&r<=i?e:s<=i?t:n}function tk(e){var t=e.map(function(n){return n.reduce(function(r,s){return r+Math.abs(s)},0)});return t.indexOf(Math.min.apply(null,t))}function Hf(e,t,n){var r=t*n,s=Math.floor(r/8),i=16-(r-8*s+n),o=(1<<n)-1;return Sx(e,s)>>i&o}function P2(e,t,n,r){var s=n*r,i=Math.floor(s/8),o=16-(s-8*i+r),l=(1<<r)-1,c=(t&l)<<o;(function(d,h,m){if(h+1<d.byteLength)d.setUint16(h,m,!1);else{var g=m>>8&255;d.setUint8(h,g)}})(e,i,Sx(e,i)&~(l<<o)&65535|c)}function Sx(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function nk(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<1+(7&s);e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,h=[],m=0,g=null,p=0,j=null;for(this.width=n,this.height=r;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,j=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var N=e[t++];m=e[t++]|e[t++]<<8,g=e[t++],1&N||(g=null),p=N>>2&7,t++;break;case 254:for(;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var C=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,S=e[t++],R=S>>6&1,W=1<<1+(7&S),U=l,_=c,D=!1;S>>7&&(D=!0,U=t,_=W,t+=3*W);var z=t;for(t++;;){var L;if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}h.push({x:C,y,width:b,height:w,has_local_palette:D,palette_offset:U,palette_size:_,data_offset:z,data_length:t-z,transparent_index:g,interlaced:!!R,delay:m,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return j},this.frameInfo=function(O){if(O<0||O>=h.length)throw new Error("Frame index out of range.");return h[O]},this.decodeAndBlitFrameBGRA=function(O,P){var A=this.frameInfo(O),Z=A.width*A.height,re=new Uint8Array(Z);T2(e,A.data_offset,re,Z);var ie=A.palette_offset,K=A.transparent_index;K===null&&(K=256);var ne=A.width,pe=n-ne,oe=ne,E=4*(A.y*n+A.x),q=4*((A.y+A.height)*n+A.x),G=E,H=4*pe;A.interlaced===!0&&(H+=4*n*7);for(var te=8,ce=0,ae=re.length;ce<ae;++ce){var ee=re[ce];if(oe===0&&(oe=ne,(G+=H)>=q&&(H=4*pe+4*n*(te-1),G=E+(ne+pe)*(te<<1),te>>=1)),ee===K)G+=4;else{var ue=e[ie+3*ee],xe=e[ie+3*ee+1],Ne=e[ie+3*ee+2];P[G++]=Ne,P[G++]=xe,P[G++]=ue,P[G++]=255}--oe}},this.decodeAndBlitFrameRGBA=function(O,P){var A=this.frameInfo(O),Z=A.width*A.height,re=new Uint8Array(Z);T2(e,A.data_offset,re,Z);var ie=A.palette_offset,K=A.transparent_index;K===null&&(K=256);var ne=A.width,pe=n-ne,oe=ne,E=4*(A.y*n+A.x),q=4*((A.y+A.height)*n+A.x),G=E,H=4*pe;A.interlaced===!0&&(H+=4*n*7);for(var te=8,ce=0,ae=re.length;ce<ae;++ce){var ee=re[ce];if(oe===0&&(oe=ne,(G+=H)>=q&&(H=4*pe+4*n*(te-1),G=E+(ne+pe)*(te<<1),te>>=1)),ee===K)G+=4;else{var ue=e[ie+3*ee],xe=e[ie+3*ee+1],Ne=e[ie+3*ee+2];P[G++]=ue,P[G++]=xe,P[G++]=Ne,P[G++]=255}--oe}}}function T2(e,t,n,r){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,h=0,m=0,g=0,p=e[t++],j=new Int32Array(4096),N=null;;){for(;h<16&&p!==0;)m|=e[t++]<<h,h+=8,p===1?p=e[t++]:--p;if(h<c)break;var C=m&d;if(m>>=c,h-=c,C!==i){if(C===o)break;for(var y=C<l?C:N,b=0,w=y;w>i;)w=j[w]>>8,++b;var S=w;if(g+b+(y!==C?1:0)>r)return void Rt.log("Warning, gif stream longer than expected.");n[g++]=S;var R=g+=b;for(y!==C&&(n[g++]=S),w=y;b--;)w=j[w],n[--R]=255&w,w>>=8;N!==null&&l<4096&&(j[l++]=N<<8|S,l>=d+1&&c<12&&(++c,d=d<<1|1)),N=C}else l=o+1,d=(1<<(c=s+1))-1,N=null}return g!==r&&Rt.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Vf(e){var t,n,r,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),h=new Array(64),m=new Array(65535),g=new Array(65535),p=new Array(64),j=new Array(64),N=[],C=0,y=7,b=new Array(64),w=new Array(64),S=new Array(64),R=new Array(256),W=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],A=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re(E,q){for(var G=0,H=0,te=new Array,ce=1;ce<=16;ce++){for(var ae=1;ae<=E[ce];ae++)te[q[H]]=[],te[q[H]][0]=G,te[q[H]][1]=ce,H++,G++;G*=2}return te}function ie(E){for(var q=E[0],G=E[1]-1;G>=0;)q&1<<G&&(C|=1<<y),G--,--y<0&&(C==255?(K(255),K(0)):K(C),y=7,C=0)}function K(E){N.push(E)}function ne(E){K(E>>8&255),K(255&E)}function pe(E,q,G,H,te){for(var ce,ae=te[0],ee=te[240],ue=function(ke,qe){var Ee,st,Ge,wt,it,ot,Pt,ut,He,Je,Ve=0;for(He=0;He<8;++He){Ee=ke[Ve],st=ke[Ve+1],Ge=ke[Ve+2],wt=ke[Ve+3],it=ke[Ve+4],ot=ke[Ve+5],Pt=ke[Ve+6];var Ot=Ee+(ut=ke[Ve+7]),jt=Ee-ut,ze=st+Pt,lt=st-Pt,Tt=Ge+ot,Ke=Ge-ot,vt=wt+it,ct=wt-it,ln=Ot+vt,Cn=Ot-vt,qt=ze+Tt,et=ze-Tt;ke[Ve]=ln+qt,ke[Ve+4]=ln-qt;var St=.707106781*(et+Cn);ke[Ve+2]=Cn+St,ke[Ve+6]=Cn-St;var ii=.382683433*((ln=ct+Ke)-(et=lt+jt)),Zn=.5411961*ln+ii,Ma=1.306562965*et+ii,_a=.707106781*(qt=Ke+lt),Ze=jt+_a,Ba=jt-_a;ke[Ve+5]=Ba+Zn,ke[Ve+3]=Ba-Zn,ke[Ve+1]=Ze+Ma,ke[Ve+7]=Ze-Ma,Ve+=8}for(Ve=0,He=0;He<8;++He){Ee=ke[Ve],st=ke[Ve+8],Ge=ke[Ve+16],wt=ke[Ve+24],it=ke[Ve+32],ot=ke[Ve+40],Pt=ke[Ve+48];var Ua=Ee+(ut=ke[Ve+56]),Ur=Ee-ut,zr=st+Pt,tn=st-Pt,In=Ge+ot,Mn=Ge-ot,oi=wt+it,gs=wt-it,ra=Ua+oi,wa=Ua-oi,aa=zr+In,sa=zr-In;ke[Ve]=ra+aa,ke[Ve+32]=ra-aa;var $r=.707106781*(sa+wa);ke[Ve+16]=wa+$r,ke[Ve+48]=wa-$r;var li=.382683433*((ra=gs+Mn)-(sa=tn+Ur)),ja=.5411961*ra+li,ci=1.306562965*sa+li,eo=.707106781*(aa=Mn+tn),to=Ur+eo,no=Ur-eo;ke[Ve+40]=no+ja,ke[Ve+24]=no-ja,ke[Ve+8]=to+ci,ke[Ve+56]=to-ci,Ve++}for(He=0;He<64;++He)Je=ke[He]*qe[He],p[He]=Je>0?Je+.5|0:Je-.5|0;return p}(E,q),xe=0;xe<64;++xe)j[U[xe]]=ue[xe];var Ne=j[0]-G;G=j[0],Ne==0?ie(H[0]):(ie(H[g[ce=32767+Ne]]),ie(m[ce]));for(var Se=63;Se>0&&j[Se]==0;)Se--;if(Se==0)return ie(ae),G;for(var ve,Q=1;Q<=Se;){for(var nt=Q;j[Q]==0&&Q<=Se;)++Q;var Ye=Q-nt;if(Ye>=16){ve=Ye>>4;for(var ye=1;ye<=ve;++ye)ie(ee);Ye&=15}ce=32767+j[Q],ie(te[(Ye<<4)+g[ce]]),ie(m[ce]),Q++}return Se!=63&&ie(ae),G}function oe(E){E=Math.min(Math.max(E,1),100),i!=E&&(function(q){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var te=o((G[H]*q+50)/100);te=Math.min(Math.max(te,1),255),l[U[H]]=te}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ae=0;ae<64;ae++){var ee=o((ce[ae]*q+50)/100);ee=Math.min(Math.max(ee,1),255),c[U[ae]]=ee}for(var ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,Ne=0;Ne<8;Ne++)for(var Se=0;Se<8;Se++)d[xe]=1/(l[U[xe]]*ue[Ne]*ue[Se]*8),h[xe]=1/(c[U[xe]]*ue[Ne]*ue[Se]*8),xe++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),i=E)}this.encode=function(E,q){q&&oe(q),N=new Array,C=0,y=7,ne(65496),ne(65504),ne(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),ne(1),ne(1),K(0),K(0),function(){ne(65499),ne(132),K(0);for(var st=0;st<64;st++)K(l[st]);K(1);for(var Ge=0;Ge<64;Ge++)K(c[Ge])}(),function(st,Ge){ne(65472),ne(17),K(8),ne(Ge),ne(st),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(E.width,E.height),function(){ne(65476),ne(418),K(0);for(var st=0;st<16;st++)K(_[st+1]);for(var Ge=0;Ge<=11;Ge++)K(D[Ge]);K(16);for(var wt=0;wt<16;wt++)K(z[wt+1]);for(var it=0;it<=161;it++)K(L[it]);K(1);for(var ot=0;ot<16;ot++)K(O[ot+1]);for(var Pt=0;Pt<=11;Pt++)K(P[Pt]);K(17);for(var ut=0;ut<16;ut++)K(A[ut+1]);for(var He=0;He<=161;He++)K(Z[He])}(),ne(65498),ne(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var G=0,H=0,te=0;C=0,y=7,this.encode.displayName="_encode_";for(var ce,ae,ee,ue,xe,Ne,Se,ve,Q,nt=E.data,Ye=E.width,ye=E.height,ke=4*Ye,qe=0;qe<ye;){for(ce=0;ce<ke;){for(xe=ke*qe+ce,Se=-1,ve=0,Q=0;Q<64;Q++)Ne=xe+(ve=Q>>3)*ke+(Se=4*(7&Q)),qe+ve>=ye&&(Ne-=ke*(qe+1+ve-ye)),ce+Se>=ke&&(Ne-=ce+Se-ke+4),ae=nt[Ne++],ee=nt[Ne++],ue=nt[Ne++],b[Q]=(W[ae]+W[ee+256|0]+W[ue+512|0]>>16)-128,w[Q]=(W[ae+768|0]+W[ee+1024|0]+W[ue+1280|0]>>16)-128,S[Q]=(W[ae+1280|0]+W[ee+1536|0]+W[ue+1792|0]>>16)-128;G=pe(b,d,G,t,r),H=pe(w,h,H,n,s),te=pe(S,h,te,n,s),ce+=32}qe+=8}if(y>=0){var Ee=[];Ee[1]=y+1,Ee[0]=(1<<y+1)-1,ie(Ee)}return ne(65497),new Uint8Array(N)},e=e||50,function(){for(var E=String.fromCharCode,q=0;q<256;q++)R[q]=E(q)}(),t=re(_,D),n=re(O,P),r=re(z,L),s=re(A,Z),function(){for(var E=1,q=2,G=1;G<=15;G++){for(var H=E;H<q;H++)g[32767+H]=G,m[32767+H]=[],m[32767+H][1]=G,m[32767+H][0]=H;for(var te=-(q-1);te<=-E;te++)g[32767+te]=G,m[32767+te]=[],m[32767+te][1]=G,m[32767+te][0]=q-1+te;E<<=1,q<<=1}}(),function(){for(var E=0;E<256;E++)W[E]=19595*E,W[E+256|0]=38470*E,W[E+512|0]=7471*E+32768,W[E+768|0]=-11059*E,W[E+1024|0]=-21709*E,W[E+1280|0]=32768*E+8421375,W[E+1536|0]=-27439*E,W[E+1792|0]=-5329*E}(),oe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ua(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function q2(e){function t(D){if(!D)throw Error("assert :P")}function n(D,z,L){for(var O=0;4>O;O++)if(D[z+O]!=L.charCodeAt(O))return!0;return!1}function r(D,z,L,O,P){for(var A=0;A<P;A++)D[z+A]=L[O+A]}function s(D,z,L,O){for(var P=0;P<O;P++)D[z+P]=L}function i(D){return new Int32Array(D)}function o(D,z){for(var L=[],O=0;O<D;O++)L.push(new z);return L}function l(D,z){var L=[];return function O(P,A,Z){for(var re=Z[A],ie=0;ie<re&&(P.push(Z.length>A+1?[]:new z),!(Z.length<A+1));ie++)O(P[ie],A+1,Z)}(L,0,D),L}var c=function(){var D=this;function z(u,f){for(var x=1<<f-1>>>0;u&x;)x>>>=1;return x?(u&x-1)+x:u}function L(u,f,x,k,F){t(!(k%x));do u[f+(k-=x)]=F;while(0<k)}function O(u,f,x,k,F){if(t(2328>=F),512>=F)var M=i(512);else if((M=i(F))==null)return 0;return function(B,$,V,Y,le,ge){var J,de,fe=$,be=1<<V,me=i(16),_e=i(16);for(t(le!=0),t(Y!=null),t(B!=null),t(0<V),de=0;de<le;++de){if(15<Y[de])return 0;++me[Y[de]]}if(me[0]==le)return 0;for(_e[1]=0,J=1;15>J;++J){if(me[J]>1<<J)return 0;_e[J+1]=_e[J]+me[J]}for(de=0;de<le;++de)J=Y[de],0<Y[de]&&(ge[_e[J]++]=de);if(_e[15]==1)return(Y=new P).g=0,Y.value=ge[0],L(B,fe,1,be,Y),be;var je,De=-1,Ce=be-1,$e=0,Fe=1,ft=1,Me=1<<V;for(de=0,J=1,le=2;J<=V;++J,le<<=1){if(Fe+=ft<<=1,0>(ft-=me[J]))return 0;for(;0<me[J];--me[J])(Y=new P).g=J,Y.value=ge[de++],L(B,fe+$e,le,Me,Y),$e=z($e,J)}for(J=V+1,le=2;15>=J;++J,le<<=1){if(Fe+=ft<<=1,0>(ft-=me[J]))return 0;for(;0<me[J];--me[J]){if(Y=new P,($e&Ce)!=De){for(fe+=Me,je=1<<(De=J)-V;15>De&&!(0>=(je-=me[De]));)++De,je<<=1;be+=Me=1<<(je=De-V),B[$+(De=$e&Ce)].g=je+V,B[$+De].value=fe-$-De}Y.g=J-V,Y.value=ge[de++],L(B,fe+($e>>V),le,Me,Y),$e=z($e,J)}}return Fe!=2*_e[15]-1?0:be}(u,f,x,k,F,M)}function P(){this.value=this.g=0}function A(){this.value=this.g=0}function Z(){this.G=o(5,P),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ki,A)}function re(u,f,x,k){t(u!=null),t(f!=null),t(2147483648>k),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=f,u.pa=x,u.Jd=f,u.Yc=x+k,u.Zc=4<=k?x+k-4+1:x,ae(u)}function ie(u,f){for(var x=0;0<f--;)x|=ue(u,128)<<f;return x}function K(u,f){var x=ie(u,f);return ee(u)?-x:x}function ne(u,f,x,k){var F,M=0;for(t(u!=null),t(f!=null),t(4294967288>k),u.Sb=k,u.Ra=0,u.u=0,u.h=0,4<k&&(k=4),F=0;F<k;++F)M+=f[x+F]<<8*F;u.Ra=M,u.bb=k,u.oa=f,u.pa=x}function pe(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<_s-8>>>0,++u.bb,u.u-=8;H(u)&&(u.h=1,u.u=0)}function oe(u,f){if(t(0<=f),!u.h&&f<=Sr){var x=G(u)&Nr[f];return u.u+=f,pe(u),x}return u.h=1,u.u=0}function E(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(u){return u.Ra>>>(u.u&_s-1)>>>0}function H(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>_s}function te(u,f){u.u=f,u.h=H(u)}function ce(u){u.u>=Ka&&(t(u.u>=Ka),pe(u))}function ae(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function ee(u){return ie(u,1)}function ue(u,f){var x=u.Ca;0>u.b&&ae(u);var k=u.b,F=x*f>>>8,M=(u.I>>>k>F)+0;for(M?(x-=F,u.I-=F+1<<k>>>0):x=F+1,k=x,F=0;256<=k;)F+=8,k>>=8;return k=7^F+ws[k],u.b-=k,u.Ca=(x<<k)-1,M}function xe(u,f,x){u[f+0]=x>>24&255,u[f+1]=x>>16&255,u[f+2]=x>>8&255,u[f+3]=255&x}function Ne(u,f){return u[f+0]|u[f+1]<<8}function Se(u,f){return Ne(u,f)|u[f+2]<<16}function ve(u,f){return Ne(u,f)|Ne(u,f+2)<<16}function Q(u,f){var x=1<<f;return t(u!=null),t(0<f),u.X=i(x),u.X==null?0:(u.Mb=32-f,u.Xa=f,1)}function nt(u,f){t(u!=null),t(f!=null),t(u.Xa==f.Xa),r(f.X,0,u.X,0,1<<f.Xa)}function Ye(){this.X=[],this.Xa=this.Mb=0}function ye(u,f,x,k){t(x!=null),t(k!=null);var F=x[0],M=k[0];return F==0&&(F=(u*M+f/2)/f),M==0&&(M=(f*F+u/2)/u),0>=F||0>=M?0:(x[0]=F,k[0]=M,1)}function ke(u,f){return u+(1<<f)-1>>>f}function qe(u,f){return((4278255360&u)+(4278255360&f)>>>0&4278255360)+((16711935&u)+(16711935&f)>>>0&16711935)>>>0}function Ee(u,f){D[f]=function(x,k,F,M,B,$,V){var Y;for(Y=0;Y<B;++Y){var le=D[u]($[V+Y-1],F,M+Y);$[V+Y]=qe(x[k+Y],le)}}}function st(){this.ud=this.hd=this.jd=0}function Ge(u,f){return((4278124286&(u^f))>>>1)+(u&f)>>>0}function wt(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function it(u,f){return wt(u+(u-f+.5>>1))}function ot(u,f,x){return Math.abs(f-x)-Math.abs(u-x)}function Pt(u,f,x,k,F,M,B){for(k=M[B-1],x=0;x<F;++x)M[B+x]=k=qe(u[f+x],k)}function ut(u,f,x,k,F){var M;for(M=0;M<x;++M){var B=u[f+M],$=B>>8&255,V=16711935&(V=(V=16711935&B)+(($<<16)+$));k[F+M]=(4278255360&B)+V>>>0}}function He(u,f){f.jd=255&u,f.hd=u>>8&255,f.ud=u>>16&255}function Je(u,f,x,k,F,M){var B;for(B=0;B<k;++B){var $=f[x+B],V=$>>>8,Y=$,le=255&(le=(le=$>>>16)+((u.jd<<24>>24)*(V<<24>>24)>>>5));Y=255&(Y=(Y+=(u.hd<<24>>24)*(V<<24>>24)>>>5)+((u.ud<<24>>24)*(le<<24>>24)>>>5)),F[M+B]=(4278255360&$)+(le<<16)+Y}}function Ve(u,f,x,k,F){D[f]=function(M,B,$,V,Y,le,ge,J,de){for(V=ge;V<J;++V)for(ge=0;ge<de;++ge)Y[le++]=F($[k(M[B++])])},D[u]=function(M,B,$,V,Y,le,ge){var J=8>>M.b,de=M.Ea,fe=M.K[0],be=M.w;if(8>J)for(M=(1<<M.b)-1,be=(1<<J)-1;B<$;++B){var me,_e=0;for(me=0;me<de;++me)me&M||(_e=k(V[Y++])),le[ge++]=F(fe[_e&be]),_e>>=J}else D["VP8LMapColor"+x](V,Y,fe,be,le,ge,B,$,de)}}function Ot(u,f,x,k,F){for(x=f+x;f<x;){var M=u[f++];k[F++]=M>>16&255,k[F++]=M>>8&255,k[F++]=255&M}}function jt(u,f,x,k,F){for(x=f+x;f<x;){var M=u[f++];k[F++]=M>>16&255,k[F++]=M>>8&255,k[F++]=255&M,k[F++]=M>>24&255}}function ze(u,f,x,k,F){for(x=f+x;f<x;){var M=(B=u[f++])>>16&240|B>>12&15,B=240&B|B>>28&15;k[F++]=M,k[F++]=B}}function lt(u,f,x,k,F){for(x=f+x;f<x;){var M=(B=u[f++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;k[F++]=M,k[F++]=B}}function Tt(u,f,x,k,F){for(x=f+x;f<x;){var M=u[f++];k[F++]=255&M,k[F++]=M>>8&255,k[F++]=M>>16&255}}function Ke(u,f,x,k,F,M){if(M==0)for(x=f+x;f<x;)xe(k,((M=u[f++])[0]>>24|M[1]>>8&65280|M[2]<<8&16711680|M[3]<<24)>>>0),F+=32;else r(k,F,u,f,x)}function vt(u,f){D[f][0]=D[u+"0"],D[f][1]=D[u+"1"],D[f][2]=D[u+"2"],D[f][3]=D[u+"3"],D[f][4]=D[u+"4"],D[f][5]=D[u+"5"],D[f][6]=D[u+"6"],D[f][7]=D[u+"7"],D[f][8]=D[u+"8"],D[f][9]=D[u+"9"],D[f][10]=D[u+"10"],D[f][11]=D[u+"11"],D[f][12]=D[u+"12"],D[f][13]=D[u+"13"],D[f][14]=D[u+"0"],D[f][15]=D[u+"0"]}function ct(u){return u==Fh||u==Rh||u==ud||u==Oh}function ln(){this.eb=[],this.size=this.A=this.fb=0}function Cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ln,this.f.kb=new Cn,this.sd=null}function et(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function St(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ii(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Zn(u,f){var x=u.T,k=f.ba.f.RGBA,F=k.eb,M=k.fb+u.ka*k.A,B=Zr[f.ba.S],$=u.y,V=u.O,Y=u.f,le=u.N,ge=u.ea,J=u.W,de=f.cc,fe=f.dc,be=f.Mc,me=f.Nc,_e=u.ka,je=u.ka+u.T,De=u.U,Ce=De+1>>1;for(_e==0?B($,V,null,null,Y,le,ge,J,Y,le,ge,J,F,M,null,null,De):(B(f.ec,f.fc,$,V,de,fe,be,me,Y,le,ge,J,F,M-k.A,F,M,De),++x);_e+2<je;_e+=2)de=Y,fe=le,be=ge,me=J,le+=u.Rc,J+=u.Rc,M+=2*k.A,B($,(V+=2*u.fa)-u.fa,$,V,de,fe,be,me,Y,le,ge,J,F,M-k.A,F,M,De);return V+=u.fa,u.j+je<u.o?(r(f.ec,f.fc,$,V,De),r(f.cc,f.dc,Y,le,Ce),r(f.Mc,f.Nc,ge,J,Ce),x--):1&je||B($,V,null,null,Y,le,ge,J,Y,le,ge,J,F,M+k.A,null,null,De),x}function Ma(u,f,x){var k=u.F,F=[u.J];if(k!=null){var M=u.U,B=f.ba.S,$=B==dd||B==ud;f=f.ba.f.RGBA;var V=[0],Y=u.ka;V[0]=u.T,u.Kb&&(Y==0?--V[0]:(--Y,F[0]-=u.width),u.j+u.ka+u.T==u.o&&(V[0]=u.o-u.j-Y));var le=f.eb;Y=f.fb+Y*f.A,u=Cg(k,F[0],u.width,M,V,le,Y+($?0:3),f.A),t(x==V),u&&ct(B)&&Dl(le,Y,$,M,V,f.A)}return 0}function _a(u){var f=u.ma,x=f.ba.S,k=11>x,F=x==ld||x==cd||x==dd||x==Ih||x==12||ct(x);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!_l(f.Oa,u,F?11:12))return 0;if(F&&ct(x)&&nd(),u.da)alert("todo:use_scaling");else{if(k){if(f.Ib=ii,u.Kb){if(x=u.U+1>>1,f.memory=i(u.U+2*x),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+u.U,f.Mc=f.cc,f.Nc=f.dc+x,f.Ib=Zn,nd()}}else alert("todo:EmitYUV");F&&(f.Jb=Ma,k&&Hr())}if(k&&!$g){for(u=0;256>u;++u)ib[u]=89858*(u-128)+fd>>hd,cb[u]=-22014*(u-128)+fd,lb[u]=-45773*(u-128),ob[u]=113618*(u-128)+fd>>hd;for(u=El;u<Uh;++u)f=76283*(u-16)+fd>>hd,db[u-El]=nn(f,255),ub[u-El]=nn(f+8>>4,15);$g=1}return 1}function Ze(u){var f=u.ma,x=u.U,k=u.T;return t(!(1&u.ka)),0>=x||0>=k?0:(x=f.Ib(u,f),f.Jb!=null&&f.Jb(u,f,x),f.Dc+=x,1)}function Ba(u){u.ma.memory=null}function Ua(u,f,x,k){return oe(u,8)!=47?0:(f[0]=oe(u,14)+1,x[0]=oe(u,14)+1,k[0]=oe(u,1),oe(u,3)!=0?0:!u.h)}function Ur(u,f){if(4>u)return u+1;var x=u-2>>1;return(2+(1&u)<<x)+oe(f,x)+1}function zr(u,f){return 120<f?f-120:1<=(x=((x=Vx[f-1])>>4)*u+(8-(15&x)))?x:1;var x}function tn(u,f,x){var k=G(x),F=u[f+=255&k].g-8;return 0<F&&(te(x,x.u+8),k=G(x),f+=u[f].value,f+=k&(1<<F)-1),te(x,x.u+u[f].g),u[f].value}function In(u,f,x){return x.g+=u.g,x.value+=u.value<<f>>>0,t(8>=x.g),u.g}function Mn(u,f,x){var k=u.xc;return t((f=k==0?0:u.vc[u.md*(x>>k)+(f>>k)])<u.Wb),u.Ya[f]}function oi(u,f,x,k){var F=u.ab,M=u.c*f,B=u.C;f=B+f;var $=x,V=k;for(k=u.Ta,x=u.Ua;0<F--;){var Y=u.gc[F],le=B,ge=f,J=$,de=V,fe=(V=k,$=x,Y.Ea);switch(t(le<ge),t(ge<=Y.nc),Y.hc){case 2:dn(J,de,(ge-le)*fe,V,$);break;case 0:var be=le,me=ge,_e=V,je=$,De=(Me=Y).Ea;be==0&&(jl(J,de,null,null,1,_e,je),Pt(J,de+1,0,0,De-1,_e,je+1),de+=De,je+=De,++be);for(var Ce=1<<Me.b,$e=Ce-1,Fe=ke(De,Me.b),ft=Me.K,Me=Me.w+(be>>Me.b)*Fe;be<me;){var yt=ft,Ln=Me,pt=1;for(uo(J,de,_e,je-De,1,_e,je);pt<De;){var Be=(pt&~$e)+Ce;Be>De&&(Be=De),(0,Sl[yt[Ln++]>>8&15])(J,de+ +pt,_e,je+pt-De,Be-pt,_e,je+pt),pt=Be}de+=De,je+=De,++be&$e||(Me+=Fe)}ge!=Y.nc&&r(V,$-fe,V,$+(ge-le-1)*fe,fe);break;case 1:for(fe=J,me=de,De=(J=Y.Ea)-(je=J&~(_e=(de=1<<Y.b)-1)),be=ke(J,Y.b),Ce=Y.K,Y=Y.w+(le>>Y.b)*be;le<ge;){for($e=Ce,Fe=Y,ft=new st,Me=me+je,yt=me+J;me<Me;)He($e[Fe++],ft),kl(ft,fe,me,de,V,$),me+=de,$+=de;me<yt&&(He($e[Fe++],ft),kl(ft,fe,me,De,V,$),me+=De,$+=De),++le&_e||(Y+=be)}break;case 3:if(J==V&&de==$&&0<Y.b){for(me=V,J=fe=$+(ge-le)*fe-(je=(ge-le)*ke(Y.Ea,Y.b)),de=V,_e=$,be=[],je=(De=je)-1;0<=je;--je)be[je]=de[_e+je];for(je=De-1;0<=je;--je)me[J+je]=be[je];ad(Y,le,ge,V,fe,V,$)}else ad(Y,le,ge,J,de,V,$)}$=k,V=x}V!=x&&r(k,x,$,V,M)}function gs(u,f){var x=u.V,k=u.Ba+u.c*u.C,F=f-u.C;if(t(f<=u.l.o),t(16>=F),0<F){var M=u.l,B=u.Ta,$=u.Ua,V=M.width;if(oi(u,F,x,k),F=$=[$],t((x=u.C)<(k=f)),t(M.v<M.va),k>M.o&&(k=M.o),x<M.j){var Y=M.j-x;x=M.j,F[0]+=Y*V}if(x>=k?x=0:(F[0]+=4*M.v,M.ka=x-M.j,M.U=M.va-M.v,M.T=k-x,x=1),x){if($=$[0],11>(x=u.ca).S){var le=x.f.RGBA,ge=(k=x.S,F=M.U,M=M.T,Y=le.eb,le.A),J=M;for(le=le.fb+u.Ma*le.A;0<J--;){var de=B,fe=$,be=F,me=Y,_e=le;switch(k){case od:Cl(de,fe,be,me,_e);break;case ld:js(de,fe,be,me,_e);break;case Fh:js(de,fe,be,me,_e),Dl(me,_e,0,be,1,0);break;case qg:Ci(de,fe,be,me,_e);break;case cd:Ke(de,fe,be,me,_e,1);break;case Rh:Ke(de,fe,be,me,_e,1),Dl(me,_e,0,be,1,0);break;case dd:Ke(de,fe,be,me,_e,0);break;case ud:Ke(de,fe,be,me,_e,0),Dl(me,_e,1,be,1,0);break;case Ih:Ns(de,fe,be,me,_e);break;case Oh:Ns(de,fe,be,me,_e),kg(me,_e,be,1,0);break;case Ig:Ss(de,fe,be,me,_e);break;default:t(0)}$+=V,le+=ge}u.Ma+=M}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=x.height)}}u.C=f,t(u.C<=u.i)}function ra(u){var f;if(0<u.ua)return 0;for(f=0;f<u.Wb;++f){var x=u.Ya[f].G,k=u.Ya[f].H;if(0<x[1][k[1]+0].g||0<x[2][k[2]+0].g||0<x[3][k[3]+0].g)return 0}return 1}function wa(u,f,x,k,F,M){if(u.Z!=0){var B=u.qd,$=u.rd;for(t(As[u.Z]!=null);f<x;++f)As[u.Z](B,$,k,F,k,F,M),B=k,$=F,F+=M;u.qd=B,u.rd=$}}function aa(u,f){var x=u.l.ma,k=x.Z==0||x.Z==1?u.l.j:u.C;if(k=u.C<k?k:u.C,t(f<=u.l.o),f>k){var F=u.l.width,M=x.ca,B=x.tb+F*k,$=u.V,V=u.Ba+u.c*k,Y=u.gc;t(u.ab==1),t(Y[0].hc==3),ka(Y[0],k,f,$,V,M,B),wa(x,k,f,M,B,F)}u.C=u.Ma=f}function sa(u,f,x,k,F,M,B){var $=u.$/k,V=u.$%k,Y=u.m,le=u.s,ge=x+u.$,J=ge;F=x+k*F;var de=x+k*M,fe=280+le.ua,be=u.Pb?$:16777216,me=0<le.ua?le.Wa:null,_e=le.wc,je=ge<de?Mn(le,V,$):null;t(u.C<M),t(de<=F);var De=!1;e:for(;;){for(;De||ge<de;){var Ce=0;if($>=be){var $e=ge-x;t((be=u).Pb),be.wd=be.m,be.xd=$e,0<be.s.ua&&nt(be.s.Wa,be.s.vb),be=$+Kx}if(V&_e||(je=Mn(le,V,$)),t(je!=null),je.Qb&&(f[ge]=je.qb,De=!0),!De)if(ce(Y),je.jc){Ce=Y,$e=f;var Fe=ge,ft=je.pd[G(Ce)&ki-1];t(je.jc),256>ft.g?(te(Ce,Ce.u+ft.g),$e[Fe]=ft.value,Ce=0):(te(Ce,Ce.u+ft.g-256),t(256<=ft.value),Ce=ft.value),Ce==0&&(De=!0)}else Ce=tn(je.G[0],je.H[0],Y);if(Y.h)break;if(De||256>Ce){if(!De)if(je.nd)f[ge]=(je.qb|Ce<<8)>>>0;else{if(ce(Y),De=tn(je.G[1],je.H[1],Y),ce(Y),$e=tn(je.G[2],je.H[2],Y),Fe=tn(je.G[3],je.H[3],Y),Y.h)break;f[ge]=(Fe<<24|De<<16|Ce<<8|$e)>>>0}if(De=!1,++ge,++V>=k&&(V=0,++$,B!=null&&$<=M&&!($%16)&&B(u,$),me!=null))for(;J<ge;)Ce=f[J++],me.X[(506832829*Ce&4294967295)>>>me.Mb]=Ce}else if(280>Ce){if(Ce=Ur(Ce-256,Y),$e=tn(je.G[4],je.H[4],Y),ce(Y),$e=zr(k,$e=Ur($e,Y)),Y.h)break;if(ge-x<$e||F-ge<Ce)break e;for(Fe=0;Fe<Ce;++Fe)f[ge+Fe]=f[ge+Fe-$e];for(ge+=Ce,V+=Ce;V>=k;)V-=k,++$,B!=null&&$<=M&&!($%16)&&B(u,$);if(t(ge<=F),V&_e&&(je=Mn(le,V,$)),me!=null)for(;J<ge;)Ce=f[J++],me.X[(506832829*Ce&4294967295)>>>me.Mb]=Ce}else{if(!(Ce<fe))break e;for(De=Ce-280,t(me!=null);J<ge;)Ce=f[J++],me.X[(506832829*Ce&4294967295)>>>me.Mb]=Ce;Ce=ge,t(!(De>>>($e=me).Xa)),f[Ce]=$e.X[De],De=!0}De||t(Y.h==H(Y))}if(u.Pb&&Y.h&&ge<F)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&nt(u.s.vb,u.s.Wa);else{if(Y.h)break e;B!=null&&B(u,$>M?M:$),u.a=0,u.$=ge-x}return 1}return u.a=3,0}function $r(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var f=u.Wa;f!=null&&(f.X=null),u.vb=null,t(u!=null)}function li(){var u=new Ue;return u==null?null:(u.a=0,u.xb=Og,vt("Predictor","VP8LPredictors"),vt("Predictor","VP8LPredictors_C"),vt("PredictorAdd","VP8LPredictorsAdd"),vt("PredictorAdd","VP8LPredictorsAdd_C"),dn=ut,kl=Je,Cl=Ot,js=jt,Ns=ze,Ss=lt,Ci=Tt,D.VP8LMapColor32b=Sa,D.VP8LMapColor8b=Nl,u)}function ja(u,f,x,k,F){var M=1,B=[u],$=[f],V=k.m,Y=k.s,le=null,ge=0;e:for(;;){if(x)for(;M&&oe(V,1);){var J=B,de=$,fe=k,be=1,me=fe.m,_e=fe.gc[fe.ab],je=oe(me,2);if(fe.Oc&1<<je)M=0;else{switch(fe.Oc|=1<<je,_e.hc=je,_e.Ea=J[0],_e.nc=de[0],_e.K=[null],++fe.ab,t(4>=fe.ab),je){case 0:case 1:_e.b=oe(me,3)+2,be=ja(ke(_e.Ea,_e.b),ke(_e.nc,_e.b),0,fe,_e.K),_e.K=_e.K[0];break;case 3:var De,Ce=oe(me,8)+1,$e=16<Ce?0:4<Ce?1:2<Ce?2:3;if(J[0]=ke(_e.Ea,$e),_e.b=$e,De=be=ja(Ce,1,0,fe,_e.K)){var Fe,ft=Ce,Me=_e,yt=1<<(8>>Me.b),Ln=i(yt);if(Ln==null)De=0;else{var pt=Me.K[0],Be=Me.w;for(Ln[0]=Me.K[0][0],Fe=1;Fe<1*ft;++Fe)Ln[Fe]=qe(pt[Be+Fe],Ln[Fe-1]);for(;Fe<4*yt;++Fe)Ln[Fe]=0;Me.K[0]=null,Me.K[0]=Ln,De=1}}be=De;break;case 2:break;default:t(0)}M=be}}if(B=B[0],$=$[0],M&&oe(V,1)&&!(M=1<=(ge=oe(V,4))&&11>=ge)){k.a=3;break e}var Pe;if(Pe=M)t:{var hn,dt,xt,$t=k,Un=B,ir=$,rn=ge,Jn=x,or=$t.m,En=$t.s,bt=[null],At=1,an=0,Dt=Gx[rn];n:for(;;){if(Jn&&oe(or,1)){var zn=oe(or,3)+2,la=ke(Un,zn),fn=ke(ir,zn),pr=la*fn;if(!ja(la,fn,0,$t,bt))break n;for(bt=bt[0],En.xc=zn,hn=0;hn<pr;++hn){var Ft=bt[hn]>>8&65535;bt[hn]=Ft,Ft>=At&&(At=Ft+1)}}if(or.h)break n;for(dt=0;5>dt;++dt){var Pn=Fg[dt];!dt&&0<rn&&(Pn+=1<<rn),an<Pn&&(an=Pn)}var Cr=o(At*Dt,P),lr=At,Ar=o(lr,Z);if(Ar==null)var Dr=null;else t(65536>=lr),Dr=Ar;var mr=i(an);if(Dr==null||mr==null||Cr==null){$t.a=1;break n}var Lr=Cr;for(hn=xt=0;hn<At;++hn){var Bt=Dr[hn],Er=Bt.G,ca=Bt.H,Di=0,Ja=1,$n=0;for(dt=0;5>dt;++dt){Pn=Fg[dt],Er[dt]=Lr,ca[dt]=xt,!dt&&0<rn&&(Pn+=1<<rn);a:{var md,zh=Pn,gd=$t,Pl=mr,pb=Lr,mb=xt,$h=0,Ds=gd.m,gb=oe(Ds,1);if(s(Pl,0,0,zh),gb){var vb=oe(Ds,1)+1,yb=oe(Ds,1),Vg=oe(Ds,yb==0?1:8);Pl[Vg]=1,vb==2&&(Pl[Vg=oe(Ds,8)]=1);var vd=1}else{var Gg=i(19),Kg=oe(Ds,4)+4;if(19<Kg){gd.a=3;var yd=0;break a}for(md=0;md<Kg;++md)Gg[Hx[md]]=oe(Ds,3);var Wh=void 0,Tl=void 0,Zg=gd,xb=Gg,xd=zh,Yg=Pl,Hh=0,Ls=Zg.m,Jg=8,Xg=o(128,P);r:for(;O(Xg,0,7,xb,19);){if(oe(Ls,1)){var bb=2+2*oe(Ls,3);if((Wh=2+oe(Ls,bb))>xd)break r}else Wh=xd;for(Tl=0;Tl<xd&&Wh--;){ce(Ls);var Qg=Xg[0+(127&G(Ls))];te(Ls,Ls.u+Qg.g);var fo=Qg.value;if(16>fo)Yg[Tl++]=fo,fo!=0&&(Jg=fo);else{var _b=fo==16,e0=fo-16,wb=$x[e0],t0=oe(Ls,zx[e0])+wb;if(Tl+t0>xd)break r;for(var jb=_b?Jg:0;0<t0--;)Yg[Tl++]=jb}}Hh=1;break r}Hh||(Zg.a=3),vd=Hh}(vd=vd&&!Ds.h)&&($h=O(pb,mb,8,Pl,zh)),vd&&$h!=0?yd=$h:(gd.a=3,yd=0)}if(yd==0)break n;if(Ja&&Wx[dt]==1&&(Ja=Lr[xt].g==0),Di+=Lr[xt].g,xt+=yd,3>=dt){var ql,Vh=mr[0];for(ql=1;ql<Pn;++ql)mr[ql]>Vh&&(Vh=mr[ql]);$n+=Vh}}if(Bt.nd=Ja,Bt.Qb=0,Ja&&(Bt.qb=(Er[3][ca[3]+0].value<<24|Er[1][ca[1]+0].value<<16|Er[2][ca[2]+0].value)>>>0,Di==0&&256>Er[0][ca[0]+0].value&&(Bt.Qb=1,Bt.qb+=Er[0][ca[0]+0].value<<8)),Bt.jc=!Bt.Qb&&6>$n,Bt.jc){var bd,Xa=Bt;for(bd=0;bd<ki;++bd){var Es=bd,Ps=Xa.pd[Es],_d=Xa.G[0][Xa.H[0]+Es];256<=_d.value?(Ps.g=_d.g+256,Ps.value=_d.value):(Ps.g=0,Ps.value=0,Es>>=In(_d,8,Ps),Es>>=In(Xa.G[1][Xa.H[1]+Es],16,Ps),Es>>=In(Xa.G[2][Xa.H[2]+Es],0,Ps),In(Xa.G[3][Xa.H[3]+Es],24,Ps))}}}En.vc=bt,En.Wb=At,En.Ya=Dr,En.yc=Cr,Pe=1;break t}Pe=0}if(!(M=Pe)){k.a=3;break e}if(0<ge){if(Y.ua=1<<ge,!Q(Y.Wa,ge)){k.a=1,M=0;break e}}else Y.ua=0;var Gh=k,n0=B,Nb=$,Kh=Gh.s,Zh=Kh.xc;if(Gh.c=n0,Gh.i=Nb,Kh.md=ke(n0,Zh),Kh.wc=Zh==0?-1:(1<<Zh)-1,x){k.xb=tb;break e}if((le=i(B*$))==null){k.a=1,M=0;break e}M=(M=sa(k,le,0,B,$,$,null))&&!V.h;break e}return M?(F!=null?F[0]=le:(t(le==null),t(x)),k.$=0,x||$r(Y)):$r(Y),M}function ci(u,f){var x=u.c*u.i,k=x+f+16*f;return t(u.c<=f),u.V=i(k),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+x+f,1)}function eo(u,f){var x=u.C,k=f-x,F=u.V,M=u.Ba+u.c*x;for(t(f<=u.l.o);0<k;){var B=16<k?16:k,$=u.l.ma,V=u.l.width,Y=V*B,le=$.ca,ge=$.tb+V*x,J=u.Ta,de=u.Ua;oi(u,B,F,M),Ag(J,de,le,ge,Y),wa($,x,x+B,le,ge,V),k-=B,F+=B*u.c,x+=B}t(x==f),u.C=u.Ma=f}function to(){this.ub=this.yd=this.td=this.Rb=0}function no(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function yh(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ol(){this.Yb=function(){var u=[];return function f(x,k,F){for(var M=F[k],B=0;B<M&&(x.push(F.length>k+1?[]:0),!(F.length<k+1));B++)f(x[B],k+1,F)}(u,0,[3,11]),u}()}function Uc(){this.jb=i(3),this.Wc=l([4,8],ol),this.Xc=l([4,17],ol)}function zc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Wr(){this.ld=this.La=this.dd=this.tc=0}function ll(){this.Na=this.la=0}function $c(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function cl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Wc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Wr),this.Y=0,this.ya=Array(new cl),this.aa=0,this.l=new ro}function Hc(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Vc(){this.cb=this.a=0,this.sc="",this.m=new E,this.Od=new to,this.Kc=new no,this.ed=new zc,this.Qa=new yh,this.Ic=this.$c=this.Aa=0,this.D=new Wc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,E),this.ia=0,this.pb=o(4,$c),this.Pa=new Uc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Hc),this.Hd=0,this.rb=Array(new ll),this.sb=0,this.wa=Array(new Wr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new cl),this.L=this.aa=0,this.gd=l([4,2],Wr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ro(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xh(){var u=new Vc;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,Ll||(Ll=za)),u}function bn(u,f,x){return u.a==0&&(u.a=f,u.sc=x,u.cb=0),0}function Gc(u,f,x){return 3<=x&&u[f+0]==157&&u[f+1]==1&&u[f+2]==42}function Kc(u,f){if(u==null)return 0;if(u.a=0,u.sc="OK",f==null)return bn(u,2,"null VP8Io passed to VP8GetHeaders()");var x=f.data,k=f.w,F=f.ha;if(4>F)return bn(u,7,"Truncated header.");var M=x[k+0]|x[k+1]<<8|x[k+2]<<16,B=u.Od;if(B.Rb=!(1&M),B.td=M>>1&7,B.yd=M>>4&1,B.ub=M>>5,3<B.td)return bn(u,3,"Incorrect keyframe parameters.");if(!B.yd)return bn(u,4,"Frame not displayable.");k+=3,F-=3;var $=u.Kc;if(B.Rb){if(7>F)return bn(u,7,"cannot parse picture header");if(!Gc(x,k,F))return bn(u,3,"Bad code word");$.c=16383&(x[k+4]<<8|x[k+3]),$.Td=x[k+4]>>6,$.i=16383&(x[k+6]<<8|x[k+5]),$.Ud=x[k+6]>>6,k+=7,F-=7,u.za=$.c+15>>4,u.Ub=$.i+15>>4,f.width=$.c,f.height=$.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,s((M=u.Pa).jb,0,255,M.jb.length),t((M=u.Qa)!=null),M.Cb=0,M.Bb=0,M.Fb=1,s(M.Zb,0,0,M.Zb.length),s(M.Lb,0,0,M.Lb)}if(B.ub>F)return bn(u,7,"bad partition length");re(M=u.m,x,k,B.ub),k+=B.ub,F-=B.ub,B.Rb&&($.Ld=ee(M),$.Kd=ee(M)),$=u.Qa;var V,Y=u.Pa;if(t(M!=null),t($!=null),$.Cb=ee(M),$.Cb){if($.Bb=ee(M),ee(M)){for($.Fb=ee(M),V=0;4>V;++V)$.Zb[V]=ee(M)?K(M,7):0;for(V=0;4>V;++V)$.Lb[V]=ee(M)?K(M,6):0}if($.Bb)for(V=0;3>V;++V)Y.jb[V]=ee(M)?ie(M,8):255}else $.Bb=0;if(M.Ka)return bn(u,3,"cannot parse segment header");if(($=u.ed).zd=ee(M),$.Tb=ie(M,6),$.wb=ie(M,3),$.Pc=ee(M),$.Pc&&ee(M)){for(Y=0;4>Y;++Y)ee(M)&&($.vd[Y]=K(M,6));for(Y=0;4>Y;++Y)ee(M)&&($.od[Y]=K(M,6))}if(u.L=$.Tb==0?0:$.zd?1:2,M.Ka)return bn(u,3,"cannot parse filter header");var le=F;if(F=V=k,k=V+le,$=le,u.Xb=(1<<ie(u.m,2))-1,le<3*(Y=u.Xb))x=7;else{for(V+=3*Y,$-=3*Y,le=0;le<Y;++le){var ge=x[F+0]|x[F+1]<<8|x[F+2]<<16;ge>$&&(ge=$),re(u.Jc[+le],x,V,ge),V+=ge,$-=ge,F+=3}re(u.Jc[+Y],x,V,$),x=V<k?0:5}if(x!=0)return bn(u,x,"cannot parse partitions");for(x=ie(V=u.m,7),F=ee(V)?K(V,4):0,k=ee(V)?K(V,4):0,$=ee(V)?K(V,4):0,Y=ee(V)?K(V,4):0,V=ee(V)?K(V,4):0,le=u.Qa,ge=0;4>ge;++ge){if(le.Cb){var J=le.Zb[ge];le.Fb||(J+=x)}else{if(0<ge){u.pb[ge]=u.pb[0];continue}J=x}var de=u.pb[ge];de.Sc[0]=Mh[nn(J+F,127)],de.Sc[1]=Bh[nn(J+0,127)],de.Eb[0]=2*Mh[nn(J+k,127)],de.Eb[1]=101581*Bh[nn(J+$,127)]>>16,8>de.Eb[1]&&(de.Eb[1]=8),de.Qc[0]=Mh[nn(J+Y,117)],de.Qc[1]=Bh[nn(J+V,127)],de.lc=J+V}if(!B.Rb)return bn(u,4,"Not a key frame.");for(ee(M),B=u.Pa,x=0;4>x;++x){for(F=0;8>F;++F)for(k=0;3>k;++k)for($=0;11>$;++$)Y=ue(M,Qx[x][F][k][$])?ie(M,8):Jx[x][F][k][$],B.Wc[x][F].Yb[k][$]=Y;for(F=0;17>F;++F)B.Xc[x][F]=B.Wc[x][eb[F]]}return u.kc=ee(M),u.kc&&(u.Bd=ie(M,8)),u.cb=1}function za(u,f,x,k,F,M,B){var $=f[F].Yb[x];for(x=0;16>F;++F){if(!ue(u,$[x+0]))return F;for(;!ue(u,$[x+1]);)if($=f[++F].Yb[0],x=0,F==16)return 16;var V=f[F+1].Yb;if(ue(u,$[x+2])){var Y=u,le=0;if(ue(Y,(J=$)[(ge=x)+3]))if(ue(Y,J[ge+6])){for($=0,ge=2*(le=ue(Y,J[ge+8]))+(J=ue(Y,J[ge+9+le])),le=0,J=Zx[ge];J[$];++$)le+=le+ue(Y,J[$]);le+=3+(8<<ge)}else ue(Y,J[ge+7])?(le=7+2*ue(Y,165),le+=ue(Y,145)):le=5+ue(Y,159);else le=ue(Y,J[ge+4])?3+ue(Y,J[ge+5]):2;$=V[2]}else le=1,$=V[1];V=B+Yx[F],0>(Y=u).b&&ae(Y);var ge,J=Y.b,de=(ge=Y.Ca>>1)-(Y.I>>J)>>31;--Y.b,Y.Ca+=de,Y.Ca|=1,Y.I-=(ge+1&de)<<J,M[V]=((le^de)-de)*k[(0<F)+0]}return 16}function di(u){var f=u.rb[u.sb-1];f.la=0,f.Na=0,s(u.zc,0,0,u.zc.length),u.ja=0}function ia(u,f,x,k,F){F=u[f+x+32*k]+(F>>3),u[f+x+32*k]=-256&F?0>F?0:255:F}function ui(u,f,x,k,F,M){ia(u,f,0,x,k+F),ia(u,f,1,x,k+M),ia(u,f,2,x,k-M),ia(u,f,3,x,k-F)}function cn(u){return(20091*u>>16)+u}function dl(u,f,x,k){var F,M=0,B=i(16);for(F=0;4>F;++F){var $=u[f+0]+u[f+8],V=u[f+0]-u[f+8],Y=(35468*u[f+4]>>16)-cn(u[f+12]),le=cn(u[f+4])+(35468*u[f+12]>>16);B[M+0]=$+le,B[M+1]=V+Y,B[M+2]=V-Y,B[M+3]=$-le,M+=4,f++}for(F=M=0;4>F;++F)$=(u=B[M+0]+4)+B[M+8],V=u-B[M+8],Y=(35468*B[M+4]>>16)-cn(B[M+12]),ia(x,k,0,0,$+(le=cn(B[M+4])+(35468*B[M+12]>>16))),ia(x,k,1,0,V+Y),ia(x,k,2,0,V-Y),ia(x,k,3,0,$-le),M++,k+=32}function bh(u,f,x,k){var F=u[f+0]+4,M=35468*u[f+4]>>16,B=cn(u[f+4]),$=35468*u[f+1]>>16;ui(x,k,0,F+B,u=cn(u[f+1]),$),ui(x,k,1,F+M,u,$),ui(x,k,2,F-M,u,$),ui(x,k,3,F-B,u,$)}function _h(u,f,x,k,F){dl(u,f,x,k),F&&dl(u,f+16,x,k+4)}function wh(u,f,x,k){Ai(u,f+0,x,k,1),Ai(u,f+32,x,k+128,1)}function Na(u,f,x,k){var F;for(u=u[f+0]+4,F=0;4>F;++F)for(f=0;4>f;++f)ia(x,k,f,F,u)}function Zc(u,f,x,k){u[f+0]&&kt(u,f+0,x,k),u[f+16]&&kt(u,f+16,x,k+4),u[f+32]&&kt(u,f+32,x,k+128),u[f+48]&&kt(u,f+48,x,k+128+4)}function Yc(u,f,x,k){var F,M=i(16);for(F=0;4>F;++F){var B=u[f+0+F]+u[f+12+F],$=u[f+4+F]+u[f+8+F],V=u[f+4+F]-u[f+8+F],Y=u[f+0+F]-u[f+12+F];M[0+F]=B+$,M[8+F]=B-$,M[4+F]=Y+V,M[12+F]=Y-V}for(F=0;4>F;++F)B=(u=M[0+4*F]+3)+M[3+4*F],$=M[1+4*F]+M[2+4*F],V=M[1+4*F]-M[2+4*F],Y=u-M[3+4*F],x[k+0]=B+$>>3,x[k+16]=Y+V>>3,x[k+32]=B-$>>3,x[k+48]=Y-V>>3,k+=64}function vs(u,f,x){var k,F=f-32,M=kr,B=255-u[F-1];for(k=0;k<x;++k){var $,V=M,Y=B+u[f-1];for($=0;$<x;++$)u[f+$]=V[Y+u[F+$]];f+=32}}function ul(u,f){vs(u,f,4)}function jh(u,f){vs(u,f,8)}function Nh(u,f){vs(u,f,16)}function Sh(u,f){var x;for(x=0;16>x;++x)r(u,f+32*x,u,f-32,16)}function hl(u,f){var x;for(x=16;0<x;--x)s(u,f,u[f-1],16),f+=32}function hi(u,f,x){var k;for(k=0;16>k;++k)s(f,x+32*k,u,16)}function ys(u,f){var x,k=16;for(x=0;16>x;++x)k+=u[f-1+32*x]+u[f+x-32];hi(k>>5,u,f)}function kh(u,f){var x,k=8;for(x=0;16>x;++x)k+=u[f-1+32*x];hi(k>>4,u,f)}function fi(u,f){var x,k=8;for(x=0;16>x;++x)k+=u[f+x-32];hi(k>>4,u,f)}function fl(u,f){hi(128,u,f)}function tt(u,f,x){return u+2*f+x+2>>2}function Ch(u,f){var x,k=f-32;for(k=new Uint8Array([tt(u[k-1],u[k+0],u[k+1]),tt(u[k+0],u[k+1],u[k+2]),tt(u[k+1],u[k+2],u[k+3]),tt(u[k+2],u[k+3],u[k+4])]),x=0;4>x;++x)r(u,f+32*x,k,0,k.length)}function Ah(u,f){var x=u[f-1],k=u[f-1+32],F=u[f-1+64],M=u[f-1+96];xe(u,f+0,16843009*tt(u[f-1-32],x,k)),xe(u,f+32,16843009*tt(x,k,F)),xe(u,f+64,16843009*tt(k,F,M)),xe(u,f+96,16843009*tt(F,M,M))}function Dh(u,f){var x,k=4;for(x=0;4>x;++x)k+=u[f+x-32]+u[f-1+32*x];for(k>>=3,x=0;4>x;++x)s(u,f+32*x,k,4)}function Lh(u,f){var x=u[f-1+0],k=u[f-1+32],F=u[f-1+64],M=u[f-1-32],B=u[f+0-32],$=u[f+1-32],V=u[f+2-32],Y=u[f+3-32];u[f+0+96]=tt(k,F,u[f-1+96]),u[f+1+96]=u[f+0+64]=tt(x,k,F),u[f+2+96]=u[f+1+64]=u[f+0+32]=tt(M,x,k),u[f+3+96]=u[f+2+64]=u[f+1+32]=u[f+0+0]=tt(B,M,x),u[f+3+64]=u[f+2+32]=u[f+1+0]=tt($,B,M),u[f+3+32]=u[f+2+0]=tt(V,$,B),u[f+3+0]=tt(Y,V,$)}function $a(u,f){var x=u[f+1-32],k=u[f+2-32],F=u[f+3-32],M=u[f+4-32],B=u[f+5-32],$=u[f+6-32],V=u[f+7-32];u[f+0+0]=tt(u[f+0-32],x,k),u[f+1+0]=u[f+0+32]=tt(x,k,F),u[f+2+0]=u[f+1+32]=u[f+0+64]=tt(k,F,M),u[f+3+0]=u[f+2+32]=u[f+1+64]=u[f+0+96]=tt(F,M,B),u[f+3+32]=u[f+2+64]=u[f+1+96]=tt(M,B,$),u[f+3+64]=u[f+2+96]=tt(B,$,V),u[f+3+96]=tt($,V,V)}function Wa(u,f){var x=u[f-1+0],k=u[f-1+32],F=u[f-1+64],M=u[f-1-32],B=u[f+0-32],$=u[f+1-32],V=u[f+2-32],Y=u[f+3-32];u[f+0+0]=u[f+1+64]=M+B+1>>1,u[f+1+0]=u[f+2+64]=B+$+1>>1,u[f+2+0]=u[f+3+64]=$+V+1>>1,u[f+3+0]=V+Y+1>>1,u[f+0+96]=tt(F,k,x),u[f+0+64]=tt(k,x,M),u[f+0+32]=u[f+1+96]=tt(x,M,B),u[f+1+32]=u[f+2+96]=tt(M,B,$),u[f+2+32]=u[f+3+96]=tt(B,$,V),u[f+3+32]=tt($,V,Y)}function Eh(u,f){var x=u[f+0-32],k=u[f+1-32],F=u[f+2-32],M=u[f+3-32],B=u[f+4-32],$=u[f+5-32],V=u[f+6-32],Y=u[f+7-32];u[f+0+0]=x+k+1>>1,u[f+1+0]=u[f+0+64]=k+F+1>>1,u[f+2+0]=u[f+1+64]=F+M+1>>1,u[f+3+0]=u[f+2+64]=M+B+1>>1,u[f+0+32]=tt(x,k,F),u[f+1+32]=u[f+0+96]=tt(k,F,M),u[f+2+32]=u[f+1+96]=tt(F,M,B),u[f+3+32]=u[f+2+96]=tt(M,B,$),u[f+3+64]=tt(B,$,V),u[f+3+96]=tt($,V,Y)}function Ph(u,f){var x=u[f-1+0],k=u[f-1+32],F=u[f-1+64],M=u[f-1+96];u[f+0+0]=x+k+1>>1,u[f+2+0]=u[f+0+32]=k+F+1>>1,u[f+2+32]=u[f+0+64]=F+M+1>>1,u[f+1+0]=tt(x,k,F),u[f+3+0]=u[f+1+32]=tt(k,F,M),u[f+3+32]=u[f+1+64]=tt(F,M,M),u[f+3+64]=u[f+2+64]=u[f+0+96]=u[f+1+96]=u[f+2+96]=u[f+3+96]=M}function ao(u,f){var x=u[f-1+0],k=u[f-1+32],F=u[f-1+64],M=u[f-1+96],B=u[f-1-32],$=u[f+0-32],V=u[f+1-32],Y=u[f+2-32];u[f+0+0]=u[f+2+32]=x+B+1>>1,u[f+0+32]=u[f+2+64]=k+x+1>>1,u[f+0+64]=u[f+2+96]=F+k+1>>1,u[f+0+96]=M+F+1>>1,u[f+3+0]=tt($,V,Y),u[f+2+0]=tt(B,$,V),u[f+1+0]=u[f+3+32]=tt(x,B,$),u[f+1+32]=u[f+3+64]=tt(k,x,B),u[f+1+64]=u[f+3+96]=tt(F,k,x),u[f+1+96]=tt(M,F,k)}function pl(u,f){var x;for(x=0;8>x;++x)r(u,f+32*x,u,f-32,8)}function pi(u,f){var x;for(x=0;8>x;++x)s(u,f,u[f-1],8),f+=32}function so(u,f,x){var k;for(k=0;8>k;++k)s(f,x+32*k,u,8)}function io(u,f){var x,k=8;for(x=0;8>x;++x)k+=u[f+x-32]+u[f-1+32*x];so(k>>4,u,f)}function Th(u,f){var x,k=4;for(x=0;8>x;++x)k+=u[f+x-32];so(k>>3,u,f)}function ml(u,f){var x,k=4;for(x=0;8>x;++x)k+=u[f-1+32*x];so(k>>3,u,f)}function gl(u,f){so(128,u,f)}function mi(u,f,x){var k=u[f-x],F=u[f+0],M=3*(F-k)+qh[1020+u[f-2*x]-u[f+x]],B=id[112+(M+4>>3)];u[f-x]=kr[255+k+id[112+(M+3>>3)]],u[f+0]=kr[255+F-B]}function gi(u,f,x,k){var F=u[f+0],M=u[f+x];return Kr[255+u[f-2*x]-u[f-x]]>k||Kr[255+M-F]>k}function vl(u,f,x,k){return 4*Kr[255+u[f-x]-u[f+0]]+Kr[255+u[f-2*x]-u[f+x]]<=k}function oo(u,f,x,k,F){var M=u[f-3*x],B=u[f-2*x],$=u[f-x],V=u[f+0],Y=u[f+x],le=u[f+2*x],ge=u[f+3*x];return 4*Kr[255+$-V]+Kr[255+B-Y]>k?0:Kr[255+u[f-4*x]-M]<=F&&Kr[255+M-B]<=F&&Kr[255+B-$]<=F&&Kr[255+ge-le]<=F&&Kr[255+le-Y]<=F&&Kr[255+Y-V]<=F}function yl(u,f,x,k){var F=2*k+1;for(k=0;16>k;++k)vl(u,f+k,x,F)&&mi(u,f+k,x)}function vi(u,f,x,k){var F=2*k+1;for(k=0;16>k;++k)vl(u,f+k*x,1,F)&&mi(u,f+k*x,1)}function Jc(u,f,x,k){var F;for(F=3;0<F;--F)yl(u,f+=4*x,x,k)}function Xc(u,f,x,k){var F;for(F=3;0<F;--F)vi(u,f+=4,x,k)}function Ha(u,f,x,k,F,M,B,$){for(M=2*M+1;0<F--;){if(oo(u,f,x,M,B))if(gi(u,f,x,$))mi(u,f,x);else{var V=u,Y=f,le=x,ge=V[Y-2*le],J=V[Y-le],de=V[Y+0],fe=V[Y+le],be=V[Y+2*le],me=27*(je=qh[1020+3*(de-J)+qh[1020+ge-fe]])+63>>7,_e=18*je+63>>7,je=9*je+63>>7;V[Y-3*le]=kr[255+V[Y-3*le]+je],V[Y-2*le]=kr[255+ge+_e],V[Y-le]=kr[255+J+me],V[Y+0]=kr[255+de-me],V[Y+le]=kr[255+fe-_e],V[Y+2*le]=kr[255+be-je]}f+=k}}function Va(u,f,x,k,F,M,B,$){for(M=2*M+1;0<F--;){if(oo(u,f,x,M,B))if(gi(u,f,x,$))mi(u,f,x);else{var V=u,Y=f,le=x,ge=V[Y-le],J=V[Y+0],de=V[Y+le],fe=id[112+(4+(be=3*(J-ge))>>3)],be=id[112+(be+3>>3)],me=fe+1>>1;V[Y-2*le]=kr[255+V[Y-2*le]+me],V[Y-le]=kr[255+ge+be],V[Y+0]=kr[255+J-fe],V[Y+le]=kr[255+de-me]}f+=k}}function Qc(u,f,x,k,F,M){Ha(u,f,x,1,16,k,F,M)}function ed(u,f,x,k,F,M){Ha(u,f,1,x,16,k,F,M)}function yi(u,f,x,k,F,M){var B;for(B=3;0<B;--B)Va(u,f+=4*x,x,1,16,k,F,M)}function td(u,f,x,k,F,M){var B;for(B=3;0<B;--B)Va(u,f+=4,1,x,16,k,F,M)}function v(u,f,x,k,F,M,B,$){Ha(u,f,F,1,8,M,B,$),Ha(x,k,F,1,8,M,B,$)}function I(u,f,x,k,F,M,B,$){Ha(u,f,1,F,8,M,B,$),Ha(x,k,1,F,8,M,B,$)}function X(u,f,x,k,F,M,B,$){Va(u,f+4*F,F,1,8,M,B,$),Va(x,k+4*F,F,1,8,M,B,$)}function se(u,f,x,k,F,M,B,$){Va(u,f+4,1,F,8,M,B,$),Va(x,k+4,1,F,8,M,B,$)}function he(){this.ba=new qt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new St,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function we(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ae(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Oe(){this.ua=0,this.Wa=new Ye,this.vb=new Ye,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new P}function Ue(){this.xb=this.a=0,this.l=new ro,this.ca=new qt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Oe,this.ab=0,this.gc=o(4,Ae),this.Oc=0}function Qe(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ro,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function rt(u,f,x,k,F,M,B){for(u=u==null?0:u[f+0],f=0;f<B;++f)F[M+f]=u+x[k+f]&255,u=F[M+f]}function Nt(u,f,x,k,F,M,B){var $;if(u==null)rt(null,null,x,k,F,M,B);else for($=0;$<B;++$)F[M+$]=u[f+$]+x[k+$]&255}function Zt(u,f,x,k,F,M,B){if(u==null)rt(null,null,x,k,F,M,B);else{var $,V=u[f+0],Y=V,le=V;for($=0;$<B;++$)Y=le+(V=u[f+$])-Y,le=x[k+$]+(-256&Y?0>Y?0:255:Y)&255,Y=V,F[M+$]=le}}function _n(u,f,x,k){var F=f.width,M=f.o;if(t(u!=null&&f!=null),0>x||0>=k||x+k>M)return null;if(!u.Cc){if(u.ga==null){var B;if(u.ga=new Qe,(B=u.ga==null)||(B=f.width*f.o,t(u.Gb.length==0),u.Gb=i(B),u.Uc=0,u.Gb==null?B=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,B=1),B=!B),!B){B=u.ga;var $=u.Fa,V=u.P,Y=u.qc,le=u.mb,ge=u.nb,J=V+1,de=Y-1,fe=B.l;if(t($!=null&&le!=null&&f!=null),As[0]=null,As[1]=rt,As[2]=Nt,As[3]=Zt,B.ca=le,B.tb=ge,B.c=f.width,B.i=f.height,t(0<B.c&&0<B.i),1>=Y)f=0;else if(B.$a=3&$[V+0],B.Z=$[V+0]>>2&3,B.Lc=$[V+0]>>4&3,V=$[V+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||V)f=0;else if(fe.put=Ze,fe.ac=_a,fe.bc=Ba,fe.ma=B,fe.width=f.width,fe.height=f.height,fe.Da=f.Da,fe.v=f.v,fe.va=f.va,fe.j=f.j,fe.o=f.o,B.$a)e:{t(B.$a==1),f=li();t:for(;;){if(f==null){f=0;break e}if(t(B!=null),B.mc=f,f.c=B.c,f.i=B.i,f.l=B.l,f.l.ma=B,f.l.width=B.c,f.l.height=B.i,f.a=0,ne(f.m,$,J,de),!ja(B.c,B.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&ra(f.s)?(B.ic=1,$=f.c*f.i,f.Ta=null,f.Ua=0,f.V=i($),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(B.ic=0,f=ci(f,B.c)),!f))break t;f=1;break e}B.mc=null,f=0}else f=de>=B.c*B.i;B=!f}if(B)return null;u.ga.Lc!=1?u.Ga=0:k=M-x}t(u.ga!=null),t(x+k<=M);e:{if(f=($=u.ga).c,M=$.l.o,$.$a==0){if(J=u.rc,de=u.Vc,fe=u.Fa,V=u.P+1+x*f,Y=u.mb,le=u.nb+x*f,t(V<=u.P+u.qc),$.Z!=0)for(t(As[$.Z]!=null),B=0;B<k;++B)As[$.Z](J,de,fe,V,Y,le,f),J=Y,de=le,le+=f,V+=f;else for(B=0;B<k;++B)r(Y,le,fe,V,f),J=Y,de=le,le+=f,V+=f;u.rc=J,u.Vc=de}else{if(t($.mc!=null),f=x+k,t((B=$.mc)!=null),t(f<=B.i),B.C>=f)f=1;else if($.ic||Hr(),$.ic){$=B.V,J=B.Ba,de=B.c;var be=B.i,me=(fe=1,V=B.$/de,Y=B.$%de,le=B.m,ge=B.s,B.$),_e=de*be,je=de*f,De=ge.wc,Ce=me<je?Mn(ge,Y,V):null;t(me<=_e),t(f<=be),t(ra(ge));t:for(;;){for(;!le.h&&me<je;){if(Y&De||(Ce=Mn(ge,Y,V)),t(Ce!=null),ce(le),256>(be=tn(Ce.G[0],Ce.H[0],le)))$[J+me]=be,++me,++Y>=de&&(Y=0,++V<=f&&!(V%16)&&aa(B,V));else{if(!(280>be)){fe=0;break t}be=Ur(be-256,le);var $e,Fe=tn(Ce.G[4],Ce.H[4],le);if(ce(le),!(me>=(Fe=zr(de,Fe=Ur(Fe,le)))&&_e-me>=be)){fe=0;break t}for($e=0;$e<be;++$e)$[J+me+$e]=$[J+me+$e-Fe];for(me+=be,Y+=be;Y>=de;)Y-=de,++V<=f&&!(V%16)&&aa(B,V);me<je&&Y&De&&(Ce=Mn(ge,Y,V))}t(le.h==H(le))}aa(B,V>f?f:V);break t}!fe||le.h&&me<_e?(fe=0,B.a=le.h?5:3):B.$=me,f=fe}else f=sa(B,B.V,B.Ba,B.c,B.i,f,eo);if(!f){k=0;break e}}x+k>=M&&(u.Cc=1),k=1}if(!k)return null;if(u.Cc&&((k=u.ga)!=null&&(k.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+x*F}function Mt(u,f,x,k,F,M){for(;0<F--;){var B,$=u,V=f+(x?1:0),Y=u,le=f+(x?0:3);for(B=0;B<k;++B){var ge=Y[le+4*B];ge!=255&&(ge*=32897,$[V+4*B+0]=$[V+4*B+0]*ge>>23,$[V+4*B+1]=$[V+4*B+1]*ge>>23,$[V+4*B+2]=$[V+4*B+2]*ge>>23)}f+=M}}function An(u,f,x,k,F){for(;0<k--;){var M;for(M=0;M<x;++M){var B=u[f+2*M+0],$=15&(Y=u[f+2*M+1]),V=4369*$,Y=(240&Y|Y>>4)*V>>16;u[f+2*M+0]=(240&B|B>>4)*V>>16&240|(15&B|B<<4)*V>>16>>4&15,u[f+2*M+1]=240&Y|$}f+=F}}function wn(u,f,x,k,F,M,B,$){var V,Y,le=255;for(Y=0;Y<F;++Y){for(V=0;V<k;++V){var ge=u[f+V];M[B+4*V]=ge,le&=ge}f+=x,B+=$}return le!=255}function Bn(u,f,x,k,F){var M;for(M=0;M<F;++M)x[k+M]=u[f+M]>>8}function Hr(){Dl=Mt,kg=An,Cg=wn,Ag=Bn}function fr(u,f,x){D[u]=function(k,F,M,B,$,V,Y,le,ge,J,de,fe,be,me,_e,je,De){var Ce,$e=De-1>>1,Fe=$[V+0]|Y[le+0]<<16,ft=ge[J+0]|de[fe+0]<<16;t(k!=null);var Me=3*Fe+ft+131074>>2;for(f(k[F+0],255&Me,Me>>16,be,me),M!=null&&(Me=3*ft+Fe+131074>>2,f(M[B+0],255&Me,Me>>16,_e,je)),Ce=1;Ce<=$e;++Ce){var yt=$[V+Ce]|Y[le+Ce]<<16,Ln=ge[J+Ce]|de[fe+Ce]<<16,pt=Fe+yt+ft+Ln+524296,Be=pt+2*(yt+ft)>>3;Me=Be+Fe>>1,Fe=(pt=pt+2*(Fe+Ln)>>3)+yt>>1,f(k[F+2*Ce-1],255&Me,Me>>16,be,me+(2*Ce-1)*x),f(k[F+2*Ce-0],255&Fe,Fe>>16,be,me+(2*Ce-0)*x),M!=null&&(Me=pt+ft>>1,Fe=Be+Ln>>1,f(M[B+2*Ce-1],255&Me,Me>>16,_e,je+(2*Ce-1)*x),f(M[B+2*Ce+0],255&Fe,Fe>>16,_e,je+(2*Ce+0)*x)),Fe=yt,ft=Ln}1&De||(Me=3*Fe+ft+131074>>2,f(k[F+De-1],255&Me,Me>>16,be,me+(De-1)*x),M!=null&&(Me=3*ft+Fe+131074>>2,f(M[B+De-1],255&Me,Me>>16,_e,je+(De-1)*x)))}}function nd(){Zr[od]=nb,Zr[ld]=Mg,Zr[qg]=rb,Zr[cd]=Bg,Zr[dd]=Ug,Zr[Ih]=zg,Zr[Ig]=ab,Zr[Fh]=Mg,Zr[Rh]=Bg,Zr[ud]=Ug,Zr[Oh]=zg}function lo(u){return u&-16384?0>u?0:255:u>>sb}function xi(u,f){return lo((19077*u>>8)+(26149*f>>8)-14234)}function xs(u,f,x){return lo((19077*u>>8)-(6419*f>>8)-(13320*x>>8)+8708)}function bi(u,f){return lo((19077*u>>8)+(33050*f>>8)-17685)}function _i(u,f,x,k,F){k[F+0]=xi(u,x),k[F+1]=xs(u,f,x),k[F+2]=bi(u,f)}function wi(u,f,x,k,F){k[F+0]=bi(u,f),k[F+1]=xs(u,f,x),k[F+2]=xi(u,x)}function Yn(u,f,x,k,F){var M=xs(u,f,x);f=M<<3&224|bi(u,f)>>3,k[F+0]=248&xi(u,x)|M>>5,k[F+1]=f}function ji(u,f,x,k,F){var M=240&bi(u,f)|15;k[F+0]=240&xi(u,x)|xs(u,f,x)>>4,k[F+1]=M}function Ni(u,f,x,k,F){k[F+0]=255,_i(u,f,x,k,F+1)}function xl(u,f,x,k,F){wi(u,f,x,k,F),k[F+3]=255}function bl(u,f,x,k,F){_i(u,f,x,k,F),k[F+3]=255}function nn(u,f){return 0>u?0:u>f?f:u}function Ga(u,f,x){D[u]=function(k,F,M,B,$,V,Y,le,ge){for(var J=le+(-2&ge)*x;le!=J;)f(k[F+0],M[B+0],$[V+0],Y,le),f(k[F+1],M[B+0],$[V+0],Y,le+x),F+=2,++B,++V,le+=2*x;1&ge&&f(k[F+0],M[B+0],$[V+0],Y,le)}}function co(u,f,x){return x==0?u==0?f==0?6:5:f==0?4:0:x}function rd(u,f,x,k,F){switch(u>>>30){case 3:Ai(f,x,k,F,0);break;case 2:Gr(f,x,k,F);break;case 1:kt(f,x,k,F)}}function Vr(u,f){var x,k,F=f.M,M=f.Nb,B=u.oc,$=u.pc+40,V=u.oc,Y=u.pc+584,le=u.oc,ge=u.pc+600;for(x=0;16>x;++x)B[$+32*x-1]=129;for(x=0;8>x;++x)V[Y+32*x-1]=129,le[ge+32*x-1]=129;for(0<F?B[$-1-32]=V[Y-1-32]=le[ge-1-32]=129:(s(B,$-32-1,127,21),s(V,Y-32-1,127,9),s(le,ge-32-1,127,9)),k=0;k<u.za;++k){var J=f.ya[f.aa+k];if(0<k){for(x=-1;16>x;++x)r(B,$+32*x-4,B,$+32*x+12,4);for(x=-1;8>x;++x)r(V,Y+32*x-4,V,Y+32*x+4,4),r(le,ge+32*x-4,le,ge+32*x+4,4)}var de=u.Gd,fe=u.Hd+k,be=J.ad,me=J.Hc;if(0<F&&(r(B,$-32,de[fe].y,0,16),r(V,Y-32,de[fe].f,0,8),r(le,ge-32,de[fe].ea,0,8)),J.Za){var _e=B,je=$-32+16;for(0<F&&(k>=u.za-1?s(_e,je,de[fe].y[15],4):r(_e,je,de[fe+1].y,0,4)),x=0;4>x;x++)_e[je+128+x]=_e[je+256+x]=_e[je+384+x]=_e[je+0+x];for(x=0;16>x;++x,me<<=2)_e=B,je=$+Wg[x],oa[J.Ob[x]](_e,je),rd(me,be,16*+x,_e,je)}else if(_e=co(k,F,J.Ob[0]),Cs[_e](B,$),me!=0)for(x=0;16>x;++x,me<<=2)rd(me,be,16*+x,B,$+Wg[x]);for(x=J.Gc,_e=co(k,F,J.Dd),Ya[_e](V,Y),Ya[_e](le,ge),me=be,_e=V,je=Y,255&(J=0|x)&&(170&J?Ca(me,256,_e,je):It(me,256,_e,je)),J=le,me=ge,255&(x>>=8)&&(170&x?Ca(be,320,J,me):It(be,320,J,me)),F<u.Ub-1&&(r(de[fe].y,0,B,$+480,16),r(de[fe].f,0,V,Y+224,8),r(de[fe].ea,0,le,ge+224,8)),x=8*M*u.B,de=u.sa,fe=u.ta+16*k+16*M*u.R,be=u.qa,J=u.ra+8*k+x,me=u.Ha,_e=u.Ia+8*k+x,x=0;16>x;++x)r(de,fe+x*u.R,B,$+32*x,16);for(x=0;8>x;++x)r(be,J+x*u.B,V,Y+32*x,8),r(me,_e+x*u.B,le,ge+32*x,8)}}function Si(u,f,x,k,F,M,B,$,V){var Y=[0],le=[0],ge=0,J=V!=null?V.kd:0,de=V??new we;if(u==null||12>x)return 7;de.data=u,de.w=f,de.ha=x,f=[f],x=[x],de.gb=[de.gb];e:{var fe=f,be=x,me=de.gb;if(t(u!=null),t(be!=null),t(me!=null),me[0]=0,12<=be[0]&&!n(u,fe[0],"RIFF")){if(n(u,fe[0]+8,"WEBP")){me=3;break e}var _e=ve(u,fe[0]+4);if(12>_e||4294967286<_e){me=3;break e}if(J&&_e>be[0]-8){me=7;break e}me[0]=_e,fe[0]+=12,be[0]-=12}me=0}if(me!=0)return me;for(_e=0<de.gb[0],x=x[0];;){e:{var je=u;be=f,me=x;var De=Y,Ce=le,$e=fe=[0];if((Me=ge=[ge])[0]=0,8>me[0])me=7;else{if(!n(je,be[0],"VP8X")){if(ve(je,be[0]+4)!=10){me=3;break e}if(18>me[0]){me=7;break e}var Fe=ve(je,be[0]+8),ft=1+Se(je,be[0]+12);if(2147483648<=ft*(je=1+Se(je,be[0]+15))){me=3;break e}$e!=null&&($e[0]=Fe),De!=null&&(De[0]=ft),Ce!=null&&(Ce[0]=je),be[0]+=18,me[0]-=18,Me[0]=1}me=0}}if(ge=ge[0],fe=fe[0],me!=0)return me;if(be=!!(2&fe),!_e&&ge)return 3;if(M!=null&&(M[0]=!!(16&fe)),B!=null&&(B[0]=be),$!=null&&($[0]=0),B=Y[0],fe=le[0],ge&&be&&V==null){me=0;break}if(4>x){me=7;break}if(_e&&ge||!_e&&!ge&&!n(u,f[0],"ALPH")){x=[x],de.na=[de.na],de.P=[de.P],de.Sa=[de.Sa];e:{Fe=u,me=f,_e=x;var Me=de.gb;De=de.na,Ce=de.P,$e=de.Sa,ft=22,t(Fe!=null),t(_e!=null),je=me[0];var yt=_e[0];for(t(De!=null),t($e!=null),De[0]=null,Ce[0]=null,$e[0]=0;;){if(me[0]=je,_e[0]=yt,8>yt){me=7;break e}var Ln=ve(Fe,je+4);if(4294967286<Ln){me=3;break e}var pt=8+Ln+1&-2;if(ft+=pt,0<Me&&ft>Me){me=3;break e}if(!n(Fe,je,"VP8 ")||!n(Fe,je,"VP8L")){me=0;break e}if(yt[0]<pt){me=7;break e}n(Fe,je,"ALPH")||(De[0]=Fe,Ce[0]=je+8,$e[0]=Ln),je+=pt,yt-=pt}}if(x=x[0],de.na=de.na[0],de.P=de.P[0],de.Sa=de.Sa[0],me!=0)break}x=[x],de.Ja=[de.Ja],de.xa=[de.xa];e:if(Me=u,me=f,_e=x,De=de.gb[0],Ce=de.Ja,$e=de.xa,Fe=me[0],je=!n(Me,Fe,"VP8 "),ft=!n(Me,Fe,"VP8L"),t(Me!=null),t(_e!=null),t(Ce!=null),t($e!=null),8>_e[0])me=7;else{if(je||ft){if(Me=ve(Me,Fe+4),12<=De&&Me>De-12){me=3;break e}if(J&&Me>_e[0]-8){me=7;break e}Ce[0]=Me,me[0]+=8,_e[0]-=8,$e[0]=ft}else $e[0]=5<=_e[0]&&Me[Fe+0]==47&&!(Me[Fe+4]>>5),Ce[0]=_e[0];me=0}if(x=x[0],de.Ja=de.Ja[0],de.xa=de.xa[0],f=f[0],me!=0)break;if(4294967286<de.Ja)return 3;if($==null||be||($[0]=de.xa?2:1),B=[B],fe=[fe],de.xa){if(5>x){me=7;break}$=B,J=fe,be=M,u==null||5>x?u=0:5<=x&&u[f+0]==47&&!(u[f+4]>>5)?(_e=[0],Me=[0],De=[0],ne(Ce=new q,u,f,x),Ua(Ce,_e,Me,De)?($!=null&&($[0]=_e[0]),J!=null&&(J[0]=Me[0]),be!=null&&(be[0]=De[0]),u=1):u=0):u=0}else{if(10>x){me=7;break}$=fe,u==null||10>x||!Gc(u,f+3,x-3)?u=0:(J=u[f+0]|u[f+1]<<8|u[f+2]<<16,be=16383&(u[f+7]<<8|u[f+6]),u=16383&(u[f+9]<<8|u[f+8]),1&J||3<(J>>1&7)||!(J>>4&1)||J>>5>=de.Ja||!be||!u?u=0:(B&&(B[0]=be),$&&($[0]=u),u=1))}if(!u||(B=B[0],fe=fe[0],ge&&(Y[0]!=B||le[0]!=fe)))return 3;V!=null&&(V[0]=de,V.offset=f-V.w,t(4294967286>f-V.w),t(V.offset==V.ha-x));break}return me==0||me==7&&ge&&V==null?(M!=null&&(M[0]|=de.na!=null&&0<de.na.length),k!=null&&(k[0]=B),F!=null&&(F[0]=fe),0):me}function _l(u,f,x){var k=f.width,F=f.height,M=0,B=0,$=k,V=F;if(f.Da=u!=null&&0<u.Da,f.Da&&($=u.cd,V=u.bd,M=u.v,B=u.j,11>x||(M&=-2,B&=-2),0>M||0>B||0>=$||0>=V||M+$>k||B+V>F))return 0;if(f.v=M,f.j=B,f.va=M+$,f.o=B+V,f.U=$,f.T=V,f.da=u!=null&&0<u.da,f.da){if(!ye($,V,x=[u.ib],M=[u.hb]))return 0;f.ib=x[0],f.hb=M[0]}return f.ob=u!=null&&u.ob,f.Kb=u==null||!u.Sd,f.da&&(f.ob=f.ib<3*k/4&&f.hb<3*F/4,f.Kb=0),1}function wl(u){if(u==null)return 2;if(11>u.S){var f=u.f.RGBA;f.fb+=(u.height-1)*f.A,f.A=-f.A}else f=u.f.kb,u=u.height,f.O+=(u-1)*f.fa,f.fa=-f.fa,f.N+=(u-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(u-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(u-1)*f.lb,f.lb=-f.lb);return 0}function bs(u,f,x,k){if(k==null||0>=u||0>=f)return 2;if(x!=null){if(x.Da){var F=x.cd,M=x.bd,B=-2&x.v,$=-2&x.j;if(0>B||0>$||0>=F||0>=M||B+F>u||$+M>f)return 2;u=F,f=M}if(x.da){if(!ye(u,f,F=[x.ib],M=[x.hb]))return 2;u=F[0],f=M[0]}}k.width=u,k.height=f;e:{var V=k.width,Y=k.height;if(u=k.S,0>=V||0>=Y||!(u>=od&&13>u))u=2;else{if(0>=k.Rd&&k.sd==null){B=M=F=f=0;var le=($=V*Hg[u])*Y;if(11>u||(M=(Y+1)/2*(f=(V+1)/2),u==12&&(B=(F=V)*Y)),(Y=i(le+2*M+B))==null){u=1;break e}k.sd=Y,11>u?((V=k.f.RGBA).eb=Y,V.fb=0,V.A=$,V.size=le):((V=k.f.kb).y=Y,V.O=0,V.fa=$,V.Fd=le,V.f=Y,V.N=0+le,V.Ab=f,V.Cd=M,V.ea=Y,V.W=0+le+M,V.Db=f,V.Ed=M,u==12&&(V.F=Y,V.J=0+le+2*M),V.Tc=B,V.lb=F)}if(f=1,F=k.S,M=k.width,B=k.height,F>=od&&13>F)if(11>F)u=k.f.RGBA,f&=($=Math.abs(u.A))*(B-1)+M<=u.size,f&=$>=M*Hg[F],f&=u.eb!=null;else{u=k.f.kb,$=(M+1)/2,le=(B+1)/2,V=Math.abs(u.fa),Y=Math.abs(u.Ab);var ge=Math.abs(u.Db),J=Math.abs(u.lb),de=J*(B-1)+M;f&=V*(B-1)+M<=u.Fd,f&=Y*(le-1)+$<=u.Cd,f=(f&=ge*(le-1)+$<=u.Ed)&V>=M&Y>=$&ge>=$,f&=u.y!=null,f&=u.f!=null,f&=u.ea!=null,F==12&&(f&=J>=M,f&=de<=u.Tc,f&=u.F!=null)}else f=0;u=f?0:2}}return u!=0||x!=null&&x.fd&&(u=wl(k)),u}var ki=64,Nr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Sr=24,_s=32,Ka=8,ws=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ee("Predictor0","PredictorAdd0"),D.Predictor0=function(){return 4278190080},D.Predictor1=function(u){return u},D.Predictor2=function(u,f,x){return f[x+0]},D.Predictor3=function(u,f,x){return f[x+1]},D.Predictor4=function(u,f,x){return f[x-1]},D.Predictor5=function(u,f,x){return Ge(Ge(u,f[x+1]),f[x+0])},D.Predictor6=function(u,f,x){return Ge(u,f[x-1])},D.Predictor7=function(u,f,x){return Ge(u,f[x+0])},D.Predictor8=function(u,f,x){return Ge(f[x-1],f[x+0])},D.Predictor9=function(u,f,x){return Ge(f[x+0],f[x+1])},D.Predictor10=function(u,f,x){return Ge(Ge(u,f[x-1]),Ge(f[x+0],f[x+1]))},D.Predictor11=function(u,f,x){var k=f[x+0];return 0>=ot(k>>24&255,u>>24&255,(f=f[x-1])>>24&255)+ot(k>>16&255,u>>16&255,f>>16&255)+ot(k>>8&255,u>>8&255,f>>8&255)+ot(255&k,255&u,255&f)?k:u},D.Predictor12=function(u,f,x){var k=f[x+0];return(wt((u>>24&255)+(k>>24&255)-((f=f[x-1])>>24&255))<<24|wt((u>>16&255)+(k>>16&255)-(f>>16&255))<<16|wt((u>>8&255)+(k>>8&255)-(f>>8&255))<<8|wt((255&u)+(255&k)-(255&f)))>>>0},D.Predictor13=function(u,f,x){var k=f[x-1];return(it((u=Ge(u,f[x+0]))>>24&255,k>>24&255)<<24|it(u>>16&255,k>>16&255)<<16|it(u>>8&255,k>>8&255)<<8|it(255&u,255&k))>>>0};var jl=D.PredictorAdd0;D.PredictorAdd1=Pt,Ee("Predictor2","PredictorAdd2"),Ee("Predictor3","PredictorAdd3"),Ee("Predictor4","PredictorAdd4"),Ee("Predictor5","PredictorAdd5"),Ee("Predictor6","PredictorAdd6"),Ee("Predictor7","PredictorAdd7"),Ee("Predictor8","PredictorAdd8"),Ee("Predictor9","PredictorAdd9"),Ee("Predictor10","PredictorAdd10"),Ee("Predictor11","PredictorAdd11"),Ee("Predictor12","PredictorAdd12"),Ee("Predictor13","PredictorAdd13");var uo=D.PredictorAdd2;Ve("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),Ve("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var dn,ad=D.ColorIndexInverseTransform,Sa=D.MapARGB,ka=D.VP8LColorIndexInverseTransformAlpha,Nl=D.MapAlpha,Sl=D.VP8LPredictorsAdd=[];Sl.length=16,(D.VP8LPredictors=[]).length=16,(D.VP8LPredictorsAdd_C=[]).length=16,(D.VP8LPredictors_C=[]).length=16;var kl,Cl,js,Ns,Ss,Ci,ks,Ai,Gr,Ca,kt,It,un,Dn,Za,Al,ho,sd,bg,_g,wg,jg,Ng,Sg,Dl,kg,Cg,Ag,Dg=i(511),Lg=i(2041),Eg=i(225),Pg=i(767),Tg=0,qh=Lg,id=Eg,kr=Pg,Kr=Dg,od=0,ld=1,qg=2,cd=3,dd=4,Ih=5,Ig=6,Fh=7,Rh=8,ud=9,Oh=10,zx=[2,3,7],$x=[3,3,11],Fg=[280,256,256,256,40],Wx=[0,1,1,1,0],Hx=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Vx=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Gx=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Kx=8,Mh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Bh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ll=null,Zx=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Yx=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Rg=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Jx=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Xx=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Qx=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],eb=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Cs=[],oa=[],Ya=[],tb=1,Og=2,As=[],Zr=[];fr("UpsampleRgbLinePair",_i,3),fr("UpsampleBgrLinePair",wi,3),fr("UpsampleRgbaLinePair",bl,4),fr("UpsampleBgraLinePair",xl,4),fr("UpsampleArgbLinePair",Ni,4),fr("UpsampleRgba4444LinePair",ji,2),fr("UpsampleRgb565LinePair",Yn,2);var nb=D.UpsampleRgbLinePair,rb=D.UpsampleBgrLinePair,Mg=D.UpsampleRgbaLinePair,Bg=D.UpsampleBgraLinePair,Ug=D.UpsampleArgbLinePair,zg=D.UpsampleRgba4444LinePair,ab=D.UpsampleRgb565LinePair,hd=16,fd=1<<hd-1,El=-227,Uh=482,sb=6,$g=0,ib=i(256),ob=i(256),lb=i(256),cb=i(256),db=i(Uh-El),ub=i(Uh-El);Ga("YuvToRgbRow",_i,3),Ga("YuvToBgrRow",wi,3),Ga("YuvToRgbaRow",bl,4),Ga("YuvToBgraRow",xl,4),Ga("YuvToArgbRow",Ni,4),Ga("YuvToRgba4444Row",ji,2),Ga("YuvToRgb565Row",Yn,2);var Wg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],pd=[0,2,8],hb=[8,7,6,4,4,2,2,2,1,1,1,1],fb=1;this.WebPDecodeRGBA=function(u,f,x,k,F){var M=ld,B=new he,$=new qt;B.ba=$,$.S=M,$.width=[$.width],$.height=[$.height];var V=$.width,Y=$.height,le=new et;if(le==null||u==null)var ge=2;else t(le!=null),ge=Si(u,f,x,le.width,le.height,le.Pd,le.Qd,le.format,null);if(ge!=0?V=0:(V!=null&&(V[0]=le.width[0]),Y!=null&&(Y[0]=le.height[0]),V=1),V){$.width=$.width[0],$.height=$.height[0],k!=null&&(k[0]=$.width),F!=null&&(F[0]=$.height);e:{if(k=new ro,(F=new we).data=u,F.w=f,F.ha=x,F.kd=1,f=[0],t(F!=null),((u=Si(F.data,F.w,F.ha,null,null,null,f,null,F))==0||u==7)&&f[0]&&(u=4),(f=u)==0){if(t(B!=null),k.data=F.data,k.w=F.w+F.offset,k.ha=F.ha-F.offset,k.put=Ze,k.ac=_a,k.bc=Ba,k.ma=B,F.xa){if((u=li())==null){B=1;break e}if(function(J,de){var fe=[0],be=[0],me=[0];t:for(;;){if(J==null)return 0;if(de==null)return J.a=2,0;if(J.l=de,J.a=0,ne(J.m,de.data,de.w,de.ha),!Ua(J.m,fe,be,me)){J.a=3;break t}if(J.xb=Og,de.width=fe[0],de.height=be[0],!ja(fe[0],be[0],1,J,null))break t;return 1}return t(J.a!=0),0}(u,k)){if(k=(f=bs(k.width,k.height,B.Oa,B.ba))==0){t:{k=u;n:for(;;){if(k==null){k=0;break t}if(t(k.s.yc!=null),t(k.s.Ya!=null),t(0<k.s.Wb),t((x=k.l)!=null),t((F=x.ma)!=null),k.xb!=0){if(k.ca=F.ba,k.tb=F.tb,t(k.ca!=null),!_l(F.Oa,x,cd)){k.a=2;break n}if(!ci(k,x.width)||x.da)break n;if((x.da||ct(k.ca.S))&&Hr(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&Hr()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!Q(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!sa(k,k.V,k.Ba,k.c,k.i,x.o,gs))break n;F.Dc=k.Ma,k=1;break t}t(k.a!=0),k=0}k=!k}k&&(f=u.a)}else f=u.a}else{if((u=new xh)==null){B=1;break e}if(u.Fa=F.na,u.P=F.P,u.qc=F.Sa,Kc(u,k)){if((f=bs(k.width,k.height,B.Oa,B.ba))==0){if(u.Aa=0,x=B.Oa,t((F=u)!=null),x!=null){if(0<(V=0>(V=x.Md)?0:100<V?255:255*V/100)){for(Y=le=0;4>Y;++Y)12>(ge=F.pb[Y]).lc&&(ge.ia=V*hb[0>ge.lc?0:ge.lc]>>3),le|=ge.ia;le&&(alert("todo:VP8InitRandom"),F.ia=1)}F.Ga=x.Id,100<F.Ga?F.Ga=100:0>F.Ga&&(F.Ga=0)}(function(J,de){if(J==null)return 0;if(de==null)return bn(J,2,"NULL VP8Io parameter in VP8Decode().");if(!J.cb&&!Kc(J,de))return 0;if(t(J.cb),de.ac==null||de.ac(de)){de.ob&&(J.L=0);var fe=pd[J.L];if(J.L==2?(J.yb=0,J.zb=0):(J.yb=de.v-fe>>4,J.zb=de.j-fe>>4,0>J.yb&&(J.yb=0),0>J.zb&&(J.zb=0)),J.Va=de.o+15+fe>>4,J.Hb=de.va+15+fe>>4,J.Hb>J.za&&(J.Hb=J.za),J.Va>J.Ub&&(J.Va=J.Ub),0<J.L){var be=J.ed;for(fe=0;4>fe;++fe){var me;if(J.Qa.Cb){var _e=J.Qa.Lb[fe];J.Qa.Fb||(_e+=be.Tb)}else _e=be.Tb;for(me=0;1>=me;++me){var je=J.gd[fe][me],De=_e;if(be.Pc&&(De+=be.vd[0],me&&(De+=be.od[0])),0<(De=0>De?0:63<De?63:De)){var Ce=De;0<be.wb&&(Ce=4<be.wb?Ce>>2:Ce>>1)>9-be.wb&&(Ce=9-be.wb),1>Ce&&(Ce=1),je.dd=Ce,je.tc=2*De+Ce,je.ld=40<=De?2:15<=De?1:0}else je.tc=0;je.La=me}}}fe=0}else bn(J,6,"Frame setup failed"),fe=J.a;if(fe=fe==0){if(fe){J.$c=0,0<J.Aa||(J.Ic=fb);t:{fe=J.Ic,be=4*(Ce=J.za);var $e=32*Ce,Fe=Ce+1,ft=0<J.L?Ce*(0<J.Aa?2:1):0,Me=(J.Aa==2?2:1)*Ce;if((je=be+832+(me=3*(16*fe+pd[J.L])/2*$e)+(_e=J.Fa!=null&&0<J.Fa.length?J.Kc.c*J.Kc.i:0))!=je)fe=0;else{if(je>J.Vb){if(J.Vb=0,J.Ec=i(je),J.Fc=0,J.Ec==null){fe=bn(J,1,"no memory during frame initialization.");break t}J.Vb=je}je=J.Ec,De=J.Fc,J.Ac=je,J.Bc=De,De+=be,J.Gd=o($e,Hc),J.Hd=0,J.rb=o(Fe+1,ll),J.sb=1,J.wa=ft?o(ft,Wr):null,J.Y=0,J.D.Nb=0,J.D.wa=J.wa,J.D.Y=J.Y,0<J.Aa&&(J.D.Y+=Ce),t(!0),J.oc=je,J.pc=De,De+=832,J.ya=o(Me,cl),J.aa=0,J.D.ya=J.ya,J.D.aa=J.aa,J.Aa==2&&(J.D.aa+=Ce),J.R=16*Ce,J.B=8*Ce,Ce=($e=pd[J.L])*J.R,$e=$e/2*J.B,J.sa=je,J.ta=De+Ce,J.qa=J.sa,J.ra=J.ta+16*fe*J.R+$e,J.Ha=J.qa,J.Ia=J.ra+8*fe*J.B+$e,J.$c=0,De+=me,J.mb=_e?je:null,J.nb=_e?De:null,t(De+_e<=J.Fc+J.Vb),di(J),s(J.Ac,J.Bc,0,be),fe=1}}if(fe){if(de.ka=0,de.y=J.sa,de.O=J.ta,de.f=J.qa,de.N=J.ra,de.ea=J.Ha,de.Vd=J.Ia,de.fa=J.R,de.Rc=J.B,de.F=null,de.J=0,!Tg){for(fe=-255;255>=fe;++fe)Dg[255+fe]=0>fe?-fe:fe;for(fe=-1020;1020>=fe;++fe)Lg[1020+fe]=-128>fe?-128:127<fe?127:fe;for(fe=-112;112>=fe;++fe)Eg[112+fe]=-16>fe?-16:15<fe?15:fe;for(fe=-255;510>=fe;++fe)Pg[255+fe]=0>fe?0:255<fe?255:fe;Tg=1}ks=Yc,Ai=_h,Ca=wh,kt=Na,It=Zc,Gr=bh,un=Qc,Dn=ed,Za=v,Al=I,ho=yi,sd=td,bg=X,_g=se,wg=yl,jg=vi,Ng=Jc,Sg=Xc,oa[0]=Dh,oa[1]=ul,oa[2]=Ch,oa[3]=Ah,oa[4]=Lh,oa[5]=Wa,oa[6]=$a,oa[7]=Eh,oa[8]=ao,oa[9]=Ph,Cs[0]=ys,Cs[1]=Nh,Cs[2]=Sh,Cs[3]=hl,Cs[4]=kh,Cs[5]=fi,Cs[6]=fl,Ya[0]=io,Ya[1]=jh,Ya[2]=pl,Ya[3]=pi,Ya[4]=ml,Ya[5]=Th,Ya[6]=gl,fe=1}else fe=0}fe&&(fe=function(yt,Ln){for(yt.M=0;yt.M<yt.Va;++yt.M){var pt,Be=yt.Jc[yt.M&yt.Xb],Pe=yt.m,hn=yt;for(pt=0;pt<hn.za;++pt){var dt=Pe,xt=hn,$t=xt.Ac,Un=xt.Bc+4*pt,ir=xt.zc,rn=xt.ya[xt.aa+pt];if(xt.Qa.Bb?rn.$b=ue(dt,xt.Pa.jb[0])?2+ue(dt,xt.Pa.jb[2]):ue(dt,xt.Pa.jb[1]):rn.$b=0,xt.kc&&(rn.Ad=ue(dt,xt.Bd)),rn.Za=!ue(dt,145)+0,rn.Za){var Jn=rn.Ob,or=0;for(xt=0;4>xt;++xt){var En,bt=ir[0+xt];for(En=0;4>En;++En){bt=Xx[$t[Un+En]][bt];for(var At=Rg[ue(dt,bt[0])];0<At;)At=Rg[2*At+ue(dt,bt[At])];bt=-At,$t[Un+En]=bt}r(Jn,or,$t,Un,4),or+=4,ir[0+xt]=bt}}else bt=ue(dt,156)?ue(dt,128)?1:3:ue(dt,163)?2:0,rn.Ob[0]=bt,s($t,Un,bt,4),s(ir,0,bt,4);rn.Dd=ue(dt,142)?ue(dt,114)?ue(dt,183)?1:3:2:0}if(hn.m.Ka)return bn(yt,7,"Premature end-of-partition0 encountered.");for(;yt.ja<yt.za;++yt.ja){if(hn=Be,dt=(Pe=yt).rb[Pe.sb-1],$t=Pe.rb[Pe.sb+Pe.ja],pt=Pe.ya[Pe.aa+Pe.ja],Un=Pe.kc?pt.Ad:0)dt.la=$t.la=0,pt.Za||(dt.Na=$t.Na=0),pt.Hc=0,pt.Gc=0,pt.ia=0;else{var an,Dt;if(dt=$t,$t=hn,Un=Pe.Pa.Xc,ir=Pe.ya[Pe.aa+Pe.ja],rn=Pe.pb[ir.$b],xt=ir.ad,Jn=0,or=Pe.rb[Pe.sb-1],bt=En=0,s(xt,Jn,0,384),ir.Za)var zn=0,la=Un[3];else{At=i(16);var fn=dt.Na+or.Na;if(fn=Ll($t,Un[1],fn,rn.Eb,0,At,0),dt.Na=or.Na=(0<fn)+0,1<fn)ks(At,0,xt,Jn);else{var pr=At[0]+3>>3;for(At=0;256>At;At+=16)xt[Jn+At]=pr}zn=1,la=Un[0]}var Ft=15&dt.la,Pn=15&or.la;for(At=0;4>At;++At){var Cr=1&Pn;for(pr=Dt=0;4>pr;++pr)Ft=Ft>>1|(Cr=(fn=Ll($t,la,fn=Cr+(1&Ft),rn.Sc,zn,xt,Jn))>zn)<<7,Dt=Dt<<2|(3<fn?3:1<fn?2:xt[Jn+0]!=0),Jn+=16;Ft>>=4,Pn=Pn>>1|Cr<<7,En=(En<<8|Dt)>>>0}for(la=Ft,zn=Pn>>4,an=0;4>an;an+=2){for(Dt=0,Ft=dt.la>>4+an,Pn=or.la>>4+an,At=0;2>At;++At){for(Cr=1&Pn,pr=0;2>pr;++pr)fn=Cr+(1&Ft),Ft=Ft>>1|(Cr=0<(fn=Ll($t,Un[2],fn,rn.Qc,0,xt,Jn)))<<3,Dt=Dt<<2|(3<fn?3:1<fn?2:xt[Jn+0]!=0),Jn+=16;Ft>>=2,Pn=Pn>>1|Cr<<5}bt|=Dt<<4*an,la|=Ft<<4<<an,zn|=(240&Pn)<<an}dt.la=la,or.la=zn,ir.Hc=En,ir.Gc=bt,ir.ia=43690&bt?0:rn.ia,Un=!(En|bt)}if(0<Pe.L&&(Pe.wa[Pe.Y+Pe.ja]=Pe.gd[pt.$b][pt.Za],Pe.wa[Pe.Y+Pe.ja].La|=!Un),hn.Ka)return bn(yt,7,"Premature end-of-file encountered.")}if(di(yt),Pe=Ln,hn=1,pt=(Be=yt).D,dt=0<Be.L&&Be.M>=Be.zb&&Be.M<=Be.Va,Be.Aa==0)t:{if(pt.M=Be.M,pt.uc=dt,Vr(Be,pt),hn=1,pt=(Dt=Be.D).Nb,dt=(bt=pd[Be.L])*Be.R,$t=bt/2*Be.B,At=16*pt*Be.R,pr=8*pt*Be.B,Un=Be.sa,ir=Be.ta-dt+At,rn=Be.qa,xt=Be.ra-$t+pr,Jn=Be.Ha,or=Be.Ia-$t+pr,Pn=(Ft=Dt.M)==0,En=Ft>=Be.Va-1,Be.Aa==2&&Vr(Be,Dt),Dt.uc)for(Cr=(fn=Be).D.M,t(fn.D.uc),Dt=fn.yb;Dt<fn.Hb;++Dt){zn=Dt,la=Cr;var lr=(Ar=($n=fn).D).Nb;an=$n.R;var Ar=Ar.wa[Ar.Y+zn],Dr=$n.sa,mr=$n.ta+16*lr*an+16*zn,Lr=Ar.dd,Bt=Ar.tc;if(Bt!=0)if(t(3<=Bt),$n.L==1)0<zn&&jg(Dr,mr,an,Bt+4),Ar.La&&Sg(Dr,mr,an,Bt),0<la&&wg(Dr,mr,an,Bt+4),Ar.La&&Ng(Dr,mr,an,Bt);else{var Er=$n.B,ca=$n.qa,Di=$n.ra+8*lr*Er+8*zn,Ja=$n.Ha,$n=$n.Ia+8*lr*Er+8*zn;lr=Ar.ld,0<zn&&(Dn(Dr,mr,an,Bt+4,Lr,lr),Al(ca,Di,Ja,$n,Er,Bt+4,Lr,lr)),Ar.La&&(sd(Dr,mr,an,Bt,Lr,lr),_g(ca,Di,Ja,$n,Er,Bt,Lr,lr)),0<la&&(un(Dr,mr,an,Bt+4,Lr,lr),Za(ca,Di,Ja,$n,Er,Bt+4,Lr,lr)),Ar.La&&(ho(Dr,mr,an,Bt,Lr,lr),bg(ca,Di,Ja,$n,Er,Bt,Lr,lr))}}if(Be.ia&&alert("todo:DitherRow"),Pe.put!=null){if(Dt=16*Ft,Ft=16*(Ft+1),Pn?(Pe.y=Be.sa,Pe.O=Be.ta+At,Pe.f=Be.qa,Pe.N=Be.ra+pr,Pe.ea=Be.Ha,Pe.W=Be.Ia+pr):(Dt-=bt,Pe.y=Un,Pe.O=ir,Pe.f=rn,Pe.N=xt,Pe.ea=Jn,Pe.W=or),En||(Ft-=bt),Ft>Pe.o&&(Ft=Pe.o),Pe.F=null,Pe.J=null,Be.Fa!=null&&0<Be.Fa.length&&Dt<Ft&&(Pe.J=_n(Be,Pe,Dt,Ft-Dt),Pe.F=Be.mb,Pe.F==null&&Pe.F.length==0)){hn=bn(Be,3,"Could not decode alpha data.");break t}Dt<Pe.j&&(bt=Pe.j-Dt,Dt=Pe.j,t(!(1&bt)),Pe.O+=Be.R*bt,Pe.N+=Be.B*(bt>>1),Pe.W+=Be.B*(bt>>1),Pe.F!=null&&(Pe.J+=Pe.width*bt)),Dt<Ft&&(Pe.O+=Pe.v,Pe.N+=Pe.v>>1,Pe.W+=Pe.v>>1,Pe.F!=null&&(Pe.J+=Pe.v),Pe.ka=Dt-Pe.j,Pe.U=Pe.va-Pe.v,Pe.T=Ft-Dt,hn=Pe.put(Pe))}pt+1!=Be.Ic||En||(r(Be.sa,Be.ta-dt,Un,ir+16*Be.R,dt),r(Be.qa,Be.ra-$t,rn,xt+8*Be.B,$t),r(Be.Ha,Be.Ia-$t,Jn,or+8*Be.B,$t))}if(!hn)return bn(yt,6,"Output aborted.")}return 1}(J,de)),de.bc!=null&&de.bc(de),fe&=1}return fe?(J.cb=0,fe):0})(u,k)||(f=u.a)}}else f=u.a}f==0&&B.Oa!=null&&B.Oa.fd&&(f=wl(B.ba))}B=f}M=B!=0?null:11>M?$.f.RGBA.eb:$.f.kb.y}else M=null;return M};var Hg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(D,z){for(var L="",O=0;O<4;O++)L+=String.fromCharCode(D[z++]);return L}function h(D,z){return D[z+0]|D[z+1]<<8}function m(D,z){return(D[z+0]|D[z+1]<<8|D[z+2]<<16)>>>0}function g(D,z){return(D[z+0]|D[z+1]<<8|D[z+2]<<16|D[z+3]<<24)>>>0}new c;var p=[0],j=[0],N=[],C=new c,y=e,b=function(D,z){var L={},O=0,P=!1,A=0,Z=0;if(L.frames=[],!function(E,q){for(var G=0;G<4;G++)if(E[q+G]!="RIFF".charCodeAt(G))return!0;return!1}(D,z)){for(g(D,z+=4),z+=8;z<D.length;){var re=d(D,z),ie=g(D,z+=4);z+=4;var K=ie+(1&ie);switch(re){case"VP8 ":case"VP8L":L.frames[O]===void 0&&(L.frames[O]={}),(oe=L.frames[O]).src_off=P?Z:z-8,oe.src_size=A+ie+8,O++,P&&(P=!1,A=0,Z=0);break;case"VP8X":(oe=L.header={}).feature_flags=D[z];var ne=z+4;oe.canvas_width=1+m(D,ne),ne+=3,oe.canvas_height=1+m(D,ne),ne+=3;break;case"ALPH":P=!0,A=K+8,Z=z-8;break;case"ANIM":(oe=L.header).bgcolor=g(D,z),ne=z+4,oe.loop_count=h(D,ne),ne+=2;break;case"ANMF":var pe,oe;(oe=L.frames[O]={}).offset_x=2*m(D,z),z+=3,oe.offset_y=2*m(D,z),z+=3,oe.width=1+m(D,z),z+=3,oe.height=1+m(D,z),z+=3,oe.duration=m(D,z),z+=3,pe=D[z++],oe.dispose=1&pe,oe.blend=pe>>1&1}re!="ANMF"&&(z+=K)}return L}}(y,0);b.response=y,b.rgbaoutput=!0,b.dataurl=!1;var w=b.header?b.header:null,S=b.frames?b.frames:null;if(w){w.loop_counter=w.loop_count,p=[w.canvas_height],j=[w.canvas_width];for(var R=0;R<S.length&&S[R].blend!=0;R++);}var W=S[0],U=C.WebPDecodeRGBA(y,W.src_off,W.src_size,j,p);W.rgba=U,W.imgwidth=j[0],W.imgheight=p[0];for(var _=0;_<j[0]*p[0]*4;_++)N[_]=U[_];return this.width=j,this.height=p,this.data=N,this}(function(e){var t,n,r,s,i,o,l,c,d,h=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new c,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new o,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new o,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new h}]);var m=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=E;Object.defineProperty(this,"pdf",{get:function(){return q}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(ve){G=!!ve}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(ve){H=!!ve}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(ve){isNaN(ve)||(te=ve)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(ve){isNaN(ve)||(ce=ve)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ve){var Q;typeof ve=="number"?Q=[ve,ve,ve,ve]:((Q=new Array(4))[0]=ve[0],Q[1]=ve.length>=2?ve[1]:Q[0],Q[2]=ve.length>=3?ve[2]:Q[0],Q[3]=ve.length>=4?ve[3]:Q[1]),d.margin=Q}});var ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ae},set:function(ve){ae=ve}});var ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return ee},set:function(ve){ee=ve}});var ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ue},set:function(ve){ue=ve}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ve){ve instanceof h&&(d=ve)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ve){d.path=ve}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(ve){xe=ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ve){var Q;Q=g(ve),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ve){var Q=g(ve);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ve){["butt","round","square"].indexOf(ve)!==-1&&(this.ctx.lineCap=ve,this.pdf.setLineCap(ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ve){isNaN(ve)||(this.ctx.lineWidth=ve,this.pdf.setLineWidth(ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ve){["bevel","round","miter"].indexOf(ve)!==-1&&(this.ctx.lineJoin=ve,this.pdf.setLineJoin(ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ve){isNaN(ve)||(this.ctx.miterLimit=ve,this.pdf.setMiterLimit(ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ve){this.ctx.textBaseline=ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ve){["right","end","center","left","start"].indexOf(ve)!==-1&&(this.ctx.textAlign=ve)}});var Ne=null,Se=null;Object.defineProperty(this,"fontFaces",{get:function(){return Se},set:function(ve){Ne=null,Se=ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ve){var Q;if(this.ctx.font=ve,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ve))!==null){var nt=Q[1];Q[2];var Ye=Q[3],ye=Q[4];Q[5];var ke=Q[6],qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ye)[2];ye=Math.floor(qe==="px"?parseFloat(ye)*this.pdf.internal.scaleFactor:qe==="em"?parseFloat(ye)*this.pdf.getFontSize():parseFloat(ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ye);var Ee=function(Je){var Ve,Ot,jt=[],ze=Je.trim();if(ze==="")return Wf;if(ze in x2)return[x2[ze]];for(;ze!=="";){switch(Ot=null,Ve=(ze=_2(ze)).charAt(0)){case'"':case"'":Ot=JS(ze.substring(1),Ve);break;default:Ot=XS(ze)}if(Ot===null||(jt.push(Ot[0]),(ze=_2(Ot[1]))!==""&&ze.charAt(0)!==","))return Wf;ze=ze.replace(/^,/,"")}return jt}(ke);if(this.fontFaces){var st=function(Je,Ve){if(Ne===null){var Ot=function(jt){var ze=[];return Object.keys(jt).forEach(function(lt){jt[lt].forEach(function(Tt){var Ke=null;switch(Tt){case"bold":Ke={family:lt,weight:"bold"};break;case"italic":Ke={family:lt,style:"italic"};break;case"bolditalic":Ke={family:lt,weight:"bold",style:"italic"};break;case"":case"normal":Ke={family:lt}}Ke!==null&&(Ke.ref={name:lt,style:Tt},ze.push(Ke))})}),ze}(Je.getFontList());Ne=function(jt){for(var ze={},lt=0;lt<jt.length;++lt){var Tt=$f(jt[lt]),Ke=Tt.family,vt=Tt.stretch,ct=Tt.style,ln=Tt.weight;ze[Ke]=ze[Ke]||{},ze[Ke][vt]=ze[Ke][vt]||{},ze[Ke][vt][ct]=ze[Ke][vt][ct]||{},ze[Ke][vt][ct][ln]=Tt}return ze}(Ot.concat(Ve))}return Ne}(this.pdf,this.fontFaces),Ge=Ee.map(function(Je){return{family:Je,stretch:"normal",weight:Ye,style:nt}}),wt=function(Je,Ve,Ot){for(var jt=(Ot=Ot||{}).defaultFontFamily||"times",ze=Object.assign({},YS,Ot.genericFontFamilies||{}),lt=null,Tt=null,Ke=0;Ke<Ve.length;++Ke)if(ze[(lt=$f(Ve[Ke])).family]&&(lt.family=ze[lt.family]),Je.hasOwnProperty(lt.family)){Tt=Je[lt.family];break}if(!(Tt=Tt||Je[jt]))throw new Error("Could not find a font-family for the rule '"+b2(lt)+"' and default family '"+jt+"'.");if(Tt=function(vt,ct){if(ct[vt])return ct[vt];var ln=cm[vt],Cn=ln<=cm.normal?-1:1,qt=y2(ct,jx,ln,Cn);if(!qt)throw new Error("Could not find a matching font-stretch value for "+vt);return qt}(lt.stretch,Tt),Tt=function(vt,ct){if(ct[vt])return ct[vt];for(var ln=wx[vt],Cn=0;Cn<ln.length;++Cn)if(ct[ln[Cn]])return ct[ln[Cn]];throw new Error("Could not find a matching font-style for "+vt)}(lt.style,Tt),!(Tt=function(vt,ct){if(ct[vt])return ct[vt];if(vt===400&&ct[500])return ct[500];if(vt===500&&ct[400])return ct[400];var ln=ZS[vt],Cn=y2(ct,Nx,ln,vt<400?-1:1);if(!Cn)throw new Error("Could not find a matching font-weight for value "+vt);return Cn}(lt.weight,Tt)))throw new Error("Failed to resolve a font for the rule '"+b2(lt)+"'.");return Tt}(st,Ge);this.pdf.setFont(wt.ref.name,wt.ref.style)}else{var it="";(Ye==="bold"||parseInt(Ye,10)>=700||nt==="bold")&&(it="bold"),nt==="italic"&&(it+="italic"),it.length===0&&(it="normal");for(var ot="",Pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ut=0;ut<Ee.length;ut++){if(this.pdf.internal.getFont(Ee[ut],it,{noFallback:!0,disableWarning:!0})!==void 0){ot=Ee[ut];break}if(it==="bolditalic"&&this.pdf.internal.getFont(Ee[ut],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Ee[ut],it="bold";else if(this.pdf.internal.getFont(Ee[ut],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Ee[ut],it="normal";break}}if(ot===""){for(var He=0;He<Ee.length;He++)if(Pt[Ee[He]]){ot=Pt[Ee[He]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,it)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ve){this.ctx.globalCompositeOperation=ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ve){this.ctx.globalAlpha=ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ve){this.ctx.lineDashOffset=ve,oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ve){this.ctx.lineDash=ve,oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ve){this.ctx.ignoreClearRect=!!ve}})};m.prototype.setLineDash=function(E){this.lineDash=E},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){S.call(this,"fill",!1)},m.prototype.stroke=function(){S.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(E,q){if(isNaN(E)||isNaN(q))throw Rt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(E,q));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(E,q)},m.prototype.closePath=function(){var E=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Lt(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){E=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(E.x,E.y)},m.prototype.lineTo=function(E,q){if(isNaN(E)||isNaN(q))throw Rt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(E,q));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},m.prototype.quadraticCurveTo=function(E,q,G,H){if(isNaN(G)||isNaN(H)||isNaN(E)||isNaN(q))throw Rt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(G,H)),ce=this.ctx.transform.applyToPoint(new o(E,q));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},m.prototype.bezierCurveTo=function(E,q,G,H,te,ce){if(isNaN(te)||isNaN(ce)||isNaN(E)||isNaN(q)||isNaN(G)||isNaN(H))throw Rt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ae=this.ctx.transform.applyToPoint(new o(te,ce)),ee=this.ctx.transform.applyToPoint(new o(E,q)),ue=this.ctx.transform.applyToPoint(new o(G,H));this.path.push({type:"bct",x1:ee.x,y1:ee.y,x2:ue.x,y2:ue.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(ae.x,ae.y)},m.prototype.arc=function(E,q,G,H,te,ce){if(isNaN(E)||isNaN(q)||isNaN(G)||isNaN(H)||isNaN(te))throw Rt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var ae=this.ctx.transform.applyToPoint(new o(E,q));E=ae.x,q=ae.y;var ee=this.ctx.transform.applyToPoint(new o(0,G)),ue=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(ee.x-ue.x,2)+Math.pow(ee.y-ue.y,2))}Math.abs(te-H)>=2*Math.PI&&(H=0,te=2*Math.PI),this.path.push({type:"arc",x:E,y:q,radius:G,startAngle:H,endAngle:te,counterclockwise:ce})},m.prototype.arcTo=function(E,q,G,H,te){throw new Error("arcTo not implemented.")},m.prototype.rect=function(E,q,G,H){if(isNaN(E)||isNaN(q)||isNaN(G)||isNaN(H))throw Rt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,q),this.lineTo(E+G,q),this.lineTo(E+G,q+H),this.lineTo(E,q+H),this.lineTo(E,q),this.lineTo(E+G,q),this.lineTo(E,q)},m.prototype.fillRect=function(E,q,G,H){if(isNaN(E)||isNaN(q)||isNaN(G)||isNaN(H))throw Rt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,q,G,H),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},m.prototype.strokeRect=function(E,q,G,H){if(isNaN(E)||isNaN(q)||isNaN(G)||isNaN(H))throw Rt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(E,q,G,H),this.stroke())},m.prototype.clearRect=function(E,q,G,H){if(isNaN(E)||isNaN(q)||isNaN(G)||isNaN(H))throw Rt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,q,G,H))},m.prototype.save=function(E){E=typeof E!="boolean"||E;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},m.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(q),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(E){var q,G,H,te;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))q=0,G=0,H=0,te=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(ce!==null)q=parseInt(ce[1]),G=parseInt(ce[2]),H=parseInt(ce[3]),te=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)q=parseInt(ce[1]),G=parseInt(ce[2]),H=parseInt(ce[3]),te=parseFloat(ce[4]);else{if(te=1,typeof E=="string"&&E.charAt(0)!=="#"){var ae=new mx(E);E=ae.ok?ae.toHex():"#000000"}E.length===4?(q=E.substring(1,2),q+=q,G=E.substring(2,3),G+=G,H=E.substring(3,4),H+=H):(q=E.substring(1,3),G=E.substring(3,5),H=E.substring(5,7)),q=parseInt(q,16),G=parseInt(G,16),H=parseInt(H,16)}}return{r:q,g:G,b:H,a:te,style:E}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(E,q,G,H){if(isNaN(q)||isNaN(G)||typeof E!="string")throw Rt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!p.call(this)){var te=K(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;O.call(this,{text:E,x:q,y:G,scale:ce,angle:te,align:this.textAlign,maxWidth:H})}},m.prototype.strokeText=function(E,q,G,H){if(isNaN(q)||isNaN(G)||typeof E!="string")throw Rt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){H=isNaN(H)?void 0:H;var te=K(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;O.call(this,{text:E,x:q,y:G,scale:ce,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:H})}},m.prototype.measureText=function(E){if(typeof E!="string")throw Rt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,G=this.pdf.internal.scaleFactor,H=q.internal.getFontSize(),te=q.getStringUnitWidth(E)*H/q.internal.scaleFactor;return new function(ce){var ae=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this}({width:te*=Math.round(96*G/72*1e4)/1e4})},m.prototype.scale=function(E,q){if(isNaN(E)||isNaN(q))throw Rt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new c(E,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},m.prototype.rotate=function(E){if(isNaN(E))throw Rt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.translate=function(E,q){if(isNaN(E)||isNaN(q))throw Rt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new c(1,0,0,1,E,q);this.ctx.transform=this.ctx.transform.multiply(G)},m.prototype.transform=function(E,q,G,H,te,ce){if(isNaN(E)||isNaN(q)||isNaN(G)||isNaN(H)||isNaN(te)||isNaN(ce))throw Rt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ae=new c(E,q,G,H,te,ce);this.ctx.transform=this.ctx.transform.multiply(ae)},m.prototype.setTransform=function(E,q,G,H,te,ce){E=isNaN(E)?1:E,q=isNaN(q)?0:q,G=isNaN(G)?0:G,H=isNaN(H)?1:H,te=isNaN(te)?0:te,ce=isNaN(ce)?0:ce,this.ctx.transform=new c(E,q,G,H,te,ce)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(E,q,G,H,te,ce,ae,ee,ue){var xe=this.pdf.getImageProperties(E),Ne=1,Se=1,ve=1,Q=1;H!==void 0&&ee!==void 0&&(ve=ee/H,Q=ue/te,Ne=xe.width/H*ee/H,Se=xe.height/te*ue/te),ce===void 0&&(ce=q,ae=G,q=0,G=0),H!==void 0&&ee===void 0&&(ee=H,ue=te),H===void 0&&ee===void 0&&(ee=xe.width,ue=xe.height);for(var nt,Ye=this.ctx.transform.decompose(),ye=K(Ye.rotate.shx),ke=new c,qe=(ke=(ke=(ke=ke.multiply(Ye.translate)).multiply(Ye.skew)).multiply(Ye.scale)).applyToRectangle(new l(ce-q*ve,ae-G*Q,H*Ne,te*Se)),Ee=C.call(this,qe),st=[],Ge=0;Ge<Ee.length;Ge+=1)st.indexOf(Ee[Ge])===-1&&st.push(Ee[Ge]);if(w(st),this.autoPaging)for(var wt=st[0],it=st[st.length-1],ot=wt;ot<it+1;ot++){this.pdf.setPage(ot);var Pt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ut=ot===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ve=ot===1?0:He+(ot-2)*Je;if(this.ctx.clip_path.length!==0){var Ot=this.path;nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(nt,this.posX+this.margin[3],-Ve+ut+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=Ot}var jt=JSON.parse(JSON.stringify(qe));jt=b([jt],this.posX+this.margin[3],-Ve+ut+this.ctx.prevPageLastElemOffset)[0];var ze=(ot>wt||ot<it)&&N.call(this);ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,Je,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",jt.x,jt.y,jt.w,jt.h,null,null,ye),ze&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",qe.x,qe.y,qe.w,qe.h,null,null,ye)};var C=function(E,q,G){var H=[];q=q||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":H.push(Math.floor((E.y+te)/G)+1);break;case"arc":H.push(Math.floor((E.y+te-E.radius)/G)+1),H.push(Math.floor((E.y+te+E.radius)/G)+1);break;case"qct":var ce=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);H.push(Math.floor((ce.y+te)/G)+1),H.push(Math.floor((ce.y+ce.h+te)/G)+1);break;case"bct":var ae=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);H.push(Math.floor((ae.y+te)/G)+1),H.push(Math.floor((ae.y+ae.h+te)/G)+1);break;case"rect":H.push(Math.floor((E.y+te)/G)+1),H.push(Math.floor((E.y+E.h+te)/G)+1)}for(var ee=0;ee<H.length;ee+=1)for(;this.pdf.internal.getNumberOfPages()<H[ee];)y.call(this);return H},y=function(){var E=this.fillStyle,q=this.strokeStyle,G=this.font,H=this.lineCap,te=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=q,this.font=G,this.lineCap=H,this.lineWidth=te,this.lineJoin=ce},b=function(E,q,G){for(var H=0;H<E.length;H++)switch(E[H].type){case"bct":E[H].x2+=q,E[H].y2+=G;case"qct":E[H].x1+=q,E[H].y1+=G;default:E[H].x+=q,E[H].y+=G}return E},w=function(E){return E.sort(function(q,G){return q-G})},S=function(E,q){for(var G,H,te=this.fillStyle,ce=this.strokeStyle,ae=this.lineCap,ee=this.lineWidth,ue=Math.abs(ee*this.ctx.transform.scaleX),xe=this.lineJoin,Ne=JSON.parse(JSON.stringify(this.path)),Se=JSON.parse(JSON.stringify(this.path)),ve=[],Q=0;Q<Se.length;Q++)if(Se[Q].x!==void 0)for(var nt=C.call(this,Se[Q]),Ye=0;Ye<nt.length;Ye+=1)ve.indexOf(nt[Ye])===-1&&ve.push(nt[Ye]);for(var ye=0;ye<ve.length;ye++)for(;this.pdf.internal.getNumberOfPages()<ve[ye];)y.call(this);if(w(ve),this.autoPaging)for(var ke=ve[0],qe=ve[ve.length-1],Ee=ke;Ee<qe+1;Ee++){this.pdf.setPage(Ee),this.fillStyle=te,this.strokeStyle=ce,this.lineCap=ae,this.lineWidth=ue,this.lineJoin=xe;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=Ee===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=Ee===1?0:wt+(Ee-2)*it;if(this.ctx.clip_path.length!==0){var Pt=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(G,this.posX+this.margin[3],-ot+Ge+this.ctx.prevPageLastElemOffset),R.call(this,E,!0),this.path=Pt}if(H=JSON.parse(JSON.stringify(Ne)),this.path=b(H,this.posX+this.margin[3],-ot+Ge+this.ctx.prevPageLastElemOffset),q===!1||Ee===0){var ut=(Ee>ke||Ee<qe)&&N.call(this);ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,it,null).clip().discardPath()),R.call(this,E,q),ut&&this.pdf.restoreGraphicsState()}this.lineWidth=ee}else this.lineWidth=ue,R.call(this,E,q),this.lineWidth=ee;this.path=Ne},R=function(E,q){if((E!=="stroke"||q||!j.call(this))&&(E==="stroke"||q||!p.call(this))){for(var G,H,te=[],ce=this.path,ae=0;ae<ce.length;ae++){var ee=ce[ae];switch(ee.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:ee,deltas:[],abs:[]});break;case"lt":var ue=te.length;if(ce[ae-1]&&!isNaN(ce[ae-1].x)&&(G=[ee.x-ce[ae-1].x,ee.y-ce[ae-1].y],ue>0)){for(;ue>=0;ue--)if(te[ue-1].close!==!0&&te[ue-1].begin!==!0){te[ue-1].deltas.push(G),te[ue-1].abs.push(ee);break}}break;case"bct":G=[ee.x1-ce[ae-1].x,ee.y1-ce[ae-1].y,ee.x2-ce[ae-1].x,ee.y2-ce[ae-1].y,ee.x-ce[ae-1].x,ee.y-ce[ae-1].y],te[te.length-1].deltas.push(G);break;case"qct":var xe=ce[ae-1].x+2/3*(ee.x1-ce[ae-1].x),Ne=ce[ae-1].y+2/3*(ee.y1-ce[ae-1].y),Se=ee.x+2/3*(ee.x1-ee.x),ve=ee.y+2/3*(ee.y1-ee.y),Q=ee.x,nt=ee.y;G=[xe-ce[ae-1].x,Ne-ce[ae-1].y,Se-ce[ae-1].x,ve-ce[ae-1].y,Q-ce[ae-1].x,nt-ce[ae-1].y],te[te.length-1].deltas.push(G);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(ee)}}H=q?null:E==="stroke"?"stroke":"fill";for(var Ye=!1,ye=0;ye<te.length;ye++)if(te[ye].arc)for(var ke=te[ye].abs,qe=0;qe<ke.length;qe++){var Ee=ke[qe];Ee.type==="arc"?_.call(this,Ee.x,Ee.y,Ee.radius,Ee.startAngle,Ee.endAngle,Ee.counterclockwise,void 0,q,!Ye):P.call(this,Ee.x,Ee.y),Ye=!0}else if(te[ye].close===!0)this.pdf.internal.out("h"),Ye=!1;else if(te[ye].begin!==!0){var st=te[ye].start.x,Ge=te[ye].start.y;A.call(this,te[ye].deltas,st,Ge),Ye=!0}H&&D.call(this,H),q&&z.call(this)}},W=function(E){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-G;case"top":return E+q-G;case"hanging":return E+q-2*G;case"middle":return E+q/2-G;default:return E}},U=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(q,G){this.colorStops.push([q,G])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(E,q,G,H,te,ce,ae,ee,ue){for(var xe=re.call(this,G,H,te,ce),Ne=0;Ne<xe.length;Ne++){var Se=xe[Ne];Ne===0&&(ue?L.call(this,Se.x1+E,Se.y1+q):P.call(this,Se.x1+E,Se.y1+q)),Z.call(this,E,q,Se.x2,Se.y2,Se.x3,Se.y3,Se.x4,Se.y4)}ee?z.call(this):D.call(this,ae)},D=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(E,q){this.pdf.internal.out(n(E)+" "+r(q)+" m")},O=function(E){var q;switch(E.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var G=this.pdf.getTextDimensions(E.text),H=W.call(this,E.y),te=U.call(this,H)-G.h,ce=this.ctx.transform.applyToPoint(new o(E.x,H)),ae=this.ctx.transform.decompose(),ee=new c;ee=(ee=(ee=ee.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale);for(var ue,xe,Ne,Se=this.ctx.transform.applyToRectangle(new l(E.x,H,G.w,G.h)),ve=ee.applyToRectangle(new l(E.x,te,G.w,G.h)),Q=C.call(this,ve),nt=[],Ye=0;Ye<Q.length;Ye+=1)nt.indexOf(Q[Ye])===-1&&nt.push(Q[Ye]);if(w(nt),this.autoPaging)for(var ye=nt[0],ke=nt[nt.length-1],qe=ye;qe<ke+1;qe++){this.pdf.setPage(qe);var Ee=qe===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],wt=Ge-this.margin[0],it=this.pdf.internal.pageSize.width-this.margin[1],ot=it-this.margin[3],Pt=qe===1?0:st+(qe-2)*wt;if(this.ctx.clip_path.length!==0){var ut=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(ue,this.posX+this.margin[3],-1*Pt+Ee),R.call(this,"fill",!0),this.path=ut}var He=b([JSON.parse(JSON.stringify(ve))],this.posX+this.margin[3],-Pt+Ee+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*E.scale),Ne=this.lineWidth,this.lineWidth=Ne*E.scale);var Je=this.autoPaging!=="text";if(Je||He.y+He.h<=Ge){if(Je||He.y>=Ee&&He.x<=it){var Ve=Je?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||it-He.x)[0],Ot=b([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-Pt+Ee+this.ctx.prevPageLastElemOffset)[0],jt=Je&&(qe>ye||qe<ke)&&N.call(this);jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,wt,null).clip().discardPath()),this.pdf.text(Ve,Ot.x,Ot.y,{angle:E.angle,align:q,renderingMode:E.renderingMode}),jt&&this.pdf.restoreGraphicsState()}}else He.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-He.y);E.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=Ne)}else E.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*E.scale),Ne=this.lineWidth,this.lineWidth=Ne*E.scale),this.pdf.text(E.text,ce.x+this.posX,ce.y+this.posY,{angle:E.angle,align:q,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=Ne)},P=function(E,q,G,H){G=G||0,H=H||0,this.pdf.internal.out(n(E+G)+" "+r(q+H)+" l")},A=function(E,q,G){return this.pdf.lines(E,q,G,null,null)},Z=function(E,q,G,H,te,ce,ae,ee){this.pdf.internal.out([t(s(G+E)),t(i(H+q)),t(s(te+E)),t(i(ce+q)),t(s(ae+E)),t(i(ee+q)),"c"].join(" "))},re=function(E,q,G,H){for(var te=2*Math.PI,ce=Math.PI/2;q>G;)q-=te;var ae=Math.abs(G-q);ae<te&&H&&(ae=te-ae);for(var ee=[],ue=H?-1:1,xe=q;ae>1e-5;){var Ne=xe+ue*Math.min(ae,ce);ee.push(ie.call(this,E,xe,Ne)),ae-=Math.abs(Ne-xe),xe=Ne}return ee},ie=function(E,q,G){var H=(G-q)/2,te=E*Math.cos(H),ce=E*Math.sin(H),ae=te,ee=-ce,ue=ae*ae+ee*ee,xe=ue+ae*te+ee*ce,Ne=4/3*(Math.sqrt(2*ue*xe)-xe)/(ae*ce-ee*te),Se=ae-Ne*ee,ve=ee+Ne*ae,Q=Se,nt=-ve,Ye=H+q,ye=Math.cos(Ye),ke=Math.sin(Ye);return{x1:E*Math.cos(q),y1:E*Math.sin(q),x2:Se*ye-ve*ke,y2:Se*ke+ve*ye,x3:Q*ye-nt*ke,y3:Q*ke+nt*ye,x4:E*Math.cos(G),y4:E*Math.sin(G)}},K=function(E){return 180*E/Math.PI},ne=function(E,q,G,H,te,ce){var ae=E+.5*(G-E),ee=q+.5*(H-q),ue=te+.5*(G-te),xe=ce+.5*(H-ce),Ne=Math.min(E,te,ae,ue),Se=Math.max(E,te,ae,ue),ve=Math.min(q,ce,ee,xe),Q=Math.max(q,ce,ee,xe);return new l(Ne,ve,Se-Ne,Q-ve)},pe=function(E,q,G,H,te,ce,ae,ee){var ue,xe,Ne,Se,ve,Q,nt,Ye,ye,ke,qe,Ee,st,Ge,wt=G-E,it=H-q,ot=te-G,Pt=ce-H,ut=ae-te,He=ee-ce;for(xe=0;xe<41;xe++)ye=(nt=(Ne=E+(ue=xe/40)*wt)+ue*((ve=G+ue*ot)-Ne))+ue*(ve+ue*(te+ue*ut-ve)-nt),ke=(Ye=(Se=q+ue*it)+ue*((Q=H+ue*Pt)-Se))+ue*(Q+ue*(ce+ue*He-Q)-Ye),xe==0?(qe=ye,Ee=ke,st=ye,Ge=ke):(qe=Math.min(qe,ye),Ee=Math.min(Ee,ke),st=Math.max(st,ye),Ge=Math.max(Ge,ke));return new l(Math.round(qe),Math.round(Ee),Math.round(st-qe),Math.round(Ge-Ee))},oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,q,G=(E=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:q}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(We.API),function(e){var t=function(o){var l,c,d,h,m,g,p,j,N,C;for(c=[],d=0,h=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;h>d;d+=4)(m=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(g=(m=((m=((m=((m=(m-(C=m%85))/85)-(N=m%85))/85)-(j=m%85))/85)-(p=m%85))/85)%85,c.push(g+33,p+33,j+33,N+33,C+33)):c.push(122);return function(y,b){for(var w=b;w>0;w--)y.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},n=function(o){var l,c,d,h,m,g=String,p="length",j=255,N="charCodeAt",C="slice",y="replace";for(o[C](-2),o=o[C](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),d=[],h=0,m=(o+=l="uuuuu"[C](o[p]%5||5))[p];m>h;h+=5)c=52200625*(o[N](h)-33)+614125*(o[N](h+1)-33)+7225*(o[N](h+2)-33)+85*(o[N](h+3)-33)+(o[N](h+4)-33),d.push(j&c>>24,j&c>>16,j&c>>8,j&c);return function(b,w){for(var S=w;S>0;S--)b.pop()}(d,l[p]),g.fromCharCode.apply(g,d)},r=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},i=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=nm(l)).reduce(function(d,h){return d+String.fromCharCode(h)},"")};e.processDataByFilters=function(o,l){var c=0,d=o||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=r(d),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:h.reverse().join(" ")}}}(We.API),function(e){e.loadFile=function(t,n,r){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,h){var m=new XMLHttpRequest,g=0,p=function(j){var N=j.length,C=[],y=String.fromCharCode;for(g=0;g<N;g+=1)C.push(y(255&j.charCodeAt(g)));return C.join("")};if(m.open("GET",c,!d),m.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(m.onload=function(){m.status===200?h(p(this.responseText)):h(void 0)}),m.send(null),d&&m.status===200)return p(m.responseText)}(s,i,o)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(We.API),function(e){function t(){return(Xe.html2canvas?Promise.resolve(Xe.html2canvas):Sf(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(Xe.DOMPurify?Promise.resolve(Xe.DOMPurify):Sf(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var r=function(l){var c=Lt(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},s=function(l,c){var d=document.createElement(l);for(var h in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[h]=c.style[h];return d},i=function l(c,d){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h},o=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),d);return(h=h.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(d){switch(r(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(n).then(function(d){return this.set({src:s("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=this.opt.jsPDF,h=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=h,h)for(var p=0;p<h.length;++p){var j=h[p],N=j.src.find(function(C){return C.format==="truetype"});N&&d.addFont(N.url,j.ref.name,j.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,d.context2d.save(!0),c(this.prop.container,g)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(r(l)!=="object")return this;var c=Object.keys(l||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(d):d})},o.prototype.setMargin=function(l){return this.then(function(){switch(r(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(d,h){return Math.floor(d*h/72*96)}return this.then(function(){(l=l||We.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,d,h){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,d,h){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,function(h,m){return d.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(g){return d.updateProgress(null,h),g}).then(h,m).then(function(g){return d.updateProgress(1),g})})},o.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then;var h=this;l&&(l=l.bind(h)),c&&(c=c.bind(h));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:o.convert(Object.assign({},h),Promise.prototype),g=d.call(m,l,c);return o.convert(g,h.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(d){c=c.thenCore(d)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,We.getPageSize=function(l,c,d){if(Lt(l)==="object"){var h=l;l=h.orientation,c=h.unit||c,d=h.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var m,g=(""+d).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+c}var j,N=0,C=0;if(p.hasOwnProperty(g))N=p[g][1]/m,C=p[g][0]/m;else try{N=d[1],C=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",C>N&&(j=C,C=N,N=j);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",N>C&&(j=C,C=N,N=j)}return{width:C,height:N,unit:c,k:m,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map($f):null;var d=new o(c);return c.worker?d:d.from(l).doCallback()}}(We.API),We.API.addJS=function(e){return j2=e,this.internal.events.subscribe("postPutResources",function(){Vd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Vd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),w2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+j2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Vd!==void 0&&w2!==void 0&&this.internal.out("/Names <</JavaScript "+Vd+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=r.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,h=[];for(i=0;i<d;i++){var m=n.internal.newObject();h.push(m);var g=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<h.length;i++)n.internal.write("(page_"+(i+1)+")"+h[i]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,i){var o={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var o=r.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(We.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,s,i,o,l){var c,d=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,c=function(m){for(var g,p=256*m.charCodeAt(4)+m.charCodeAt(5),j=m.length,N={width:0,height:0,numcomponents:1},C=4;C<j;C+=2){if(C+=p,t.indexOf(m.charCodeAt(C+1))!==-1){g=256*m.charCodeAt(C+5)+m.charCodeAt(C+6),N={width:256*m.charCodeAt(C+7)+m.charCodeAt(C+8),height:g,numcomponents:m.charCodeAt(C+9)};break}p=256*m.charCodeAt(C+2)+m.charCodeAt(C+3)}return N}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}h={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:s}}return h}}(We.API),We.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,i=IS(e,{checkCrc:!0}),o=i.width,l=i.height,c=i.channels,d=i.palette,h=i.depth;s=d&&c===1?function(_){for(var D=_.width,z=_.height,L=_.data,O=_.palette,P=_.depth,A=!1,Z=[],re=[],ie=void 0,K=!1,ne=0,pe=0;pe<O.length;pe++){var oe=C1(O[pe],4),E=oe[0],q=oe[1],G=oe[2],H=oe[3];Z.push(E,q,G),H!=null&&(H===0?(ne++,re.length<1&&re.push(pe)):H<255&&(K=!0))}if(K||ne>1){A=!0,re=void 0;var te=D*z;ie=new Uint8Array(te);for(var ce=new DataView(L.buffer),ae=0;ae<te;ae++){var ee=Hf(ce,ae,P),ue=C1(O[ee],4)[3];ie[ae]=ue}}else ne===0&&(re=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:A?8:void 0,colorBytes:L,alphaBytes:ie,needSMask:A,palette:Z,mask:re}}(i):c===2||c===4?function(_){for(var D=_.data,z=_.width,L=_.height,O=_.channels,P=_.depth,A=O===2?"DeviceGray":"DeviceRGB",Z=O-1,re=z*L,ie=Z,K=re*ie,ne=1*re,pe=Math.ceil(K*P/8),oe=Math.ceil(ne*P/8),E=new Uint8Array(pe),q=new Uint8Array(oe),G=new DataView(D.buffer),H=new DataView(E.buffer),te=new DataView(q.buffer),ce=!1,ae=0;ae<re;ae++){for(var ee=ae*O,ue=0;ue<ie;ue++)P2(H,Hf(G,ee+ue,P),ae*ie+ue,P);var xe=Hf(G,ee+ie,P);xe<(1<<P)-1&&(ce=!0),P2(te,xe,1*ae,P)}return{colorSpace:A,colorsPerPixel:Z,sMaskBitsPerComponent:ce?P:void 0,colorBytes:E,alphaBytes:q,needSMask:ce}}(i):function(_){var D=_.data,z=_.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:z,colorsPerPixel:z==="DeviceGray"?1:3,colorBytes:D instanceof Uint16Array?function(L){for(var O=L.length,P=new Uint8Array(2*O),A=new DataView(P.buffer,P.byteOffset,P.byteLength),Z=0;Z<O;Z++)A.setUint16(2*Z,L[Z],!1);return P}(D):D,needSMask:!1}}(i);var m,g,p,j=s,N=j.colorSpace,C=j.colorsPerPixel,y=j.sMaskBitsPerComponent,b=j.colorBytes,w=j.alphaBytes,S=j.needSMask,R=j.palette,W=j.mask,U=null;return r!==We.API.image_compression.NONE&&typeof nm=="function"?(U=function(_){var D;switch(_){case We.API.image_compression.FAST:D=11;break;case We.API.image_compression.MEDIUM:D=13;break;case We.API.image_compression.SLOW:D=14;break;default:D=12}return D}(r),m=this.decode.FLATE_DECODE,g="/Predictor ".concat(U," /Colors ").concat(C," /BitsPerComponent ").concat(h," /Columns ").concat(o),e=C2(b,Math.ceil(o*C*h/8),C,h,r),S&&(p=C2(w,Math.ceil(o*y/8),1,y,r))):(m=void 0,g=void 0,e=b,S&&(p=w)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:n,data:e,index:t,filter:m,decodeParameters:g,transparency:W,palette:R,sMask:p,predictor:U,width:o,height:l,bitsPerComponent:h,sMaskBitsPerComponent:y,colorSpace:N}}},function(e){e.processGIF89A=function(t,n,r,s){var i=new nk(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},h=new Vf(100).encode(d,100);return e.processJPEG.call(this,h,n,r,s)},e.processGIF87A=e.processGIF89A}(We.API),ua.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ua.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Rt.log("bit decode error:"+n)}},ua.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},ua.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},ua.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},ua.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,h=r*this.width*4+4*s;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=o,this.data[h+3]=d}this.pos+=e}},ua.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,h=s*this.width*4+4*i;this.data[h]=d,this.data[h+1]=c,this.data[h+2]=l,this.data[h+3]=255}this.pos+=e}},ua.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},ua.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=r,this.data[l+3]=o}},ua.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,s){var i=new ua(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Vf(100).encode(c,100);return e.processJPEG.call(this,d,n,r,s)}}(We.API),q2.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,s){var i=new q2(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Vf(100).encode(c,100);return e.processJPEG.call(this,d,n,r,s)}}(We.API),We.API.processRGBA=function(e,t,n){for(var r=e.data,s=r.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var h=r[d],m=r[d+1],g=r[d+2],p=r[d+3];i[l++]=h,i[l++]=m,i[l++]=g,o[c++]=p}var j=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:j,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},We.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},vo=We.API,Gd=vo.getCharWidthsArray=function(e,t){var n,r,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,h=d.fof?d.fof:1,m=t.doKerning!==!1,g=0,p=e.length,j=0,N=l[0]||c,C=[];for(n=0;n<p;n++)r=e.charCodeAt(n),typeof s.metadata.widthOfString=="function"?C.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(g=m&&Lt(d[r])==="object"&&!isNaN(parseInt(d[r][j],10))?d[r][j]/h:0,C.push((l[r]||N)/c+g)),j=r;return C},N2=vo.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return vo.processArabic&&(e=vo.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,s)/n:Gd.apply(this,arguments).reduce(function(i,o){return i+o},0)},S2=function(e,t,n,r){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<n;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>r&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},k2=function(e,t,n){n||(n={});var r,s,i,o,l,c,d,h=[],m=[h],g=n.textIndent||0,p=0,j=0,N=e.split(" "),C=Gd.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?N[0].length+2:n.lineIndent||0){var y=Array(c).join(" "),b=[];N.map(function(S){(S=S.split(/\s*\n/)).length>1?b=b.concat(S.map(function(R,W){return(W&&R.length?`
`:"")+R})):b.push(S[0])}),N=b,c=N2.apply(this,[y,n])}for(i=0,o=N.length;i<o;i++){var w=0;if(r=N[i],c&&r[0]==`
`&&(r=r.substr(1),w=1),g+p+(j=(s=Gd.apply(this,[r,n])).reduce(function(S,R){return S+R},0))>t||w){if(j>t){for(l=S2.apply(this,[r,s,t-(g+p),t]),h.push(l.shift()),h=[l.pop()];l.length;)m.push([l.shift()]);j=s.slice(r.length-(h[0]?h[0].length:0)).reduce(function(S,R){return S+R},0)}else h=[r];m.push(h),g=j+c,p=C}else h.push(r),g+=p+j,p=C}return d=c?function(S,R){return(R?y:"")+S.join(" ")}:function(S){return S.join(" ")},m.map(d)},vo.splitTextToSize=function(e,t,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var m=this.internal.getFont(h.fontName,h.fontStyle),g="Unicode";return m.metadata[g]?{widths:m.metadata[g].widths||{0:1},kerning:m.metadata[g].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=n.lineIndent;var l,c,d=[];for(l=0,c=r.length;l<c;l++)d=d.concat(k2.apply(this,[r[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",r={},s={},i=0;i<16;i++)r[n[i]]=t[i],s[t[i]]=n[i];var o=function(g){return"0x"+parseInt(g,10).toString(16)},l=e.__fontmetrics__.compress=function(g){var p,j,N,C,y=["{"];for(var b in g){if(p=g[b],isNaN(parseInt(b,10))?j="'"+b+"'":(b=parseInt(b,10),j=(j=o(b).slice(2)).slice(0,-1)+s[j.slice(-1)]),typeof p=="number")p<0?(N=o(p).slice(3),C="-"):(N=o(p).slice(2),C=""),N=C+N.slice(0,-1)+s[N.slice(-1)];else{if(Lt(p)!=="object")throw new Error("Don't know what to do with value type "+Lt(p)+".");N=l(p)}y.push(j+N)}return y.push("}"),y.join("")},c=e.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,j,N,C,y={},b=1,w=y,S=[],R="",W="",U=g.length-1,_=1;_<U;_+=1)(C=g[_])=="'"?p?(N=p.join(""),p=void 0):p=[]:p?p.push(C):C=="{"?(S.push([w,N]),w={},N=void 0):C=="}"?((j=S.pop())[0][j[1]]=w,N=void 0,w=j[0]):C=="-"?b=-1:N===void 0?r.hasOwnProperty(C)?(R+=r[C],N=parseInt(R,16)*b,b=1,R=""):R+=C:r.hasOwnProperty(C)?(W+=r[C],w[N]=parseInt(W,16)*b,b=1,N=void 0,W=""):W+=C;return y},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},m={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(g){var p=g.font,j=m.Unicode[p.postScriptName];j&&(p.metadata.Unicode={},p.metadata.Unicode.widths=j.widths,p.metadata.Unicode.kerning=j.kerning);var N=h.Unicode[p.postScriptName];N&&(p.metadata.Unicode.encoding=N,p.encoding=N.codePages[0])}])}(We.API),function(e){var t=function(n){for(var r=n.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=n.charCodeAt(i);return s};e.API.events.push(["addFont",function(n){var r=void 0,s=n.font,i=n.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(ou(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,r)}}])}(We),We.API.addSvgAsImage=function(e,t,n,r,s,i,o,l){if(isNaN(t)||isNaN(n))throw Rt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw Rt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=s;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(Xe.canvg?Promise.resolve(Xe.canvg):Sf(()=>import("./index.es-BljoYVek.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(d,e,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){m.addImage(c.toDataURL("image/jpeg",1),t,n,r,s,o,l)})},We.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(t,n);return this},We.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,h=0,m=0;function g(j,N){var C,y=!1;for(C=0;C<j.length;C+=1)j[C]===N&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(m=0;m<p;m+=1)n[l[m]].value=n[l[m]].defaultValue,n[l[m]].explicitSet=!1}if(Lt(e)==="object"){for(s in e)if(i=e[s],g(l,s)&&i!==void 0){if(n[s].type==="boolean"&&typeof i=="boolean")n[s].value=i;else if(n[s].type==="name"&&g(n[s].valueSet,i))n[s].value=i;else if(n[s].type==="integer"&&Number.isInteger(i))n[s].value=i;else if(n[s].type==="array"){for(d=0;d<i.length;d+=1)if(r=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(h=0;h<i[d].length;h+=1)typeof i[d][h]!="number"&&(r=!1);r===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}n[s].value="["+c.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,N=[];for(j in n)n[j].explicitSet===!0&&(n[j].type==="name"?N.push("/"+j+" /"+n[j].value):N.push("/"+j+" "+n[j].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(We.API),function(e){var t=e.API,n=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],h=[""],m=0,g=i.length;m<g;++m){if(l=o.metadata.characterToGlyph(i.charCodeAt(m)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return h.join("");l=l.toString(16),h.push(d[4-l.length],l)}return h.join("")},r=function(i){var o,l,c,d,h,m,g;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,g=(l=Object.keys(i).sort(function(p,j){return p-j})).length;m<g;m++)o=l[m],c.length>=100&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,h=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,g=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",j=0;j<g.length;j++)p+=String.fromCharCode(g[j]);var N=d();h({data:p,addLength1:!0,objectId:N}),c("endobj");var C=d();h({data:r(l.metadata.toUnicode),addLength1:!0,objectId:C}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+xo(l.fontName)),c("/FontFile2 "+N+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var b=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+xo(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+C+" 0 R"),c("/BaseFont /"+xo(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+b+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,h=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,g="",p=0;p<m.length;p++)g+=String.fromCharCode(m[p]);var j=d();h({data:g,addLength1:!0,objectId:j}),c("endobj");var N=d();h({data:r(l.metadata.toUnicode),addLength1:!0,objectId:N}),c("endobj");var C=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+j+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+xo(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+xo(l.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,h=i.options||{},m=i.mutex||{},g=m.pdfEscape,p=m.activeFontKey,j=m.fonts,N=p,C="",y=0,b="",w=j[N].encoding;if(j[N].encoding!=="Identity-H")return{text:l,x:c,y:d,options:h,mutex:m};for(b=l,N=p,Array.isArray(l)&&(b=l[0]),y=0;y<b.length;y+=1)j[N].metadata.hasOwnProperty("cmap")&&(o=j[N].metadata.cmap.unicode.codeMap[b[y].charCodeAt(0)]),o||b[y].charCodeAt(0)<256&&j[N].metadata.hasOwnProperty("Unicode")?C+=b[y]:C+="";var S="";return parseInt(N.slice(1))<14||w==="WinAnsiEncoding"?S=g(C,N).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(S=n(C,j[N])),m.isHex=!0,{text:S,x:c,y:d,options:h,mutex:m}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])}(We),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(We.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var s,i,o,l,c,d,h,m=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,w=0;this.__bidiEngine__={};var S=function(L){var O=L.charCodeAt(),P=O>>8,A=N[P];return A!==void 0?m[256*A+(255&O)]:P===252||P===253?"AL":y.test(P)?"L":P===8?"R":"N"},R=function(L){for(var O,P=0;P<L.length;P++){if((O=S(L.charAt(P)))==="L")return!1;if(O==="R")return!0}return!1},W=function(L,O,P,A){var Z,re,ie,K,ne=O[A];switch(ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"N":case"AN":break;case"EN":b&&(ne="AN");break;case"AL":b=!0,ne="R";break;case"WS":case"BN":ne="N";break;case"CS":A<1||A+1>=O.length||(Z=P[A-1])!=="EN"&&Z!=="AN"||(re=O[A+1])!=="EN"&&re!=="AN"?ne="N":b&&(re="AN"),ne=re===Z?re:"N";break;case"ES":ne=(Z=A>0?P[A-1]:"B")==="EN"&&A+1<O.length&&O[A+1]==="EN"?"EN":"N";break;case"ET":if(A>0&&P[A-1]==="EN"){ne="EN";break}if(b){ne="N";break}for(ie=A+1,K=O.length;ie<K&&O[ie]==="ET";)ie++;ne=ie<K&&O[ie]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(K=O.length,ie=A+1;ie<K&&O[ie]==="NSM";)ie++;if(ie<K){var pe=L[A],oe=pe>=1425&&pe<=2303||pe===64286;if(Z=O[ie],oe&&(Z==="R"||Z==="AL")){ne="R";break}}}ne=A<1||(Z=O[A-1])==="B"?"N":P[A-1];break;case"B":b=!1,s=!0,ne=w;break;case"S":i=!0,ne="N"}return ne},U=function(L,O,P){var A=L.split("");return P&&_(A,P,{hiLevel:w}),A.reverse(),O&&O.reverse(),A.join("")},_=function(L,O,P){var A,Z,re,ie,K,ne=-1,pe=L.length,oe=0,E=[],q=w?p:g,G=[];for(b=!1,s=!1,i=!1,Z=0;Z<pe;Z++)G[Z]=S(L[Z]);for(re=0;re<pe;re++){if(K=oe,E[re]=W(L,G,E,re),A=240&(oe=q[K][j[E[re]]]),oe&=15,O[re]=ie=q[oe][5],A>0)if(A===16){for(Z=ne;Z<re;Z++)O[Z]=1;ne=-1}else ne=-1;if(q[oe][6])ne===-1&&(ne=re);else if(ne>-1){for(Z=ne;Z<re;Z++)O[Z]=ie;ne=-1}G[re]==="B"&&(O[re]=0),P.hiLevel|=ie}i&&function(H,te,ce){for(var ae=0;ae<ce;ae++)if(H[ae]==="S"){te[ae]=w;for(var ee=ae-1;ee>=0&&H[ee]==="WS";ee--)te[ee]=w}}(G,O,pe)},D=function(L,O,P,A,Z){if(!(Z.hiLevel<L)){if(L===1&&w===1&&!s)return O.reverse(),void(P&&P.reverse());for(var re,ie,K,ne,pe=O.length,oe=0;oe<pe;){if(A[oe]>=L){for(K=oe+1;K<pe&&A[K]>=L;)K++;for(ne=oe,ie=K-1;ne<ie;ne++,ie--)re=O[ne],O[ne]=O[ie],O[ie]=re,P&&(re=P[ne],P[ne]=P[ie],P[ie]=re);oe=K}oe++}}},z=function(L,O,P){var A=L.split(""),Z={hiLevel:w};return P||(P=[]),_(A,P,Z),function(re,ie,K){if(K.hiLevel!==0&&h)for(var ne,pe=0;pe<re.length;pe++)ie[pe]===1&&(ne=C.indexOf(re[pe]))>=0&&(re[pe]=C[ne+1])}(A,P,Z),D(2,A,O,P,Z),D(1,A,O,P,Z),A.join("")};return this.__bidiEngine__.doBidiReorder=function(L,O,P){if(function(Z,re){if(re)for(var ie=0;ie<Z.length;ie++)re[ie]=ie;l===void 0&&(l=R(Z)),d===void 0&&(d=R(Z))}(L,O),o||!c||d)if(o&&c&&l^d)w=l?1:0,L=U(L,O,P);else if(!o&&c&&d)w=l?1:0,L=z(L,O,P),L=U(L,O);else if(!o||l||c||d){if(o&&!c&&l^d)L=U(L,O),l?(w=0,L=z(L,O,P)):(w=1,L=z(L,O,P),L=U(L,O));else if(o&&l&&!c&&d)w=1,L=z(L,O,P),L=U(L,O);else if(!o&&!c&&l^d){var A=h;l?(w=1,L=z(L,O,P),w=0,h=!1,L=z(L,O,P),h=A):(w=0,L=z(L,O,P),L=U(L,O),w=1,h=!1,L=z(L,O,P),h=A,L=U(L,O))}}else w=0,L=z(L,O,P);else w=l?1:0,L=z(L,O,P);return L},this.__bidiEngine__.setOptions=function(L){L&&(o=L.isInputVisual,c=L.isOutputVisual,l=L.isInputRtl,d=L.isOutputRtl,h=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([n.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([n.doBidiReorder(s[l])]);r.text=o}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(We),We.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new ti(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new vk(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new rk(this.contents),this.head=new sk(this),this.name=new dk(this),this.cmap=new kx(this),this.toUnicode={},this.hhea=new ik(this),this.maxp=new uk(this),this.hmtx=new hk(this),this.post=new lk(this),this.os2=new ok(this),this.loca=new gk(this),this.glyf=new fk(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var ba,ti=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,s;for(s=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(t.charCodeAt(n)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,s,i,o,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,s,i;for(i=[],r=0,s=t.length;r<s;r++)n=t[r],i.push(this.writeByte(n));return i},e}(),rk=function(){var e;function t(n){var r,s,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,s,i,o,l,c,d,h,m,g,p,j,N;for(N in p=Object.keys(n).length,c=Math.log(2),m=16*Math.floor(Math.log(p)/c),o=Math.floor(m/c),h=16*p-m,(s=new ti).writeInt(this.scalarType),s.writeShort(p),s.writeShort(m),s.writeShort(o),s.writeShort(h),i=16*p,d=s.pos+i,l=null,j=[],n)for(g=n[N],s.writeString(N),s.writeInt(e(g)),s.writeInt(d),s.writeInt(g.length),j=j.concat(g),N==="head"&&(l=d),d+=g.length;d%4;)j.push(0),d++;return s.write(j),r=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(r),s.data},e=function(n){var r,s,i,o;for(n=Cx.call(n);n.length%4;)n.push(0);for(i=new ti(n),s=0,r=0,o=n.length;r<o;r=r+=4)s+=i.readUInt32();return 4294967295&s},t}(),ak={}.hasOwnProperty,Oa=function(e,t){for(var n in t)ak.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};ba=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var sk=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Oa(e,ba),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new ti).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),I2=function(){function e(t,n){var r,s,i,o,l,c,d,h,m,g,p,j,N,C,y,b,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),g=p/2,t.pos+=6,i=function(){var S,R;for(R=[],c=S=0;0<=g?S<g:S>g;c=0<=g?++S:--S)R.push(t.readUInt16());return R}(),t.pos+=2,N=function(){var S,R;for(R=[],c=S=0;0<=g?S<g:S>g;c=0<=g?++S:--S)R.push(t.readUInt16());return R}(),d=function(){var S,R;for(R=[],c=S=0;0<=g?S<g:S>g;c=0<=g?++S:--S)R.push(t.readUInt16());return R}(),h=function(){var S,R;for(R=[],c=S=0;0<=g?S<g:S>g;c=0<=g?++S:--S)R.push(t.readUInt16());return R}(),s=(this.length-t.pos+this.offset)/2,l=function(){var S,R;for(R=[],c=S=0;0<=s?S<s:S>s;c=0<=s?++S:--S)R.push(t.readUInt16());return R}(),c=y=0,w=i.length;y<w;c=++y)for(C=i[c],r=b=j=N[c];j<=C?b<=C:b>=C;r=j<=C?++b:--b)h[c]===0?o=r+d[c]:(o=l[h[c]/2+(r-j)-(g-c)]||0)!==0&&(o+=d[c]),this.codeMap[r]=65535&o}t.pos=m}return e.encode=function(t,n){var r,s,i,o,l,c,d,h,m,g,p,j,N,C,y,b,w,S,R,W,U,_,D,z,L,O,P,A,Z,re,ie,K,ne,pe,oe,E,q,G,H,te,ce,ae,ee,ue,xe,Ne;switch(A=new ti,o=Object.keys(t).sort(function(Se,ve){return Se-ve}),n){case"macroman":for(N=0,C=function(){var Se=[];for(j=0;j<256;++j)Se.push(0);return Se}(),b={0:0},i={},Z=0,ne=o.length;Z<ne;Z++)b[ee=t[s=o[Z]]]==null&&(b[ee]=++N),i[s]={old:t[s],new:b[t[s]]},C[s]=b[t[s]];return A.writeUInt16(1),A.writeUInt16(0),A.writeUInt32(12),A.writeUInt16(0),A.writeUInt16(262),A.writeUInt16(0),A.write(C),{charMap:i,subtable:A.data,maxGlyphID:N+1};case"unicode":for(O=[],m=[],w=0,b={},r={},y=d=null,re=0,pe=o.length;re<pe;re++)b[R=t[s=o[re]]]==null&&(b[R]=++w),r[s]={old:R,new:b[R]},l=b[R]-s,y!=null&&l===d||(y&&m.push(y),O.push(s),d=l),y=s;for(y&&m.push(y),m.push(65535),O.push(65535),z=2*(D=O.length),_=2*Math.pow(Math.log(D)/Math.LN2,2),g=Math.log(_/2)/Math.LN2,U=2*D-_,c=[],W=[],p=[],j=ie=0,oe=O.length;ie<oe;j=++ie){if(L=O[j],h=m[j],L===65535){c.push(0),W.push(0);break}if(L-(P=r[L].new)>=32768)for(c.push(0),W.push(2*(p.length+D-j)),s=K=L;L<=h?K<=h:K>=h;s=L<=h?++K:--K)p.push(r[s].new);else c.push(P-L),W.push(0)}for(A.writeUInt16(3),A.writeUInt16(1),A.writeUInt32(12),A.writeUInt16(4),A.writeUInt16(16+8*D+2*p.length),A.writeUInt16(0),A.writeUInt16(z),A.writeUInt16(_),A.writeUInt16(g),A.writeUInt16(U),ce=0,E=m.length;ce<E;ce++)s=m[ce],A.writeUInt16(s);for(A.writeUInt16(0),ae=0,q=O.length;ae<q;ae++)s=O[ae],A.writeUInt16(s);for(ue=0,G=c.length;ue<G;ue++)l=c[ue],A.writeUInt16(l);for(xe=0,H=W.length;xe<H;xe++)S=W[xe],A.writeUInt16(S);for(Ne=0,te=p.length;Ne<te;Ne++)N=p[Ne],A.writeUInt16(N);return{charMap:r,subtable:A.data,maxGlyphID:w+1}}},e}(),kx=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Oa(e,ba),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n=new I2(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,s;return n==null&&(n="macroman"),r=I2.encode(t,n),(s=new ti).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},e}(),ik=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Oa(e,ba),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),ok=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Oa(e,ba),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),lk=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Oa(e,ba),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(r=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)n=t.readByte(),s.push(this.names.push(t.readString(n)));return s;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=(function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(t.readUInt32());return c}).call(this)}},e}(),ck=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},dk=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Oa(e,ba),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,s,i,o,l,c,d,h,m,g;for(t.pos=this.offset,t.readShort(),n=t.readShort(),l=t.readShort(),r=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},i=h=0,m=r.length;h<m;i=++h)s=r[i],t.pos=s.offset,d=t.readString(s.length),o=new ck(d,s),c[g=s.nameID]==null&&(c[g]=[]),c[s.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),uk=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Oa(e,ba),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),hk=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Oa(e,ba),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,s,i,o,l,c;for(t.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)h.push(t.readInt16());return h}(),this.widths=(function(){var d,h,m,g;for(g=[],d=0,h=(m=this.metrics).length;d<h;d++)i=m[d],g.push(i.advance);return g}).call(this),r=this.widths[this.widths.length-1],c=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)c.push(this.widths.push(r));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Cx=[].slice,fk=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Oa(e,ba),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,s,i,o,l,c,d,h,m;return t in this.cache?this.cache[t]:(i=this.file.loca,n=this.file.contents,r=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,o=(l=new ti(n.read(s))).readShort(),d=l.readShort(),m=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[t]=o===-1?new mk(l,d,m,c,h):new pk(l,o,d,m,c,h),this.cache[t]))},e.prototype.encode=function(t,n,r){var s,i,o,l,c;for(o=[],i=[],l=0,c=n.length;l<c;l++)s=t[n[l]],i.push(o.length),s&&(o=o.concat(s.encode(r)));return i.push(o.length),{table:o,offsets:i}},e}(),pk=function(){function e(t,n,r,s,i,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),mk=function(){function e(t,n,r,s,i){var o,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new ti(Cx.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),gk=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Oa(e,ba),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],r=0,s=this.length;r<s;r+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],r=0,s=this.length;r<s;r+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<r.length;++o)if(r[o]=s,i<n.length&&n[i]==o){++i,r[o]=s;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(s+=c)}for(var d=new Array(4*r.length),h=0;h<r.length;++h)d[4*h+3]=255&r[h],d[4*h+2]=(65280&r[h])>>8,d[4*h+1]=(16711680&r[h])>>16,d[4*h]=(4278190080&r[h])>>24;return d},e}(),vk=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,s,i;for(n in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)r=i[n],t[n]=s[r];return t},e.prototype.glyphsFor=function(t){var n,r,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in n=[],s)(r=s[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in c=this.glyphsFor(n))r=c[i],s[i]=r;return s},e.prototype.encode=function(t,n){var r,s,i,o,l,c,d,h,m,g,p,j,N,C,y;for(s in r=kx.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},y=r.charMap)p[(c=y[s]).old]=c.new;for(j in g=r.maxGlyphID,o)j in p||(p[j]=g++);return h=function(b){var w,S;for(w in S={},b)S[b[w]]=w;return S}(p),m=Object.keys(h).sort(function(b,w){return b-w}),N=function(){var b,w,S;for(S=[],b=0,w=m.length;b<w;b++)l=m[b],S.push(h[l]);return S}(),i=this.font.glyf.encode(o,N,p),d=this.font.loca.encode(i.offsets,N),C={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},e}();We.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,s,i,o;if(Array.isArray(n))return"["+function(){var l,c,d;for(d=[],l=0,c=n.length;l<c;l++)r=n[l],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in i=["<<"],n)o=n[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+n},t}();function Ax(e,t,n,r,s){r=r||{};var i=1.15,o=s.internal.scaleFactor,l=s.internal.getFontSize()/o,c=s.getLineHeightFactor?s.getLineHeightFactor():i,d=l*c,h=/\r\n|\r|\n/g,m="",g=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(m=typeof e=="string"?e.split(h):e,g=m.length||1),n+=l*(2-i),r.valign==="middle"?n-=g/2*d:r.valign==="bottom"&&(n-=g*d),r.halign==="center"||r.halign==="right"){var p=l;if(r.halign==="center"&&(p*=.5),m&&g>=1){for(var j=0;j<m.length;j++)s.text(m[j],t-s.getStringUnitWidth(m[j])*p,n),n+=d;return s}t-=s.getStringUnitWidth(e)*p}return r.halign==="justify"?s.text(e,t,n,{maxWidth:r.maxWidth||100,align:"justify"}):s.text(e,t,n),s}var F2={},Ho=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=t:F2=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,n){var r,s,i;n===void 0&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),l=d[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var h=e.unifyColor(t.fillColor);h&&(r=this.jsPDFDocument).setFillColor.apply(r,h),h=e.unifyColor(t.textColor),h&&(s=this.jsPDFDocument).setTextColor.apply(s,h),h=e.unifyColor(t.lineColor),h&&(i=this.jsPDFDocument).setDrawColor.apply(i,h),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,n,r){return this.jsPDFDocument.splitTextToSize(t,n,r)},e.prototype.rect=function(t,n,r,s,i){return this.jsPDFDocument.rect(t,n,r,s,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return F2||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),dm=function(e,t){return dm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},dm(e,t)};function Dx(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");dm(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Lx=function(e){Dx(t,e);function t(n){var r=e.call(this)||this;return r._element=n,r}return t}(Array);function yk(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function xk(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function zu(e,t,n){n.applyStyles(t,!0);var r=Array.isArray(e)?e:[e],s=r.map(function(i){return n.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return s}function Ex(e,t,n,r){var s=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:s,lineColor:i});var o=Px(s,!1);o&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),r.y-n.y,o)}function Px(e,t){var n=e>0,r=t||t===0;return n&&r?"DF":n?"S":r?"F":null}function vh(e,t){var n,r,s,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(n=e.left)!==null&&n!==void 0?n:t,top:(r=e.top)!==null&&r!==void 0?r:t,right:(s=e.right)!==null&&s!==void 0?s:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Tx(e,t){var n=vh(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function bk(e,t,n,r,s){var i={},o=1.3333333333333333,l=Gf(t,function(w){return s.getComputedStyle(w).backgroundColor});l!=null&&(i.fillColor=l);var c=Gf(t,function(w){return s.getComputedStyle(w).color});c!=null&&(i.textColor=c);var d=wk(r,n);d&&(i.cellPadding=d);var h="borderTopColor",m=o*n,g=r.borderTopWidth;if(r.borderBottomWidth===g&&r.borderRightWidth===g&&r.borderLeftWidth===g){var p=(parseFloat(g)||0)/m;p&&(i.lineWidth=p)}else i.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/m,right:(parseFloat(r.borderRightWidth)||0)/m,bottom:(parseFloat(r.borderBottomWidth)||0)/m,left:(parseFloat(r.borderLeftWidth)||0)/m},i.lineWidth.top||(i.lineWidth.right?h="borderRightColor":i.lineWidth.bottom?h="borderBottomColor":i.lineWidth.left&&(h="borderLeftColor"));var j=Gf(t,function(w){return s.getComputedStyle(w)[h]});j!=null&&(i.lineColor=j);var N=["left","right","center","justify"];N.indexOf(r.textAlign)!==-1&&(i.halign=r.textAlign),N=["middle","bottom","top"],N.indexOf(r.verticalAlign)!==-1&&(i.valign=r.verticalAlign);var C=parseInt(r.fontSize||"");isNaN(C)||(i.fontSize=C/o);var y=_k(r);y&&(i.fontStyle=y);var b=(r.fontFamily||"").toLowerCase();return e.indexOf(b)!==-1&&(i.font=b),i}function _k(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function Gf(e,t){var n=qx(e,t);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var s=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],i=parseInt(r[4]);return i===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function qx(e,t){var n=t(e);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?e.parentElement==null?null:qx(e.parentElement,t):n}function wk(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],r=96/(72/t),s=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=n.map(function(l){return parseInt(l||"0")/r}),o=vh(i,0);return s>o.top&&(o.top=s),s>o.bottom&&(o.bottom=s),o}function Ix(e,t,n,r,s){var i,o;r===void 0&&(r=!1),s===void 0&&(s=!1);var l;typeof t=="string"?l=n.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),h=[],m=[],g=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:h,body:m,foot:g};for(var p=0;p<l.rows.length;p++){var j=l.rows[p],N=(o=(i=j==null?void 0:j.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),C=jk(c,d,n,j,r,s);C&&(N==="thead"?h.push(C):N==="tfoot"?g.push(C):m.push(C))}return{head:h,body:m,foot:g}}function jk(e,t,n,r,s,i){for(var o=new Lx(r),l=0;l<r.cells.length;l++){var c=r.cells[l],d=n.getComputedStyle(c);if(s||d.display!=="none"){var h=void 0;i&&(h=bk(e,c,t,d,n)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:h,_element:c,content:Nk(c)})}}var m=n.getComputedStyle(r);if(o.length>0&&(s||m.display!=="none"))return o}function Nk(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),t.innerText||t.textContent||""}function Sk(e,t,n){for(var r=0,s=[e,t,n];r<s.length;r++){var i=s[r];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function os(e,t,n,r,s){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function kk(e,t){var n=new Ho(e),r=n.getDocumentOptions(),s=n.getGlobalOptions();Sk(s,r,t);var i=os({},s,r,t),o;typeof window<"u"&&(o=window);var l=Ck(s,r,t),c=Ak(s,r,t),d=Dk(n,i),h=Ek(n,i,o);return{id:t.tableId,content:h,hooks:c,styles:l,settings:d}}function Ck(e,t,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(c){if(c==="columnStyles"){var d=e[c],h=t[c],m=n[c];r.columnStyles=os({},d,h,m)}else{var g=[e,t,n],p=g.map(function(j){return j[c]||{}});r[c]=os({},p[0],p[1],p[2])}},i=0,o=Object.keys(r);i<o.length;i++){var l=o[i];s(l)}return r}function Ak(e,t,n){for(var r=[e,t,n],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=r;i<o.length;i++){var l=o[i];l.didParseCell&&s.didParseCell.push(l.didParseCell),l.willDrawCell&&s.willDrawCell.push(l.willDrawCell),l.didDrawCell&&s.didDrawCell.push(l.didDrawCell),l.willDrawPage&&s.willDrawPage.push(l.willDrawPage),l.didDrawPage&&s.didDrawPage.push(l.didDrawPage)}return s}function Dk(e,t){var n,r,s,i,o,l,c,d,h,m,g,p,j=vh(t.margin,40/e.scaleFactor()),N=(n=Lk(e,t.startY))!==null&&n!==void 0?n:j.top,C;t.showFoot===!0?C="everyPage":t.showFoot===!1?C="never":C=(r=t.showFoot)!==null&&r!==void 0?r:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(s=t.showHead)!==null&&s!==void 0?s:"everyPage";var b=(i=t.useCss)!==null&&i!==void 0?i:!1,w=t.theme||(b?"plain":"striped"),S=!!t.horizontalPageBreak,R=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:b,theme:w,startY:N,margin:j,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(h=t.tableWidth)!==null&&h!==void 0?h:"auto",showHead:y,showFoot:C,tableLineWidth:(m=t.tableLineWidth)!==null&&m!==void 0?m:0,tableLineColor:(g=t.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:S,horizontalPageBreakRepeat:R,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function Lk(e,t){var n=e.getLastAutoTable(),r=e.scaleFactor(),s=e.pageNumber(),i=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;i=o===s}return typeof t=="number"?t:(t==null||t===!1)&&i&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function Ek(e,t,n){var r=t.head||[],s=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(n){var l=Ix(e,t.html,n,o,t.useCss)||{};r=l.head||r,s=l.body||r,i=l.foot||r}else console.error("Cannot parse html in non browser environment")}var c=t.columns||Pk(r,s,i);return{columns:c,head:r,body:s,foot:i}}function Pk(e,t,n){var r=e[0]||t[0]||n[0]||[],s=[];return Object.keys(r).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(r)?l=r[parseInt(i)]:l=r[i],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var d=void 0;Array.isArray(r)?d=s.length:d=i+(c>0?"_".concat(c):"");var h={dataKey:d};s.push(h)}}),s}var um=function(){function e(t,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=t.getDocument()}return e}(),Tk=function(e){Dx(t,e);function t(n,r,s,i,o,l){var c=e.call(this,n,r,l)||this;return c.cell=s,c.row=i,c.column=o,c.section=i.section,c}return t}(um),qk=function(){function e(t,n){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,n,r,s,i,o){for(var l=0,c=n;l<c.length;l++){var d=c[l],h=new Tk(t,this,r,s,i,o),m=d(h)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],m)return!1}return!0},e.prototype.callEndPageHooks=function(t,n){t.applyStyles(t.userStyles);for(var r=0,s=this.hooks.didDrawPage;r<s.length;r++){var i=s[r];i(new um(t,this,n))}},e.prototype.callWillDrawPageHooks=function(t,n){for(var r=0,s=this.hooks.willDrawPage;r<s.length;r++){var i=s[r];i(new um(t,this,n))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(s,i){return s+i.wrappedWidth},0);return n}else{var r=this.settings.margin;return t-r.left-r.right}},e}(),Fx=function(){function e(t,n,r,s,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof Lx&&(this.raw=t._element,this.element=t._element),this.index=n,this.section=r,this.cells=s,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var n=this;return t.reduce(function(r,s){var i;return Math.max(r,((i=n.cells[s.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var n=this;return t.filter(function(r){var s=n.cells[r.index];return s?s.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,n){return this.getMaxCellHeight(n)<=t},e.prototype.getMinimumRowHeight=function(t,n){var r=this;return t.reduce(function(s,i){var o=r.cells[i.index];if(!o)return 0;var l=n.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),d=c+l;return d>s?d:s},0)},e}(),Rx=function(){function e(t,n,r){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(s=t.content)!==null&&s!==void 0?s:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");t=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");r=this.x+s/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:t}},e.prototype.getContentHeight=function(t,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/t*n,i=r*s+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var n=vh(this.styles.cellPadding,0);return t==="vertical"?n.top+n.bottom:t==="horizontal"?n.left+n.right:n[t]},e}(),Ik=function(){function e(t,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=n,this.index=r}return e.prototype.getMaxCustomCellWidth=function(t){for(var n=0,r=0,s=t.allRows();r<s.length;r++){var i=s[r],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},e}();function Fk(e,t){Rk(e,t);var n=[],r=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,n.push(i)),r+=i.width});var s=t.getWidth(e.pageSize().width)-r;s&&(s=hm(n,s,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),s&&(s=hm(n,s,function(i){return i.minWidth})),s=Math.abs(s),!t.settings.horizontalPageBreak&&s>.1/e.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),Mk(t),Bk(t,e),Ok(t)}function Rk(e,t){var n=e.scaleFactor(),r=t.settings.horizontalPageBreak,s=Tx(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){var h=t.hooks.didParseCell;t.callCellHooks(e,h,d,i,c,null);var m=d.padding("horizontal");d.contentWidth=zu(d.text,d.styles,e)+m;var g=zu(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=g+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||r===!0)d.contentWidth>s?(d.minWidth=s,d.wrappedWidth=s):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var p=10/n;d.minWidth=d.styles.minCellWidth||p,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var h=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},m=h.cellWidth||h.minCellWidth;m&&typeof m=="number"&&(c.minWidth=m,c.wrappedWidth=m)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function hm(e,t,n){for(var r=t,s=e.reduce(function(p,j){return p+j.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/s,c=r*l,d=o.width+c,h=n(o),m=d<h?h:d;t-=m-o.width,o.width=m}if(t=Math.round(t*1e10)/1e10,t){var g=e.filter(function(p){return t<0?p.width>n(p):!0});g.length&&(t=hm(g,t,n))}return t}function Ok(e){for(var t={},n=1,r=e.allRows(),s=0;s<r.length;s++)for(var i=r[s],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=t[c.index];if(n>1)n--,delete i.cells[c.index];else if(d)d.cell.height+=i.height,n=d.cell.colSpan,delete i.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var h=i.cells[c.index];if(!h)continue;if(h.height=i.height,h.rowSpan>1){var m=r.length-s,g=h.rowSpan>m?m:h.rowSpan;t[c.index]={cell:h,left:g,row:i}}}}}function Mk(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var r=t[n],s=null,i=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=c.width,delete r.cells[c.index];else if(s){var d=s;delete r.cells[c.index],s=null,d.width=c.width+i}else{var d=r.cells[c.index];if(!d)continue;if(o=d.colSpan,i=0,d.colSpan>1){s=d,i+=c.width;continue}d.width=c.width+i}}}function Bk(e,t){for(var n={count:0,height:0},r=0,s=e.allRows();r<s.length;r++){for(var i=s[r],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var h=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,h+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=R2(d.text,h,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=R2(d.text,h,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var m=d.styles.overflow(d.text,h);typeof m=="string"?d.text=[m]:d.text=m}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var g=d.contentHeight/d.rowSpan;d.rowSpan>1&&n.count*n.height<g*d.rowSpan?n={height:g,count:d.rowSpan}:n&&n.count>0&&n.height>g&&(g=n.height),g>i.height&&(i.height=g)}}n.count--}}function R2(e,t,n,r,s){return e.map(function(i){return Uk(i,t,n,r,s)})}function Uk(e,t,n,r,s){var i=1e4*r.scaleFactor();if(t=Math.ceil(t*i)/i,t>=zu(e,n,r))return e;for(;t<zu(e+s,n,r)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+s}function zk(e,t){var n=new Ho(e),r=$k(t,n.scaleFactor()),s=new qk(t,r);return Fk(n,s),n.applyStyles(n.userStyles),s}function $k(e,t){var n=e.content,r=Hk(n.columns);if(n.head.length===0){var s=O2(r,"head");s&&n.head.push(s)}if(n.foot.length===0){var s=O2(r,"foot");s&&n.foot.push(s)}var i=e.settings.theme,o=e.styles;return{columns:r,head:Kf("head",n.head,r,o,i,t),body:Kf("body",n.body,r,o,i,t),foot:Kf("foot",n.foot,r,o,i,t)}}function Kf(e,t,n,r,s,i){var o={},l=t.map(function(c,d){for(var h=0,m={},g=0,p=0,j=0,N=n;j<N.length;j++){var C=N[j];if(o[C.index]==null||o[C.index].left===0)if(p===0){var y=void 0;Array.isArray(c)?y=c[C.index-g-h]:y=c[C.dataKey];var b={};typeof y=="object"&&!Array.isArray(y)&&(b=(y==null?void 0:y.styles)||{});var w=Vk(e,C,d,s,r,i,b),S=new Rx(y,w,e);m[C.dataKey]=S,m[C.index]=S,p=S.colSpan-1,o[C.index]={left:S.rowSpan-1,times:p}}else p--,g++;else o[C.index].left--,p=o[C.index].times,h++}return new Fx(c,d,e,m)});return l}function O2(e,t){var n={};return e.forEach(function(r){if(r.raw!=null){var s=Wk(t,r.raw);s!=null&&(n[r.dataKey]=s)}}),Object.keys(n).length>0?n:null}function Wk(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Hk(e){return e.map(function(t,n){var r,s;return typeof t=="object"?s=(r=t.dataKey)!==null&&r!==void 0?r:n:s=n,new Ik(s,t,n)})}function Vk(e,t,n,r,s,i,o){var l=xk(r),c;e==="head"?c=s.headStyles:e==="body"?c=s.bodyStyles:e==="foot"&&(c=s.footStyles);var d=os({},l.table,l[e],s.styles,c),h=s.columnStyles[t.dataKey]||s.columnStyles[t.index]||{},m=e==="body"?h:{},g=e==="body"&&n%2===0?os({},l.alternateRow,s.alternateRowStyles):{},p=yk(i),j=os({},p,d,g,m);return os(j,o)}function Gk(e,t,n){var r;n===void 0&&(n={});var s=Tx(e,t),i=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(g){var p=t.columns.find(function(j){return j.dataKey===g||j.index===g});p&&!i.has(p.index)&&(i.set(p.index,!0),o.push(p.index),l.push(t.columns[p.index]),s-=p.wrappedWidth)});for(var d=!0,h=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;h<t.columns.length;){if(i.has(h)){h++;continue}var m=t.columns[h].wrappedWidth;if(d||s>=m)d=!1,o.push(h),l.push(t.columns[h]),s-=m;else break;h++}return{colIndexes:o,columns:l,lastIndex:h-1}}function Kk(e,t){for(var n=[],r=0;r<t.columns.length;r++){var s=Gk(e,t,{start:r});s.columns.length&&(n.push(s),r=s.lastIndex)}return n}function Zk(e,t){var n=t.settings,r=n.startY,s=n.margin,i={x:s.left,y:r},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=r+s.bottom+o;if(n.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(g,p){return g+p.height},0);l+=d}var h=new Ho(e);(n.pageBreak==="always"||n.startY!=null&&l>h.pageSize().height)&&(Mx(h),i.y=s.top),t.callWillDrawPageHooks(h,i);var m=os({},i);t.startPageNumber=h.pageNumber(),n.horizontalPageBreak?Yk(h,t,m,i):(h.applyStyles(h.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(g){return fs(h,t,g,i,t.columns)}),h.applyStyles(h.userStyles),t.body.forEach(function(g,p){var j=p===t.body.length-1;$u(h,t,g,j,m,i,t.columns)}),h.applyStyles(h.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(g){return fs(h,t,g,i,t.columns)})),Ex(h,t,m,i),t.callEndPageHooks(h,i),t.finalY=i.y,e.lastAutoTable=t,h.applyStyles(h.userStyles)}function Yk(e,t,n,r){var s=Kk(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(d,h){e.applyStyles(e.userStyles),h>0?cc(e,t,n,r,d.columns,!0):M2(e,t,r,d.columns),Jk(e,t,n,r,d.columns),Zf(e,t,r,d.columns)});else for(var o=-1,l=s[0],c=function(){var d=o;if(l){e.applyStyles(e.userStyles);var h=l.columns;o>=0?cc(e,t,n,r,h,!0):M2(e,t,r,h),d=B2(e,t,o+1,r,h),Zf(e,t,r,h)}var m=d-o;s.slice(1).forEach(function(g){e.applyStyles(e.userStyles),cc(e,t,n,r,g.columns,!0),B2(e,t,o+1,r,g.columns,m),Zf(e,t,r,g.columns)}),o=d};o<t.body.length-1;)c()}function M2(e,t,n,r){var s=t.settings;e.applyStyles(e.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&t.head.forEach(function(i){return fs(e,t,i,n,r)})}function Jk(e,t,n,r,s){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;$u(e,t,i,l,n,r,s)})}function B2(e,t,n,r,s,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(n+i,t.body.length),l=-1;return t.body.slice(n,o).forEach(function(c,d){var h=n+d===t.body.length-1,m=Ox(e,t,h,r);c.canEntireRowFit(m,s)&&(fs(e,t,c,r,s),l=n+d)}),l}function Zf(e,t,n,r){var s=t.settings;e.applyStyles(e.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&t.foot.forEach(function(i){return fs(e,t,i,n,r)})}function Xk(e,t,n){var r=n.getLineHeight(e.styles.fontSize),s=e.padding("vertical"),i=Math.floor((t-s)/r);return Math.max(0,i)}function Qk(e,t,n,r){var s={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=n.columns;o<l.length;o++){var c=l[o],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var h=new Rx(d.raw,d.styles,d.section);h=os(h,d),h.text=[];var m=Xk(d,t,r);d.text.length>m&&(h.text=d.text.splice(m,d.text.length));var g=r.scaleFactor(),p=r.getLineHeightFactor();d.contentHeight=d.getContentHeight(g,p),d.contentHeight>=t&&(d.contentHeight=t,h.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),h.contentHeight=h.getContentHeight(g,p),h.contentHeight>i&&(i=h.contentHeight),s[c.index]=h}}var j=new Fx(e.raw,-1,e.section,s,!0);j.height=i;for(var N=0,C=n.columns;N<C.length;N++){var c=C[N],h=j.cells[c.index];h&&(h.height=j.height);var d=e.cells[c.index];d&&(d.height=e.height)}return j}function e6(e,t,n,r){var s=e.pageSize().height,i=r.settings.margin,o=i.top+i.bottom,l=s-o;t.section==="body"&&(l-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=t.getMinimumRowHeight(r.columns,e),d=c<n;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var h=t.hasRowSpan(r.columns),m=t.getMaxCellHeight(r.columns)>l;return m?(h&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||r.settings.rowPageBreak==="avoid")}function $u(e,t,n,r,s,i,o){var l=Ox(e,t,r,i);if(n.canEntireRowFit(l,o))fs(e,t,n,i,o);else if(e6(e,n,l,t)){var c=Qk(n,l,t,e);fs(e,t,n,i,o),cc(e,t,s,i,o),$u(e,t,c,r,s,i,o)}else cc(e,t,s,i,o),$u(e,t,n,r,s,i,o)}function fs(e,t,n,r,s){r.x=t.settings.margin.left;for(var i=0,o=s;i<o.length;i++){var l=o[i],c=n.cells[l.index];if(!c){r.x+=l.width;continue}e.applyStyles(c.styles),c.x=r.x,c.y=r.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,n,l,r);if(d===!1){r.x+=l.width;continue}t6(e,c,r);var h=c.getTextPos();Ax(c.text,h.x,h.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,n,l,r),r.x+=l.width}r.y+=n.height}function t6(e,t,n){var r=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof r.lineWidth=="number"){var s=Px(r.lineWidth,r.fillColor);s&&e.rect(t.x,n.y,t.width,t.height,s)}else typeof r.lineWidth=="object"&&(r.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),n6(e,t,n,r.lineWidth))}function n6(e,t,n,r){var s,i,o,l;r.top&&(s=n.x,i=n.y,o=n.x+t.width,l=n.y,r.right&&(o+=.5*r.right),r.left&&(s-=.5*r.left),c(r.top,s,i,o,l)),r.bottom&&(s=n.x,i=n.y+t.height,o=n.x+t.width,l=n.y+t.height,r.right&&(o+=.5*r.right),r.left&&(s-=.5*r.left),c(r.bottom,s,i,o,l)),r.left&&(s=n.x,i=n.y,o=n.x,l=n.y+t.height,r.top&&(i-=.5*r.top),r.bottom&&(l+=.5*r.bottom),c(r.left,s,i,o,l)),r.right&&(s=n.x+t.width,i=n.y,o=n.x+t.width,l=n.y+t.height,r.top&&(i-=.5*r.top),r.bottom&&(l+=.5*r.bottom),c(r.right,s,i,o,l));function c(d,h,m,g,p){e.getDocument().setLineWidth(d),e.getDocument().line(h,m,g,p,"S")}}function Ox(e,t,n,r){var s=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&n)&&(s+=t.getFootHeight(t.columns)),e.pageSize().height-r.y-s}function cc(e,t,n,r,s,i){s===void 0&&(s=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return fs(e,t,l,r,s)}),t.callEndPageHooks(e,r);var o=t.settings.margin;Ex(e,t,n,r),Mx(e),t.pageNumber++,r.x=o.left,r.y=o.top,n.y=o.top,t.callWillDrawPageHooks(e,r),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return fs(e,t,l,r,s)}),e.applyStyles(e.userStyles))}function Mx(e){var t=e.pageNumber();e.setPage(t+1);var n=e.pageNumber();return n===t?(e.addPage(),!0):!1}function r6(e){e.API.autoTable=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],s=kk(this,r),i=zk(this,s);return Zk(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,n,r,s){Ax(t,n,r,s,this)},e.API.autoTableSetDefaults=function(t){return Ho.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,n){Ho.setDefaults(t,n)},e.API.autoTableHtmlToJson=function(t,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Ho(this),i=Ix(s,t,window,n,!1),o=i.head,l=i.body,c=((r=o[0])===null||r===void 0?void 0:r.map(function(d){return d.content}))||[];return{columns:c,rows:l,data:l}}}var Yf;try{if(typeof window<"u"&&window){var U2=window,z2=U2.jsPDF||((Yf=U2.jspdf)===null||Yf===void 0?void 0:Yf.jsPDF);z2&&r6(z2)}}catch(e){console.error("Could not apply autoTable plugin",e)}function a6(){const{user:e}=en(),[t,n]=T.useState({totalBookings:0,approvalRate:0,popularEquipment:[],bookingsByDepartment:{},bookingsByStatus:{},filteredBookings:[]}),[r,s]=T.useState(!0),[i,o]=T.useState("all"),[l,c]=T.useState("all"),[d,h]=T.useState(""),[m,g]=T.useState(""),[p,j]=T.useState([]),[N,C]=T.useState([]),[y,b]=T.useState([]),[w,S]=T.useState([]),{toasts:R,showToast:W,removeToast:U}=Sn(),_=hh();T.useEffect(()=>{D()},[]),T.useEffect(()=>{y.length>0&&z()},[i,l,d,m,y]);const D=async()=>{try{const[A,Z,re]=await Promise.all([jn.getAll(),yr.getAll(),Po.getAll()]),ie=A.bookings||[],K=Z.equipment||[],ne=re.users||[];b(ie),S(K),C(ne),j(_.map(pe=>pe.id))}catch(A){console.error("Failed to load data:",A),W("Failed to load analytics data","error")}finally{s(!1)}},z=()=>{try{let A=[...y];e&&e.role==="department_admin"&&(A=A.filter(E=>{const q=w.find(G=>G.id===E.equipment_id);return(q==null?void 0:q.department)===e.department})),i!=="all"&&(A=A.filter(E=>{const q=N.find(G=>G.id===E.user_id);return(q==null?void 0:q.department)===i})),l!=="all"&&(A=A.filter(E=>E.user_id===l)),d&&(A=A.filter(E=>new Date(E.start_date)>=new Date(d))),m&&(A=A.filter(E=>new Date(E.start_date)<=new Date(m)));const Z=A.filter(E=>E.status!=="pending").length,re=A.filter(E=>E.status==="approved").length,ie=Z>0?Math.round(re/Z*100):0,K={};A.forEach(E=>{K[E.equipment_id]=(K[E.equipment_id]||0)+1});const ne=Object.entries(K).sort((E,q)=>q[1]-E[1]).slice(0,5).map(([E,q])=>{const G=w.find(H=>H.id===E);return{name:(G==null?void 0:G.product_name)||"Unknown",count:q}}),pe={};for(const E of A){const q=N.find(H=>H.id===E.user_id),G=(q==null?void 0:q.department)||"Unknown";pe[G]=(pe[G]||0)+1}const oe={};A.forEach(E=>{oe[E.status]=(oe[E.status]||0)+1}),n({totalBookings:A.length,approvalRate:ie,popularEquipment:ne,bookingsByDepartment:pe,bookingsByStatus:oe,filteredBookings:A})}catch(A){console.error("Failed to calculate analytics:",A),W("Failed to calculate analytics","error")}},L=()=>{try{const A=new We,Z=A.internal.pageSize.getWidth(),re=A.internal.pageSize.getHeight(),ie=[156,39,176],K=[243,229,245],ne=[26,26,26],pe=[84,110,122];A.setFillColor(...ie),A.rect(0,0,Z,45,"F"),A.setTextColor(255,255,255),A.setFontSize(24),A.setFont("helvetica","bold"),A.text("NCAD Equipment Booking System",Z/2,20,{align:"center"}),A.setFontSize(14),A.setFont("helvetica","normal"),A.text("Analytics & Reports",Z/2,30,{align:"center"}),A.setFontSize(9),A.setTextColor(255,255,255),A.text(`Generated: ${new Date().toLocaleString("en-IE")}`,Z/2,38,{align:"center"});let oe=55;A.setFillColor(...K),A.roundedRect(14,oe,Z-28,25,2,2,"F"),A.setTextColor(...ne),A.setFontSize(10),A.setFont("helvetica","bold"),A.text("Applied Filters:",20,oe+7),A.setFont("helvetica","normal"),A.setFontSize(9);let E=[];if(i!=="all"&&E.push(`Department: ${i}`),l!=="all"){const ee=N.find(ue=>ue.id===l);E.push(`User: ${(ee==null?void 0:ee.full_name)||"Unknown"}`)}d&&E.push(`From: ${new Date(d).toLocaleDateString("en-IE")}`),m&&E.push(`To: ${new Date(m).toLocaleDateString("en-IE")}`),E.length===0&&E.push("No filters applied - showing all data"),A.text(E.join("  "),20,oe+15),oe=90,A.setFontSize(12),A.setFont("helvetica","bold"),A.setTextColor(...ie),A.text("Summary Statistics",20,oe),oe+=10,A.autoTable({startY:oe,head:[["Metric","Value"]],body:[["Total Bookings",t.totalBookings.toString()],["Approval Rate",`${t.approvalRate}%`],["Pending Bookings",(t.bookingsByStatus.pending||0).toString()],["Approved Bookings",(t.bookingsByStatus.approved||0).toString()],["Rejected Bookings",(t.bookingsByStatus.rejected||0).toString()]],theme:"grid",headStyles:{fillColor:ie,textColor:[255,255,255],fontStyle:"bold",fontSize:10},bodyStyles:{fontSize:9,textColor:ne},alternateRowStyles:{fillColor:[250,250,250]},margin:{left:20,right:20}}),oe=A.lastAutoTable.finalY+15,oe>re-80&&(A.addPage(),oe=20),A.setFontSize(12),A.setFont("helvetica","bold"),A.setTextColor(...ie),A.text("Top 5 Popular Equipment",20,oe),oe+=5;const q=t.popularEquipment.map(ee=>[ee.name,ee.count.toString(),`${Math.round(ee.count/t.totalBookings*100)}%`]);A.autoTable({startY:oe,head:[["Equipment Name","Bookings","Usage %"]],body:q,theme:"grid",headStyles:{fillColor:ie,textColor:[255,255,255],fontStyle:"bold",fontSize:10},bodyStyles:{fontSize:9,textColor:ne},alternateRowStyles:{fillColor:[250,250,250]},margin:{left:20,right:20}}),oe=A.lastAutoTable.finalY+15,oe>re-60&&(A.addPage(),oe=20),A.setFontSize(12),A.setFont("helvetica","bold"),A.setTextColor(...ie),A.text("Bookings by Department",20,oe),oe+=5;const G=Object.entries(t.bookingsByDepartment).map(([ee,ue])=>[ee,ue.toString(),`${Math.round(ue/t.totalBookings*100)}%`]);A.autoTable({startY:oe,head:[["Department","Bookings","Percentage"]],body:G,theme:"grid",headStyles:{fillColor:ie,textColor:[255,255,255],fontStyle:"bold",fontSize:10},bodyStyles:{fontSize:9,textColor:ne},alternateRowStyles:{fillColor:[250,250,250]},margin:{left:20,right:20}}),oe=A.lastAutoTable.finalY+15,oe>re-60&&(A.addPage(),oe=20),A.setFontSize(12),A.setFont("helvetica","bold"),A.setTextColor(...ie),A.text("Bookings by Status",20,oe),oe+=5;const H=Object.entries(t.bookingsByStatus).map(([ee,ue])=>[ee.charAt(0).toUpperCase()+ee.slice(1),ue.toString(),`${Math.round(ue/t.totalBookings*100)}%`]);A.autoTable({startY:oe,head:[["Status","Count","Percentage"]],body:H,theme:"grid",headStyles:{fillColor:ie,textColor:[255,255,255],fontStyle:"bold",fontSize:10},bodyStyles:{fontSize:9,textColor:ne},alternateRowStyles:{fillColor:[250,250,250]},margin:{left:20,right:20}});const te=A.internal.getNumberOfPages();for(let ee=1;ee<=te;ee++)A.setPage(ee),A.setFontSize(8),A.setTextColor(...pe),A.setFont("helvetica","normal"),A.text("NCAD Equipment Booking System - Confidential",Z/2,re-10,{align:"center"}),A.text(`Page ${ee} of ${te}`,Z-20,re-10,{align:"right"});const ae=`NCAD_Analytics_Report_${new Date().toISOString().split("T")[0]}.pdf`;A.save(ae),W("PDF report generated successfully!","success")}catch(A){console.error("Failed to generate PDF:",A),W("Failed to generate PDF report. Please try again.","error")}},O=()=>{try{let A=`Booking ID,User,Department,Equipment,Start Date,End Date,Status,Created
`;t.filteredBookings.forEach(K=>{const ne=N.find(E=>E.id===K.user_id),pe=w.find(E=>E.id===K.equipment_id),oe=(pe==null?void 0:pe.product_name)||"Unknown";A+=`${K.id},"${(ne==null?void 0:ne.full_name)||"Unknown"}","${(ne==null?void 0:ne.department)||"Unknown"}","${oe}",${K.start_date},${K.end_date},${K.status},${K.created_at}
`});const Z=new Blob([A],{type:"text/csv"}),re=window.URL.createObjectURL(Z),ie=document.createElement("a");ie.href=re,ie.download=`analytics_${new Date().toISOString().split("T")[0]}.csv`,ie.click(),window.URL.revokeObjectURL(re),W("CSV exported successfully!","success")}catch(A){console.error("Failed to export CSV:",A),W("Failed to export CSV. Please try again.","error")}},P=()=>{o("all"),c("all"),h(""),g("")};return r?a.jsx("div",{className:"loading",children:"Loading analytics..."}):a.jsxs("div",{className:"analytics-dashboard",children:[a.jsxs("div",{className:"analytics-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Analytics & Reports"}),a.jsx("p",{className:"subtitle",children:"Filter and export booking statistics"})]}),a.jsxs("div",{className:"analytics-actions",children:[a.jsx("button",{onClick:O,className:"btn btn-secondary",children:" Export CSV"}),a.jsx("button",{onClick:L,className:"btn btn-primary",children:" Generate PDF Report"})]})]}),a.jsxs("div",{className:"analytics-filters",children:[a.jsx("h3",{children:"Filters"}),a.jsxs("div",{className:"filter-grid",children:[a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{htmlFor:"filter-department",children:"Department"}),a.jsxs("select",{id:"filter-department",value:i,onChange:A=>o(A.target.value),className:"select-input",children:[a.jsx("option",{value:"all",children:"All Departments"}),_.map(A=>a.jsx("option",{value:A.id,children:A.name},A.id))]})]}),a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{htmlFor:"filter-user",children:"User"}),a.jsxs("select",{id:"filter-user",value:l,onChange:A=>c(A.target.value),className:"select-input",children:[a.jsx("option",{value:"all",children:"All Users"}),N.map(A=>a.jsxs("option",{value:A.id,children:[A.full_name," (",A.department,")"]},A.id))]})]}),a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{htmlFor:"filter-start-date",children:"Start Date"}),a.jsx("input",{id:"filter-start-date",type:"date",value:d,onChange:A=>h(A.target.value),className:"date-input"})]}),a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{htmlFor:"filter-end-date",children:"End Date"}),a.jsx("input",{id:"filter-end-date",type:"date",value:m,onChange:A=>g(A.target.value),className:"date-input"})]}),a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{children:""}),a.jsx("button",{onClick:P,className:"btn btn-secondary btn-reset",children:"Reset Filters"})]})]})]}),a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-card stat-primary",children:[a.jsx("div",{className:"stat-icon",style:{background:"var(--master-bg-tertiary)",color:"var(--master-accent-primary)"},children:""}),a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:t.totalBookings}),a.jsx("p",{children:"Total Bookings"})]})]}),a.jsxs("div",{className:"stat-card stat-success",children:[a.jsx("div",{className:"stat-icon",style:{background:"#F3E5F5",color:"#7B1FA2"},children:""}),a.jsxs("div",{className:"stat-content",children:[a.jsxs("h3",{children:[t.approvalRate,"%"]}),a.jsx("p",{children:"Approval Rate"})]})]})]}),a.jsxs("div",{className:"analytics-grid",children:[a.jsxs("div",{className:"analytics-card",children:[a.jsx("h3",{children:"Popular Equipment"}),a.jsx("div",{className:"chart-list",children:t.popularEquipment.length>0?t.popularEquipment.map((A,Z)=>a.jsxs("div",{className:"chart-item",children:[a.jsx("span",{className:"item-name",children:A.name}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${A.count/t.totalBookings*100}%`,background:"var(--master-accent-primary)"}})}),a.jsxs("span",{className:"item-count",children:[A.count," bookings"]})]},Z)):a.jsx("p",{className:"empty-message",children:"No data available"})})]}),a.jsxs("div",{className:"analytics-card",children:[a.jsx("h3",{children:"Bookings by Department"}),a.jsx("div",{className:"chart-list",children:Object.entries(t.bookingsByDepartment).length>0?Object.entries(t.bookingsByDepartment).map(([A,Z])=>a.jsxs("div",{className:"chart-item",children:[a.jsx("span",{className:"item-name",children:A}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${Z/t.totalBookings*100}%`,background:"var(--master-accent-primary)"}})}),a.jsx("span",{className:"item-count",children:Z})]},A)):a.jsx("p",{className:"empty-message",children:"No data available"})})]}),a.jsxs("div",{className:"analytics-card",children:[a.jsx("h3",{children:"Bookings by Status"}),a.jsx("div",{className:"chart-list",children:Object.entries(t.bookingsByStatus).length>0?Object.entries(t.bookingsByStatus).map(([A,Z])=>a.jsxs("div",{className:"chart-item",children:[a.jsx("span",{className:"item-name",children:A}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${Z/t.totalBookings*100}%`,background:"var(--master-accent-primary)"}})}),a.jsx("span",{className:"item-count",children:Z})]},A)):a.jsx("p",{className:"empty-message",children:"No data available"})})]})]}),R.map(A=>a.jsx(kn,{message:A.message,type:A.type,onClose:()=>U(A.id)},A.id))]})}function s6(){const{user:e}=wr(),[t,n]=T.useState([]),[r,s]=T.useState(!0),[i,o]=T.useState({serviceId:"",publicKey:"",templateConfirm:"",templateApproved:"",templateDenied:"",templateOverdue:"",templateReminder:""}),[l,c]=T.useState(!1),[d,h]=T.useState("");T.useEffect(()=>{m(),g()},[]);const m=async()=>{try{const b=((await Dc.getAll()).settings||[]).map(w=>({id:w.key,name:w.key.replace(/_/g," ").replace(/\b\w/g,S=>S.toUpperCase()),key:w.key,enabled:w.value===!0||w.value==="true",description:w.description||""}));n(b)}catch(C){console.error("Failed to load feature flags:",C)}finally{s(!1)}},g=()=>{const C=Hn.getConfig();o({serviceId:C.serviceId,publicKey:C.publicKey,templateConfirm:C.templates.bookingConfirmation,templateApproved:C.templates.bookingApproved,templateDenied:C.templates.bookingDenied,templateOverdue:C.templates.bookingOverdue,templateReminder:C.templates.bookingReminder})},p=()=>{if(e.role!=="master_admin"){alert("Only master admins can update email configuration");return}Hn.updateConfig({serviceId:i.serviceId,publicKey:i.publicKey,templates:{bookingConfirmation:i.templateConfirm,bookingApproved:i.templateApproved,bookingDenied:i.templateDenied,bookingOverdue:i.templateOverdue,bookingReminder:i.templateReminder}}),alert("Email configuration saved successfully!"),c(!1)},j=async C=>{h(`Testing ${C} email...`);const y={id:"TEST123",start_date:new Date().toISOString(),end_date:new Date(Date.now()+864e5*3).toISOString(),purpose:"Test booking for email verification"},b=[{product_name:"Test Equipment (Canon EOS R5)"}];try{let w;switch(C){case"confirmation":w=await Hn.sendBookingConfirmation(y,e,b);break;case"approved":w=await Hn.sendBookingApproved(y,e,b,e);break;case"denied":w=await Hn.sendBookingDenied(y,e,b,e,"Test denial reason");break;case"overdue":w=await Hn.sendOverdueReminder(y,e,b,3);break;case"reminder":w=await Hn.sendBookingReminder(y,e,b,2);break}w.success?h(` ${C} email sent successfully!`):h(` Failed: ${w.error}`)}catch(w){h(` Error: ${w.message}`)}setTimeout(()=>h(""),5e3)},N=async C=>{if(e.role!=="master_admin"){alert("Only master admins can toggle feature flags");return}try{const y=t.find(w=>w.id===C),b=!y.enabled;await Dc.update(y.key,b,y.description||`${y.name} setting`),await m(),alert(`Feature flag ${b?"enabled":"disabled"} successfully`)}catch(y){alert("Failed to toggle feature flag: "+y.message)}};return r?a.jsx("div",{className:"loading",children:"Loading feature flags..."}):a.jsxs("div",{className:"feature-flags",children:[a.jsx("h2",{children:"Feature Flag Management"}),a.jsx("p",{className:"subtitle",children:"Control system-wide features and access"}),e.role!=="master_admin"&&a.jsx("div",{className:"warning-banner",children:" You are viewing feature flags in read-only mode. Only Master Admins can toggle flags."}),a.jsx("div",{className:"flags-list",children:t.map(C=>a.jsxs("div",{className:"flag-item",children:[a.jsxs("div",{className:"flag-info",children:[a.jsx("h3",{children:C.name.replace(/_/g," ").toUpperCase()}),a.jsx("p",{className:"flag-description",children:C.description}),a.jsx("p",{className:"flag-meta",children:a.jsx("span",{className:"role-badge",children:C.required_role})})]}),a.jsxs("div",{className:"flag-toggle",children:[a.jsxs("label",{className:"switch",children:[a.jsx("input",{type:"checkbox",checked:C.enabled,onChange:()=>N(C.id),disabled:e.role!=="master_admin"}),a.jsx("span",{className:"slider"})]}),a.jsx("span",{className:C.enabled?"status-enabled":"status-disabled",children:C.enabled?"Enabled":"Disabled"})]})]},C.id))}),a.jsxs("div",{className:"flags-info",children:[a.jsx("h3",{children:"About Feature Flags"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Room Booking:"})," Allows staff to book rooms and spaces by the hour"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Analytics Export:"})," Enables CSV/PDF export of analytics data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"CSV Import:"})," Allows bulk import of users and equipment"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Interdisciplinary Access:"})," Permits cross-department equipment borrowing"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Advanced Reporting:"})," Unlocks detailed reporting features"]})]})]}),a.jsxs("div",{className:"email-config-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:" Email Notifications Configuration"}),a.jsx("button",{onClick:()=>c(!l),className:"btn btn-secondary btn-sm",disabled:e.role!=="master_admin",children:l?"Hide":"Configure EmailJS"})]}),a.jsxs("div",{className:"email-status",children:[Hn.isConfigured()?a.jsx("span",{className:"status-badge status-success",children:" EmailJS Configured"}):a.jsx("span",{className:"status-badge status-warning",children:" EmailJS Not Configured"}),a.jsxs("p",{className:"help-text",children:["Email notifications are sent automatically for booking confirmations, approvals, and denials.",a.jsx("br",{}),"See ",a.jsx("code",{children:"EMAIL_TEMPLATES.md"})," for setup instructions."]})]}),l&&a.jsxs("div",{className:"email-config-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"serviceId",children:"EmailJS Service ID"}),a.jsx("input",{id:"serviceId",type:"text",value:i.serviceId,onChange:C=>o({...i,serviceId:C.target.value}),placeholder:"service_xxxxxxxxx",disabled:e.role!=="master_admin"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"publicKey",children:"EmailJS Public Key"}),a.jsx("input",{id:"publicKey",type:"text",value:i.publicKey,onChange:C=>o({...i,publicKey:C.target.value}),placeholder:"Your public key",disabled:e.role!=="master_admin"})]})]}),a.jsx("h3",{children:"Email Template IDs"}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"templateConfirm",children:"Booking Confirmation"}),a.jsx("input",{id:"templateConfirm",type:"text",value:i.templateConfirm,onChange:C=>o({...i,templateConfirm:C.target.value}),placeholder:"template_booking_confirm",disabled:e.role!=="master_admin"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"templateApproved",children:"Booking Approved"}),a.jsx("input",{id:"templateApproved",type:"text",value:i.templateApproved,onChange:C=>o({...i,templateApproved:C.target.value}),placeholder:"template_booking_approved",disabled:e.role!=="master_admin"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"templateDenied",children:"Booking Denied"}),a.jsx("input",{id:"templateDenied",type:"text",value:i.templateDenied,onChange:C=>o({...i,templateDenied:C.target.value}),placeholder:"template_booking_denied",disabled:e.role!=="master_admin"})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"templateOverdue",children:"Overdue Reminder"}),a.jsx("input",{id:"templateOverdue",type:"text",value:i.templateOverdue,onChange:C=>o({...i,templateOverdue:C.target.value}),placeholder:"template_booking_overdue",disabled:e.role!=="master_admin"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"templateReminder",children:"Booking Reminder"}),a.jsx("input",{id:"templateReminder",type:"text",value:i.templateReminder,onChange:C=>o({...i,templateReminder:C.target.value}),placeholder:"template_booking_reminder",disabled:e.role!=="master_admin"})]})]}),a.jsx("div",{className:"form-actions",children:a.jsx("button",{onClick:p,className:"btn btn-primary",disabled:e.role!=="master_admin",children:"Save Configuration"})}),Hn.isConfigured()&&a.jsxs("div",{className:"email-test-section",children:[a.jsx("h3",{children:"Test Email Templates"}),a.jsxs("p",{className:"help-text",children:["Send test emails to ",e.email]}),a.jsxs("div",{className:"test-buttons",children:[a.jsx("button",{onClick:()=>j("confirmation"),className:"btn btn-secondary btn-sm",children:"Test Confirmation"}),a.jsx("button",{onClick:()=>j("approved"),className:"btn btn-secondary btn-sm",children:"Test Approved"}),a.jsx("button",{onClick:()=>j("denied"),className:"btn btn-secondary btn-sm",children:"Test Denied"}),a.jsx("button",{onClick:()=>j("overdue"),className:"btn btn-secondary btn-sm",children:"Test Overdue"}),a.jsx("button",{onClick:()=>j("reminder"),className:"btn btn-secondary btn-sm",children:"Test Reminder"})]}),d&&a.jsx("div",{className:"test-status",children:d})]})]})]})]})}function i6(){const{user:e}=en(),[t,n]=T.useState([]),[r,s]=T.useState([]),[i,o]=T.useState(!0),[l,c]=T.useState("all"),[d,h]=T.useState("all"),[m,g]=T.useState(""),[p,j]=T.useState(1),N=20,[C,y]=T.useState(!1),[b,w]=T.useState(!1),[S,R]=T.useState(null),[W,U]=T.useState({email:"",password:"",first_name:"",surname:"",role:"student",department:"Moving Image Design"}),{toasts:_,showToast:D,removeToast:z}=Sn(),L=hh();if(e.role!=="master_admin")return a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only Master Admins can manage users."})]});T.useEffect(()=>{O()},[l,d]),T.useEffect(()=>{let q=t;if(m.trim()){const G=m.toLowerCase();q=q.filter(H=>H.full_name.toLowerCase().includes(G)||H.email.toLowerCase().includes(G))}s(q),j(1)},[t,m]);const O=async()=>{o(!0);try{const q={};l!=="all"&&(q.role=l),d!=="all"&&(q.department=d);const H=(await Po.getAll(q)).users||[];n(H)}catch(q){console.error("Failed to load users:",q),D("Failed to load users","error"),n([])}finally{o(!1)}},P=async()=>{if(!W.email||!W.password||!W.first_name||!W.surname){D("Please fill in all required fields","error");return}try{const q={email:W.email,password:W.password,first_name:W.first_name,surname:W.surname,full_name:`${W.first_name} ${W.surname}`,role:W.role,department:W.department};await Po.create(q),y(!1),U({email:"",password:"",first_name:"",surname:"",role:"student",department:"Moving Image Design"}),await O(),D("User created successfully","success")}catch(q){D("Failed to create user: "+q.message,"error")}},A=async()=>{if(!W.first_name||!W.surname){D("Please fill in all required fields","error");return}try{const q={first_name:W.first_name,surname:W.surname,full_name:`${W.first_name} ${W.surname}`,role:W.role,department:W.department};W.password&&(q.password=W.password),await Po.update(S.id,q),w(!1),R(null),await O(),D("User updated successfully","success")}catch(q){D("Failed to update user: "+q.message,"error")}},Z=async(q,G)=>{if(confirm(`Are you sure you want to delete ${G}? This action cannot be undone.`))try{await Po.delete(q),await O(),D("User deleted successfully","success")}catch(H){D("Failed to delete user: "+H.message,"error")}},re=q=>{R(q),U({email:q.email,password:"",first_name:q.first_name,surname:q.surname,role:q.role,department:q.department}),w(!0)},ie=[{value:"student",label:"Student"},{value:"staff",label:"Staff"},{value:"department_admin",label:"Department Admin"},{value:"master_admin",label:"Master Admin"}],K=q=>{g(q)},ne=q=>{j(q),window.scrollTo({top:0,behavior:"smooth"})},pe=(p-1)*N,oe=pe+N,E=r.slice(pe,oe);return a.jsxs("div",{className:"user-management",children:[a.jsx("h2",{children:"User Management"}),a.jsx("p",{className:"subtitle",children:"Manage user accounts, roles, and permissions"}),a.jsx(fh,{onSearch:K,placeholder:"Search by name or email...",ariaLabel:"Search users"}),a.jsx("div",{className:"management-controls",children:a.jsxs("div",{className:"filter-controls",children:[a.jsxs("select",{value:l,onChange:q=>c(q.target.value),className:"select-input",children:[a.jsx("option",{value:"all",children:"All Roles"}),ie.map(q=>a.jsx("option",{value:q.value,children:q.label},q.value))]}),a.jsxs("select",{value:d,onChange:q=>h(q.target.value),className:"select-input",children:[a.jsx("option",{value:"all",children:"All Departments"}),L.map(q=>a.jsx("option",{value:q.id,children:q.name},q.id))]}),a.jsx("button",{onClick:()=>y(!0),className:"btn btn-primary",children:"+ Add User"})]})}),i?a.jsx("div",{className:"users-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:a.jsx(Ec,{type:"table-row",count:10})})]})}):r.length===0?a.jsx("div",{className:"empty-state",children:a.jsxs("p",{children:["No users found",m?" matching your search":""]})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"users-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:E.map(q=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:q.full_name})}),a.jsx("td",{children:q.email}),a.jsx("td",{children:a.jsx("span",{className:`role-badge role-${q.role}`,children:q.role.replace("_"," ")})}),a.jsx("td",{children:q.department}),a.jsx("td",{children:new Date(q.created_at).toLocaleDateString("en-IE")}),a.jsx("td",{children:a.jsxs("div",{className:"action-buttons",children:[a.jsx("button",{onClick:()=>re(q),className:"btn btn-secondary btn-sm",children:"Edit"}),a.jsx("button",{onClick:()=>Z(q.id,q.full_name),className:"btn btn-danger btn-sm",children:"Delete"})]})})]},q.id))})]})}),a.jsx(Lc,{currentPage:p,totalItems:r.length,itemsPerPage:N,onPageChange:ne,loading:i})]}),C&&a.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:a.jsxs("div",{className:"modal-content",onClick:q=>q.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Add New User"}),a.jsx("button",{className:"modal-close",onClick:()=>y(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"first-name",children:"First Name *"}),a.jsx("input",{id:"first-name",type:"text",value:W.first_name,onChange:q=>U({...W,first_name:q.target.value}),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"surname",children:"Surname *"}),a.jsx("input",{id:"surname",type:"text",value:W.surname,onChange:q=>U({...W,surname:q.target.value}),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email *"}),a.jsx("input",{id:"email",type:"email",value:W.email,onChange:q=>U({...W,email:q.target.value}),className:"form-input",placeholder:"user@ncad.ie"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password *"}),a.jsx("input",{id:"password",type:"password",value:W.password,onChange:q=>U({...W,password:q.target.value}),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"role",children:"Role *"}),a.jsx("select",{id:"role",value:W.role,onChange:q=>U({...W,role:q.target.value}),className:"select-input",children:ie.map(q=>a.jsx("option",{value:q.value,children:q.label},q.value))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"department",children:"Department *"}),a.jsx("select",{id:"department",value:W.department,onChange:q=>U({...W,department:q.target.value}),className:"select-input",children:L.map(q=>a.jsx("option",{value:q.id,children:q.name},q.id))})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:()=>y(!1),className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:P,className:"btn btn-primary",children:"Add User"})]})]})]})}),b&&S&&a.jsx("div",{className:"modal-overlay",onClick:()=>w(!1),children:a.jsxs("div",{className:"modal-content",onClick:q=>q.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{children:["Edit User - ",S.full_name]}),a.jsx("button",{className:"modal-close",onClick:()=>w(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-first-name",children:"First Name *"}),a.jsx("input",{id:"edit-first-name",type:"text",value:W.first_name,onChange:q=>U({...W,first_name:q.target.value}),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-surname",children:"Surname *"}),a.jsx("input",{id:"edit-surname",type:"text",value:W.surname,onChange:q=>U({...W,surname:q.target.value}),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-email",children:"Email"}),a.jsx("input",{id:"edit-email",type:"email",value:W.email,className:"form-input",disabled:!0,title:"Email cannot be changed"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-password",children:"Password"}),a.jsx("input",{id:"edit-password",type:"password",value:W.password,onChange:q=>U({...W,password:q.target.value}),className:"form-input",placeholder:"Leave blank to keep current"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-role",children:"Role *"}),a.jsx("select",{id:"edit-role",value:W.role,onChange:q=>U({...W,role:q.target.value}),className:"select-input",children:ie.map(q=>a.jsx("option",{value:q.value,children:q.label},q.value))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-department",children:"Department *"}),a.jsx("select",{id:"edit-department",value:W.department,onChange:q=>U({...W,department:q.target.value}),className:"select-input",children:L.map(q=>a.jsx("option",{value:q.id,children:q.name},q.id))})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:()=>w(!1),className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:A,className:"btn btn-primary",children:"Save Changes"})]})]})]})}),_.map(q=>a.jsx(kn,{message:q.message,type:q.type,onClose:()=>z(q.id)},q.id))]})}class o6{parseCSV(t){const n=t.trim().split(`
`);if(n.length<2)throw new Error("CSV file must contain at least a header row and one data row");const r=n[0].split(",").map(i=>i.trim().toLowerCase().replace(/^["']|["']$/g,"")),s=[];for(let i=1;i<n.length;i++){const o=n[i].trim();if(!o)continue;const l=this.parseCSVLine(o);if(l.length!==r.length){console.warn(`Row ${i+1} has ${l.length} columns, expected ${r.length}. Skipping.`);continue}const c={};r.forEach((d,h)=>{c[d]=l[h].trim()}),s.push(c)}return s}parseCSVLine(t){const n=[];let r="",s=!1;for(let i=0;i<t.length;i++){const o=t[i],l=t[i+1];o==='"'||o==="'"?s&&l===o?(r+=o,i++):s=!s:o===","&&!s?(n.push(r),r=""):r+=o}return n.push(r),n.map(i=>i.replace(/^["']|["']$/g,""))}validateUsers(t){const n=[],r=[],s=["first_name","surname","full_name","email","department"],i=["student","staff","admin","master_admin"],o=["Moving Image Design","Graphic Design","Illustration"],l=Object.keys(t[0]||{}),c=s.filter(d=>!l.includes(d));return c.length>0?(n.push(`Missing required columns: ${c.join(", ")}`),{valid:!1,errors:n,warnings:r}):(t.forEach((d,h)=>{const m=h+2;if(s.forEach(g=>{(!d[g]||d[g].trim()==="")&&n.push(`Row ${m}: Missing required field '${g}'`)}),d.email&&!this.isValidEmail(d.email)&&n.push(`Row ${m}: Invalid email format '${d.email}'`),d.role&&!i.includes(d.role)&&r.push(`Row ${m}: Invalid role '${d.role}', will default to 'student'`),d.department&&!o.includes(d.department)&&r.push(`Row ${m}: Department '${d.department}' not in standard list`),d.first_name&&d.surname&&d.full_name){const g=`${d.first_name} ${d.surname}`;d.full_name!==g&&r.push(`Row ${m}: full_name '${d.full_name}' doesn't match '${g}'`)}}),{valid:n.length===0,errors:n,warnings:r})}validateEquipment(t){const n=[],r=[],s=["product_name","tracking_number","description"],i=["Camera","Lens","Lighting","Audio","Tripod & Support","Tripod","Computer","Printer","Scanner","Projector","Other","Microphone","Audio Recorder","Headphones","Gimbal","Media Player","3D Printer","Storage","Equipment","Monitor","Audio Equipment"],o=["Moving Image Design","Graphic Design","Illustration","Shared"],l=Object.keys(t[0]||{}),c=s.filter(d=>!l.includes(d));return c.length>0?(n.push(`Missing required columns: ${c.join(", ")}`),{valid:!1,errors:n,warnings:r}):(t.forEach((d,h)=>{const m=h+2;s.forEach(g=>{(!d[g]||d[g].trim()==="")&&n.push(`Row ${m}: Missing required field '${g}'`)}),d.tracking_number&&d.tracking_number.length<3&&r.push(`Row ${m}: Tracking number '${d.tracking_number}' seems too short`),d.category&&!i.includes(d.category)&&r.push(`Row ${m}: Category '${d.category}' not in standard list`),d.department&&!o.includes(d.department)&&r.push(`Row ${m}: Department '${d.department}' not in standard list`),d.status&&!["available","booked","maintenance","out_of_service"].includes(d.status)&&r.push(`Row ${m}: Invalid status '${d.status}', will default to 'available'`)}),{valid:n.length===0,errors:n,warnings:r})}async detectUserDuplicates(t){const n=await Te.query("users"),r=[],s=[];return t.forEach(i=>{const o=n.find(l=>l.email.toLowerCase()===i.email.toLowerCase());o?r.push({row:i,existingId:o.id,existingName:o.full_name,action:"skip"}):s.push(i)}),{duplicates:r,unique:s}}async detectEquipmentDuplicates(t){const n=await Te.query("equipment"),r=[],s=[];return t.forEach(i=>{const o=n.find(l=>l.tracking_number.toLowerCase()===i.tracking_number.toLowerCase());o?r.push({row:i,existingId:o.id,existingName:o.product_name,action:"skip"}):s.push(i)}),{duplicates:r,unique:s}}async importUsers(t,n={skipDuplicates:!0,updateDuplicates:!1}){let r=0,s=0,i=0;for(const o of t)try{const c=(await Te.query("users")).find(d=>d.email.toLowerCase()===o.email.toLowerCase());if(c)n.updateDuplicates?(await Te.update("users",{id:c.id},{first_name:o.first_name,surname:o.surname,full_name:o.full_name||`${o.first_name} ${o.surname}`,department:o.department,role:o.role||"student",year:o.year||null}),i++):s++;else{const d={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,first_name:o.first_name,surname:o.surname,full_name:o.full_name||`${o.first_name} ${o.surname}`,email:o.email.toLowerCase(),department:o.department,role:o.role||"student",year:o.year||null,created_at:new Date().toISOString().split("T")[0]};await Te.insert("users",d),r++}}catch(l){console.error(`Failed to import user ${o.email}:`,l),s++}return{imported:r,skipped:s,updated:i}}async importEquipment(t,n={skipDuplicates:!0,updateDuplicates:!1},r=null){try{const s=new FormData;s.append("file",t);const i=new XMLHttpRequest;return new Promise((o,l)=>{r&&i.upload.addEventListener("progress",d=>{if(d.lengthComputable){const h=d.loaded/d.total*100;r(h)}}),i.addEventListener("load",()=>{if(i.status===200){const d=JSON.parse(i.responseText);o({imported:d.summary.successCount,skipped:d.summary.skipCount,updated:0,errors:d.summary.errors||[]})}else l(new Error(`Upload failed: ${i.statusText}`))}),i.addEventListener("error",()=>{l(new Error("Network error during upload"))}),i.addEventListener("abort",()=>{l(new Error("Upload cancelled"))}),i.open("POST","http://localhost:3001/api/csv/import/equipment");const c=localStorage.getItem("token");c&&i.setRequestHeader("Authorization",`Bearer ${c}`),i.send(s)})}catch(s){throw console.error("Failed to import equipment:",s),s}}generateUserTemplate(){const t=["first_name","surname","full_name","email","department","role","year"],n=[["John","Doe","John Doe","john.doe@ncad.ie","Moving Image Design","student","2"],["Jane","Smith","Jane Smith","jane.smith@ncad.ie","Graphic Design","student","3"],["Bob","Admin","Bob Admin","bob.admin@ncad.ie","Moving Image Design","admin",""]];let r=t.join(",")+`
`;return n.forEach(s=>{r+=s.map(i=>`"${i}"`).join(",")+`
`}),r}generateEquipmentTemplate(){const t=["product_name","tracking_number","description","category","department","link_to_image","status","requires_justification"],n=[["Canon EOS R5","CAM001","Professional mirrorless camera","Camera","Moving Image Design","https://example.com/camera.jpg","available","true"],["Rode NTG3","AUD050","Shotgun microphone","Audio","Moving Image Design","https://example.com/mic.jpg","available","false"],['MacBook Pro 16"',"COMP020","M1 Max laptop","Computer","Shared","https://example.com/laptop.jpg","available","true"]];let r=t.join(",")+`
`;return n.forEach(s=>{r+=s.map(i=>`"${i}"`).join(",")+`
`}),r}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}}const Ei=new o6;function l6(){const{user:e}=wr(),[t,n]=T.useState("users"),[r,s]=T.useState(null),[i,o]=T.useState(null),[l,c]=T.useState(null),[d,h]=T.useState(null),[m,g]=T.useState(1),[p,j]=T.useState({skipDuplicates:!0,updateDuplicates:!1}),[N,C]=T.useState(null),[y,b]=T.useState(!1),[w,S]=T.useState(0);if(!e)return a.jsx("div",{className:"loading",children:a.jsx("p",{children:"Loading..."})});if(e.role!=="master_admin")return a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only Master Admins can import CSV data."})]});const R=z=>{const L=z.target.files[0];if(L){if(!L.name.endsWith(".csv")){alert("Please select a CSV file");return}s(L)}},W=async()=>{if(!r){alert("Please select a file first");return}b(!0);try{const z=await r.text(),L=Ei.parseCSV(z);if(L.length===0){alert("CSV file is empty or invalid"),b(!1);return}const O=t==="users"?Ei.validateUsers(L):Ei.validateEquipment(L);if(!O.valid){c(O),o(null),g(2),b(!1);return}const P={unique:L,duplicates:[]};o(L),c(O),h(P),g(2)}catch(z){alert("Failed to parse CSV file: "+z.message)}finally{b(!1)}},U=async()=>{if(r){b(!0),g(3),S(0);try{const z=t==="users"?await Ei.importUsers(r,p,L=>S(L)):await Ei.importEquipment(r,p,L=>S(L));C(z),g(4)}catch(z){alert("Import failed: "+z.message),g(2)}finally{b(!1),S(0)}}},_=()=>{s(null),o(null),c(null),h(null),g(1),C(null),j({skipDuplicates:!0,updateDuplicates:!1})},D=()=>{const z=t==="users"?Ei.generateUserTemplate():Ei.generateEquipmentTemplate(),L=new Blob([z],{type:"text/csv"}),O=window.URL.createObjectURL(L),P=document.createElement("a");P.href=O,P.download=`${t}_template.csv`,P.click(),window.URL.revokeObjectURL(O)};return a.jsxs("div",{className:"csv-import",children:[a.jsxs("div",{className:"import-header",children:[a.jsx("h2",{children:"CSV Import"}),a.jsx("p",{className:"subtitle",children:"Bulk import users or equipment from CSV files"})]}),m===1&&a.jsxs("div",{className:"import-step",children:[a.jsxs("div",{className:"import-type-selector",children:[a.jsxs("label",{children:[a.jsx("input",{type:"radio",value:"users",checked:t==="users",onChange:z=>n(z.target.value)}),a.jsx("span",{children:"Import Users"})]}),a.jsxs("label",{children:[a.jsx("input",{type:"radio",value:"equipment",checked:t==="equipment",onChange:z=>n(z.target.value)}),a.jsx("span",{children:"Import Equipment"})]})]}),a.jsxs("div",{className:"template-download",children:[a.jsxs("button",{onClick:D,className:"btn btn-secondary",children:[" Download ",t==="users"?"Users":"Equipment"," Template"]}),a.jsx("p",{className:"help-text",children:"Download the template CSV file to see required columns and format"})]}),a.jsxs("div",{className:"file-upload-section",children:[a.jsx("label",{htmlFor:"csv-file",className:"file-upload-label",children:r?r.name:"Choose CSV file..."}),a.jsx("input",{id:"csv-file",type:"file",accept:".csv",onChange:R,className:"file-input"})]}),a.jsx("div",{className:"import-actions",children:a.jsx("button",{onClick:W,className:"btn btn-primary",disabled:!r||y,children:y?"Processing...":"Upload and Validate"})}),a.jsxs("div",{className:"import-info",children:[a.jsxs("h3",{children:[" ",t==="users"?"User":"Equipment"," CSV Requirements"]}),t==="users"?a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Required columns:"})," first_name, surname, full_name, email, department"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Optional columns:"})," role (student/staff/admin/master_admin), year"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Valid departments:"})," Moving Image Design, Graphic Design, Illustration"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"GDPR:"})," All imports are logged and previewed before confirmation"]})]}):a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Required columns:"})," product_name, tracking_number, description"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Optional columns:"})," link_to_image, category, department, status, requires_justification"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Tracking numbers:"})," Must be unique (duplicates will be detected)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Status options:"})," available, booked, maintenance, out_of_service"]})]})]})]}),m===2&&a.jsxs("div",{className:"import-step",children:[a.jsx("h3",{children:" Validation Results"}),l&&l.errors.length>0&&a.jsxs("div",{className:"validation-errors",children:[a.jsxs("h4",{children:[" Errors (",l.errors.length,")"]}),a.jsx("ul",{children:l.errors.map((z,L)=>a.jsx("li",{className:"error-item",children:z},L))}),a.jsx("p",{className:"error-message",children:"Please fix these errors in your CSV file and try again."})]}),l&&l.warnings.length>0&&l.valid&&a.jsxs("div",{className:"validation-warnings",children:[a.jsxs("h4",{children:[" Warnings (",l.warnings.length,")"]}),a.jsx("ul",{children:l.warnings.map((z,L)=>a.jsx("li",{className:"warning-item",children:z},L))}),a.jsx("p",{className:"help-text",children:"These warnings won't stop the import, but you may want to review them."})]}),d&&l&&l.valid&&a.jsxs("div",{className:"duplicate-detection",children:[a.jsx("h4",{children:" Duplicate Detection"}),a.jsxs("div",{className:"duplicate-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-number",children:d.unique.length}),a.jsxs("span",{className:"stat-label",children:["New ",t]})]}),a.jsxs("div",{className:"stat-card warning",children:[a.jsx("span",{className:"stat-number",children:d.duplicates.length}),a.jsx("span",{className:"stat-label",children:"Duplicates found"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-number",children:i.length}),a.jsx("span",{className:"stat-label",children:"Total in CSV"})]})]}),d.duplicates.length>0&&a.jsxs("div",{className:"duplicate-list",children:[a.jsxs("h5",{children:["Duplicate ",t==="users"?"Emails":"Tracking Numbers"]}),a.jsxs("table",{className:"duplicate-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"CSV Row"}),a.jsx("th",{children:"Existing Record"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:d.duplicates.slice(0,10).map((z,L)=>a.jsxs("tr",{children:[a.jsxs("td",{children:[t==="users"?z.row.email:z.row.tracking_number,a.jsx("br",{}),a.jsx("small",{children:t==="users"?z.row.full_name:z.row.product_name})]}),a.jsxs("td",{children:["ID: ",z.existingId,a.jsx("br",{}),a.jsx("small",{children:z.existingName})]}),a.jsx("td",{children:a.jsx("span",{className:"action-badge",children:"Will be skipped"})})]},L))})]}),d.duplicates.length>10&&a.jsxs("p",{className:"help-text",children:["Showing 10 of ",d.duplicates.length," duplicates"]})]}),a.jsxs("div",{className:"import-options",children:[a.jsx("h5",{children:"Import Options"}),a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:p.skipDuplicates,onChange:z=>j({...p,skipDuplicates:z.target.checked})}),a.jsx("span",{children:"Skip duplicates (recommended)"})]}),a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:p.updateDuplicates,onChange:z=>j({...p,updateDuplicates:z.target.checked}),disabled:p.skipDuplicates}),a.jsx("span",{children:"Update existing records with CSV data ( use with caution)"})]})]})]}),a.jsxs("div",{className:"import-actions",children:[a.jsx("button",{onClick:_,className:"btn btn-secondary",children:"Cancel"}),l&&l.valid&&a.jsx("button",{onClick:U,className:"btn btn-primary",disabled:y,children:y?"Importing...":`Import ${(d==null?void 0:d.unique.length)||0} ${t}`}),l&&!l.valid&&a.jsx("button",{onClick:_,className:"btn btn-primary",children:"Try Again"})]})]}),m===3&&a.jsx("div",{className:"import-step",children:a.jsxs("div",{className:"import-progress",children:[a.jsxs("h3",{children:[" Uploading ",t,"..."]}),a.jsx("div",{className:"progress-bar-container",children:a.jsx("div",{className:"progress-bar",style:{width:`${w}%`},children:a.jsxs("span",{className:"progress-text",children:[Math.round(w),"%"]})})}),a.jsx("p",{className:"help-text",children:"Please wait while we upload and process your data."})]})}),m===4&&N&&a.jsxs("div",{className:"import-step",children:[a.jsx("h3",{children:" Import Complete!"}),a.jsxs("div",{className:"import-results",children:[a.jsxs("div",{className:"result-card success",children:[a.jsx("span",{className:"result-number",children:N.imported}),a.jsxs("span",{className:"result-label",children:["New ",t," imported"]})]}),N.updated>0&&a.jsxs("div",{className:"result-card warning",children:[a.jsx("span",{className:"result-number",children:N.updated}),a.jsxs("span",{className:"result-label",children:[t," updated"]})]}),N.skipped>0&&a.jsxs("div",{className:"result-card",children:[a.jsx("span",{className:"result-number",children:N.skipped}),a.jsxs("span",{className:"result-label",children:[t," skipped"]})]})]}),a.jsx("div",{className:"import-actions",children:a.jsx("button",{onClick:_,className:"btn btn-primary",children:"Import Another File"})})]})]})}async function c6(e=null){try{let n=(await Te.query("users")).filter(r=>r.role==="staff"||r.role==="department_admin"||r.role==="master_admin");return e&&(n=n.filter(r=>r.department===e)),n}catch(t){throw console.error("Failed to get staff:",t),t}}async function Bx(e){try{const t=await Te.findOne("users",{id:e});return(t==null?void 0:t.staff_permissions)||{can_create_bookings:!0,can_view_analytics:!1,can_add_equipment_notes:!1,can_request_access:!1,accessible_departments:[]}}catch(t){throw console.error("Failed to get staff permissions:",t),t}}async function Wu(e,t){try{return await Te.update("users",{id:e},{staff_permissions:t})}catch(n){throw console.error("Failed to update staff permissions:",n),n}}async function d6(){try{return(await Te.query("users")).filter(t=>t.role==="department_admin"||t.role==="master_admin")}catch(e){throw console.error("Failed to get admins:",e),e}}async function Hu(e,t){try{return await Te.update("users",{id:e},{admin_permissions:t})}catch(n){throw console.error("Failed to update admin permissions:",n),n}}function u6(){return{admin:{full_access:{name:"Full Access",permissions:{manage_equipment:!0,manage_users:!0,manage_bookings:!0,view_analytics:!0,export_data:!0,add_equipment_notes:!0,csv_import:!0,manage_kits:!0,accessible_departments:[]}},booking_manager:{name:"Booking Manager",permissions:{manage_equipment:!1,manage_users:!1,manage_bookings:!0,view_analytics:!0,export_data:!0,add_equipment_notes:!0,csv_import:!1,manage_kits:!1,accessible_departments:[]}},equipment_manager:{name:"Equipment Manager",permissions:{manage_equipment:!0,manage_users:!1,manage_bookings:!1,view_analytics:!0,export_data:!1,add_equipment_notes:!0,csv_import:!1,manage_kits:!0,accessible_departments:[]}},view_only:{name:"View Only",permissions:{manage_equipment:!1,manage_users:!1,manage_bookings:!1,view_analytics:!0,export_data:!1,add_equipment_notes:!1,csv_import:!1,manage_kits:!1,accessible_departments:[]}}},staff:{full_staff:{name:"Full Staff Access",permissions:{can_create_bookings:!0,can_view_analytics:!0,can_add_equipment_notes:!0,can_request_access:!0,accessible_departments:[]}},basic_staff:{name:"Basic Staff Access",permissions:{can_create_bookings:!0,can_view_analytics:!1,can_add_equipment_notes:!1,can_request_access:!0,accessible_departments:[]}}}}}async function h6(e,t,n=null,r=!0){var s;try{const i=r?((s=await Te.findOne("users",{id:e}))==null?void 0:s.admin_permissions)||{}:await Bx(e),o=i.accessible_departments||[];o.includes(t)||o.push(t);const l=i.department_access_expiry||{};n&&(l[t]={expiry:n,granted_at:new Date().toISOString()});const c={...i,accessible_departments:o,department_access_expiry:l};return r?await Hu(e,c):await Wu(e,c),c}catch(i){throw console.error("Failed to grant department access with expiry:",i),i}}async function f6(e,t,n=!0){var r;try{const s=n?((r=await Te.findOne("users",{id:e}))==null?void 0:r.admin_permissions)||{}:await Bx(e),i=(s.accessible_departments||[]).filter(c=>c!==t),o={...s.department_access_expiry};delete o[t];const l={...s,accessible_departments:i,department_access_expiry:o};return n?await Hu(e,l):await Wu(e,l),l}catch(s){throw console.error("Failed to revoke department access:",s),s}}async function Ux(e){try{return(await Te.query("users")).filter(n=>n.role==="staff"&&n.managed_department_id===e)}catch(t){throw console.error("Failed to get department staff:",t),t}}async function p6(e,t,n){try{const r={...t,modified_by:n,modified_at:new Date().toISOString()};return await Te.update("users",{id:e},{view_permissions:r})}catch(r){throw console.error("Failed to update staff view permissions:",r),r}}function $2(){return{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0}}async function W2(e,t){try{const n=await Ux(e);let r=0;for(const s of n)await Te.update("users",{id:s.id},{view_permissions:t}),r++;return r}catch(n){throw console.error("Failed to bulk update department staff:",n),n}}function m6(){const{user:e}=wr(),[t,n]=T.useState("admins"),[r,s]=T.useState([]),[i,o]=T.useState([]),[l,c]=T.useState([]),[d,h]=T.useState(!0),[m,g]=T.useState(null),[p,j]=T.useState(""),[N,C]=T.useState("all"),[y,b]=T.useState("all"),[w,S]=T.useState(!1),[R,W]=T.useState(null),[U,_]=T.useState(!1),[D,z]=T.useState(null),[L,O]=T.useState({}),{toasts:P,showToast:A,removeToast:Z}=Sn();T.useEffect(()=>{(e==null?void 0:e.role)==="master_admin"&&re()},[e,t]);const re=async()=>{h(!0);try{const[H,te,ce]=await Promise.all([d6(),c6(),ph()]);s(H),o(te.filter(ae=>ae.role==="staff")),c(ce)}catch(H){console.error("Failed to load data:",H),A("Failed to load users and permissions","error")}finally{h(!1)}},ie=async(H,te,ce=!0)=>{try{const ae=ce?r.find(Ne=>Ne.id===H):i.find(Ne=>Ne.id===H);if(!ae)return;const ue=ae[ce?"admin_permissions":"staff_permissions"]||{},xe={...ue,[te]:!ue[te]};ce?(await Hu(H,xe),s(Ne=>Ne.map(Se=>Se.id===H?{...Se,admin_permissions:xe}:Se))):(await Wu(H,xe),o(Ne=>Ne.map(Se=>Se.id===H?{...Se,staff_permissions:xe}:Se))),A(`Permission ${te} ${xe[te]?"granted":"revoked"}`,"success")}catch(ae){console.error("Failed to update permissions:",ae),A("Failed to update permissions","error")}};if((e==null?void 0:e.role)!=="master_admin")return a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only master administrators can manage permissions."})]});if(d)return a.jsx("div",{className:"loading",children:"Loading users and permissions..."});const K=[{key:"manage_equipment",label:"Manage Equipment",description:"Add, edit, and remove equipment"},{key:"manage_users",label:"Manage Users",description:"View and manage user accounts"},{key:"manage_bookings",label:"Approve Bookings",description:"Approve/deny booking requests"},{key:"view_analytics",label:"View Analytics",description:"Access analytics and reports"},{key:"export_data",label:"Export Data",description:"Export data as CSV/PDF"},{key:"add_equipment_notes",label:"Add Notes",description:"Add notes to equipment"},{key:"csv_import",label:"CSV Import",description:"Import users/equipment via CSV"},{key:"manage_kits",label:"Manage Kits",description:"Create and manage equipment kits"}],ne=[{key:"can_create_bookings",label:"Create Bookings",description:"Can create equipment bookings"},{key:"can_view_analytics",label:"View Analytics",description:"Can view department analytics"},{key:"can_add_equipment_notes",label:"Add Notes",description:"Can add notes to equipment"},{key:"can_request_access",label:"Request Access",description:"Can request cross-department access"}],pe=async(H,te,ce=!0)=>{try{const ae=u6(),ee=ce?ae.admin[te]:ae.staff[te];if(!ee){A("Invalid preset","error");return}ce?(await Hu(H,ee.permissions),s(ue=>ue.map(xe=>xe.id===H?{...xe,admin_permissions:ee.permissions}:xe))):(await Wu(H,ee.permissions),o(ue=>ue.map(xe=>xe.id===H?{...xe,staff_permissions:ee.permissions}:xe))),A(`Applied "${ee.name}" preset successfully`,"success"),S(!1)}catch(ae){console.error("Failed to apply preset:",ae),A("Failed to apply preset","error")}},oe=async(H,te,ce=!0)=>{const ae=ce?r.find(Se=>Se.id===H):i.find(Se=>Se.id===H);if(!ae)return;if(((ae[ce?"admin_permissions":"staff_permissions"]||{}).accessible_departments||[]).includes(te))z({message:`Revoke access to this department for ${ae.full_name}?`,onConfirm:async()=>{try{await f6(H,te,ce),await re(),A("Department access revoked","success"),_(!1)}catch{A("Failed to revoke access","error")}}}),_(!0);else{const Se=`${H}-${te}`,ve=L[Se];try{await h6(H,te,ve,ce),await re(),A(ve?`Department access granted until ${new Date(ve).toLocaleDateString()}`:"Department access granted (no expiry)","success"),O(Q=>{const nt={...Q};return delete nt[Se],nt})}catch{A("Failed to grant access","error")}}},E=(t==="admins"?r:i).filter(H=>{const te=p===""||H.full_name.toLowerCase().includes(p.toLowerCase())||H.email.toLowerCase().includes(p.toLowerCase()),ce=N==="all"||H.department===N,ae=y==="all"||H.role===y;return te&&ce&&ae}),q=t==="admins"?K:ne,G=t==="admins";return a.jsxs("div",{className:"admin-permissions",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h2",{children:"Staff & Admin Permissions"}),a.jsx("p",{className:"subtitle",children:"Manage access control for all staff members and admins across departments"})]}),a.jsxs("div",{className:"warning-banner",children:[" ",a.jsx("strong",{children:"Warning:"})," Permission changes take effect immediately. Only grant permissions to trusted users."]}),a.jsxs("div",{className:"view-toggle",style:{marginTop:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("button",{className:`btn ${t==="admins"?"btn-primary":"btn-secondary"}`,onClick:()=>n("admins"),children:["Admin Permissions (",r.length,")"]}),a.jsxs("button",{className:`btn ${t==="staff"?"btn-primary":"btn-secondary"}`,onClick:()=>n("staff"),style:{marginLeft:"1rem"},children:["Staff Permissions (",i.length,")"]})]}),a.jsxs("div",{className:"filters-section",style:{marginBottom:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[a.jsx("div",{style:{flex:"1 1 300px"},children:a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:p,onChange:H=>j(H.target.value),className:"input",style:{width:"100%"}})}),a.jsx("div",{style:{flex:"0 1 200px"},children:a.jsxs("select",{value:N,onChange:H=>C(H.target.value),className:"input",style:{width:"100%"},children:[a.jsx("option",{value:"all",children:"All Departments"}),l.map(H=>a.jsx("option",{value:H.name,children:H.name},H.id))]})}),a.jsx("div",{style:{flex:"0 1 200px"},children:a.jsxs("select",{value:y,onChange:H=>b(H.target.value),className:"input",style:{width:"100%"},children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"master_admin",children:"Master Admin"}),a.jsx("option",{value:"department_admin",children:"Department Admin"}),a.jsx("option",{value:"staff",children:"Staff"})]})})]}),a.jsxs("div",{className:"stats-grid",style:{marginBottom:"2rem"},children:[a.jsx("div",{className:"stat-card stat-primary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:r.length}),a.jsx("p",{children:"Total Admins"})]})}),a.jsx("div",{className:"stat-card stat-secondary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:i.length}),a.jsx("p",{children:"Total Staff"})]})}),a.jsx("div",{className:"stat-card stat-tertiary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:l.length}),a.jsx("p",{children:"Departments"})]})})]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{className:"users-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"30px"}}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Primary Department"}),q.map(H=>a.jsx("th",{style:{textAlign:"center",minWidth:"100px"},children:a.jsx("div",{style:{fontSize:"0.75rem"},children:H.label})},H.key)),a.jsx("th",{style:{textAlign:"center",minWidth:"120px"},children:"Actions"})]})}),a.jsx("tbody",{children:E.map(H=>{const ce=H[G?"admin_permissions":"staff_permissions"]||{},ae=H.role==="master_admin",ee=m===H.id;return a.jsxs(a.Fragment,{children:[a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("button",{onClick:()=>g(ee?null:H.id),className:"btn btn-sm",style:{padding:"0.25rem 0.5rem"},children:ee?"":""})}),a.jsxs("td",{children:[a.jsx("strong",{children:H.full_name}),H.id===e.id&&a.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.875rem",color:"var(--color-primary)"},children:"(You)"})]}),a.jsx("td",{children:H.email}),a.jsx("td",{children:a.jsxs("span",{className:`role-badge role-${H.role}`,children:[H.role==="master_admin"&&"Master Admin",H.role==="department_admin"&&"Department Admin",H.role==="staff"&&"Staff"]})}),a.jsx("td",{children:H.department}),q.map(ue=>a.jsx("td",{style:{textAlign:"center"},children:ae?a.jsx("span",{style:{color:"var(--color-success)",fontWeight:"bold"},children:""}):a.jsxs("label",{className:"switch",children:[a.jsx("input",{type:"checkbox",checked:ce[ue.key]||!1,onChange:()=>ie(H.id,ue.key,G),"data-testid":`permission-${H.id}-${ue.key}`}),a.jsx("span",{className:"slider"})]})},ue.key)),a.jsx("td",{style:{textAlign:"center"},children:a.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>{W(H),S(!0)},className:"btn btn-sm btn-primary",title:"Manage detailed permissions",children:"Details"}),a.jsx("button",{onClick:()=>g(ee?null:H.id),className:"btn btn-sm btn-secondary",title:"Manage department access",children:ee?"Hide":"Depts"})]})})]},H.id),ee&&a.jsx("tr",{children:a.jsx("td",{colSpan:q.length+6,style:{background:"var(--bg-secondary)",padding:"1.5rem"},children:a.jsxs("div",{children:[a.jsxs("h4",{style:{marginBottom:"1rem"},children:["Department Access for ",H.full_name]}),a.jsxs("p",{style:{fontSize:"0.875rem",marginBottom:"1rem",color:"var(--text-muted)"},children:["Grant access to additional departments beyond their primary department (",H.department,")"]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:l.map(ue=>{var Q,nt;const xe=((Q=ce.accessible_departments)==null?void 0:Q.includes(ue.id))||!1,Ne=H.department===ue.name||H.managed_department_id===ue.id&&G,Se=`${H.id}-${ue.id}`,ve=(nt=ce.department_access_expiry)==null?void 0:nt[ue.id];return a.jsxs("div",{style:{padding:"0.75rem",border:`2px solid ${Ne?"var(--color-primary)":xe?"var(--color-success)":"var(--border-color)"}`,borderRadius:"var(--radius-md)",background:Ne?"var(--color-primary-pale)":xe?"var(--color-success-pale)":"var(--bg-card)"},children:[a.jsxs("div",{style:{marginBottom:"0.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("strong",{style:{fontSize:"0.875rem"},children:ue.name}),!Ne&&a.jsxs("label",{className:"switch",style:{marginLeft:"0.5rem"},children:[a.jsx("input",{type:"checkbox",checked:xe,onChange:()=>oe(H.id,ue.id,G)}),a.jsx("span",{className:"slider"})]})]}),Ne&&a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-primary)",marginTop:"0.25rem"},children:"Home Department"}),!Ne&&xe&&(ve==null?void 0:ve.expiry)&&a.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:["Expires: ",new Date(ve.expiry).toLocaleDateString()]})]}),!Ne&&!xe&&a.jsx("input",{type:"date",placeholder:"Expiry date (optional)",value:L[Se]||"",onChange:Ye=>O(ye=>({...ye,[Se]:Ye.target.value})),className:"input",style:{fontSize:"0.75rem",padding:"0.25rem",marginTop:"0.25rem",width:"100%"},min:new Date().toISOString().split("T")[0]})]},ue.id)})})]})})})]})})})]})}),a.jsxs("div",{className:"flags-info",style:{marginTop:"2rem"},children:[a.jsxs("h3",{children:[t==="admins"?"Admin":"Staff"," Permission Descriptions"]}),a.jsx("ul",{children:q.map(H=>a.jsxs("li",{children:[a.jsxs("strong",{children:[H.label,":"]})," ",H.description]},H.key))})]}),w&&R&&a.jsx("div",{className:"modal-overlay",onClick:()=>S(!1),children:a.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),style:{maxWidth:"600px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h3",{children:["Manage Permissions: ",R.full_name]}),a.jsx("button",{onClick:()=>S(!1),className:"modal-close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{style:{marginBottom:"1.5rem"},children:a.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:[a.jsx("strong",{children:"Role:"})," ",R.role," | ",a.jsx("strong",{children:"Department:"})," ",R.department]})}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Quick Apply Preset"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.5rem"},children:G?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>pe(R.id,"full_access",!0),className:"btn btn-sm btn-primary",children:"Full Access"}),a.jsx("button",{onClick:()=>pe(R.id,"booking_manager",!0),className:"btn btn-sm btn-secondary",children:"Booking Manager"}),a.jsx("button",{onClick:()=>pe(R.id,"equipment_manager",!0),className:"btn btn-sm btn-secondary",children:"Equipment Manager"}),a.jsx("button",{onClick:()=>pe(R.id,"view_only",!0),className:"btn btn-sm btn-secondary",children:"View Only"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>pe(R.id,"full_staff",!1),className:"btn btn-sm btn-primary",children:"Full Staff"}),a.jsx("button",{onClick:()=>pe(R.id,"basic_staff",!1),className:"btn btn-sm btn-secondary",children:"Basic Staff"})]})})]}),a.jsxs("div",{children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Individual Permissions"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:q.map(H=>{const ce=R[G?"admin_permissions":"staff_permissions"]||{},ae=R.role==="master_admin";return a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)"},children:[a.jsxs("div",{children:[a.jsx("strong",{style:{fontSize:"0.875rem"},children:H.label}),a.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:H.description})]}),ae?a.jsx("span",{style:{color:"var(--color-success)",fontWeight:"bold"},children:""}):a.jsxs("label",{className:"switch",children:[a.jsx("input",{type:"checkbox",checked:ce[H.key]||!1,onChange:()=>ie(R.id,H.key,G)}),a.jsx("span",{className:"slider"})]})]},H.key)})})]}),R.permissions_updated_at&&a.jsxs("div",{style:{marginTop:"1.5rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:["Last modified: ",new Date(R.permissions_updated_at).toLocaleString(),R.permissions_updated_by&&` by ${R.permissions_updated_by}`]})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{onClick:()=>S(!1),className:"btn btn-secondary",children:"Close"})})]})}),U&&D&&a.jsx("div",{className:"modal-overlay",onClick:()=>_(!1),children:a.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),style:{maxWidth:"400px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:"Confirm Action"}),a.jsx("button",{onClick:()=>_(!1),className:"modal-close",children:""})]}),a.jsx("div",{className:"modal-body",children:a.jsx("p",{children:D.message})}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{onClick:()=>_(!1),className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:D.onConfirm,className:"btn btn-danger",children:"Confirm"})]})]})}),P.map(H=>a.jsx(kn,{message:H.message,type:H.type,onClose:()=>Z(H.id)},H.id))]})}function g6(){const{user:e}=wr(),[t,n]=T.useState([]),[r,s]=T.useState([]),[i,o]=T.useState(!1),[l,c]=T.useState(null),{toasts:d,showToast:h,removeToast:m}=Sn();T.useEffect(()=>{g()},[]);const g=async()=>{try{const[y,b]=await Promise.all([yr.getAll(),is.getAll({department_id:(e==null?void 0:e.department)||"all"})]);s(y.equipment||[]),n(b.kits||[])}catch(y){console.error("Failed to load data:",y),h("Failed to load data","error")}},p=()=>{c({name:"",description:"",department_id:(e==null?void 0:e.department)||"all",equipment_ids:[]}),o(!0)},j=async y=>{try{y.id?(await is.update(y.id,y),h("Kit updated successfully","success")):(await is.create(y),h("Kit created successfully","success")),g(),o(!1),c(null)}catch(b){h("Failed to save kit: "+b.message,"error")}},N=async y=>{if(confirm("Are you sure you want to delete this kit?"))try{await is.delete(y),h("Kit deleted successfully","success"),g()}catch(b){h("Failed to delete kit: "+b.message,"error")}},C=y=>{c(y),o(!0)};return a.jsxs("div",{className:"kit-management",children:[a.jsxs("div",{className:"page-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Equipment Kits Management"}),a.jsx("p",{className:"subtitle",children:"Create preset equipment kits that students can quickly book"})]}),a.jsx("button",{onClick:p,className:"btn btn-primary","data-testid":"create-kit-btn",children:"+ Create New Kit"})]}),t.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("h3",{children:"No Equipment Kits Yet"}),a.jsx("p",{children:"Create your first equipment kit to help students quickly book common equipment combinations."}),a.jsx("button",{onClick:p,className:"btn btn-primary",children:"Create First Kit"})]}):a.jsx("div",{style:{display:"grid",gap:"1rem"},children:t.map(y=>{const b=r.filter(w=>{var S;return(S=y.equipment_ids)==null?void 0:S.includes(w.id)});return a.jsxs("div",{style:{background:"white",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",padding:"1.5rem"},"data-testid":"kit-item",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1rem"},children:[a.jsxs("div",{children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0"},children:y.name}),a.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"var(--text-secondary)"},children:y.description}),a.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[a.jsx("span",{className:"role-badge",children:y.department==="all"?"All Departments":y.department}),a.jsxs("span",{style:{marginLeft:"1rem"},children:[b.length," item",b.length!==1?"s":""]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{onClick:()=>C(y),className:"btn btn-secondary btn-sm","data-testid":"edit-kit-btn",children:"Edit"}),a.jsx("button",{onClick:()=>N(y.id),className:"btn btn-danger btn-sm","data-testid":"delete-kit-btn",children:"Delete"})]})]}),b.length>0&&a.jsxs("div",{children:[a.jsx("h4",{style:{margin:"1rem 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600"},children:"Equipment in this kit:"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.5rem"},children:b.map(w=>a.jsxs("div",{style:{padding:"0.5rem",background:"var(--surface)",borderRadius:"var(--border-radius)",fontSize:"0.875rem"},children:[a.jsx("div",{style:{fontWeight:"600"},children:w.product_name}),a.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"0.75rem"},children:w.category})]},w.id))})]})]},y.id)})}),i&&a.jsx(v6,{kit:l,equipment:r,onSave:j,onClose:()=>{o(!1),c(null)}}),d.map(y=>a.jsx(kn,{message:y.message,type:y.type,onClose:()=>m(y.id)},y.id))]})}function v6({kit:e,equipment:t,onSave:n,onClose:r}){const[s,i]=T.useState({id:(e==null?void 0:e.id)||null,name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",department:(e==null?void 0:e.department)||"all",equipment_ids:(e==null?void 0:e.equipment_ids)||[]}),o=["all","Moving Image Design","Graphic Design","Illustration"],l=[...new Set(t.map(h=>h.category))],c=h=>{i(m=>({...m,equipment_ids:m.equipment_ids.includes(h)?m.equipment_ids.filter(g=>g!==h):[...m.equipment_ids,h]}))},d=h=>{if(h.preventDefault(),s.equipment_ids.length===0){alert("Please select at least one piece of equipment");return}n(s)};return a.jsx("div",{className:"modal-overlay",onClick:r,children:a.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),style:{maxWidth:"900px",maxHeight:"90vh",overflow:"auto"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:e!=null&&e.id?"Edit Equipment Kit":"Create New Equipment Kit"}),a.jsx("button",{onClick:r,className:"modal-close",children:""})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:d,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Kit Name *"}),a.jsx("input",{type:"text",value:s.name,onChange:h=>i({...s,name:h.target.value}),placeholder:"e.g., 'Documentary Filming Kit'",className:"form-input",required:!0,"data-testid":"kit-name-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Description *"}),a.jsx("textarea",{value:s.description,onChange:h=>i({...s,description:h.target.value}),placeholder:"Describe what this kit is for...",rows:3,required:!0,"data-testid":"kit-description-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Department Access"}),a.jsx("select",{value:s.department,onChange:h=>i({...s,department:h.target.value}),className:"form-input","data-testid":"kit-department-select",children:o.map(h=>a.jsx("option",{value:h,children:h==="all"?"All Departments":h},h))})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{children:["Select Equipment (",s.equipment_ids.length," selected) *"]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",padding:"1rem"},children:l.map(h=>{const m=t.filter(g=>g.category===h);return a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{margin:"0 0 0.75rem 0",color:"var(--text-primary)"},children:h}),a.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:m.map(g=>a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",background:s.equipment_ids.includes(g.id)?"rgba(102, 126, 234, 0.1)":"var(--surface)",borderRadius:"var(--border-radius)",cursor:"pointer",border:`1px solid ${s.equipment_ids.includes(g.id)?"var(--primary-color)":"var(--border-color)"}`},children:[a.jsx("input",{type:"checkbox",checked:s.equipment_ids.includes(g.id),onChange:()=>c(g.id),style:{width:"18px",height:"18px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:"600"},children:g.product_name}),a.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:g.description})]})]},g.id))})]},h)})})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary","data-testid":"save-kit-btn",children:e!=null&&e.id?"Update Kit":"Create Kit"})]})]})})]})})}function y6(){const{user:e}=wr(),[t,n]=T.useState([]),[r,s]=T.useState(!0),[i,o]=T.useState(!1),[l,c]=T.useState(null),[d,h]=T.useState({name:"",description:"",school:""}),{toasts:m,showToast:g,removeToast:p}=Sn(),j=(e==null?void 0:e.role)==="master_admin";T.useEffect(()=>{N()},[]);const N=async()=>{s(!0);try{const S=await Jl.getAll();n(S.departments||[])}catch(S){console.error("Failed to load departments:",S),g("Failed to load departments","error")}finally{s(!1)}},C=(S=null)=>{S?(c(S),h({name:S.name,description:S.description||"",school:S.school||""})):(c(null),h({name:"",description:"",school:""})),o(!0)},y=()=>{o(!1),c(null),h({name:"",description:"",school:""})},b=async S=>{if(S.preventDefault(),!d.name.trim()){g("Department name is required","error");return}try{l?(await Jl.update(l.id,d),g("Department updated successfully","success")):(await Jl.create(d),g("Department created successfully","success")),y(),await N()}catch(R){g(`Failed to ${l?"update":"create"} department: ${R.message}`,"error")}},w=async S=>{if(confirm("Are you sure you want to delete this department? This will affect all associated equipment and users."))try{await Jl.delete(S),g("Department deleted successfully","success"),await N()}catch(R){g("Failed to delete department: "+R.message,"error")}};return j?r?a.jsx("div",{className:"loading",children:"Loading departments..."}):a.jsxs("div",{className:"department-management",children:[a.jsxs("div",{className:"approvals-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Department Management"}),a.jsx("p",{className:"subtitle",children:"Manage departments and areas within NCAD"})]}),a.jsx("button",{onClick:()=>C(),className:"btn btn-primary","data-testid":"add-department-btn",children:"Add Department"})]}),a.jsxs("div",{className:"stats-grid",style:{marginBottom:"var(--spacing-xl)"},children:[a.jsx("div",{className:"stat-card stat-primary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:t.length}),a.jsx("p",{children:"Total Departments"})]})}),a.jsx("div",{className:"stat-card stat-secondary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:new Set(t.map(S=>S.school).filter(Boolean)).size}),a.jsx("p",{children:"Parent Schools"})]})})]}),t.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("h2",{children:"No Departments Found"}),a.jsx("p",{children:"The demo data may need to be refreshed to load the 10 NCAD departments."}),a.jsxs("div",{style:{marginTop:"var(--spacing-md)",display:"flex",gap:"var(--spacing-sm)",justifyContent:"center",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>{confirm("This will reset all demo data and reload the page. Continue?")&&(localStorage.removeItem("ncadbook_demo_data"),window.location.reload())},className:"btn btn-primary",children:" Reset Demo Data"}),a.jsx("button",{onClick:()=>C(),className:"btn btn-secondary",children:"Or Create Department Manually"})]})]}):a.jsx("div",{className:"equipment-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Parent School"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:t.map(S=>a.jsxs("tr",{"data-testid":"department-row",children:[a.jsx("td",{style:{fontWeight:"600"},children:S.name}),a.jsx("td",{children:S.description||"-"}),a.jsx("td",{children:S.school||"-"}),a.jsx("td",{children:new Date(S.created_at).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("div",{className:"action-buttons",children:[a.jsx("button",{onClick:()=>C(S),className:"btn btn-sm btn-secondary","data-testid":"edit-department-btn",children:"Edit"}),a.jsx("button",{onClick:()=>w(S.id),className:"btn btn-sm btn-danger","data-testid":"delete-department-btn",children:"Delete"})]})})]},S.id))})]})}),i&&a.jsx("div",{className:"modal-overlay",onClick:y,children:a.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),"data-testid":"department-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:l?"Edit Department":"Create Department"}),a.jsx("button",{className:"modal-close",onClick:y,children:""})]}),a.jsx("form",{onSubmit:b,children:a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"name",children:"Name *"}),a.jsx("input",{type:"text",id:"name",className:"form-input",value:d.name,onChange:S=>h({...d,name:S.target.value}),placeholder:"e.g., Communication Design",required:!0,"data-testid":"department-name-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"description",children:"Description"}),a.jsx("textarea",{id:"description",className:"form-textarea",value:d.description,onChange:S=>h({...d,description:S.target.value}),placeholder:"Brief description of this department",rows:"3","data-testid":"department-description-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"school",children:"Parent School"}),a.jsxs("select",{id:"school",className:"form-select",value:d.school,onChange:S=>h({...d,school:S.target.value}),"data-testid":"department-parent-select",children:[a.jsx("option",{value:"",children:"-- Select School --"}),a.jsx("option",{value:"School of Design",children:"School of Design"}),a.jsx("option",{value:"School of Fine Art",children:"School of Fine Art"}),a.jsx("option",{value:"School of Education",children:"School of Education"}),a.jsx("option",{value:"School of Visual Culture",children:"School of Visual Culture"}),a.jsx("option",{value:"First Year Studies",children:"First Year Studies"})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:y,className:"btn btn-secondary",children:"Cancel"}),a.jsxs("button",{type:"submit",className:"btn btn-primary","data-testid":"save-department-btn",children:[l?"Update":"Create"," Department"]})]})]})})]})}),m.map(S=>a.jsx(kn,{message:S.message,type:S.type,onClose:()=>p(S.id)},S.id))]}):a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only master administrators can manage departments."})]})}function x6(){const{user:e}=wr(),[t,n]=T.useState([]),[r,s]=T.useState([]),[i,o]=T.useState([]),[l,c]=T.useState(!0),[d,h]=T.useState([]),[m,g]=T.useState(""),[p,j]=T.useState(""),[N,C]=T.useState("all"),{toasts:y,showToast:b,removeToast:w}=Sn(),S=(e==null?void 0:e.role)==="master_admin"||(e==null?void 0:e.role)==="department_admin";T.useEffect(()=>{R()},[]);const R=async()=>{c(!0);try{const A=await Te.query("users",{role:"student"});n(A||[]);const Z=await Te.query("sub_areas")||[];s(Z);const re=await Te.query("user_sub_areas")||[];o(re)}catch(A){console.error("Failed to load data:",A),b("Failed to load data","error")}finally{c(!1)}},W=A=>i.filter(Z=>Z.user_id===A).map(Z=>r.find(re=>re.id===Z.sub_area_id)).filter(Boolean),U=A=>{h(Z=>Z.includes(A)?Z.filter(re=>re!==A):[...Z,A])},_=()=>{const A=L();d.length===A.length?h([]):h(A.map(Z=>Z.id))},D=async()=>{if(d.length===0){b("Please select at least one student","error");return}if(!m){b("Please select a department","error");return}try{const A=d.map(Z=>({user_id:Z,sub_area_id:m,assigned_by:e.id,assigned_at:new Date().toISOString()}));for(const Z of A)i.find(ie=>ie.user_id===Z.user_id&&ie.sub_area_id===Z.sub_area_id)||await Te.insert("user_sub_areas",Z);b(`Successfully assigned ${d.length} student(s) to department`,"success"),h([]),g(""),await R()}catch(A){b("Failed to assign students: "+A.message,"error")}},z=async(A,Z)=>{if(confirm("Remove this department assignment?"))try{const re=i.find(ie=>ie.user_id===A&&ie.sub_area_id===Z);re&&(await Te.delete("user_sub_areas",re.id),b("Assignment removed successfully","success"),await R())}catch(re){b("Failed to remove assignment: "+re.message,"error")}},L=()=>t.filter(A=>{var ie,K;const Z=!p||((ie=A.full_name)==null?void 0:ie.toLowerCase().includes(p.toLowerCase()))||((K=A.email)==null?void 0:K.toLowerCase().includes(p.toLowerCase())),re=N==="all"||A.department===N;return Z&&re});if(!S)return a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only administrators can manage student assignments."})]});if(l)return a.jsx("div",{className:"loading",children:"Loading students..."});const O=L(),P=[...new Set(t.map(A=>A.department).filter(Boolean))];return a.jsxs("div",{className:"student-assignment",children:[a.jsx("h2",{children:"Student Department Assignment"}),a.jsx("p",{className:"subtitle",children:"Assign students to departments for equipment access"}),a.jsxs("div",{className:"dashboard-card",style:{marginBottom:"var(--spacing-xl)"},children:[a.jsx("h3",{children:"Bulk Assignment"}),a.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"var(--spacing-lg)"},children:"Select students below and assign them to a department"}),a.jsxs("div",{style:{display:"flex",gap:"var(--spacing-md)",alignItems:"center",flexWrap:"wrap"},children:[a.jsxs("div",{className:"form-group",style:{flex:"1",minWidth:"250px",marginBottom:0},children:[a.jsx("label",{htmlFor:"bulk-sub-area",children:"Department"}),a.jsxs("select",{id:"bulk-sub-area",className:"form-select",value:m,onChange:A=>g(A.target.value),"data-testid":"bulk-sub-area-select",children:[a.jsx("option",{value:"",children:"-- Select Department --"}),r.map(A=>a.jsx("option",{value:A.id,children:A.name},A.id))]})]}),a.jsxs("button",{onClick:D,className:"btn btn-primary",disabled:d.length===0||!m,"data-testid":"bulk-assign-btn",style:{marginTop:"var(--spacing-lg)"},children:["Assign Selected (",d.length,")"]})]})]}),a.jsx("div",{className:"management-controls",style:{marginBottom:"var(--spacing-lg)"},children:a.jsxs("div",{className:"filter-controls",children:[a.jsx("input",{type:"text",className:"search-input",placeholder:"Search by name or email...",value:p,onChange:A=>j(A.target.value),"data-testid":"student-search-input"}),a.jsxs("select",{className:"form-select",value:N,onChange:A=>C(A.target.value),"data-testid":"department-filter-select",children:[a.jsx("option",{value:"all",children:"All Departments"}),P.map(A=>a.jsx("option",{value:A,children:A},A))]}),a.jsx("button",{onClick:_,className:"btn btn-secondary","data-testid":"select-all-btn",children:d.length===O.length?"Deselect All":"Select All"})]})}),a.jsxs("div",{className:"stats-grid",style:{marginBottom:"var(--spacing-xl)"},children:[a.jsx("div",{className:"stat-card stat-info",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:O.length}),a.jsx("p",{children:"Students Found"})]})}),a.jsx("div",{className:"stat-card stat-primary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:d.length}),a.jsx("p",{children:"Selected"})]})}),a.jsx("div",{className:"stat-card stat-secondary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:i.length}),a.jsx("p",{children:"Total Assignments"})]})})]}),O.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("h2",{children:"No Students Found"}),a.jsx("p",{children:"Try adjusting your search or filter criteria."})]}):a.jsx("div",{className:"users-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"40px"},children:a.jsx("input",{type:"checkbox",checked:d.length===O.length,onChange:_,"data-testid":"select-all-checkbox"})}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Current Departments"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:O.map(A=>{const Z=W(A.id);return a.jsxs("tr",{"data-testid":"student-row",children:[a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:d.includes(A.id),onChange:()=>U(A.id),"data-testid":`student-checkbox-${A.id}`})}),a.jsx("td",{style:{fontWeight:"600"},children:A.full_name}),a.jsx("td",{children:A.email}),a.jsx("td",{children:A.department||"-"}),a.jsx("td",{children:Z.length===0?a.jsx("span",{style:{color:"var(--text-muted)"},children:"Not assigned"}):a.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:Z.map(re=>a.jsxs("span",{className:"role-badge",style:{background:"var(--color-info-pale)",color:"var(--color-info)",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[re.name,a.jsx("button",{onClick:()=>z(A.id,re.id),style:{background:"none",border:"none",color:"var(--color-error)",cursor:"pointer",padding:"0 0.25rem",fontSize:"1rem",fontWeight:"bold"},title:"Remove assignment","data-testid":`remove-assignment-${A.id}-${re.id}`,children:""})]},re.id))})}),a.jsx("td",{children:a.jsx("button",{onClick:()=>{h([A.id])},className:"btn btn-sm btn-secondary","data-testid":`assign-btn-${A.id}`,children:"Assign"})})]},A.id)})})]})}),a.jsxs("div",{className:"users-stats",children:["Showing ",O.length," of ",t.length," students"]}),y.map(A=>a.jsx(kn,{message:A.message,type:A.type,onClose:()=>w(A.id)},A.id))]})}function b6(){const{user:e}=wr(),[t,n]=T.useState([]),[r,s]=T.useState([]),[i,o]=T.useState(!0),[l,c]=T.useState(!1),[d,h]=T.useState({from_sub_area_id:"",to_sub_area_id:"",expires_at:"",notes:""}),{toasts:m,showToast:g,removeToast:p}=Sn(),j=(e==null?void 0:e.role)==="master_admin"||(e==null?void 0:e.role)==="department_admin";T.useEffect(()=>{N()},[]);const N=async()=>{o(!0);try{const D=await Te.query("sub_areas")||[];n(D);const z=await Te.query("interdisciplinary_access")||[];s(z)}catch(D){console.error("Failed to load data:",D),g("Failed to load data","error")}finally{o(!1)}},C=D=>{const z=t.find(L=>L.id===D);return z?z.name:"Unknown"},y=()=>{h({from_sub_area_id:"",to_sub_area_id:"",expires_at:"",notes:""}),c(!0)},b=()=>{c(!1),h({from_sub_area_id:"",to_sub_area_id:"",expires_at:"",notes:""})},w=async D=>{if(D.preventDefault(),!d.from_sub_area_id||!d.to_sub_area_id){g("Please select both departments","error");return}if(d.from_sub_area_id===d.to_sub_area_id){g("Cannot grant access to the same department","error");return}if(r.find(L=>L.from_sub_area_id===d.from_sub_area_id&&L.to_sub_area_id===d.to_sub_area_id)){g("This access grant already exists","error");return}try{const L={...d,granted_by:e.id,granted_at:new Date().toISOString(),is_active:!0,expires_at:d.expires_at||null};await Te.insert("interdisciplinary_access",L),g("Interdisciplinary access granted successfully","success"),b(),await N()}catch(L){g("Failed to grant access: "+L.message,"error")}},S=async(D,z)=>{try{await Te.update("interdisciplinary_access",D,{is_active:!z}),g(`Access ${z?"deactivated":"activated"}`,"success"),await N()}catch(L){g("Failed to update access status: "+L.message,"error")}},R=async D=>{if(confirm("Are you sure you want to revoke this access grant?"))try{await Te.delete("interdisciplinary_access",D),g("Access grant revoked successfully","success"),await N()}catch(z){g("Failed to revoke access: "+z.message,"error")}},W=D=>D.expires_at?new Date(D.expires_at)<new Date:!1;if(!j)return a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only administrators can manage interdisciplinary access."})]});if(i)return a.jsx("div",{className:"loading",children:"Loading access grants..."});const U=r.filter(D=>D.is_active&&!W(D)),_=r.filter(D=>!D.is_active||W(D));return a.jsxs("div",{className:"interdisciplinary-access",children:[a.jsxs("div",{className:"approvals-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Interdisciplinary Access Management"}),a.jsx("p",{className:"subtitle",children:"Grant cross-departmental equipment access between departments"})]}),a.jsx("button",{onClick:y,className:"btn btn-primary","data-testid":"grant-access-btn",children:"Grant Access"})]}),a.jsxs("div",{style:{background:"var(--color-info-pale)",border:"1px solid var(--color-info)",borderRadius:"var(--radius-md)",padding:"var(--spacing-lg)",marginBottom:"var(--spacing-xl)"},children:[a.jsx("h4",{style:{margin:"0 0 var(--spacing-sm) 0",color:"var(--color-info)"},children:"How Interdisciplinary Access Works"}),a.jsx("p",{style:{margin:0,color:"var(--text-primary)"},children:"When you grant access FROM Department A TO Department B, students in Department A will be able to view and book equipment from Department B. This is useful for collaborative projects between departments."})]}),a.jsxs("div",{className:"stats-grid",style:{marginBottom:"var(--spacing-xl)"},children:[a.jsx("div",{className:"stat-card stat-success",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:U.length}),a.jsx("p",{children:"Active Grants"})]})}),a.jsx("div",{className:"stat-card stat-warning",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:_.length}),a.jsx("p",{children:"Inactive/Expired"})]})}),a.jsx("div",{className:"stat-card stat-info",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:r.length}),a.jsx("p",{children:"Total Grants"})]})})]}),a.jsxs("div",{style:{marginBottom:"var(--spacing-2xl)"},children:[a.jsx("h3",{children:"Active Access Grants"}),U.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"No active interdisciplinary access grants"})}):a.jsx("div",{className:"equipment-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"From Department"}),a.jsx("th",{children:"To Department"}),a.jsx("th",{children:"Granted"}),a.jsx("th",{children:"Expires"}),a.jsx("th",{children:"Notes"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:U.map(D=>a.jsxs("tr",{"data-testid":"access-grant-row",children:[a.jsx("td",{style:{fontWeight:"600"},children:C(D.from_sub_area_id)}),a.jsx("td",{style:{fontWeight:"600"},children:C(D.to_sub_area_id)}),a.jsx("td",{children:new Date(D.granted_at).toLocaleDateString()}),a.jsx("td",{children:D.expires_at?a.jsx("span",{style:{color:W(D)?"var(--color-error)":"var(--text-primary)"},children:new Date(D.expires_at).toLocaleDateString()}):a.jsx("span",{style:{color:"var(--text-muted)"},children:"Never"})}),a.jsx("td",{children:D.notes||"-"}),a.jsx("td",{children:a.jsx("span",{className:"status status-success",children:"Active"})}),a.jsx("td",{children:a.jsxs("div",{className:"action-buttons",children:[a.jsx("button",{onClick:()=>S(D.id,D.is_active),className:"btn btn-sm btn-secondary","data-testid":"deactivate-grant-btn",children:"Deactivate"}),a.jsx("button",{onClick:()=>R(D.id),className:"btn btn-sm btn-danger","data-testid":"revoke-grant-btn",children:"Revoke"})]})})]},D.id))})]})})]}),_.length>0&&a.jsxs("div",{children:[a.jsx("h3",{children:"Inactive/Expired Access Grants"}),a.jsx("div",{className:"equipment-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"From Department"}),a.jsx("th",{children:"To Department"}),a.jsx("th",{children:"Granted"}),a.jsx("th",{children:"Expires"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:_.map(D=>a.jsxs("tr",{style:{opacity:.7},"data-testid":"inactive-grant-row",children:[a.jsx("td",{children:C(D.from_sub_area_id)}),a.jsx("td",{children:C(D.to_sub_area_id)}),a.jsx("td",{children:new Date(D.granted_at).toLocaleDateString()}),a.jsx("td",{children:D.expires_at?new Date(D.expires_at).toLocaleDateString():"Never"}),a.jsx("td",{children:a.jsx("span",{className:"status status-secondary",children:W(D)?"Expired":"Inactive"})}),a.jsx("td",{children:a.jsxs("div",{className:"action-buttons",children:[!W(D)&&a.jsx("button",{onClick:()=>S(D.id,D.is_active),className:"btn btn-sm btn-secondary","data-testid":"activate-grant-btn",children:"Activate"}),a.jsx("button",{onClick:()=>R(D.id),className:"btn btn-sm btn-danger",children:"Delete"})]})})]},D.id))})]})})]}),l&&a.jsx("div",{className:"modal-overlay",onClick:b,children:a.jsxs("div",{className:"modal-content",onClick:D=>D.stopPropagation(),"data-testid":"grant-access-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Grant Interdisciplinary Access"}),a.jsx("button",{className:"modal-close",onClick:b,children:""})]}),a.jsx("form",{onSubmit:w,children:a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"from-sub-area",children:"From Department *"}),a.jsxs("select",{id:"from-sub-area",className:"form-select",value:d.from_sub_area_id,onChange:D=>h({...d,from_sub_area_id:D.target.value}),required:!0,"data-testid":"from-sub-area-select",children:[a.jsx("option",{value:"",children:"-- Select Department --"}),t.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]}),a.jsx("small",{style:{color:"var(--text-secondary)"},children:"Students in this department will gain access"})]}),a.jsx("div",{style:{textAlign:"center",margin:"var(--spacing-md) 0",fontSize:"var(--font-size-sm)",color:"var(--text-muted)",fontWeight:"500"},children:"will have access to"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"to-sub-area",children:"To Department (Equipment Source) *"}),a.jsxs("select",{id:"to-sub-area",className:"form-select",value:d.to_sub_area_id,onChange:D=>h({...d,to_sub_area_id:D.target.value}),required:!0,"data-testid":"to-sub-area-select",children:[a.jsx("option",{value:"",children:"-- Select Department --"}),t.map(D=>a.jsx("option",{value:D.id,disabled:D.id===d.from_sub_area_id,children:D.name},D.id))]}),a.jsx("small",{style:{color:"var(--text-secondary)"},children:"Equipment from this department will be accessible"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"expires-at",children:"Expiration Date (Optional)"}),a.jsx("input",{type:"date",id:"expires-at",className:"form-input",value:d.expires_at,onChange:D=>h({...d,expires_at:D.target.value}),min:new Date().toISOString().split("T")[0],"data-testid":"expires-at-input"}),a.jsx("small",{style:{color:"var(--text-secondary)"},children:"Leave blank for permanent access"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"notes",children:"Notes (Optional)"}),a.jsx("textarea",{id:"notes",className:"form-textarea",value:d.notes,onChange:D=>h({...d,notes:D.target.value}),placeholder:"e.g., For collaborative project between departments",rows:"3","data-testid":"notes-input"})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:b,className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary","data-testid":"confirm-grant-btn",children:"Grant Access"})]})]})})]})}),m.map(D=>a.jsx(kn,{message:D.message,type:D.type,onClose:()=>p(D.id)},D.id))]})}function _6(){const{user:e}=en(),[t,n]=T.useState([]),[r,s]=T.useState([]),[i,o]=T.useState(null),[l,c]=T.useState(""),[d,h]=T.useState(!0),[m,g]=T.useState(!1),[p,j]=T.useState(null),[N,C]=T.useState(null);T.useEffect(()=>{y()},[e]);async function y(){try{h(!0);const[U,_]=await Promise.all([ph(),Q4(e.id)]);n(U),s(_),j(null)}catch(U){console.error("Failed to load data:",U),j("Failed to load data. Please try again.")}finally{h(!1)}}async function b(U){if(U.preventDefault(),!i){j("Please select a department to request access to");return}if(!l.trim()){j("Please provide a reason for your request");return}if(i===e.managed_department_id){j("You already have access to your own department");return}if(r.find(D=>D.to_department_id===i&&D.status==="pending")){j("You already have a pending request for this department");return}try{g(!0),j(null),await J4(e.id,e.managed_department_id,i,l),C("Access request submitted successfully!"),o(null),c(""),await y(),setTimeout(()=>C(null),3e3)}catch(D){console.error("Failed to submit request:",D),j("Failed to submit request. Please try again.")}finally{g(!1)}}function w(U){switch(U){case"pending":return"badge-warning";case"approved":return"badge-success";case"denied":return"badge-error";default:return"badge-default"}}function S(U){return U?new Date(U).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}if(d)return a.jsx("div",{className:"loading",children:"Loading access requests..."});const R=t.find(U=>U.id===e.managed_department_id),W=t.filter(U=>U.id!==e.managed_department_id);return a.jsxs("div",{className:"access-requests-page",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h1",{children:"Request Equipment Access"}),a.jsxs("p",{className:"page-description",children:["You manage ",a.jsx("strong",{children:(R==null?void 0:R.name)||"your department"}),". Request access to equipment from other departments for your students."]})]}),p&&a.jsx("div",{className:"alert alert-error",children:p}),N&&a.jsx("div",{className:"alert alert-success",children:N}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{children:"Submit New Access Request"}),a.jsxs("form",{onSubmit:b,className:"access-request-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"department",children:"Select Department to Access:"}),a.jsxs("select",{id:"department",value:i||"",onChange:U=>o(U.target.value),required:!0,className:"form-select",children:[a.jsx("option",{value:"",children:"-- Select a department --"}),W.map(U=>a.jsxs("option",{value:U.id,children:[U.name," (",U.school||U.parent_department,")"]},U.id))]}),a.jsx("p",{className:"form-help",children:"Choose the department whose equipment your students need access to."})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"reason",children:"Reason for Request:"}),a.jsx("textarea",{id:"reason",value:l,onChange:U=>c(U.target.value),required:!0,rows:4,className:"form-textarea",placeholder:"Explain why your students need access to this department's equipment..."}),a.jsx("p",{className:"form-help",children:"Provide a clear justification for your request. This will be reviewed by the master admin."})]}),a.jsx("button",{type:"submit",disabled:m,className:"btn btn-primary",children:m?"Submitting...":"Submit Request"})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("h2",{children:["My Access Requests (",r.length,")"]}),r.length===0?a.jsx("p",{className:"text-muted",children:"You haven't submitted any access requests yet."}):a.jsx("div",{className:"requests-list",children:r.map(U=>{const _=t.find(D=>D.id===U.to_department_id||D.id===U.to_sub_area_id);return a.jsxs("div",{className:"request-item",children:[a.jsxs("div",{className:"request-header",children:[a.jsx("h3",{children:(_==null?void 0:_.name)||"Unknown Department"}),a.jsx("span",{className:`badge ${w(U.status)}`,children:U.status.toUpperCase()})]}),a.jsxs("div",{className:"request-details",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Reason:"})," ",U.reason]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Requested:"})," ",S(U.requested_at)]}),U.status!=="pending"&&a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Reviewed:"})," ",S(U.reviewed_at)]}),U.notes&&a.jsxs("p",{children:[a.jsx("strong",{children:"Admin Notes:"})," ",U.notes]})]})]})]},U.id)})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{children:"Browse Other Departments"}),a.jsx("p",{className:"text-muted",children:"View equipment from other departments (read-only). Submit a request to gain booking access."}),a.jsx("div",{className:"sub-areas-grid",children:otherSubAreas.map(U=>a.jsxs("div",{className:"sub-area-card",children:[a.jsx("h3",{children:U.name}),a.jsx("p",{className:"text-small text-muted",children:U.description}),a.jsxs("p",{className:"text-small",children:[a.jsx("strong",{children:"Department:"})," ",U.parent_department]}),(()=>{const _=r.find(D=>D.to_sub_area_id===U.id);return _?a.jsxs("p",{className:"text-small",children:[a.jsx("strong",{children:"Request Status:"})," ",a.jsx("span",{className:`badge ${w(_.status)}`,children:_.status})]}):null})()]},U.id))})]})]})}function w6(){const{user:e}=en(),[t,n]=T.useState([]),[r,s]=T.useState([]),[i,o]=T.useState([]),[l,c]=T.useState("pending"),[d,h]=T.useState(!0),[m,g]=T.useState(null),[p,j]=T.useState(""),[N,C]=T.useState(null),[y,b]=T.useState(null),[w,S]=T.useState(null);T.useEffect(()=>{R()},[]);async function R(){try{h(!0);const[P,A,Z]=await Promise.all([X4(),ph(),Te.query("users",{role:"department_admin"})]);n(P),s(A),o(Z),b(null)}catch(P){console.error("Failed to load data:",P),b("Failed to load data. Please try again.")}finally{h(!1)}}async function W(P){if(confirm("Are you sure you want to approve this request? This will create an interdisciplinary access grant."))try{g(P),b(null),await e3(P,e.id),S("Request approved successfully! Interdisciplinary access grant has been created."),await R(),setTimeout(()=>S(null),3e3)}catch(A){console.error("Failed to approve request:",A),b(A.message||"Failed to approve request. Please try again.")}finally{g(null)}}async function U(P){if(!p.trim()){b("Please provide a reason for denying this request");return}try{g(P),b(null),await t3(P,e.id,p),S("Request denied successfully."),C(null),j(""),await R(),setTimeout(()=>S(null),3e3)}catch(A){console.error("Failed to deny request:",A),b(A.message||"Failed to deny request. Please try again.")}finally{g(null)}}function _(P){C(P),j(""),b(null)}function D(P){switch(P){case"pending":return"badge-warning";case"approved":return"badge-success";case"denied":return"badge-error";default:return"badge-default"}}function z(P){return P?new Date(P).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}if(d)return a.jsx("div",{className:"loading",children:"Loading access requests..."});const L=l==="all"?t:t.filter(P=>P.status===l),O=t.filter(P=>P.status==="pending").length;return a.jsxs("div",{className:"manage-access-requests-page",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h1",{children:"Manage Access Requests"}),a.jsxs("p",{className:"page-description",children:["Review and approve access requests from department admins.",O>0&&a.jsxs("span",{className:"badge badge-warning ml-2",children:[O," pending"]})]})]}),y&&a.jsx("div",{className:"alert alert-error",children:y}),w&&a.jsx("div",{className:"alert alert-success",children:w}),a.jsxs("div",{className:"filter-tabs",children:[a.jsxs("button",{className:`tab ${l==="pending"?"active":""}`,onClick:()=>c("pending"),children:["Pending (",t.filter(P=>P.status==="pending").length,")"]}),a.jsxs("button",{className:`tab ${l==="approved"?"active":""}`,onClick:()=>c("approved"),children:["Approved (",t.filter(P=>P.status==="approved").length,")"]}),a.jsxs("button",{className:`tab ${l==="denied"?"active":""}`,onClick:()=>c("denied"),children:["Denied (",t.filter(P=>P.status==="denied").length,")"]}),a.jsxs("button",{className:`tab ${l==="all"?"active":""}`,onClick:()=>c("all"),children:["All (",t.length,")"]})]}),a.jsx("div",{className:"requests-list",children:L.length===0?a.jsx("div",{className:"card",children:a.jsxs("p",{className:"text-muted text-center",children:["No ",l!=="all"&&l," requests found."]})}):L.map(P=>{const A=r.find(K=>K.id===P.from_sub_area_id),Z=r.find(K=>K.id===P.to_sub_area_id),re=i.find(K=>K.id===P.requesting_admin_id),ie=P.status==="pending";return a.jsxs("div",{className:"card request-card",children:[a.jsxs("div",{className:"request-header",children:[a.jsxs("div",{className:"request-title",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"text-primary",children:A==null?void 0:A.name}),"  ",a.jsx("span",{className:"text-secondary",children:Z==null?void 0:Z.name})]}),a.jsx("span",{className:`badge ${D(P.status)}`,children:P.status.toUpperCase()})]}),a.jsxs("div",{className:"request-meta",children:[a.jsxs("p",{className:"text-small text-muted",children:["Requested by: ",a.jsx("strong",{children:re==null?void 0:re.full_name})," (",re==null?void 0:re.email,")"]}),a.jsxs("p",{className:"text-small text-muted",children:["Date: ",z(P.requested_at)]})]})]}),a.jsxs("div",{className:"request-body",children:[a.jsx("p",{children:a.jsx("strong",{children:"Reason:"})}),a.jsx("p",{className:"reason-text",children:P.reason}),P.status!=="pending"&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsxs("p",{className:"text-small text-muted",children:["Reviewed: ",z(P.reviewed_at)]}),P.notes&&a.jsxs(a.Fragment,{children:[a.jsx("p",{children:a.jsx("strong",{children:"Admin Notes:"})}),a.jsx("p",{className:"notes-text",children:P.notes})]})]})]}),ie&&a.jsxs("div",{className:"request-actions",children:[a.jsx("button",{onClick:()=>W(P.id),disabled:m===P.id,className:"btn btn-success",children:m===P.id?"Processing...":"Approve"}),a.jsx("button",{onClick:()=>_(P.id),disabled:m===P.id,className:"btn btn-error",children:"Deny"})]})]},P.id)})}),N&&a.jsx("div",{className:"modal-overlay",onClick:()=>C(null),children:a.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[a.jsx("h2",{children:"Deny Access Request"}),a.jsx("p",{children:"Please provide a reason for denying this request:"}),a.jsx("textarea",{value:p,onChange:P=>j(P.target.value),rows:4,className:"form-textarea",placeholder:"Explain why this request is being denied...",autoFocus:!0}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:()=>U(N),disabled:!p.trim()||m===N,className:"btn btn-error",children:m===N?"Denying...":"Deny Request"}),a.jsx("button",{onClick:()=>C(null),className:"btn btn-secondary",children:"Cancel"})]})]})})]})}function j6(){const{user:e}=en(),[t,n]=T.useState([]),[r,s]=T.useState([]),[i,o]=T.useState(!0),[l,c]=T.useState(""),[d,h]=T.useState(null),[m,g]=T.useState(null),{toasts:p,showToast:j,removeToast:N}=Sn();T.useEffect(()=>{C()},[e]),T.useEffect(()=>{if(l.trim()){const _=l.toLowerCase(),D=t.filter(z=>z.full_name.toLowerCase().includes(_)||z.email.toLowerCase().includes(_));s(D)}else s(t)},[l,t]);const C=async()=>{o(!0);try{const _=e.managed_department_id;if(!_){j("You are not assigned to manage a department","error");return}const D=await Ux(_);n(D),s(D)}catch(_){console.error("Failed to load staff:",_),j("Failed to load staff members","error")}finally{o(!1)}},y=_=>{if(d===_)h(null),g(null);else{h(_);const D=t.find(z=>z.id===_);g((D==null?void 0:D.view_permissions)||$2())}},b=_=>{g(D=>({...D,[_]:!D[_]}))},w=async _=>{try{await p6(_,m,e.email),j("Permissions updated successfully","success"),await C(),h(null),g(null)}catch(D){console.error("Failed to update permissions:",D),j("Failed to update permissions","error")}},S=async()=>{if(window.confirm("Enable all permissions for all staff in your department? This cannot be undone."))try{const _={can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!0,can_export_data:!0,can_request_access:!0,email_notifications:!0,modified_by:e.email,modified_at:new Date().toISOString()};await W2(e.managed_department_id,_),j("All staff permissions enabled","success"),await C()}catch(_){console.error("Failed to bulk update:",_),j("Failed to update all staff permissions","error")}},R=async()=>{if(window.confirm("Reset all staff permissions to defaults? This cannot be undone."))try{const _=$2();await W2(e.managed_department_id,{..._,modified_by:e.email,modified_at:new Date().toISOString()}),j("All staff permissions reset to defaults","success"),await C()}catch(_){console.error("Failed to reset permissions:",_),j("Failed to reset permissions","error")}},W=_=>_?Object.entries(_).filter(([D,z])=>D.startsWith("can_")&&z===!0).length:0,U=_=>_?new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return i?a.jsx("div",{className:"loading",children:"Loading staff members..."}):a.jsxs("div",{className:"department-staff-permissions",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h1",{children:"Manage Staff Permissions"}),a.jsx("p",{className:"subtitle",children:"Control what your department staff can see and do"})]}),a.jsxs("div",{className:"alert alert-warning",style:{marginBottom:"1.5rem"},children:[a.jsx("strong",{children:"Department Restriction:"})," You can only manage staff in YOUR department (",e.department,")"]}),a.jsxs("div",{className:"actions-bar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",gap:"1rem",flexWrap:"wrap"},children:[a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:l,onChange:_=>c(_.target.value),className:"search-input",style:{flex:"1",minWidth:"250px",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"}}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{onClick:S,className:"btn btn-primary btn-sm",children:"Enable All"}),a.jsx("button",{onClick:R,className:"btn btn-secondary btn-sm",children:"Reset to Default"})]})]}),r.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"No staff members found in your department."})}):a.jsx("div",{className:"staff-table-container",children:a.jsxs("table",{className:"staff-permissions-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Staff Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Active Permissions"}),a.jsx("th",{children:"Last Modified"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map(_=>{var D,z;return a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:d===_.id?"expanded":"",children:[a.jsxs("td",{children:[a.jsx("strong",{children:_.full_name}),a.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:_.role==="staff"?"Staff Member":_.role})]}),a.jsx("td",{children:_.email}),a.jsx("td",{children:a.jsxs("span",{className:"badge badge-info",children:[W(_.view_permissions)," / 8 enabled"]})}),a.jsxs("td",{children:[a.jsx("div",{style:{fontSize:"0.9rem"},children:U((D=_.view_permissions)==null?void 0:D.modified_at)}),((z=_.view_permissions)==null?void 0:z.modified_by)&&a.jsxs("div",{style:{fontSize:"0.8rem",color:"#666"},children:["by ",_.view_permissions.modified_by]})]}),a.jsx("td",{children:a.jsx("button",{onClick:()=>y(_.id),className:"btn btn-sm btn-secondary",children:d===_.id?"Close":"Edit Permissions"})})]},_.id),d===_.id&&m&&a.jsx("tr",{className:"permissions-editor-row",children:a.jsx("td",{colSpan:"5",children:a.jsxs("div",{className:"permissions-editor",children:[a.jsxs("h3",{children:["Edit Permissions for ",_.full_name]}),a.jsxs("div",{className:"permissions-grid",children:[a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_view_catalog||!1,onChange:()=>b("can_view_catalog")}),a.jsxs("span",{children:[a.jsx("strong",{children:"View Equipment Catalog"}),a.jsx("small",{children:"Browse available equipment"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_create_bookings||!1,onChange:()=>b("can_create_bookings")}),a.jsxs("span",{children:[a.jsx("strong",{children:"Create Bookings"}),a.jsx("small",{children:"Book equipment for projects"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_cancel_bookings||!1,onChange:()=>b("can_cancel_bookings")}),a.jsxs("span",{children:[a.jsx("strong",{children:"Cancel Own Bookings"}),a.jsx("small",{children:"Cancel their own bookings"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_view_history||!1,onChange:()=>b("can_view_history")}),a.jsxs("span",{children:[a.jsx("strong",{children:"View Booking History"}),a.jsx("small",{children:"Access past bookings"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_view_analytics||!1,onChange:()=>b("can_view_analytics")}),a.jsxs("span",{children:[a.jsx("strong",{children:"View Analytics Dashboard"}),a.jsx("small",{children:"Read-only statistics access"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_export_data||!1,onChange:()=>b("can_export_data")}),a.jsxs("span",{children:[a.jsx("strong",{children:"Export Own Booking Data"}),a.jsx("small",{children:"Download CSV reports"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_request_access||!1,onChange:()=>b("can_request_access")}),a.jsxs("span",{children:[a.jsx("strong",{children:"Request Interdepartmental Access"}),a.jsx("small",{children:"Request access to other departments"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.email_notifications||!1,onChange:()=>b("email_notifications")}),a.jsxs("span",{children:[a.jsx("strong",{children:"Receive Email Notifications"}),a.jsx("small",{children:"Get booking status updates"})]})]})]}),a.jsxs("div",{className:"permissions-actions",style:{marginTop:"1rem",display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:()=>{h(null),g(null)},className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:()=>w(_.id),className:"btn btn-primary",children:"Save Permissions"})]})]})})})]})})})]})}),p.map(_=>a.jsx(kn,{message:_.message,type:_.type,onClose:()=>N(_.id)},_.id)),a.jsx("style",{jsx:!0,children:`
        .department-staff-permissions {
          padding: 2rem;
          max-width: 1400px;
          margin: 0 auto;
        }

        .page-header {
          margin-bottom: 2rem;
        }

        .page-header h1 {
          margin-bottom: 0.5rem;
        }

        .subtitle {
          color: #666;
          font-size: 1rem;
        }

        .staff-table-container {
          background: white;
          border-radius: 8px;
          overflow: hidden;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .staff-permissions-table {
          width: 100%;
          border-collapse: collapse;
        }

        .staff-permissions-table th {
          background: #f5f5f5;
          padding: 1rem;
          text-align: left;
          font-weight: 600;
          border-bottom: 2px solid #ddd;
        }

        .staff-permissions-table td {
          padding: 1rem;
          border-bottom: 1px solid #eee;
        }

        .staff-permissions-table tbody tr:hover {
          background: #f9f9f9;
        }

        .staff-permissions-table tbody tr.expanded {
          background: #f0f7ff;
        }

        .permissions-editor-row {
          background: white !important;
        }

        .permissions-editor {
          padding: 2rem;
          background: #f9f9f9;
          border: 2px solid #e0e0e0;
          border-radius: 8px;
        }

        .permissions-editor h3 {
          margin-bottom: 1.5rem;
          color: #333;
        }

        .permissions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 1rem;
          margin-bottom: 1rem;
        }

        .permission-item {
          display: flex;
          align-items: flex-start;
          gap: 0.75rem;
          padding: 1rem;
          background: white;
          border: 1px solid #ddd;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.2s;
        }

        .permission-item:hover {
          border-color: #007bff;
          box-shadow: 0 2px 8px rgba(0,123,255,0.1);
        }

        .permission-item input[type="checkbox"] {
          margin-top: 0.25rem;
          width: 18px;
          height: 18px;
          cursor: pointer;
        }

        .permission-item span {
          flex: 1;
        }

        .permission-item strong {
          display: block;
          margin-bottom: 0.25rem;
          color: #333;
        }

        .permission-item small {
          display: block;
          color: #666;
          font-size: 0.875rem;
        }

        .badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 12px;
          font-size: 0.875rem;
          font-weight: 600;
        }

        .badge-info {
          background: #e3f2fd;
          color: #1976d2;
        }

        .alert {
          padding: 1rem;
          border-radius: 6px;
          border-left: 4px solid;
        }

        .alert-warning {
          background: #fff3cd;
          border-color: #ffc107;
          color: #856404;
        }

        .empty-state {
          text-align: center;
          padding: 3rem;
          color: #666;
        }

        @media (max-width: 768px) {
          .department-staff-permissions {
            padding: 1rem;
          }

          .permissions-grid {
            grid-template-columns: 1fr;
          }

          .actions-bar {
            flex-direction: column;
            align-items: stretch !important;
          }

          .search-input {
            width: 100% !important;
          }
        }
      `})]})}function N6(){const{user:e}=en(),[t,n]=T.useState([]),[r,s]=T.useState(!0),[i,o]=T.useState({}),{toasts:l,showToast:c,removeToast:d}=Sn(),[h,m]=T.useState({}),[g,p]=T.useState(!1),j=["Communication Design","Moving Image Design","Illustration","Fashion Design","Fine Art","Visual Culture"];T.useEffect(()=>{N(),C()},[]);const N=async()=>{s(!0);try{const _=await n3();n(_)}catch(_){console.error("Failed to load system settings:",_),c("Failed to load system settings","error")}finally{s(!1)}},C=()=>{const _=localStorage.getItem("ncadbook_department_access");if(_)m(JSON.parse(_));else{const D={};j.forEach(z=>{D[z]=[]}),m(D)}},y=_=>{localStorage.setItem("ncadbook_department_access",JSON.stringify(_)),m(_)},b=(_,D)=>{const z=h[_]||[],L=z.includes(D),O={...h,[_]:L?z.filter(P=>P!==D):[...z,D]};y(O),c(`${_} ${L?"removed from":"granted access to"} ${D} equipment`,"success")},w=async(_,D)=>{o({...i,[_]:!0});try{const z=!D;await r3(_,z,e.id),n(t.map(L=>L.key===_?{...L,value:z,modified_by:e.id,modified_at:new Date().toISOString()}:L)),c("Setting updated successfully","success")}catch(z){console.error("Failed to update setting:",z),c("Failed to update setting","error")}finally{o({...i,[_]:!1})}},S=_=>({cross_department_browsing_enabled:"Cross-Department Equipment Browsing",cross_department_booking_enabled:"Cross-Department Equipment Booking",cross_department_approval_required:"Cross-Department Approval Required",staff_cross_department_requests_enabled:"Staff Cross-Department Requests",equipment_kits_enabled:"Equipment Kits",room_bookings_visible_staff:"Room Bookings - Staff Portal",room_bookings_visible_dept_admin:"Room Bookings - Department Admin Portal",room_bookings_enabled:"Room Bookings System"})[_]||_,R=(_,D)=>({cross_department_browsing_enabled:"When enabled, students can browse and view equipment from departments other than their own. A department filter will appear in the equipment browse page.",cross_department_booking_enabled:"Allow students to book equipment from other departments. This setting works in conjunction with browsing and requires department admin approval unless auto-approval is enabled.",cross_department_approval_required:"When enabled, all cross-department bookings require explicit approval from the equipment's department admin. When disabled, bookings are auto-approved if the equipment is available.",staff_cross_department_requests_enabled:"Allow staff members to request equipment from other departments for workshops, projects, or special events.",equipment_kits_enabled:"Allow department admins to create equipment kits (bundles) that students can book as a single unit.",room_bookings_visible_staff:"Show room booking functionality in the Staff portal. Staff can view, create, and manage room bookings for their department.",room_bookings_visible_dept_admin:"Show room booking functionality in the Department Admin portal. Admins can view, approve, and manage room bookings.",room_bookings_enabled:"Master toggle for the entire room bookings system. When disabled, room bookings are hidden from all portals."})[_]||D,W=_=>({cross_department_browsing_enabled:{enabled:"Students will see a department dropdown to browse all equipment across NCAD. Department admins can control booking permissions.",disabled:"Students can only view equipment from their own department."},cross_department_booking_enabled:{enabled:"Students can request equipment from other departments. Booking availability is controlled by department admins.",disabled:"Students can only book equipment from their own department, even if browsing is enabled."},cross_department_approval_required:{enabled:'All cross-department bookings go to "pending" status and require explicit department admin approval.',disabled:"Cross-department bookings are auto-approved if equipment is available (still subject to department admin access control)."},staff_cross_department_requests_enabled:{enabled:"Staff can create cross-department equipment requests with smart routing based on availability.",disabled:"Staff cannot request equipment from other departments."},equipment_kits_enabled:{enabled:"Department admins can create equipment kits, students can book entire kits with auto-booking of individual items.",disabled:"Kit functionality is hidden from all users."},room_bookings_visible_staff:{enabled:"Room Bookings tab appears in Staff portal. Staff can create and manage room bookings.",disabled:"Room bookings are hidden from Staff portal, even if the system is enabled."},room_bookings_visible_dept_admin:{enabled:"Room Bookings section appears in Department Admin portal with approval and management features.",disabled:"Room bookings are hidden from Department Admin portal, even if the system is enabled."},room_bookings_enabled:{enabled:"Room bookings system is active. Visibility in portals is controlled by individual portal settings.",disabled:"Room bookings system is completely disabled across all portals."}})[_]||{};if(r)return a.jsxs("div",{className:"system-settings",children:[a.jsx("h2",{children:"System Settings"}),a.jsx("div",{className:"loading-state",children:a.jsx("p",{children:"Loading system settings..."})})]});const U=()=>{confirm("This will reset all demo data including the new system settings. Continue?")&&(localStorage.removeItem("ncadbook_demo_data"),window.location.reload())};return a.jsxs("div",{className:"system-settings",children:[a.jsxs("div",{className:"settings-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"System Settings"}),a.jsx("p",{className:"settings-subtitle",children:"Global configuration for the NCAD Equipment Booking System. Changes take effect immediately for all users."})]}),a.jsx("button",{onClick:U,className:"btn-reset-demo",title:"Reset demo data to load new settings",children:" Reset Demo Data"})]}),a.jsx("div",{className:"settings-list",children:t.map(_=>{const D=W(_.key),z=i[_.key],L=_.key==="cross_department_browsing_enabled",O=_.value===!0||_.value==="true";return a.jsxs("div",{className:"setting-card",children:[a.jsxs("div",{className:"setting-header",children:[a.jsxs("div",{className:"setting-info",children:[a.jsx("h3",{children:S(_.key)}),a.jsx("p",{className:"setting-description",children:R(_.key,_.description)})]}),a.jsxs("div",{className:"setting-toggle",children:[a.jsxs("label",{className:"toggle-switch",children:[a.jsx("input",{type:"checkbox",checked:_.value===!0||_.value==="true",onChange:()=>w(_.key,_.value),disabled:z}),a.jsx("span",{className:"toggle-slider"})]}),a.jsx("span",{className:`toggle-label ${_.value?"enabled":"disabled"}`,children:z?"Saving...":_.value?"Enabled":"Disabled"})]})]}),D&&a.jsx("div",{className:"setting-impact",children:a.jsxs("div",{className:`impact-message ${_.value?"active":"inactive"}`,children:[a.jsx("strong",{children:_.value?" Active:":" Inactive:"}),a.jsx("span",{children:_.value?D.enabled:D.disabled})]})}),L&&O&&a.jsxs("div",{className:"department-access-matrix",children:[a.jsxs("div",{className:"matrix-header",children:[a.jsx("h4",{children:"Department Equipment Access Control"}),a.jsx("p",{children:"Configure which departments can access equipment from other departments"})]}),a.jsx("div",{className:"matrix-table-wrapper",children:a.jsxs("table",{className:"access-matrix-table",children:[a.jsxs("thead",{children:[a.jsxs("tr",{children:[a.jsx("th",{className:"department-column",children:"Requesting Department"}),a.jsx("th",{colSpan:j.length,className:"access-column-header",children:"Can Access Equipment From"})]}),a.jsxs("tr",{children:[a.jsx("th",{}),j.map(P=>a.jsx("th",{className:"target-dept",children:P.split(" ")[0]},P))]})]}),a.jsx("tbody",{children:j.map(P=>a.jsxs("tr",{children:[a.jsx("td",{className:"requesting-dept-name",children:P}),j.map(A=>{var ie;const Z=P===A,re=(ie=h[P])==null?void 0:ie.includes(A);return a.jsx("td",{className:"access-cell",children:Z?a.jsx("span",{className:"own-dept-indicator",title:"Own department - always has access",children:""}):a.jsxs("label",{className:"access-checkbox",children:[a.jsx("input",{type:"checkbox",checked:re||!1,onChange:()=>b(P,A),title:`Allow ${P} to access ${A} equipment`}),a.jsx("span",{className:"checkmark"})]})},A)})]},P))})]})}),a.jsxs("div",{className:"matrix-legend",children:[a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-icon own",children:""}),a.jsx("span",{children:"Own department (always has access)"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-icon checked",children:""}),a.jsx("span",{children:"Has access to equipment"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-icon unchecked",children:""}),a.jsx("span",{children:"No access"})]})]})]}),_.modified_at&&a.jsx("div",{className:"setting-metadata",children:a.jsxs("small",{children:["Last modified: ",new Date(_.modified_at).toLocaleString()]})})]},_.key)})}),a.jsxs("div",{className:"settings-warning",children:[a.jsx("h4",{children:" Important Notes"}),a.jsxs("div",{className:"settings-info-sections",children:[a.jsxs("div",{className:"info-section",children:[a.jsx("h5",{children:"Cross-Department Equipment Access"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Browsing:"})," Allows students to ",a.jsx("em",{children:"view"})," equipment from all departments via a dropdown filter."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Booking:"})," Allows students to ",a.jsx("em",{children:"request bookings"})," for equipment from other departments."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Approval:"})," Controls whether cross-department bookings are auto-approved or require manual approval."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Department Control:"})," Department admins can grant/revoke individual student access via the Cross-Department Access management page."]})]})]}),a.jsxs("div",{className:"info-section",children:[a.jsx("h5",{children:"Room Bookings Visibility"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Master Toggle:"}),' The "Room Bookings System" setting controls the entire feature across all portals.']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Staff Portal:"})," When enabled, staff can view and create room bookings for their department."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Dept Admin Portal:"})," When enabled, department admins can approve, manage, and view all room bookings."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Recommended:"})," Enable master toggle first, then selectively enable for each portal as needed."]})]})]}),a.jsxs("div",{className:"info-section",children:[a.jsx("h5",{children:"Other Settings"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Staff Requests:"})," All cross-department requests require department admin approval before equipment becomes accessible."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Equipment Kits:"})," Kits are department-specific. Students can only see and book kits from their own department."]})]})]})]})]}),l.map(_=>a.jsx(kn,{message:_.message,type:_.type,onClose:()=>d(_.id)},_.id))]})}const H2=[{id:1,feature_key:"role_view_only_staff",feature_name:"View-Only Staff",description:"Read-only access to equipment catalog for teaching faculty",is_enabled:!0,created_at:"2024-03-01"},{id:2,feature_key:"role_accounts_officer",feature_name:"Accounts Officer",description:"Financial reporting, cost analysis, and budget tracking",is_enabled:!0,created_at:"2024-03-01"},{id:3,feature_key:"role_payroll_coordinator",feature_name:"Payroll Coordinator",description:"Staff cost center allocations and payroll data exports",is_enabled:!0,created_at:"2024-03-01"},{id:4,feature_key:"role_it_support_technician",feature_name:"IT Support Technician",description:"Equipment management, system logs, and technical functions",is_enabled:!0,created_at:"2024-03-01"},{id:5,feature_key:"role_budget_manager",feature_name:"Budget Manager",description:"Budget tracking, cost forecasting, and financial planning",is_enabled:!0,created_at:"2024-03-01"},{id:6,feature_key:"feature_financial_management",feature_name:"Financial Management Module",description:"Equipment costs, depreciation tracking, and financial reports",is_enabled:!0,created_at:"2024-03-01",metadata:{components:["Cost tracking","Depreciation","TCO calculations"]}},{id:7,feature_key:"feature_payroll_tracking",feature_name:"Payroll Tracking Module",description:"Staff allocations, cost centers, and payroll exports",is_enabled:!0,created_at:"2024-03-01",metadata:{components:["Cost centers","Staff allocations","Payroll exports"]}},{id:8,feature_key:"feature_it_asset_lifecycle",feature_name:"IT Asset Lifecycle Module",description:"Equipment lifecycle management and system logging",is_enabled:!0,created_at:"2024-03-01",metadata:{components:["Asset tracking","Maintenance logs","System diagnostics"]}},{id:9,feature_key:"feature_budget_analytics",feature_name:"Budget Analytics Module",description:"Budget forecasting, variance tracking, and spending analysis",is_enabled:!0,created_at:"2024-03-01",metadata:{components:["Budget forecasting","Variance tracking","Trend analysis"]}}];function S6(){const{user:e}=en(),[t,n]=T.useState(H2),[r,s]=T.useState(!1),[i,o]=T.useState({view_only_staff:1,accounts_officer:1,payroll_coordinator:1,it_support_technician:1,budget_manager:1}),[l,c]=T.useState([]),{toasts:d,showToast:h,removeToast:m}=Sn(),g=()=>{n(H2)},p=(R,W)=>{const U=t.find(z=>z.feature_key===R),_=W?"disable":"enable";if(W){const z=`Disable "${U.feature_name}"?

This will immediately block access for all users with this role/feature.`;if(!window.confirm(z))return}const D=t.map(z=>z.feature_key===R?{...z,is_enabled:!W,updated_at:new Date().toISOString()}:z);n(D),h(`${U.feature_name} ${_}d successfully (Demo Mode)`,"success")},j=()=>{if(!window.confirm(`Disable ALL advanced roles?

This will immediately disable View-Only Staff, Accounts Officer, Payroll Coordinator, IT Support, and Budget Manager roles.`))return;const R=t.filter(U=>U.feature_key.startsWith("role_")&&!["role_student","role_general_admin","role_master_admin"].includes(U.feature_key)).map(U=>U.feature_key),W=t.map(U=>R.includes(U.feature_key)?{...U,is_enabled:!1,updated_at:new Date().toISOString()}:U);n(W),h("All advanced roles disabled (Demo Mode)","success")},N=R=>({role_view_only_staff:"",role_accounts_officer:"",role_payroll_coordinator:"",role_it_support_technician:"",role_budget_manager:"",feature_financial_management:"",feature_payroll_tracking:"",feature_it_asset_lifecycle:"",feature_budget_analytics:""})[R]||"",C=R=>({role_accounts_officer:"feature_financial_management",role_payroll_coordinator:"feature_payroll_tracking",role_it_support_technician:"feature_it_asset_lifecycle",role_budget_manager:"feature_budget_analytics"})[R],y=R=>{const W=C(R);if(!W)return!0;const U=t.find(_=>_.feature_key===W);return(U==null?void 0:U.is_enabled)||!1};if(r)return a.jsx("div",{className:"loading",children:"Loading role management..."});if(t.length===0)return a.jsxs("div",{className:"role-management-error",children:[a.jsx("h2",{children:" Database Connection Error"}),a.jsx("p",{children:"Unable to load feature flags from Supabase."}),a.jsxs("div",{className:"error-instructions",children:[a.jsx("h3",{children:"To fix this:"}),a.jsxs("ol",{children:[a.jsx("li",{children:"Open your Supabase project dashboard"}),a.jsx("li",{children:"Go to Project Settings  API"}),a.jsx("li",{children:"Copy your Project URL and anon key"}),a.jsxs("li",{children:["Update ",a.jsx("code",{children:".env.local"})," with your credentials"]}),a.jsxs("li",{children:["Restart the dev server (",a.jsx("code",{children:"npm run dev"}),")"]})]}),a.jsx("p",{className:"check-console",children:"Check the browser console for detailed errors."})]})]});const b=t.filter(R=>R.feature_key.startsWith("role_")),w=t.filter(R=>R.feature_key.startsWith("feature_")),S=t.filter(R=>R.is_enabled).length;return a.jsxs("div",{className:"role-management",children:[a.jsxs("div",{className:"role-management-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:" Role Management"}),a.jsx("p",{className:"subtitle",children:"Activate/deactivate advanced user roles and feature modules. Test each role in demo portals."})]}),a.jsxs("div",{className:"header-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-value",children:S}),a.jsx("div",{className:"stat-label",children:"Features Enabled"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-value",children:Object.keys(i).length}),a.jsx("div",{className:"stat-label",children:"Active Roles"})]})]})]}),a.jsxs("div",{className:"quick-actions",children:[a.jsx("button",{onClick:()=>g(),className:"btn btn-secondary",children:" Refresh Status"}),a.jsx("button",{onClick:j,className:"btn btn-danger",children:" Disable All Advanced Roles"})]}),a.jsxs("section",{className:"role-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:" User Roles"}),a.jsx("p",{children:"Toggle availability of advanced user roles in the system"})]}),a.jsx("div",{className:"role-grid",children:b.map(R=>{var L,O;const W=R.feature_key.replace("role_",""),U=i[W]||0,_=C(R.feature_key),D=y(R.feature_key),z=R.is_enabled?!0:D;return a.jsxs("div",{className:`role-card ${R.is_enabled?"enabled":"disabled"}`,children:[a.jsxs("div",{className:"role-card-header",children:[a.jsx("div",{className:"role-icon",children:N(R.feature_key)}),a.jsxs("div",{className:"role-info",children:[a.jsx("h4",{children:R.feature_name}),a.jsx("span",{className:`status-badge ${R.is_enabled?"status-enabled":"status-disabled"}`,children:R.is_enabled?"Enabled":"Disabled"})]}),a.jsxs("label",{className:"toggle-switch",children:[a.jsx("input",{type:"checkbox",checked:R.is_enabled,onChange:()=>p(R.feature_key,R.is_enabled),disabled:!z&&!R.is_enabled}),a.jsx("span",{className:"toggle-slider"})]})]}),a.jsx("p",{className:"role-description",children:R.description}),a.jsxs("div",{className:"role-meta",children:[a.jsxs("div",{className:"meta-item",children:[a.jsx("strong",{children:"Users:"})," ",a.jsx("span",{children:U})]}),_&&a.jsxs("div",{className:`meta-item dependency ${D?"met":"unmet"}`,children:[a.jsx("strong",{children:"Requires:"}),a.jsx("span",{children:((L=t.find(P=>P.feature_key===_))==null?void 0:L.feature_name)||_}),!D&&a.jsx("span",{className:"warning-icon",children:""})]})]}),R.is_enabled&&a.jsx(qr,{to:`/demo/${W}`,className:"btn btn-demo",children:" Test Demo Portal"}),!z&&!R.is_enabled&&a.jsxs("div",{className:"warning-message",children:[" Enable ",(O=t.find(P=>P.feature_key===_))==null?void 0:O.feature_name," first"]})]},R.feature_key)})})]}),a.jsxs("section",{className:"role-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:" Feature Modules"}),a.jsx("p",{children:"Core functionality modules that power advanced roles"})]}),a.jsx("div",{className:"role-grid",children:w.map(R=>{const U=(R.metadata||{}).components||[];return a.jsxs("div",{className:`role-card ${R.is_enabled?"enabled":"disabled"}`,children:[a.jsxs("div",{className:"role-card-header",children:[a.jsx("div",{className:"role-icon",children:N(R.feature_key)}),a.jsxs("div",{className:"role-info",children:[a.jsx("h4",{children:R.feature_name}),a.jsx("span",{className:`status-badge ${R.is_enabled?"status-enabled":"status-disabled"}`,children:R.is_enabled?"Enabled":"Disabled"})]}),a.jsxs("label",{className:"toggle-switch",children:[a.jsx("input",{type:"checkbox",checked:R.is_enabled,onChange:()=>p(R.feature_key,R.is_enabled)}),a.jsx("span",{className:"toggle-slider"})]})]}),a.jsx("p",{className:"role-description",children:R.description}),U.length>0&&a.jsx("div",{className:"role-meta",children:a.jsxs("div",{className:"meta-item",children:[a.jsx("strong",{children:"Components:"}),a.jsx("span",{children:U.join(", ")})]})})]},R.feature_key)})})]}),a.jsxs("section",{className:"role-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:" Recent Configuration Changes"}),a.jsx("p",{children:"Last 20 role/feature modifications"})]}),a.jsx("div",{className:"activity-log",children:l.length===0?a.jsx("p",{className:"empty-state",children:"No configuration changes recorded yet"}):a.jsxs("table",{className:"activity-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Timestamp"}),a.jsx("th",{children:"Admin"}),a.jsx("th",{children:"Feature/Role"}),a.jsx("th",{children:"Action"}),a.jsx("th",{children:"Status"})]})}),a.jsx("tbody",{children:l.map(R=>{var U;const W=R.details||{};return a.jsxs("tr",{children:[a.jsx("td",{children:new Date(R.created_at).toLocaleString()}),a.jsx("td",{children:((U=R.users)==null?void 0:U.full_name)||"Unknown"}),a.jsx("td",{children:W.feature_name||W.feature_key||""}),a.jsx("td",{children:W.action||"Update"}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${W.new_status==="enabled"?"status-enabled":"status-disabled"}`,children:W.new_status||""})})]},R.id)})})]})})]}),d.map(R=>a.jsx(kn,{message:R.message,type:R.type,onClose:()=>m(R.id)},R.id))]})}function k6(){const{user:e}=en(),[t,n]=T.useState([]),[r,s]=T.useState(!0),[i,o]=T.useState("pending"),[l,c]=T.useState(null),[d,h]=T.useState(""),[m,g]=T.useState(""),[p,j]=T.useState(!1),{toasts:N,showToast:C,removeToast:y}=Sn();T.useEffect(()=>{b()},[i]);const b=async()=>{s(!0);try{const _=i==="all"?null:i,D=await p3(e.department,_);n(D)}catch(_){console.error("Failed to load requests:",_),C("Failed to load requests","error")}finally{s(!1)}},w=async()=>{if(!l||d.trim().length<20){C("Please provide detailed collection instructions (minimum 20 characters)","error");return}j(!0);try{await g3(l.id,e.id,d),C("Request approved successfully! Staff member will be notified.","success"),c(null),h(""),b()}catch(_){console.error("Failed to approve request:",_),C("Failed to approve request","error")}finally{j(!1)}},S=async()=>{if(!l||m.trim().length<20){C("Please provide a detailed reason for denial (minimum 20 characters)","error");return}j(!0);try{await v3(l.id,e.id,m),C("Request denied. Staff member will be notified.","success"),c(null),g(""),b()}catch(_){console.error("Failed to deny request:",_),C("Failed to deny request","error")}finally{j(!1)}},R=_=>{c(_),h("Equipment available for collection on [date] at [time] from [location]. Please return by [date/time]. Contact [email/phone] for any questions."),g("")},W=_=>{c(_),g(""),h("")},U=()=>{c(null),h(""),g("")};return r?a.jsxs("div",{className:"cross-dept-requests",children:[a.jsx("h2",{children:"Cross-Department Requests"}),a.jsx("p",{children:"Loading requests..."})]}):a.jsxs("div",{className:"cross-dept-requests",children:[a.jsx("h2",{children:"Cross-Department Equipment Requests"}),a.jsx("p",{className:"subtitle",children:"Review and approve/deny requests from staff members for your department's equipment"}),a.jsxs("div",{className:"filter-tabs",children:[a.jsxs("button",{onClick:()=>o("pending"),className:i==="pending"?"tab-active":"tab",children:["Pending (",t.filter(_=>_.status==="pending").length,")"]}),a.jsxs("button",{onClick:()=>o("approved"),className:i==="approved"?"tab-active":"tab",children:["Approved (",t.filter(_=>_.status==="approved").length,")"]}),a.jsxs("button",{onClick:()=>o("denied"),className:i==="denied"?"tab-active":"tab",children:["Denied (",t.filter(_=>_.status==="denied").length,")"]}),a.jsxs("button",{onClick:()=>o("all"),className:i==="all"?"tab-active":"tab",children:["All (",t.length,")"]})]}),t.length===0?a.jsx("div",{className:"empty-state",children:a.jsxs("p",{children:["No ",i," requests found."]})}):a.jsx("div",{className:"requests-grid",children:t.map(_=>a.jsxs("div",{className:"request-card",children:[a.jsx("div",{className:"request-header",children:a.jsxs("div",{children:[a.jsx("h3",{children:_.equipment_type}),a.jsx("span",{className:`status-badge status-${_.status}`,children:_.status.charAt(0).toUpperCase()+_.status.slice(1)}),_.routing_type==="broadcast"&&a.jsx("span",{className:"broadcast-badge",title:"This request was broadcast to multiple departments",children:" Broadcast"})]})}),a.jsxs("div",{className:"request-info",children:[a.jsxs("div",{className:"info-row",children:[a.jsx("span",{className:"label",children:"Requesting Staff:"}),a.jsx("span",{className:"value",children:_.requesting_user_name})]}),a.jsxs("div",{className:"info-row",children:[a.jsx("span",{className:"label",children:"Email:"}),a.jsx("span",{className:"value",children:_.requesting_user_email})]}),a.jsxs("div",{className:"info-row",children:[a.jsx("span",{className:"label",children:"Quantity Needed:"}),a.jsx("span",{className:"value",children:a.jsx("strong",{children:_.quantity})})]}),_.available_at_department&&a.jsxs("div",{className:"info-row",children:[a.jsx("span",{className:"label",children:"Available in Your Dept:"}),a.jsx("span",{className:"value",children:a.jsx("strong",{children:_.available_at_department})})]}),a.jsxs("div",{className:"info-row",children:[a.jsx("span",{className:"label",children:"Dates:"}),a.jsxs("span",{className:"value",children:[new Date(_.start_date).toLocaleDateString()," - ",new Date(_.end_date).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"request-justification",children:[a.jsx("strong",{children:"Justification:"}),a.jsx("p",{children:_.justification})]}),_.status==="pending"&&a.jsxs("div",{className:"request-actions",children:[a.jsx("button",{onClick:()=>R(_),className:"btn btn-success btn-sm",children:" Approve"}),a.jsx("button",{onClick:()=>W(_),className:"btn btn-danger btn-sm",children:" Deny"})]}),_.status!=="pending"&&_.review_notes&&a.jsxs("div",{className:`review-notes ${_.status}`,children:[a.jsx("strong",{children:_.status==="approved"?"Approval Instructions:":"Denial Reason:"}),a.jsx("p",{children:_.review_notes}),a.jsxs("small",{children:["Reviewed: ",new Date(_.reviewed_at).toLocaleString()]})]}),a.jsx("div",{className:"request-metadata",children:a.jsxs("small",{children:["Created: ",new Date(_.created_at).toLocaleString()]})})]},_.id))}),l&&d!==""&&a.jsx("div",{className:"modal-overlay",onClick:U,children:a.jsxs("div",{className:"modal-content approval-dialog",onClick:_=>_.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h3",{children:["Approve Request for ",l.equipment_type]}),a.jsx("button",{onClick:U,className:"modal-close",children:""})]}),a.jsxs("div",{className:"dialog-body",children:[a.jsxs("p",{children:["Provide collection and return instructions for ",a.jsx("strong",{children:l.requesting_user_name}),":"]}),a.jsx("textarea",{value:d,onChange:_=>h(_.target.value),rows:"6",placeholder:"Equipment available for collection on [date] at [time] from [location]...",style:{width:"100%",padding:"0.75rem",fontSize:"1rem",fontFamily:"inherit"}}),a.jsxs("small",{className:d.length<20?"text-error":"text-success",children:[d.length," / 20 characters minimum"]})]}),a.jsxs("div",{className:"dialog-actions",children:[a.jsx("button",{onClick:U,className:"btn btn-secondary",disabled:p,children:"Cancel"}),a.jsx("button",{onClick:w,className:"btn btn-success",disabled:p||d.length<20,children:p?"Approving...":"Approve Request"})]})]})}),l&&m!==""&&a.jsx("div",{className:"modal-overlay",onClick:U,children:a.jsxs("div",{className:"modal-content denial-dialog",onClick:_=>_.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h3",{children:["Deny Request for ",l.equipment_type]}),a.jsx("button",{onClick:U,className:"modal-close",children:""})]}),a.jsxs("div",{className:"dialog-body",children:[a.jsxs("p",{children:["Provide a detailed reason for denying this request to ",a.jsx("strong",{children:l.requesting_user_name}),":"]}),a.jsx("textarea",{value:m,onChange:_=>g(_.target.value),rows:"4",placeholder:"Unfortunately our equipment is fully booked during this period...",style:{width:"100%",padding:"0.75rem",fontSize:"1rem",fontFamily:"inherit"}}),a.jsxs("small",{className:m.length<20?"text-error":"text-success",children:[m.length," / 20 characters minimum"]})]}),a.jsxs("div",{className:"dialog-actions",children:[a.jsx("button",{onClick:U,className:"btn btn-secondary",disabled:p,children:"Cancel"}),a.jsx("button",{onClick:S,className:"btn btn-danger",disabled:p||m.length<20,children:p?"Denying...":"Deny Request"})]})]})}),N.map(_=>a.jsx(kn,{message:_.message,type:_.type,onClose:()=>y(_.id)},_.id)),a.jsx("style",{jsx:!0,children:`
        .cross-dept-requests {
          padding: 2rem;
        }

        .subtitle {
          color: #666;
          margin-bottom: 2rem;
        }

        .filter-tabs {
          display: flex;
          gap: 0.5rem;
          margin-bottom: 2rem;
          border-bottom: 2px solid #eee;
        }

        .tab,
        .tab-active {
          padding: 0.75rem 1.5rem;
          border: none;
          background: none;
          cursor: pointer;
          font-weight: 600;
          color: #666;
          border-bottom: 3px solid transparent;
          transition: all 0.2s;
        }

        .tab:hover {
          color: #333;
          background-color: #f5f5f5;
        }

        .tab-active {
          color: #1976d2;
          border-bottom-color: #1976d2;
        }

        .requests-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(450px, 1fr));
          gap: 1.5rem;
        }

        .request-card {
          background: #fff;
          border: 1px solid #ddd;
          border-radius: 8px;
          padding: 1.5rem;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .request-header {
          margin-bottom: 1rem;
        }

        .request-header h3 {
          margin: 0 0 0.5rem 0;
          color: #333;
        }

        .status-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 12px;
          font-size: 0.875rem;
          font-weight: 600;
          margin-right: 0.5rem;
        }

        .status-pending {
          background-color: #fff3cd;
          color: #856404;
        }

        .status-approved {
          background-color: #d4edda;
          color: #155724;
        }

        .status-denied {
          background-color: #f8d7da;
          color: #721c24;
        }

        .broadcast-badge {
          display: inline-block;
          padding: 0.25rem 0.5rem;
          background-color: #e3f2fd;
          border-radius: 4px;
          font-size: 0.75rem;
        }

        .request-info {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
          margin-bottom: 1rem;
        }

        .info-row {
          display: flex;
          gap: 0.5rem;
        }

        .info-row .label {
          font-weight: 600;
          color: #666;
          min-width: 140px;
        }

        .info-row .value {
          color: #333;
        }

        .request-justification {
          margin-top: 1rem;
          padding: 1rem;
          background-color: #f5f5f5;
          border-radius: 4px;
        }

        .request-justification strong {
          display: block;
          margin-bottom: 0.5rem;
          color: #333;
        }

        .request-justification p {
          margin: 0;
          color: #555;
          line-height: 1.5;
        }

        .request-actions {
          display: flex;
          gap: 1rem;
          margin-top: 1rem;
        }

        .review-notes {
          margin-top: 1rem;
          padding: 1rem;
          border-radius: 4px;
          border-left: 4px solid;
        }

        .review-notes.approved {
          background-color: #e8f5e9;
          border-left-color: #4caf50;
        }

        .review-notes.denied {
          background-color: #ffebee;
          border-left-color: #f44336;
        }

        .review-notes strong {
          display: block;
          margin-bottom: 0.5rem;
        }

        .review-notes p {
          margin: 0 0 0.5rem 0;
          line-height: 1.5;
        }

        .review-notes small {
          color: #999;
          font-size: 0.85rem;
        }

        .request-metadata {
          margin-top: 1rem;
          padding-top: 1rem;
          border-top: 1px solid #eee;
        }

        .request-metadata small {
          color: #999;
        }

        .empty-state {
          text-align: center;
          padding: 3rem;
          color: #666;
        }

        .approval-dialog,
        .denial-dialog {
          max-width: 600px;
        }

        .dialog-body {
          padding: 1.5rem 0;
        }

        .dialog-body textarea {
          margin-top: 1rem;
          margin-bottom: 0.5rem;
          border: 1px solid #ccc;
          border-radius: 4px;
          resize: vertical;
        }

        .dialog-body small.text-error {
          color: #d32f2f;
        }

        .dialog-body small.text-success {
          color: #4caf50;
        }

        .dialog-actions {
          display: flex;
          justify-content: flex-end;
          gap: 1rem;
          padding-top: 1.5rem;
          border-top: 1px solid #eee;
        }

        @media (max-width: 768px) {
          .cross-dept-requests {
            padding: 1rem;
          }

          .requests-grid {
            grid-template-columns: 1fr;
          }

          .filter-tabs {
            flex-wrap: wrap;
          }
        }
      `})]})}function C6({kit:e,departmentId:t,onClose:n,onSuccess:r}){const{user:s}=en(),[i,o]=T.useState(""),[l,c]=T.useState(""),[d,h]=T.useState(""),[m,g]=T.useState([]),[p,j]=T.useState([]),[N,C]=T.useState(!1),[y,b]=T.useState(!0);T.useEffect(()=>{w(),e&&(o(e.name),c(e.description||""),h(e.image_url||""),g(e.equipment_ids||[]))},[e]);const w=async()=>{b(!0);try{const D=await Te.query("equipment",{department:t});j(D)}catch(D){console.error("Failed to load equipment:",D)}finally{b(!1)}},S=D=>{g(z=>z.includes(D)?z.filter(L=>L!==D):[...z,D])},R=()=>{g(p.map(D=>D.id))},W=()=>{g([])},U=async D=>{if(D.preventDefault(),!i.trim()||m.length===0){alert("Please provide a kit name and select at least one equipment item");return}C(!0);try{const z={name:i.trim(),description:l.trim(),department_id:t,created_by:s.id,equipment_ids:m,image_url:d.trim()};e?await V4(e.id,z):await H4(z),r()}catch(z){console.error("Failed to save kit:",z),alert("Failed to save kit. Please try again.")}finally{C(!1)}},_=p.reduce((D,z)=>{const L=z.category||"Other";return D[L]||(D[L]=[]),D[L].push(z),D},{});return a.jsx("div",{className:"modal-overlay",onClick:n,children:a.jsxs("div",{className:"modal-content kit-form-modal",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:e?"Edit Equipment Kit":"Create New Equipment Kit"}),a.jsx("button",{onClick:n,className:"modal-close",children:""})]}),a.jsxs("form",{onSubmit:U,children:[a.jsxs("div",{className:"form-section",children:[a.jsx("h3",{children:"Kit Details"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"kit-name",children:"Kit Name *"}),a.jsx("input",{type:"text",id:"kit-name",value:i,onChange:D=>o(D.target.value),placeholder:"e.g., Video Production Starter Kit",required:!0,maxLength:"100"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"kit-description",children:"Description"}),a.jsx("textarea",{id:"kit-description",value:l,onChange:D=>c(D.target.value),placeholder:"Describe what this kit is for and when students should use it...",rows:"3",maxLength:"500"}),a.jsxs("small",{children:[l.length," / 500 characters"]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"kit-image",children:"Image URL (optional)"}),a.jsx("input",{type:"url",id:"kit-image",value:d,onChange:D=>h(D.target.value),placeholder:"https://example.com/kit-image.jpg"})]})]}),a.jsxs("div",{className:"form-section",children:[a.jsxs("div",{className:"equipment-selection-header",children:[a.jsxs("h3",{children:["Select Equipment (",m.length," selected)"]}),a.jsxs("div",{className:"selection-actions",children:[a.jsx("button",{type:"button",onClick:R,className:"btn btn-secondary btn-sm",children:"Select All"}),a.jsx("button",{type:"button",onClick:W,className:"btn btn-secondary btn-sm",children:"Deselect All"})]})]}),y?a.jsx("p",{children:"Loading equipment..."}):p.length===0?a.jsx("div",{className:"empty-state-small",children:a.jsx("p",{children:"No equipment found in your department. Add equipment first to create kits."})}):a.jsx("div",{className:"equipment-selection-list",children:Object.entries(_).map(([D,z])=>a.jsxs("div",{className:"equipment-category",children:[a.jsxs("h4",{children:[D," (",z.length,")"]}),a.jsx("div",{className:"equipment-items",children:z.map(L=>a.jsxs("label",{className:"equipment-checkbox",children:[a.jsx("input",{type:"checkbox",checked:m.includes(L.id),onChange:()=>S(L.id)}),a.jsxs("span",{className:"equipment-label",children:[a.jsx("strong",{children:L.product_name}),a.jsx("small",{children:L.tracking_number})]}),a.jsx("span",{className:`equipment-status status-${L.status}`,children:L.status})]},L.id))})]},D))})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:N,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:N||m.length===0,children:N?"Saving...":e?"Update Kit":"Create Kit"})]})]}),a.jsx("style",{jsx:!0,children:`
          .kit-form-modal {
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
          }

          .form-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
          }

          .form-section:last-of-type {
            border-bottom: none;
          }

          .form-section h3 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.1rem;
          }

          .form-group {
            margin-bottom: 1rem;
          }

          .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
          }

          .form-group input[type="text"],
          .form-group input[type="url"],
          .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
            font-family: inherit;
          }

          .form-group textarea {
            resize: vertical;
          }

          .form-group small {
            display: block;
            margin-top: 0.25rem;
            color: #666;
            font-size: 0.875rem;
          }

          .equipment-selection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
          }

          .selection-actions {
            display: flex;
            gap: 0.5rem;
          }

          .equipment-selection-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 1rem;
          }

          .equipment-category {
            margin-bottom: 1.5rem;
          }

          .equipment-category:last-child {
            margin-bottom: 0;
          }

          .equipment-category h4 {
            margin: 0 0 0.75rem 0;
            color: #666;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
          }

          .equipment-items {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
          }

          .equipment-checkbox {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
          }

          .equipment-checkbox:hover {
            background-color: #f0f0f0;
            border-color: #1976d2;
          }

          .equipment-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
          }

          .equipment-label {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
          }

          .equipment-label strong {
            color: #333;
          }

          .equipment-label small {
            color: #666;
            font-size: 0.85rem;
          }

          .equipment-status {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: capitalize;
          }

          .status-available {
            background-color: #d4edda;
            color: #155724;
          }

          .status-booked {
            background-color: #fff3cd;
            color: #856404;
          }

          .status-maintenance {
            background-color: #f8d7da;
            color: #721c24;
          }

          .empty-state-small {
            text-align: center;
            padding: 2rem;
            color: #666;
            background-color: #f5f5f5;
            border-radius: 4px;
          }

          .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #eee;
          }

          @media (max-width: 768px) {
            .kit-form-modal {
              max-width: 95vw;
              padding: 1rem;
            }

            .equipment-selection-header {
              flex-direction: column;
              align-items: flex-start;
              gap: 1rem;
            }

            .selection-actions {
              width: 100%;
            }

            .selection-actions button {
              flex: 1;
            }
          }
        `})]})})}function A6(){const{user:e}=en(),[t,n]=T.useState([]),[r,s]=T.useState(!0),[i,o]=T.useState(!1),[l,c]=T.useState(null),[d,h]=T.useState(!1),{toasts:m,showToast:g,removeToast:p}=Sn();T.useEffect(()=>{j()},[d]);const j=async()=>{s(!0);try{const S=await D5(e.department,!d);n(S)}catch(S){console.error("Failed to load kits:",S),g("Failed to load equipment kits","error")}finally{s(!1)}},N=()=>{c(null),o(!0)},C=S=>{c(S),o(!0)},y=async(S,R)=>{if(confirm(`Are you sure you want to deactivate "${R}"? It will no longer be visible to students.`))try{await G4(S),g("Kit deactivated successfully","success"),j()}catch(W){console.error("Failed to delete kit:",W),g("Failed to deactivate kit","error")}},b=()=>{o(!1),c(null)},w=()=>{g(l?"Kit updated successfully":"Kit created successfully","success"),j(),b()};return r?a.jsxs("div",{className:"equipment-kits-management",children:[a.jsx("h2",{children:"Equipment Kits Management"}),a.jsx("p",{children:"Loading kits..."})]}):a.jsxs("div",{className:"equipment-kits-management",children:[a.jsxs("div",{className:"page-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Equipment Kits Management"}),a.jsx("p",{className:"subtitle",children:"Create equipment bundles that students in your department can book as a single unit"})]}),a.jsx("button",{onClick:N,className:"btn btn-primary",children:"+ Create New Kit"})]}),a.jsxs("div",{className:"kits-controls",children:[a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:S=>h(S.target.checked)}),"Show inactive kits"]}),a.jsxs("div",{className:"kits-count",children:[t.length," kit",t.length!==1?"s":""," found"]})]}),t.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h3",{children:"No equipment kits yet"}),a.jsx("p",{children:"Create your first equipment kit to help students book commonly used equipment bundles together."}),a.jsx("button",{onClick:N,className:"btn btn-primary",style:{marginTop:"1rem"},children:"Create Your First Kit"})]}):a.jsx("div",{className:"kits-grid",children:t.map(S=>a.jsxs("div",{className:`kit-card ${S.is_active?"":"inactive"}`,children:[a.jsxs("div",{className:"kit-header",children:[a.jsxs("div",{className:"kit-title-section",children:[a.jsx("h3",{children:S.name}),!S.is_active&&a.jsx("span",{className:"inactive-badge",children:"Inactive"})]}),S.image_url&&a.jsx("div",{className:"kit-image",children:a.jsx("img",{src:S.image_url,alt:S.name})})]}),a.jsx("p",{className:"kit-description",children:S.description}),a.jsxs("div",{className:"kit-equipment-list",children:[a.jsxs("strong",{children:["Equipment in this kit (",S.equipment_ids.length," items):"]}),a.jsxs("ul",{children:[S.equipment_ids.slice(0,5).map((R,W)=>a.jsxs("li",{children:["Equipment ID: ",R]},R)),S.equipment_ids.length>5&&a.jsxs("li",{className:"more-items",children:["+ ",S.equipment_ids.length-5," more items"]})]})]}),a.jsx("div",{className:"kit-metadata",children:a.jsxs("small",{children:["Created: ",new Date(S.created_at).toLocaleDateString()]})}),a.jsxs("div",{className:"kit-actions",children:[a.jsx("button",{onClick:()=>C(S),className:"btn btn-secondary btn-sm",children:"Edit"}),S.is_active&&a.jsx("button",{onClick:()=>y(S.id,S.name),className:"btn btn-danger btn-sm",children:"Deactivate"})]})]},S.id))}),i&&a.jsx(C6,{kit:l,departmentId:e.department,onClose:b,onSuccess:w}),m.map(S=>a.jsx(kn,{message:S.message,type:S.type,onClose:()=>p(S.id)},S.id))]})}function D6(){const{user:e,logout:t}=en();return a.jsxs("div",{className:`admin-portal ${(e==null?void 0:e.role)==="master_admin"?"master-admin-portal":""}`,children:[a.jsx("header",{className:"admin-header",children:a.jsxs("div",{className:"admin-header-content",children:[a.jsxs("h1",{children:[" NCADbook ",(e==null?void 0:e.role)==="master_admin"?"Master Admin":"Department Admin"]}),a.jsxs("div",{className:"admin-header-actions",children:[a.jsx(dg,{}),a.jsxs("span",{className:"admin-user-info",children:[e==null?void 0:e.full_name,"  ",(e==null?void 0:e.department)||"System"]}),a.jsx("button",{onClick:t,className:"btn btn-secondary btn-sm",children:"Logout"})]})]})}),a.jsx("nav",{className:"admin-nav",children:a.jsxs("div",{className:"admin-nav-container",children:[a.jsx(mn,{to:"/admin",end:!0,className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Dashboard"}),a.jsx(mn,{to:"/admin/approvals",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Approvals"}),a.jsx(mn,{to:"/admin/equipment",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Equipment"}),a.jsx(mn,{to:"/admin/equipment-kits",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Equipment Kits"}),(e==null?void 0:e.role)==="master_admin"&&a.jsxs(a.Fragment,{children:[a.jsx(mn,{to:"/admin/users",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Users"}),a.jsx(mn,{to:"/admin/analytics",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Analytics"}),a.jsx(mn,{to:"/admin/departments",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Departments"}),a.jsx(mn,{to:"/admin/csv-import",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" CSV Import"}),a.jsx(mn,{to:"/admin/system-settings",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Settings"}),a.jsx(mn,{to:"/admin/role-management",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Role Management"})]}),(e==null?void 0:e.role)==="department_admin"&&a.jsxs(a.Fragment,{children:[a.jsx(mn,{to:"/admin/cross-department-requests",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Cross-Dept Requests"}),a.jsx(mn,{to:"/admin/department-staff-permissions",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Staff Permissions"})]})]})}),a.jsx("main",{className:"admin-main",children:a.jsxs(uh,{children:[a.jsx(mt,{index:!0,element:a.jsx(_3,{})}),a.jsx(mt,{path:"approvals",element:a.jsx(N3,{})}),a.jsx(mt,{path:"equipment",element:a.jsx(C3,{})}),a.jsx(mt,{path:"analytics",element:a.jsx(a6,{})}),a.jsx(mt,{path:"users",element:a.jsx(i6,{})}),a.jsx(mt,{path:"kits",element:a.jsx(g6,{})}),a.jsx(mt,{path:"departments",element:a.jsx(y6,{})}),a.jsx(mt,{path:"student-assignment",element:a.jsx(x6,{})}),a.jsx(mt,{path:"interdisciplinary",element:a.jsx(b6,{})}),a.jsx(mt,{path:"access-requests",element:a.jsx(_6,{})}),a.jsx(mt,{path:"manage-access-requests",element:a.jsx(w6,{})}),a.jsx(mt,{path:"csv-import",element:a.jsx(l6,{})}),a.jsx(mt,{path:"permissions",element:a.jsx(m6,{})}),a.jsx(mt,{path:"features",element:a.jsx(s6,{})}),a.jsx(mt,{path:"department-staff-permissions",element:a.jsx(j6,{})}),a.jsx(mt,{path:"system-settings",element:a.jsx(N6,{})}),a.jsx(mt,{path:"role-management",element:a.jsx(S6,{})}),a.jsx(mt,{path:"cross-department-requests",element:a.jsx(k6,{})}),a.jsx(mt,{path:"equipment-kits",element:a.jsx(A6,{})})]})}),a.jsx(ug,{})]})}function L6(){var c;const[e,t]=T.useState(null),[n,r]=T.useState(!1),[s,i]=T.useState(null);sl();const o=async(d,h)=>{r(!0),i(null);try{console.log(" Login: Authenticating as",d);try{const m=await Yl.demoLogin(d);console.log(" API Login successful:",m.user.full_name),localStorage.setItem("ncadbook_user",JSON.stringify(m.user)),window.location.href="/NCADbook"+h;return}catch{console.log(" Backend API unavailable, using demo mode");const p=Te.getData().users.find(j=>j.role===d);if(!p)throw new Error("Demo user not found");console.log(" Demo Mode Login successful:",p.full_name),console.log(" Email:",p.email),console.log(" Role:",p.role),console.log(" Department:",p.department),localStorage.setItem("ncadbook_user",JSON.stringify(p)),Te.setCurrentUser(p),window.location.href="/NCADbook"+h}}catch(m){console.error(" Login failed:",m),i(m.message||"Login failed. Please try again."),r(!1)}},l=[{id:"student",role:"student",name:"Student Portal",path:"/student",coords:"60,60,580,580"},{id:"staff",role:"staff",name:"Staff Portal",path:"/staff",coords:"620,60,1140,580"},{id:"admin",role:"department_admin",name:"Department Admin",path:"/admin",coords:"60,620,580,1140"},{id:"master",role:"master_admin",name:"Master Admin",path:"/admin",coords:"620,620,1140,1140"}];return a.jsx("div",{className:"artistic-login-container",children:a.jsxs("div",{className:"portal-map-container",children:[a.jsxs("div",{className:"map-wrapper",children:[a.jsx("img",{src:"/NCADbook/login-map-frame2.jpg",alt:"NCAD Portal Map",className:"base-map-image"}),a.jsx("svg",{viewBox:"0 0 1200 1200",className:"portal-overlay-svg",children:l.map(d=>{const[h,m,g,p]=d.coords.split(",").map(Number),j=e===d.id;return a.jsxs("g",{children:[a.jsx("rect",{x:h,y:m,width:g-h,height:p-m,className:`portal-quadrant ${j?"hovered":""}`,onMouseEnter:()=>t(d.id),onMouseLeave:()=>t(null),onClick:()=>o(d.role,d.path),style:{cursor:n?"wait":"pointer",opacity:n?.6:1}}),j&&a.jsx("text",{x:(h+g)/2,y:(m+p)/2,className:"portal-label",textAnchor:"middle",dominantBaseline:"middle",children:d.name})]},d.id)})})]}),a.jsx("p",{className:"instruction-text",children:n?" Authenticating...":s?` ${s}`:e?`Click to enter ${(c=l.find(d=>d.id===e))==null?void 0:c.name}`:"Tap any quadrant to enter a portal"})]})})}function E6(){const[e,t]=T.useState([]),[n,r]=T.useState("");T.useEffect(()=>{s()},[]);const s=async()=>{const o=await Te.query("equipment");t(o.slice(0,20))},i=e.filter(o=>o.product_name.toLowerCase().includes(n.toLowerCase()));return a.jsxs("div",{className:"portal-container",style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[a.jsxs("div",{className:"portal-header",style:{marginBottom:"2rem"},children:[a.jsx("h1",{style:{color:"#9C27B0",marginBottom:"0.5rem"},children:" View-Only Staff Portal"}),a.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Read-only access to equipment catalog. No booking permissions."})]}),a.jsxs("div",{className:"permissions-notice",style:{background:"#E1BEE7",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",border:"2px solid #9C27B0"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#6A1B9A"},children:"Your Permissions:"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[a.jsx("li",{children:" Can view equipment catalog"}),a.jsx("li",{children:" Can view equipment details and availability"}),a.jsx("li",{children:" Cannot create bookings"}),a.jsx("li",{children:" Cannot modify equipment"}),a.jsx("li",{children:" Cannot access admin features"})]})]}),a.jsx("div",{className:"search-section",style:{marginBottom:"2rem"},children:a.jsx("input",{type:"text",placeholder:" Search equipment...",value:n,onChange:o=>r(o.target.value),style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #9C27B0",borderRadius:"8px"}})}),a.jsx("div",{className:"equipment-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.5rem"},children:i.map(o=>{var l;return a.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1rem",background:"white"},children:[a.jsx("img",{src:o.link_to_image||"/placeholder-equipment.png",alt:o.product_name,style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"4px",marginBottom:"1rem"}}),a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.1rem"},children:o.product_name}),a.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 0.5rem 0"},children:[(l=o.description)==null?void 0:l.substring(0,100),"..."]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[a.jsx("span",{style:{padding:"0.25rem 0.75rem",background:o.status==="available"?"#4CAF50":"#FF9800",color:"white",borderRadius:"4px",fontSize:"0.85rem"},children:o.status||"available"}),a.jsx("button",{disabled:!0,style:{padding:"0.5rem 1rem",background:"#ccc",color:"#666",border:"none",borderRadius:"4px",cursor:"not-allowed"},children:" Booking Disabled"})]})]},o.id)})}),i.length===0&&a.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:a.jsxs("p",{children:['No equipment found matching "',n,'"']})})]})}function P6(){return a.jsxs("div",{className:"demo-portal-wrapper",children:[a.jsx("div",{className:"demo-header",style:{padding:"1rem 2rem",background:"#9C27B0",color:"white"},children:a.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"View-Only Staff Role Demo"}),a.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:"Read-only equipment catalog access"})]}),a.jsx(qr,{to:"/admin/role-management",className:"btn btn-secondary",style:{background:"white",color:"#9C27B0",padding:"0.5rem 1rem",borderRadius:"4px",textDecoration:"none"},children:" Back to Role Management"})]})}),a.jsx(E6,{})]})}function T6(){const[e,t]=T.useState([]),[n,r]=T.useState([]),[s,i]=T.useState(0);T.useEffect(()=>{o()},[]);const o=async()=>{const c=await Te.query("equipment"),d=await Te.query("bookings");t(c.slice(0,15)),r(d.slice(0,10));const h=c.reduce((m,g)=>m+(parseFloat(g.purchase_price)||0),0);i(h)},l=[{dept:"Communication Design",cost:45230,bookings:156},{dept:"Product Design",cost:32100,bookings:89},{dept:"Media",cost:58900,bookings:203},{dept:"Painting",cost:12400,bookings:34},{dept:"Sculpture",cost:28700,bookings:67}];return a.jsxs("div",{className:"portal-container",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[a.jsxs("div",{className:"portal-header",style:{marginBottom:"2rem"},children:[a.jsx("h1",{style:{color:"#9C27B0",marginBottom:"0.5rem"},children:" Accounts Officer Portal"}),a.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Financial overview, equipment costs, and department budgets"})]}),a.jsxs("div",{className:"permissions-notice",style:{background:"#E1BEE7",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",border:"2px solid #9C27B0"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#6A1B9A"},children:"Your Permissions:"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[a.jsx("li",{children:" View equipment costs and purchase prices"}),a.jsx("li",{children:" Export financial reports (CSV/PDF)"}),a.jsx("li",{children:" Access all department budgets"}),a.jsx("li",{children:" View booking-related costs"}),a.jsx("li",{children:" Cannot modify equipment or bookings"})]})]}),a.jsxs("div",{className:"stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Total Equipment Value"}),a.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:["",s.toLocaleString()]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"YTD Bookings"}),a.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:"549"})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Avg Cost per Booking"}),a.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:["",(s/549).toFixed(2)]})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Department Cost Breakdown"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",marginBottom:"2rem"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#9C27B0",color:"white"},children:[a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Department"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Equipment Value"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Total Bookings"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Avg per Booking"})]})}),a.jsx("tbody",{children:l.map((c,d)=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:"1rem"},children:c.dept}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"bold"},children:["",c.cost.toLocaleString()]}),a.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:c.bookings}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",(c.cost/c.bookings).toFixed(2)]})]},d))})]})}),a.jsxs("div",{style:{textAlign:"center",marginTop:"2rem"},children:[a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#9C27B0",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Export Financial Report (PDF)"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:" Export to Excel (CSV)"})]})]})}function q6(){return a.jsxs("div",{className:"demo-portal-wrapper",children:[a.jsx("div",{className:"demo-header",style:{padding:"1rem 2rem",background:"#9C27B0",color:"white"},children:a.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"Accounts Officer Role Demo"}),a.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:"Financial reporting and cost analysis"})]}),a.jsx(qr,{to:"/admin/role-management",className:"btn btn-secondary",style:{background:"white",color:"#9C27B0",padding:"0.5rem 1rem",borderRadius:"4px",textDecoration:"none"},children:" Back to Role Management"})]})}),a.jsx(T6,{})]})}function I6(){const e=[{id:1,name:"Sarah Johnson",role:"Department Admin",dept:"Communication Design",hours:35,costCenter:"CC-001",allocation:"100%"},{id:2,name:"Mark Williams",role:"Department Admin",dept:"Product Design",hours:35,costCenter:"CC-002",allocation:"100%"},{id:3,name:"Anna Collins",role:"Staff",dept:"Communication Design",hours:20,costCenter:"CC-001",allocation:"60%"},{id:4,name:"Brian Hughes",role:"Staff",dept:"Product Design",hours:15,costCenter:"CC-002",allocation:"40%"},{id:5,name:"Lisa O'Brien",role:"Department Admin",dept:"Media",hours:28,costCenter:"CC-003",allocation:"80%"},{id:6,name:"Fiona McCarthy",role:"Staff",dept:"Media",hours:25,costCenter:"CC-003",allocation:"70%"}],t=[{code:"CC-001",name:"Communication Design",budget:125e3,allocated:118500,staff:5},{code:"CC-002",name:"Product Design",budget:95e3,allocated:87200,staff:4},{code:"CC-003",name:"Media Department",budget:14e4,allocated:132e3,staff:6},{code:"CC-004",name:"Sculpture & Applied Materials",budget:78e3,allocated:71500,staff:3}];return a.jsxs("div",{className:"portal-container",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[a.jsxs("div",{className:"portal-header",style:{marginBottom:"2rem"},children:[a.jsx("h1",{style:{color:"#9C27B0",marginBottom:"0.5rem"},children:" Payroll Coordinator Portal"}),a.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Staff cost center allocations and payroll data management"})]}),a.jsxs("div",{className:"permissions-notice",style:{background:"#E1BEE7",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",border:"2px solid #9C27B0"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#6A1B9A"},children:"Your Permissions:"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[a.jsx("li",{children:" View staff cost center allocations"}),a.jsx("li",{children:" Export payroll data for finance system"}),a.jsx("li",{children:" Track staff hours across departments"}),a.jsx("li",{children:" Generate allocation reports"}),a.jsx("li",{children:" Cannot modify cost center budgets"})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Cost Center Overview"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",marginBottom:"2rem"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#9C27B0",color:"white"},children:[a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Cost Center"}),a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Department"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Budget"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Allocated"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Remaining"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Staff Count"})]})}),a.jsx("tbody",{children:t.map(n=>{const r=n.budget-n.allocated,s=(n.allocated/n.budget*100).toFixed(1);return a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:"1rem",fontWeight:"bold"},children:n.code}),a.jsx("td",{style:{padding:"1rem"},children:n.name}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",n.budget.toLocaleString()]}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",n.allocated.toLocaleString()]}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right",color:r>0?"#4CAF50":"#f44336"},children:["",r.toLocaleString()," (",s,"%)"]}),a.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:n.staff})]},n.code)})})]})}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Staff Allocations"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",marginBottom:"2rem"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#9C27B0",color:"white"},children:[a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Staff Member"}),a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Role"}),a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Department"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Hours/Week"}),a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Cost Center"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Allocation %"})]})}),a.jsx("tbody",{children:e.map(n=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:"1rem",fontWeight:"bold"},children:n.name}),a.jsx("td",{style:{padding:"1rem"},children:n.role}),a.jsx("td",{style:{padding:"1rem"},children:n.dept}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:[n.hours,"h"]}),a.jsx("td",{style:{padding:"1rem"},children:n.costCenter}),a.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:a.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"#4CAF50",color:"white",borderRadius:"4px",fontSize:"0.85rem"},children:n.allocation})})]},n.id))})]})}),a.jsxs("div",{style:{textAlign:"center",marginTop:"2rem"},children:[a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#9C27B0",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Export Payroll Report"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:" Export Allocation Data (CSV)"})]})]})}function F6(){return a.jsxs("div",{className:"demo-portal-wrapper",children:[a.jsx("div",{className:"demo-header",style:{padding:"1rem 2rem",background:"#9C27B0",color:"white"},children:a.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"Payroll Coordinator Role Demo"}),a.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:"Staff cost center allocations"})]}),a.jsx(qr,{to:"/admin/role-management",className:"btn btn-secondary",style:{background:"white",color:"#9C27B0",padding:"0.5rem 1rem",borderRadius:"4px",textDecoration:"none"},children:" Back to Role Management"})]})}),a.jsx(I6,{})]})}function R6(){const[e,t]=T.useState([]),[n,r]=T.useState([]);T.useEffect(()=>{s(),i()},[]);const s=async()=>{const l=await Te.query("equipment");t(l.slice(0,10))},i=()=>{r([{time:"2024-03-15 14:23:12",type:"INFO",user:"commdesign.student1@student.ncad.ie",action:"Equipment booking created",details:"Canon EOS R5"},{time:"2024-03-15 14:18:45",type:"WARNING",user:"admin.media@ncad.ie",action:"Equipment status changed",details:"Sony A7IV  Maintenance"},{time:"2024-03-15 13:55:23",type:"INFO",user:"staff.product@ncad.ie",action:"User login successful",details:"Staff portal access"},{time:"2024-03-15 13:42:09",type:"ERROR",user:"media.student5@student.ncad.ie",action:"Booking conflict detected",details:"MacBook Pro M3 already booked"},{time:"2024-03-15 13:30:17",type:"INFO",user:"admin.commdesign@ncad.ie",action:"Equipment added",details:"New DSLR camera added to catalog"},{time:"2024-03-15 12:15:33",type:"WARNING",user:"system",action:"Scheduled maintenance",details:"Database backup completed"}])},o={total:150,available:98,booked:42,maintenance:8,outOfService:2};return a.jsxs("div",{className:"portal-container",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[a.jsxs("div",{className:"portal-header",style:{marginBottom:"2rem"},children:[a.jsx("h1",{style:{color:"#9C27B0",marginBottom:"0.5rem"},children:" IT Support Portal"}),a.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Equipment management, system logs, and technical administration"})]}),a.jsxs("div",{className:"permissions-notice",style:{background:"#E1BEE7",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",border:"2px solid #9C27B0"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#6A1B9A"},children:"Your Permissions:"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[a.jsx("li",{children:" Manage equipment (add, edit, set maintenance status)"}),a.jsx("li",{children:" View system logs and audit trails"}),a.jsx("li",{children:" Monitor booking conflicts and errors"}),a.jsx("li",{children:" Access technical diagnostics"}),a.jsx("li",{children:" Cannot reset user passwords (security restriction)"})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Equipment Status Overview"}),a.jsxs("div",{className:"stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{style:{background:"#2196F3",padding:"1.5rem",borderRadius:"8px",color:"white",textAlign:"center"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Total Equipment"}),a.jsx("p",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:o.total})]}),a.jsxs("div",{style:{background:"#4CAF50",padding:"1.5rem",borderRadius:"8px",color:"white",textAlign:"center"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Available"}),a.jsx("p",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:o.available})]}),a.jsxs("div",{style:{background:"#FF9800",padding:"1.5rem",borderRadius:"8px",color:"white",textAlign:"center"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Booked"}),a.jsx("p",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:o.booked})]}),a.jsxs("div",{style:{background:"#9C27B0",padding:"1.5rem",borderRadius:"8px",color:"white",textAlign:"center"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Maintenance"}),a.jsx("p",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:o.maintenance})]}),a.jsxs("div",{style:{background:"#f44336",padding:"1.5rem",borderRadius:"8px",color:"white",textAlign:"center"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Out of Service"}),a.jsx("p",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:o.outOfService})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"System Activity Logs"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",marginBottom:"2rem"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontFamily:"monospace",fontSize:"0.9rem"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#9C27B0",color:"white"},children:[a.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Timestamp"}),a.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Type"}),a.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"User"}),a.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Action"}),a.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Details"})]})}),a.jsx("tbody",{children:n.map((l,c)=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:"0.75rem",color:"#666"},children:l.time}),a.jsx("td",{style:{padding:"0.75rem"},children:a.jsx("span",{style:{padding:"0.25rem 0.5rem",background:l.type==="ERROR"?"#f44336":l.type==="WARNING"?"#FF9800":"#4CAF50",color:"white",borderRadius:"4px",fontSize:"0.75rem"},children:l.type})}),a.jsx("td",{style:{padding:"0.75rem"},children:l.user}),a.jsx("td",{style:{padding:"0.75rem"},children:l.action}),a.jsx("td",{style:{padding:"0.75rem",color:"#666"},children:l.details})]},c))})]})}),a.jsxs("div",{style:{textAlign:"center",marginTop:"2rem"},children:[a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#9C27B0",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Export System Logs"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Run Diagnostics"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#FF9800",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:" System Settings"})]})]})}function O6(){return a.jsxs("div",{className:"demo-portal-wrapper",children:[a.jsx("div",{className:"demo-header",style:{padding:"1rem 2rem",background:"#9C27B0",color:"white"},children:a.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"IT Support Technician Role Demo"}),a.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:"Equipment management and system logs"})]}),a.jsx(qr,{to:"/admin/role-management",className:"btn btn-secondary",style:{background:"white",color:"#9C27B0",padding:"0.5rem 1rem",borderRadius:"4px",textDecoration:"none"},children:" Back to Role Management"})]})}),a.jsx(R6,{})]})}function M6(){const e=[{dept:"Communication Design",allocated:125e3,spent:98400,forecast:115e3,variance:1e4},{dept:"Product Design",allocated:95e3,spent:82300,forecast:91e3,variance:4e3},{dept:"Media",allocated:14e4,spent:132100,forecast:138500,variance:1500},{dept:"Painting",allocated:65e3,spent:48200,forecast:58e3,variance:7e3},{dept:"Sculpture",allocated:85e3,spent:71500,forecast:79e3,variance:6e3}],t=[{quarter:"Q1 2024",amount:98500},{quarter:"Q2 2024",amount:112300},{quarter:"Q3 2024",amount:125700},{quarter:"Q4 2024 (Forecast)",amount:95200}],n=e.reduce((i,o)=>i+o.allocated,0),r=e.reduce((i,o)=>i+o.spent,0),s=e.reduce((i,o)=>i+o.forecast,0);return a.jsxs("div",{className:"portal-container",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[a.jsxs("div",{className:"portal-header",style:{marginBottom:"2rem"},children:[a.jsx("h1",{style:{color:"#9C27B0",marginBottom:"0.5rem"},children:" Budget Manager Portal"}),a.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Department budgets, cost forecasting, and financial planning"})]}),a.jsxs("div",{className:"permissions-notice",style:{background:"#E1BEE7",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",border:"2px solid #9C27B0"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#6A1B9A"},children:"Your Permissions:"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[a.jsx("li",{children:" View all department budgets and spending"}),a.jsx("li",{children:" Forecast future costs based on usage trends"}),a.jsx("li",{children:" Export budget reports (PDF/Excel)"}),a.jsx("li",{children:" Track variance and budget health"}),a.jsx("li",{children:" Cannot modify budget allocations (requires Finance Director approval)"})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Budget Summary"}),a.jsxs("div",{className:"stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Total Allocated"}),a.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:["",n.toLocaleString()]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"YTD Spent"}),a.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:["",r.toLocaleString()]}),a.jsxs("p",{style:{margin:0,fontSize:"0.85rem",opacity:.9},children:[(r/n*100).toFixed(1),"% of budget"]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Forecasted Year-End"}),a.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:["",s.toLocaleString()]}),a.jsxs("p",{style:{margin:0,fontSize:"0.85rem",opacity:.9},children:["",(n-s).toLocaleString()," under budget"]})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Department Budget Breakdown"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",marginBottom:"2rem"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#9C27B0",color:"white"},children:[a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Department"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Allocated"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"YTD Spent"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Forecast"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Variance"}),a.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Health"})]})}),a.jsx("tbody",{children:e.map((i,o)=>{const l=(i.spent/i.allocated*100).toFixed(1),c=i.variance>5e3?"Good":i.variance>0?"Fair":"At Risk",d=i.variance>5e3?"#4CAF50":i.variance>0?"#FF9800":"#f44336";return a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:"1rem",fontWeight:"bold"},children:i.dept}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",i.allocated.toLocaleString()]}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",i.spent.toLocaleString(),a.jsxs("span",{style:{fontSize:"0.85rem",color:"#666",marginLeft:"0.5rem"},children:["(",l,"%)"]})]}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",i.forecast.toLocaleString()]}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right",color:i.variance>0?"#4CAF50":"#f44336"},children:["",i.variance.toLocaleString()]}),a.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:a.jsx("span",{style:{padding:"0.25rem 0.75rem",background:d,color:"white",borderRadius:"4px",fontSize:"0.85rem"},children:c})})]},o)})})]})}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Quarterly Spending Trend"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",padding:"1.5rem",marginBottom:"2rem"},children:t.map((i,o)=>{const l=Math.max(...t.map(d=>d.amount)),c=i.amount/l*100;return a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[a.jsx("span",{style:{fontWeight:"bold"},children:i.quarter}),a.jsxs("span",{style:{color:"#666"},children:["",i.amount.toLocaleString()]})]}),a.jsx("div",{style:{background:"#eee",height:"24px",borderRadius:"4px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${c}%`,height:"100%",background:o===t.length-1?"linear-gradient(90deg, #9C27B0, #CE93D8)":"linear-gradient(90deg, #4CAF50, #81C784)",transition:"width 0.3s ease"}})})]},o)})}),a.jsxs("div",{style:{textAlign:"center",marginTop:"2rem"},children:[a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#9C27B0",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Generate Budget Report (PDF)"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Export to Excel"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#FF9800",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:" Run Forecast Model"})]})]})}function B6(){return a.jsxs("div",{className:"demo-portal-wrapper",children:[a.jsx("div",{className:"demo-header",style:{padding:"1rem 2rem",background:"#9C27B0",color:"white"},children:a.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"Budget Manager Role Demo"}),a.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:"Budget tracking and cost forecasting"})]}),a.jsx(qr,{to:"/admin/role-management",className:"btn btn-secondary",style:{background:"white",color:"#9C27B0",padding:"0.5rem 1rem",borderRadius:"4px",textDecoration:"none"},children:" Back to Role Management"})]})}),a.jsx(M6,{})]})}function Jf({children:e,allowedRoles:t}){const{user:n}=en();if(!n)return a.jsx(Gp,{to:"/"});if(!t.includes(n.role)){const r=()=>n.role==="master_admin"||n.role==="department_admin"?"/admin":n.role==="staff"?"/staff":"/student";return a.jsx(Gp,{to:r()})}return e}function U6(){const{user:e,loading:t}=en();return t?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading NCADbook..."})]}):a.jsxs(uh,{children:[a.jsx(mt,{path:"/",element:e?a.jsx(Gp,{to:e.role==="master_admin"||e.role==="department_admin"?"/admin":e.role==="staff"?"/staff":"/student"}):a.jsx(L6,{})}),a.jsx(mt,{path:"/student/*",element:a.jsx(Jf,{allowedRoles:["student","staff","department_admin","master_admin"],children:a.jsx(o3,{})})}),a.jsx(mt,{path:"/staff/*",element:a.jsx(Jf,{allowedRoles:["staff","department_admin","master_admin"],children:a.jsx(b3,{})})}),a.jsx(mt,{path:"/admin/*",element:a.jsx(Jf,{allowedRoles:["department_admin","master_admin"],children:a.jsx(D6,{})})}),a.jsx(mt,{path:"/demo/view_only_staff",element:a.jsx(P6,{})}),a.jsx(mt,{path:"/demo/accounts_officer",element:a.jsx(q6,{})}),a.jsx(mt,{path:"/demo/payroll_coordinator",element:a.jsx(F6,{})}),a.jsx(mt,{path:"/demo/it_support_technician",element:a.jsx(O6,{})}),a.jsx(mt,{path:"/demo/budget_manager",element:a.jsx(B6,{})})]})}function z6(){return a.jsx(o4,{children:a.jsx(i4,{children:a.jsx(a4,{children:a.jsx(Jj,{basename:"/NCADbook",children:a.jsx(U6,{})})})})})}Xf.createRoot(document.getElementById("root")).render(a.jsx(nv.StrictMode,{children:a.jsx(z6,{})}));export{Lt as _,W6 as c,Ab as g};
//# sourceMappingURL=index-CO6hhrKL.js.map
