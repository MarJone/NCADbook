var fb=Object.defineProperty;var pb=(e,t,n)=>t in e?fb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var kt=(e,t,n)=>pb(e,typeof t!="symbol"?t+"":t,n);function mb(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var D6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q2={exports:{}},Ou={},T2={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kc=Symbol.for("react.element"),vb=Symbol.for("react.portal"),yb=Symbol.for("react.fragment"),xb=Symbol.for("react.strict_mode"),bb=Symbol.for("react.profiler"),_b=Symbol.for("react.provider"),wb=Symbol.for("react.context"),jb=Symbol.for("react.forward_ref"),Nb=Symbol.for("react.suspense"),Sb=Symbol.for("react.memo"),kb=Symbol.for("react.lazy"),H0=Symbol.iterator;function Cb(e){return e===null||typeof e!="object"?null:(e=H0&&e[H0]||e["@@iterator"],typeof e=="function"?e:null)}var I2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F2=Object.assign,R2={};function Zo(e,t,n){this.props=e,this.context=t,this.refs=R2,this.updater=n||I2}Zo.prototype.isReactComponent={};Zo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function O2(){}O2.prototype=Zo.prototype;function tm(e,t,n){this.props=e,this.context=t,this.refs=R2,this.updater=n||I2}var nm=tm.prototype=new O2;nm.constructor=tm;F2(nm,Zo.prototype);nm.isPureReactComponent=!0;var V0=Array.isArray,M2=Object.prototype.hasOwnProperty,rm={current:null},B2={key:!0,ref:!0,__self:!0,__source:!0};function U2(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)M2.call(t,r)&&!B2.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:kc,type:e,key:i,ref:o,props:s,_owner:rm.current}}function Ab(e,t){return{$$typeof:kc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function am(e){return typeof e=="object"&&e!==null&&e.$$typeof===kc}function Db(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var G0=/\/+/g;function Bh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Db(""+e.key):t.toString(36)}function Bd(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case kc:case vb:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Bh(o,0):r,V0(s)?(n="",e!=null&&(n=e.replace(G0,"$&/")+"/"),Bd(s,t,n,"",function(d){return d})):s!=null&&(am(s)&&(s=Ab(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(G0,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",V0(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Bh(i,l);o+=Bd(i,t,n,c,s)}else if(c=Cb(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Bh(i,l++),o+=Bd(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function pd(e,t,n){if(e==null)return e;var r=[],s=0;return Bd(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Lb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var cr={current:null},Ud={transition:null},Eb={ReactCurrentDispatcher:cr,ReactCurrentBatchConfig:Ud,ReactCurrentOwner:rm};function z2(){throw Error("act(...) is not supported in production builds of React.")}gt.Children={map:pd,forEach:function(e,t,n){pd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return pd(e,function(){t++}),t},toArray:function(e){return pd(e,function(t){return t})||[]},only:function(e){if(!am(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};gt.Component=Zo;gt.Fragment=yb;gt.Profiler=bb;gt.PureComponent=tm;gt.StrictMode=xb;gt.Suspense=Nb;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Eb;gt.act=z2;gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=F2({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=rm.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)M2.call(t,c)&&!B2.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:kc,type:e.type,key:s,ref:i,props:r,_owner:o}};gt.createContext=function(e){return e={$$typeof:wb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_b,_context:e},e.Consumer=e};gt.createElement=U2;gt.createFactory=function(e){var t=U2.bind(null,e);return t.type=e,t};gt.createRef=function(){return{current:null}};gt.forwardRef=function(e){return{$$typeof:jb,render:e}};gt.isValidElement=am;gt.lazy=function(e){return{$$typeof:kb,_payload:{_status:-1,_result:e},_init:Lb}};gt.memo=function(e,t){return{$$typeof:Sb,type:e,compare:t===void 0?null:t}};gt.startTransition=function(e){var t=Ud.transition;Ud.transition={};try{e()}finally{Ud.transition=t}};gt.unstable_act=z2;gt.useCallback=function(e,t){return cr.current.useCallback(e,t)};gt.useContext=function(e){return cr.current.useContext(e)};gt.useDebugValue=function(){};gt.useDeferredValue=function(e){return cr.current.useDeferredValue(e)};gt.useEffect=function(e,t){return cr.current.useEffect(e,t)};gt.useId=function(){return cr.current.useId()};gt.useImperativeHandle=function(e,t,n){return cr.current.useImperativeHandle(e,t,n)};gt.useInsertionEffect=function(e,t){return cr.current.useInsertionEffect(e,t)};gt.useLayoutEffect=function(e,t){return cr.current.useLayoutEffect(e,t)};gt.useMemo=function(e,t){return cr.current.useMemo(e,t)};gt.useReducer=function(e,t,n){return cr.current.useReducer(e,t,n)};gt.useRef=function(e){return cr.current.useRef(e)};gt.useState=function(e){return cr.current.useState(e)};gt.useSyncExternalStore=function(e,t,n){return cr.current.useSyncExternalStore(e,t,n)};gt.useTransition=function(){return cr.current.useTransition()};gt.version="18.3.1";T2.exports=gt;var R=T2.exports;const $2=gb(R),Pb=mb({__proto__:null,default:$2},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qb=R,Tb=Symbol.for("react.element"),Ib=Symbol.for("react.fragment"),Fb=Object.prototype.hasOwnProperty,Rb=qb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ob={key:!0,ref:!0,__self:!0,__source:!0};function W2(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Fb.call(t,r)&&!Ob.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Tb,type:e,key:i,ref:o,props:s,_owner:Rb.current}}Ou.Fragment=Ib;Ou.jsx=W2;Ou.jsxs=W2;q2.exports=Ou;var a=q2.exports,zf={},H2={exports:{}},Ir={},V2={exports:{}},G2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Z,se){var ee=Z.length;Z.push(se);e:for(;0<ee;){var de=ee-1>>>1,D=Z[de];if(0<s(D,se))Z[de]=se,Z[ee]=D,ee=de;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var se=Z[0],ee=Z.pop();if(ee!==se){Z[0]=ee;e:for(var de=0,D=Z.length,H=D>>>1;de<H;){var J=2*(de+1)-1,V=Z[J],ne=J+1,le=Z[ne];if(0>s(V,ee))ne<D&&0>s(le,V)?(Z[de]=le,Z[ne]=ee,de=ne):(Z[de]=V,Z[J]=ee,de=J);else if(ne<D&&0>s(le,ee))Z[de]=le,Z[ne]=ee,de=ne;else break e}}return se}function s(Z,se){var ee=Z.sortIndex-se.sortIndex;return ee!==0?ee:Z.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,m=null,g=3,p=!1,j=!1,N=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Z){for(var se=n(d);se!==null;){if(se.callback===null)r(d);else if(se.startTime<=Z)r(d),se.sortIndex=se.expirationTime,t(c,se);else break;se=n(d)}}function C(Z){if(N=!1,S(Z),!j)if(n(c)!==null)j=!0,te(q);else{var se=n(d);se!==null&&oe(C,se.startTime-Z)}}function q(Z,se){j=!1,N&&(N=!1,y(x),x=-1),p=!0;var ee=g;try{for(S(se),m=n(c);m!==null&&(!(m.expirationTime>se)||Z&&!L());){var de=m.callback;if(typeof de=="function"){m.callback=null,g=m.priorityLevel;var D=de(m.expirationTime<=se);se=e.unstable_now(),typeof D=="function"?m.callback=D:m===n(c)&&r(c),S(se)}else r(c);m=n(c)}if(m!==null)var H=!0;else{var J=n(d);J!==null&&oe(C,J.startTime-se),H=!1}return H}finally{m=null,g=ee,p=!1}}var W=!1,E=null,x=-1,A=5,U=-1;function L(){return!(e.unstable_now()-U<A)}function O(){if(E!==null){var Z=e.unstable_now();U=Z;var se=!0;try{se=E(!0,Z)}finally{se?P():(W=!1,E=null)}}else W=!1}var P;if(typeof _=="function")P=function(){_(O)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,X=T.port2;T.port1.onmessage=O,P=function(){X.postMessage(null)}}else P=function(){w(O,0)};function te(Z){E=Z,W||(W=!0,P())}function oe(Z,se){x=w(function(){Z(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){j||p||(j=!0,te(q))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(Z){switch(g){case 1:case 2:case 3:var se=3;break;default:se=g}var ee=g;g=se;try{return Z()}finally{g=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,se){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ee=g;g=Z;try{return se()}finally{g=ee}},e.unstable_scheduleCallback=function(Z,se,ee){var de=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?de+ee:de):ee=de,Z){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ee+D,Z={id:h++,callback:se,priorityLevel:Z,startTime:ee,expirationTime:D,sortIndex:-1},ee>de?(Z.sortIndex=ee,t(d,Z),n(c)===null&&Z===n(d)&&(N?(y(x),x=-1):N=!0,oe(C,ee-de))):(Z.sortIndex=D,t(c,Z),j||p||(j=!0,te(q))),Z},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(Z){var se=g;return function(){var ee=g;g=se;try{return Z.apply(this,arguments)}finally{g=ee}}}})(G2);V2.exports=G2;var Mb=V2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb=R,Tr=Mb;function Le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K2=new Set,rc={};function Wi(e,t){Uo(e,t),Uo(e+"Capture",t)}function Uo(e,t){for(rc[e]=t,e=0;e<t.length;e++)K2.add(t[e])}var ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$f=Object.prototype.hasOwnProperty,Ub=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K0={},Z0={};function zb(e){return $f.call(Z0,e)?!0:$f.call(K0,e)?!1:Ub.test(e)?Z0[e]=!0:(K0[e]=!0,!1)}function $b(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wb(e,t,n,r){if(t===null||typeof t>"u"||$b(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dr(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wn[e]=new dr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wn[t]=new dr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wn[e]=new dr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wn[e]=new dr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wn[e]=new dr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wn[e]=new dr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wn[e]=new dr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wn[e]=new dr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wn[e]=new dr(e,5,!1,e.toLowerCase(),null,!1,!1)});var sm=/[\-:]([a-z])/g;function im(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sm,im);Wn[t]=new dr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sm,im);Wn[t]=new dr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sm,im);Wn[t]=new dr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wn[e]=new dr(e,1,!1,e.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wn[e]=new dr(e,1,!1,e.toLowerCase(),null,!0,!0)});function om(e,t,n,r){var s=Wn.hasOwnProperty(t)?Wn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wb(t,n,s,r)&&(n=null),r||s===null?zb(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ds=Bb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,md=Symbol.for("react.element"),mo=Symbol.for("react.portal"),go=Symbol.for("react.fragment"),lm=Symbol.for("react.strict_mode"),Wf=Symbol.for("react.profiler"),Z2=Symbol.for("react.provider"),Y2=Symbol.for("react.context"),cm=Symbol.for("react.forward_ref"),Hf=Symbol.for("react.suspense"),Vf=Symbol.for("react.suspense_list"),dm=Symbol.for("react.memo"),Ps=Symbol.for("react.lazy"),J2=Symbol.for("react.offscreen"),Y0=Symbol.iterator;function Ll(e){return e===null||typeof e!="object"?null:(e=Y0&&e[Y0]||e["@@iterator"],typeof e=="function"?e:null)}var Xt=Object.assign,Uh;function Ul(e){if(Uh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Uh=t&&t[1]||""}return`
`+Uh+e}var zh=!1;function $h(e,t){if(!e||zh)return"";zh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{zh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ul(e):""}function Hb(e){switch(e.tag){case 5:return Ul(e.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 2:case 15:return e=$h(e.type,!1),e;case 11:return e=$h(e.type.render,!1),e;case 1:return e=$h(e.type,!0),e;default:return""}}function Gf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case go:return"Fragment";case mo:return"Portal";case Wf:return"Profiler";case lm:return"StrictMode";case Hf:return"Suspense";case Vf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Y2:return(e.displayName||"Context")+".Consumer";case Z2:return(e._context.displayName||"Context")+".Provider";case cm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case dm:return t=e.displayName||null,t!==null?t:Gf(e.type)||"Memo";case Ps:t=e._payload,e=e._init;try{return Gf(e(t))}catch{}}return null}function Vb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gf(t);case 8:return t===lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function X2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Gb(e){var t=X2(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gd(e){e._valueTracker||(e._valueTracker=Gb(e))}function Q2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X2(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function au(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kf(e,t){var n=t.checked;return Xt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function J0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Zs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ev(e,t){t=t.checked,t!=null&&om(e,"checked",t,!1)}function Zf(e,t){ev(e,t);var n=Zs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Yf(e,t.type,n):t.hasOwnProperty("defaultValue")&&Yf(e,t.type,Zs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function X0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Yf(e,t,n){(t!=="number"||au(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zl=Array.isArray;function Do(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Zs(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Jf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Le(91));return Xt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Q0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Le(92));if(zl(n)){if(1<n.length)throw Error(Le(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Zs(n)}}function tv(e,t){var n=Zs(t.value),r=Zs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function eg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vd,rv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vd=vd||document.createElement("div"),vd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ac(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kb=["Webkit","ms","Moz","O"];Object.keys(Hl).forEach(function(e){Kb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hl[t]=Hl[e]})});function av(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Hl.hasOwnProperty(e)&&Hl[e]?(""+t).trim():t+"px"}function sv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=av(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Zb=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qf(e,t){if(t){if(Zb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Le(62))}}function ep(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tp=null;function um(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var np=null,Lo=null,Eo=null;function tg(e){if(e=Dc(e)){if(typeof np!="function")throw Error(Le(280));var t=e.stateNode;t&&(t=$u(t),np(e.stateNode,e.type,t))}}function iv(e){Lo?Eo?Eo.push(e):Eo=[e]:Lo=e}function ov(){if(Lo){var e=Lo,t=Eo;if(Eo=Lo=null,tg(e),t)for(e=0;e<t.length;e++)tg(t[e])}}function lv(e,t){return e(t)}function cv(){}var Wh=!1;function dv(e,t,n){if(Wh)return e(t,n);Wh=!0;try{return lv(e,t,n)}finally{Wh=!1,(Lo!==null||Eo!==null)&&(cv(),ov())}}function sc(e,t){var n=e.stateNode;if(n===null)return null;var r=$u(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Le(231,t,typeof n));return n}var rp=!1;if(ss)try{var El={};Object.defineProperty(El,"passive",{get:function(){rp=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{rp=!1}function Yb(e,t,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var Vl=!1,su=null,iu=!1,ap=null,Jb={onError:function(e){Vl=!0,su=e}};function Xb(e,t,n,r,s,i,o,l,c){Vl=!1,su=null,Yb.apply(Jb,arguments)}function Qb(e,t,n,r,s,i,o,l,c){if(Xb.apply(this,arguments),Vl){if(Vl){var d=su;Vl=!1,su=null}else throw Error(Le(198));iu||(iu=!0,ap=d)}}function Hi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function uv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ng(e){if(Hi(e)!==e)throw Error(Le(188))}function e_(e){var t=e.alternate;if(!t){if(t=Hi(e),t===null)throw Error(Le(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ng(s),e;if(i===r)return ng(s),t;i=i.sibling}throw Error(Le(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Le(189))}}if(n.alternate!==r)throw Error(Le(190))}if(n.tag!==3)throw Error(Le(188));return n.stateNode.current===n?e:t}function hv(e){return e=e_(e),e!==null?fv(e):null}function fv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fv(e);if(t!==null)return t;e=e.sibling}return null}var pv=Tr.unstable_scheduleCallback,rg=Tr.unstable_cancelCallback,t_=Tr.unstable_shouldYield,n_=Tr.unstable_requestPaint,mn=Tr.unstable_now,r_=Tr.unstable_getCurrentPriorityLevel,hm=Tr.unstable_ImmediatePriority,mv=Tr.unstable_UserBlockingPriority,ou=Tr.unstable_NormalPriority,a_=Tr.unstable_LowPriority,gv=Tr.unstable_IdlePriority,Mu=null,Pa=null;function s_(e){if(Pa&&typeof Pa.onCommitFiberRoot=="function")try{Pa.onCommitFiberRoot(Mu,e,void 0,(e.current.flags&128)===128)}catch{}}var ha=Math.clz32?Math.clz32:l_,i_=Math.log,o_=Math.LN2;function l_(e){return e>>>=0,e===0?32:31-(i_(e)/o_|0)|0}var yd=64,xd=4194304;function $l(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=$l(l):(i&=o,i!==0&&(r=$l(i)))}else o=n&~s,o!==0?r=$l(o):i!==0&&(r=$l(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ha(t),s=1<<n,r|=e[n],t&=~s;return r}function c_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d_(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ha(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=c_(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function sp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vv(){var e=yd;return yd<<=1,!(yd&4194240)&&(yd=64),e}function Hh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Cc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ha(t),e[t]=n}function u_(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ha(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function fm(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ha(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Et=0;function yv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xv,pm,bv,_v,wv,ip=!1,bd=[],Bs=null,Us=null,zs=null,ic=new Map,oc=new Map,Ts=[],h_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ag(e,t){switch(e){case"focusin":case"focusout":Bs=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":ic.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(t.pointerId)}}function Pl(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Dc(t),t!==null&&pm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function f_(e,t,n,r,s){switch(t){case"focusin":return Bs=Pl(Bs,e,t,n,r,s),!0;case"dragenter":return Us=Pl(Us,e,t,n,r,s),!0;case"mouseover":return zs=Pl(zs,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ic.set(i,Pl(ic.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,oc.set(i,Pl(oc.get(i)||null,e,t,n,r,s)),!0}return!1}function jv(e){var t=Ei(e.target);if(t!==null){var n=Hi(t);if(n!==null){if(t=n.tag,t===13){if(t=uv(n),t!==null){e.blockedOn=t,wv(e.priority,function(){bv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=op(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);tp=r,n.target.dispatchEvent(r),tp=null}else return t=Dc(n),t!==null&&pm(t),e.blockedOn=n,!1;t.shift()}return!0}function sg(e,t,n){zd(e)&&n.delete(t)}function p_(){ip=!1,Bs!==null&&zd(Bs)&&(Bs=null),Us!==null&&zd(Us)&&(Us=null),zs!==null&&zd(zs)&&(zs=null),ic.forEach(sg),oc.forEach(sg)}function ql(e,t){e.blockedOn===t&&(e.blockedOn=null,ip||(ip=!0,Tr.unstable_scheduleCallback(Tr.unstable_NormalPriority,p_)))}function lc(e){function t(s){return ql(s,e)}if(0<bd.length){ql(bd[0],e);for(var n=1;n<bd.length;n++){var r=bd[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Bs!==null&&ql(Bs,e),Us!==null&&ql(Us,e),zs!==null&&ql(zs,e),ic.forEach(t),oc.forEach(t),n=0;n<Ts.length;n++)r=Ts[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ts.length&&(n=Ts[0],n.blockedOn===null);)jv(n),n.blockedOn===null&&Ts.shift()}var Po=ds.ReactCurrentBatchConfig,cu=!0;function m_(e,t,n,r){var s=Et,i=Po.transition;Po.transition=null;try{Et=1,mm(e,t,n,r)}finally{Et=s,Po.transition=i}}function g_(e,t,n,r){var s=Et,i=Po.transition;Po.transition=null;try{Et=4,mm(e,t,n,r)}finally{Et=s,Po.transition=i}}function mm(e,t,n,r){if(cu){var s=op(e,t,n,r);if(s===null)tf(e,t,r,du,n),ag(e,r);else if(f_(s,e,t,n,r))r.stopPropagation();else if(ag(e,r),t&4&&-1<h_.indexOf(e)){for(;s!==null;){var i=Dc(s);if(i!==null&&xv(i),i=op(e,t,n,r),i===null&&tf(e,t,r,du,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else tf(e,t,r,null,n)}}var du=null;function op(e,t,n,r){if(du=null,e=um(r),e=Ei(e),e!==null)if(t=Hi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=uv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return du=e,null}function Nv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r_()){case hm:return 1;case mv:return 4;case ou:case a_:return 16;case gv:return 536870912;default:return 16}default:return 16}}var Fs=null,gm=null,$d=null;function Sv(){if($d)return $d;var e,t=gm,n=t.length,r,s="value"in Fs?Fs.value:Fs.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return $d=s.slice(e,1<r?1-r:void 0)}function Wd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _d(){return!0}function ig(){return!1}function Fr(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?_d:ig,this.isPropagationStopped=ig,this}return Xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_d)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_d)},persist:function(){},isPersistent:_d}),t}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vm=Fr(Yo),Ac=Xt({},Yo,{view:0,detail:0}),v_=Fr(Ac),Vh,Gh,Tl,Bu=Xt({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ym,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tl&&(Tl&&e.type==="mousemove"?(Vh=e.screenX-Tl.screenX,Gh=e.screenY-Tl.screenY):Gh=Vh=0,Tl=e),Vh)},movementY:function(e){return"movementY"in e?e.movementY:Gh}}),og=Fr(Bu),y_=Xt({},Bu,{dataTransfer:0}),x_=Fr(y_),b_=Xt({},Ac,{relatedTarget:0}),Kh=Fr(b_),__=Xt({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),w_=Fr(__),j_=Xt({},Yo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),N_=Fr(j_),S_=Xt({},Yo,{data:0}),lg=Fr(S_),k_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=A_[e])?!!t[e]:!1}function ym(){return D_}var L_=Xt({},Ac,{key:function(e){if(e.key){var t=k_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?C_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ym,charCode:function(e){return e.type==="keypress"?Wd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),E_=Fr(L_),P_=Xt({},Bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cg=Fr(P_),q_=Xt({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ym}),T_=Fr(q_),I_=Xt({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),F_=Fr(I_),R_=Xt({},Bu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),O_=Fr(R_),M_=[9,13,27,32],xm=ss&&"CompositionEvent"in window,Gl=null;ss&&"documentMode"in document&&(Gl=document.documentMode);var B_=ss&&"TextEvent"in window&&!Gl,kv=ss&&(!xm||Gl&&8<Gl&&11>=Gl),dg=" ",ug=!1;function Cv(e,t){switch(e){case"keyup":return M_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Av(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vo=!1;function U_(e,t){switch(e){case"compositionend":return Av(t);case"keypress":return t.which!==32?null:(ug=!0,dg);case"textInput":return e=t.data,e===dg&&ug?null:e;default:return null}}function z_(e,t){if(vo)return e==="compositionend"||!xm&&Cv(e,t)?(e=Sv(),$d=gm=Fs=null,vo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kv&&t.locale!=="ko"?null:t.data;default:return null}}var $_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$_[e.type]:t==="textarea"}function Dv(e,t,n,r){iv(r),t=uu(t,"onChange"),0<t.length&&(n=new vm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kl=null,cc=null;function W_(e){Bv(e,0)}function Uu(e){var t=bo(e);if(Q2(t))return e}function H_(e,t){if(e==="change")return t}var Lv=!1;if(ss){var Zh;if(ss){var Yh="oninput"in document;if(!Yh){var fg=document.createElement("div");fg.setAttribute("oninput","return;"),Yh=typeof fg.oninput=="function"}Zh=Yh}else Zh=!1;Lv=Zh&&(!document.documentMode||9<document.documentMode)}function pg(){Kl&&(Kl.detachEvent("onpropertychange",Ev),cc=Kl=null)}function Ev(e){if(e.propertyName==="value"&&Uu(cc)){var t=[];Dv(t,cc,e,um(e)),dv(W_,t)}}function V_(e,t,n){e==="focusin"?(pg(),Kl=t,cc=n,Kl.attachEvent("onpropertychange",Ev)):e==="focusout"&&pg()}function G_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Uu(cc)}function K_(e,t){if(e==="click")return Uu(t)}function Z_(e,t){if(e==="input"||e==="change")return Uu(t)}function Y_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pa=typeof Object.is=="function"?Object.is:Y_;function dc(e,t){if(pa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$f.call(t,s)||!pa(e[s],t[s]))return!1}return!0}function mg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gg(e,t){var n=mg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mg(n)}}function Pv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qv(){for(var e=window,t=au();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=au(e.document)}return t}function bm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function J_(e){var t=qv(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Pv(n.ownerDocument.documentElement,n)){if(r!==null&&bm(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=gg(n,i);var o=gg(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var X_=ss&&"documentMode"in document&&11>=document.documentMode,yo=null,lp=null,Zl=null,cp=!1;function vg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cp||yo==null||yo!==au(r)||(r=yo,"selectionStart"in r&&bm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zl&&dc(Zl,r)||(Zl=r,r=uu(lp,"onSelect"),0<r.length&&(t=new vm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yo)))}function wd(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xo={animationend:wd("Animation","AnimationEnd"),animationiteration:wd("Animation","AnimationIteration"),animationstart:wd("Animation","AnimationStart"),transitionend:wd("Transition","TransitionEnd")},Jh={},Tv={};ss&&(Tv=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function zu(e){if(Jh[e])return Jh[e];if(!xo[e])return e;var t=xo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Tv)return Jh[e]=t[n];return e}var Iv=zu("animationend"),Fv=zu("animationiteration"),Rv=zu("animationstart"),Ov=zu("transitionend"),Mv=new Map,yg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(e,t){Mv.set(e,t),Wi(t,[e])}for(var Xh=0;Xh<yg.length;Xh++){var Qh=yg[Xh],Q_=Qh.toLowerCase(),ew=Qh[0].toUpperCase()+Qh.slice(1);Xs(Q_,"on"+ew)}Xs(Iv,"onAnimationEnd");Xs(Fv,"onAnimationIteration");Xs(Rv,"onAnimationStart");Xs("dblclick","onDoubleClick");Xs("focusin","onFocus");Xs("focusout","onBlur");Xs(Ov,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function xg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Qb(r,t,void 0,e),e.currentTarget=null}function Bv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;xg(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;xg(s,l,d),i=c}}}if(iu)throw e=ap,iu=!1,ap=null,e}function $t(e,t){var n=t[pp];n===void 0&&(n=t[pp]=new Set);var r=e+"__bubble";n.has(r)||(Uv(t,e,2,!1),n.add(r))}function ef(e,t,n){var r=0;t&&(r|=4),Uv(n,e,r,t)}var jd="_reactListening"+Math.random().toString(36).slice(2);function uc(e){if(!e[jd]){e[jd]=!0,K2.forEach(function(n){n!=="selectionchange"&&(tw.has(n)||ef(n,!1,e),ef(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jd]||(t[jd]=!0,ef("selectionchange",!1,t))}}function Uv(e,t,n,r){switch(Nv(t)){case 1:var s=m_;break;case 4:s=g_;break;default:s=mm}n=s.bind(null,t,n,e),s=void 0,!rp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function tf(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ei(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}dv(function(){var d=i,h=um(n),m=[];e:{var g=Mv.get(e);if(g!==void 0){var p=vm,j=e;switch(e){case"keypress":if(Wd(n)===0)break e;case"keydown":case"keyup":p=E_;break;case"focusin":j="focus",p=Kh;break;case"focusout":j="blur",p=Kh;break;case"beforeblur":case"afterblur":p=Kh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=og;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=x_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=T_;break;case Iv:case Fv:case Rv:p=w_;break;case Ov:p=F_;break;case"scroll":p=v_;break;case"wheel":p=O_;break;case"copy":case"cut":case"paste":p=N_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=cg}var N=(t&4)!==0,w=!N&&e==="scroll",y=N?g!==null?g+"Capture":null:g;N=[];for(var _=d,S;_!==null;){S=_;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,y!==null&&(C=sc(_,y),C!=null&&N.push(hc(_,C,S)))),w)break;_=_.return}0<N.length&&(g=new p(g,j,null,n,h),m.push({event:g,listeners:N}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",g&&n!==tp&&(j=n.relatedTarget||n.fromElement)&&(Ei(j)||j[is]))break e;if((p||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,p?(j=n.relatedTarget||n.toElement,p=d,j=j?Ei(j):null,j!==null&&(w=Hi(j),j!==w||j.tag!==5&&j.tag!==6)&&(j=null)):(p=null,j=d),p!==j)){if(N=og,C="onMouseLeave",y="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(N=cg,C="onPointerLeave",y="onPointerEnter",_="pointer"),w=p==null?g:bo(p),S=j==null?g:bo(j),g=new N(C,_+"leave",p,n,h),g.target=w,g.relatedTarget=S,C=null,Ei(h)===d&&(N=new N(y,_+"enter",j,n,h),N.target=S,N.relatedTarget=w,C=N),w=C,p&&j)t:{for(N=p,y=j,_=0,S=N;S;S=lo(S))_++;for(S=0,C=y;C;C=lo(C))S++;for(;0<_-S;)N=lo(N),_--;for(;0<S-_;)y=lo(y),S--;for(;_--;){if(N===y||y!==null&&N===y.alternate)break t;N=lo(N),y=lo(y)}N=null}else N=null;p!==null&&bg(m,g,p,N,!1),j!==null&&w!==null&&bg(m,w,j,N,!0)}}e:{if(g=d?bo(d):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var q=H_;else if(hg(g))if(Lv)q=Z_;else{q=G_;var W=V_}else(p=g.nodeName)&&p.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(q=K_);if(q&&(q=q(e,d))){Dv(m,q,n,h);break e}W&&W(e,g,d),e==="focusout"&&(W=g._wrapperState)&&W.controlled&&g.type==="number"&&Yf(g,"number",g.value)}switch(W=d?bo(d):window,e){case"focusin":(hg(W)||W.contentEditable==="true")&&(yo=W,lp=d,Zl=null);break;case"focusout":Zl=lp=yo=null;break;case"mousedown":cp=!0;break;case"contextmenu":case"mouseup":case"dragend":cp=!1,vg(m,n,h);break;case"selectionchange":if(X_)break;case"keydown":case"keyup":vg(m,n,h)}var E;if(xm)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else vo?Cv(e,n)&&(x="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(kv&&n.locale!=="ko"&&(vo||x!=="onCompositionStart"?x==="onCompositionEnd"&&vo&&(E=Sv()):(Fs=h,gm="value"in Fs?Fs.value:Fs.textContent,vo=!0)),W=uu(d,x),0<W.length&&(x=new lg(x,e,null,n,h),m.push({event:x,listeners:W}),E?x.data=E:(E=Av(n),E!==null&&(x.data=E)))),(E=B_?U_(e,n):z_(e,n))&&(d=uu(d,"onBeforeInput"),0<d.length&&(h=new lg("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=E))}Bv(m,t)})}function hc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function uu(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=sc(e,n),i!=null&&r.unshift(hc(e,i,s)),i=sc(e,t),i!=null&&r.push(hc(e,i,s))),e=e.return}return r}function lo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bg(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=sc(n,i),c!=null&&o.unshift(hc(n,c,l))):s||(c=sc(n,i),c!=null&&o.push(hc(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var nw=/\r\n?/g,rw=/\u0000|\uFFFD/g;function _g(e){return(typeof e=="string"?e:""+e).replace(nw,`
`).replace(rw,"")}function Nd(e,t,n){if(t=_g(t),_g(e)!==t&&n)throw Error(Le(425))}function hu(){}var dp=null,up=null;function hp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fp=typeof setTimeout=="function"?setTimeout:void 0,aw=typeof clearTimeout=="function"?clearTimeout:void 0,wg=typeof Promise=="function"?Promise:void 0,sw=typeof queueMicrotask=="function"?queueMicrotask:typeof wg<"u"?function(e){return wg.resolve(null).then(e).catch(iw)}:fp;function iw(e){setTimeout(function(){throw e})}function nf(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),lc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);lc(t)}function $s(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function jg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),Da="__reactFiber$"+Jo,fc="__reactProps$"+Jo,is="__reactContainer$"+Jo,pp="__reactEvents$"+Jo,ow="__reactListeners$"+Jo,lw="__reactHandles$"+Jo;function Ei(e){var t=e[Da];if(t)return t;for(var n=e.parentNode;n;){if(t=n[is]||n[Da]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=jg(e);e!==null;){if(n=e[Da])return n;e=jg(e)}return t}e=n,n=e.parentNode}return null}function Dc(e){return e=e[Da]||e[is],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Le(33))}function $u(e){return e[fc]||null}var mp=[],_o=-1;function Qs(e){return{current:e}}function Ht(e){0>_o||(e.current=mp[_o],mp[_o]=null,_o--)}function Ut(e,t){_o++,mp[_o]=e.current,e.current=t}var Ys={},rr=Qs(Ys),gr=Qs(!1),Ri=Ys;function zo(e,t){var n=e.type.contextTypes;if(!n)return Ys;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vr(e){return e=e.childContextTypes,e!=null}function fu(){Ht(gr),Ht(rr)}function Ng(e,t,n){if(rr.current!==Ys)throw Error(Le(168));Ut(rr,t),Ut(gr,n)}function zv(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Le(108,Vb(e)||"Unknown",s));return Xt({},n,r)}function pu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ys,Ri=rr.current,Ut(rr,e),Ut(gr,gr.current),!0}function Sg(e,t,n){var r=e.stateNode;if(!r)throw Error(Le(169));n?(e=zv(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ht(gr),Ht(rr),Ut(rr,e)):Ht(gr),Ut(gr,n)}var Qa=null,Wu=!1,rf=!1;function $v(e){Qa===null?Qa=[e]:Qa.push(e)}function cw(e){Wu=!0,$v(e)}function ei(){if(!rf&&Qa!==null){rf=!0;var e=0,t=Et;try{var n=Qa;for(Et=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Qa=null,Wu=!1}catch(s){throw Qa!==null&&(Qa=Qa.slice(e+1)),pv(hm,ei),s}finally{Et=t,rf=!1}}return null}var wo=[],jo=0,mu=null,gu=0,Vr=[],Gr=0,Oi=null,ts=1,ns="";function Ci(e,t){wo[jo++]=gu,wo[jo++]=mu,mu=e,gu=t}function Wv(e,t,n){Vr[Gr++]=ts,Vr[Gr++]=ns,Vr[Gr++]=Oi,Oi=e;var r=ts;e=ns;var s=32-ha(r)-1;r&=~(1<<s),n+=1;var i=32-ha(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ts=1<<32-ha(t)+s|n<<s|r,ns=i+e}else ts=1<<i|n<<s|r,ns=e}function _m(e){e.return!==null&&(Ci(e,1),Wv(e,1,0))}function wm(e){for(;e===mu;)mu=wo[--jo],wo[jo]=null,gu=wo[--jo],wo[jo]=null;for(;e===Oi;)Oi=Vr[--Gr],Vr[Gr]=null,ns=Vr[--Gr],Vr[Gr]=null,ts=Vr[--Gr],Vr[Gr]=null}var qr=null,Er=null,Gt=!1,ua=null;function Hv(e,t){var n=Kr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function kg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qr=e,Er=$s(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qr=e,Er=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Oi!==null?{id:ts,overflow:ns}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qr=e,Er=null,!0):!1;default:return!1}}function gp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vp(e){if(Gt){var t=Er;if(t){var n=t;if(!kg(e,t)){if(gp(e))throw Error(Le(418));t=$s(n.nextSibling);var r=qr;t&&kg(e,t)?Hv(r,n):(e.flags=e.flags&-4097|2,Gt=!1,qr=e)}}else{if(gp(e))throw Error(Le(418));e.flags=e.flags&-4097|2,Gt=!1,qr=e}}}function Cg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qr=e}function Sd(e){if(e!==qr)return!1;if(!Gt)return Cg(e),Gt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hp(e.type,e.memoizedProps)),t&&(t=Er)){if(gp(e))throw Vv(),Error(Le(418));for(;t;)Hv(e,t),t=$s(t.nextSibling)}if(Cg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Er=$s(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Er=null}}else Er=qr?$s(e.stateNode.nextSibling):null;return!0}function Vv(){for(var e=Er;e;)e=$s(e.nextSibling)}function $o(){Er=qr=null,Gt=!1}function jm(e){ua===null?ua=[e]:ua.push(e)}var dw=ds.ReactCurrentBatchConfig;function Il(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Le(309));var r=n.stateNode}if(!r)throw Error(Le(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Le(284));if(!n._owner)throw Error(Le(290,e))}return e}function kd(e,t){throw e=Object.prototype.toString.call(t),Error(Le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ag(e){var t=e._init;return t(e._payload)}function Gv(e){function t(y,_){if(e){var S=y.deletions;S===null?(y.deletions=[_],y.flags|=16):S.push(_)}}function n(y,_){if(!e)return null;for(;_!==null;)t(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function s(y,_){return y=Gs(y,_),y.index=0,y.sibling=null,y}function i(y,_,S){return y.index=S,e?(S=y.alternate,S!==null?(S=S.index,S<_?(y.flags|=2,_):S):(y.flags|=2,_)):(y.flags|=1048576,_)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,_,S,C){return _===null||_.tag!==6?(_=uf(S,y.mode,C),_.return=y,_):(_=s(_,S),_.return=y,_)}function c(y,_,S,C){var q=S.type;return q===go?h(y,_,S.props.children,C,S.key):_!==null&&(_.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Ps&&Ag(q)===_.type)?(C=s(_,S.props),C.ref=Il(y,_,S),C.return=y,C):(C=Jd(S.type,S.key,S.props,null,y.mode,C),C.ref=Il(y,_,S),C.return=y,C)}function d(y,_,S,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=hf(S,y.mode,C),_.return=y,_):(_=s(_,S.children||[]),_.return=y,_)}function h(y,_,S,C,q){return _===null||_.tag!==7?(_=Ii(S,y.mode,C,q),_.return=y,_):(_=s(_,S),_.return=y,_)}function m(y,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=uf(""+_,y.mode,S),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case md:return S=Jd(_.type,_.key,_.props,null,y.mode,S),S.ref=Il(y,null,_),S.return=y,S;case mo:return _=hf(_,y.mode,S),_.return=y,_;case Ps:var C=_._init;return m(y,C(_._payload),S)}if(zl(_)||Ll(_))return _=Ii(_,y.mode,S,null),_.return=y,_;kd(y,_)}return null}function g(y,_,S,C){var q=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return q!==null?null:l(y,_,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case md:return S.key===q?c(y,_,S,C):null;case mo:return S.key===q?d(y,_,S,C):null;case Ps:return q=S._init,g(y,_,q(S._payload),C)}if(zl(S)||Ll(S))return q!==null?null:h(y,_,S,C,null);kd(y,S)}return null}function p(y,_,S,C,q){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(S)||null,l(_,y,""+C,q);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case md:return y=y.get(C.key===null?S:C.key)||null,c(_,y,C,q);case mo:return y=y.get(C.key===null?S:C.key)||null,d(_,y,C,q);case Ps:var W=C._init;return p(y,_,S,W(C._payload),q)}if(zl(C)||Ll(C))return y=y.get(S)||null,h(_,y,C,q,null);kd(_,C)}return null}function j(y,_,S,C){for(var q=null,W=null,E=_,x=_=0,A=null;E!==null&&x<S.length;x++){E.index>x?(A=E,E=null):A=E.sibling;var U=g(y,E,S[x],C);if(U===null){E===null&&(E=A);break}e&&E&&U.alternate===null&&t(y,E),_=i(U,_,x),W===null?q=U:W.sibling=U,W=U,E=A}if(x===S.length)return n(y,E),Gt&&Ci(y,x),q;if(E===null){for(;x<S.length;x++)E=m(y,S[x],C),E!==null&&(_=i(E,_,x),W===null?q=E:W.sibling=E,W=E);return Gt&&Ci(y,x),q}for(E=r(y,E);x<S.length;x++)A=p(E,y,x,S[x],C),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?x:A.key),_=i(A,_,x),W===null?q=A:W.sibling=A,W=A);return e&&E.forEach(function(L){return t(y,L)}),Gt&&Ci(y,x),q}function N(y,_,S,C){var q=Ll(S);if(typeof q!="function")throw Error(Le(150));if(S=q.call(S),S==null)throw Error(Le(151));for(var W=q=null,E=_,x=_=0,A=null,U=S.next();E!==null&&!U.done;x++,U=S.next()){E.index>x?(A=E,E=null):A=E.sibling;var L=g(y,E,U.value,C);if(L===null){E===null&&(E=A);break}e&&E&&L.alternate===null&&t(y,E),_=i(L,_,x),W===null?q=L:W.sibling=L,W=L,E=A}if(U.done)return n(y,E),Gt&&Ci(y,x),q;if(E===null){for(;!U.done;x++,U=S.next())U=m(y,U.value,C),U!==null&&(_=i(U,_,x),W===null?q=U:W.sibling=U,W=U);return Gt&&Ci(y,x),q}for(E=r(y,E);!U.done;x++,U=S.next())U=p(E,y,x,U.value,C),U!==null&&(e&&U.alternate!==null&&E.delete(U.key===null?x:U.key),_=i(U,_,x),W===null?q=U:W.sibling=U,W=U);return e&&E.forEach(function(O){return t(y,O)}),Gt&&Ci(y,x),q}function w(y,_,S,C){if(typeof S=="object"&&S!==null&&S.type===go&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case md:e:{for(var q=S.key,W=_;W!==null;){if(W.key===q){if(q=S.type,q===go){if(W.tag===7){n(y,W.sibling),_=s(W,S.props.children),_.return=y,y=_;break e}}else if(W.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Ps&&Ag(q)===W.type){n(y,W.sibling),_=s(W,S.props),_.ref=Il(y,W,S),_.return=y,y=_;break e}n(y,W);break}else t(y,W);W=W.sibling}S.type===go?(_=Ii(S.props.children,y.mode,C,S.key),_.return=y,y=_):(C=Jd(S.type,S.key,S.props,null,y.mode,C),C.ref=Il(y,_,S),C.return=y,y=C)}return o(y);case mo:e:{for(W=S.key;_!==null;){if(_.key===W)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(y,_.sibling),_=s(_,S.children||[]),_.return=y,y=_;break e}else{n(y,_);break}else t(y,_);_=_.sibling}_=hf(S,y.mode,C),_.return=y,y=_}return o(y);case Ps:return W=S._init,w(y,_,W(S._payload),C)}if(zl(S))return j(y,_,S,C);if(Ll(S))return N(y,_,S,C);kd(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(y,_.sibling),_=s(_,S),_.return=y,y=_):(n(y,_),_=uf(S,y.mode,C),_.return=y,y=_),o(y)):n(y,_)}return w}var Wo=Gv(!0),Kv=Gv(!1),vu=Qs(null),yu=null,No=null,Nm=null;function Sm(){Nm=No=yu=null}function km(e){var t=vu.current;Ht(vu),e._currentValue=t}function yp(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function qo(e,t){yu=e,Nm=No=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mr=!0),e.firstContext=null)}function Jr(e){var t=e._currentValue;if(Nm!==e)if(e={context:e,memoizedValue:t,next:null},No===null){if(yu===null)throw Error(Le(308));No=e,yu.dependencies={lanes:0,firstContext:e}}else No=No.next=e;return t}var Pi=null;function Cm(e){Pi===null?Pi=[e]:Pi.push(e)}function Zv(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Cm(t)):(n.next=s.next,s.next=n),t.interleaved=n,os(e,r)}function os(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qs=!1;function Am(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function as(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ws(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,_t&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,os(e,n)}return s=r.interleaved,s===null?(t.next=t,Cm(r)):(t.next=s.next,s.next=t),r.interleaved=t,os(e,n)}function Hd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fm(e,n)}}function Dg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xu(e,t,n,r){var s=e.updateQueue;qs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,h=d=c=null,l=i;do{var g=l.lane,p=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=e,N=l;switch(g=t,p=n,N.tag){case 1:if(j=N.payload,typeof j=="function"){m=j.call(p,m,g);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=N.payload,g=typeof j=="function"?j.call(p,m,g):j,g==null)break e;m=Xt({},m,g);break e;case 2:qs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else p={eventTime:p,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=p,c=m):h=h.next=p,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Bi|=o,e.lanes=o,e.memoizedState=m}}function Lg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Le(191,s));s.call(r)}}}var Lc={},qa=Qs(Lc),pc=Qs(Lc),mc=Qs(Lc);function qi(e){if(e===Lc)throw Error(Le(174));return e}function Dm(e,t){switch(Ut(mc,t),Ut(pc,e),Ut(qa,Lc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xf(t,e)}Ht(qa),Ut(qa,t)}function Ho(){Ht(qa),Ht(pc),Ht(mc)}function Jv(e){qi(mc.current);var t=qi(qa.current),n=Xf(t,e.type);t!==n&&(Ut(pc,e),Ut(qa,n))}function Lm(e){pc.current===e&&(Ht(qa),Ht(pc))}var Zt=Qs(0);function bu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var af=[];function Em(){for(var e=0;e<af.length;e++)af[e]._workInProgressVersionPrimary=null;af.length=0}var Vd=ds.ReactCurrentDispatcher,sf=ds.ReactCurrentBatchConfig,Mi=0,Yt=null,Dn=null,Pn=null,_u=!1,Yl=!1,gc=0,uw=0;function Yn(){throw Error(Le(321))}function Pm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pa(e[n],t[n]))return!1;return!0}function qm(e,t,n,r,s,i){if(Mi=i,Yt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vd.current=e===null||e.memoizedState===null?mw:gw,e=n(r,s),Yl){i=0;do{if(Yl=!1,gc=0,25<=i)throw Error(Le(301));i+=1,Pn=Dn=null,t.updateQueue=null,Vd.current=vw,e=n(r,s)}while(Yl)}if(Vd.current=wu,t=Dn!==null&&Dn.next!==null,Mi=0,Pn=Dn=Yt=null,_u=!1,t)throw Error(Le(300));return e}function Tm(){var e=gc!==0;return gc=0,e}function Aa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Yt.memoizedState=Pn=e:Pn=Pn.next=e,Pn}function Xr(){if(Dn===null){var e=Yt.alternate;e=e!==null?e.memoizedState:null}else e=Dn.next;var t=Pn===null?Yt.memoizedState:Pn.next;if(t!==null)Pn=t,Dn=e;else{if(e===null)throw Error(Le(310));Dn=e,e={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Pn===null?Yt.memoizedState=Pn=e:Pn=Pn.next=e}return Pn}function vc(e,t){return typeof t=="function"?t(e):t}function of(e){var t=Xr(),n=t.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=e;var r=Dn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((Mi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Yt.lanes|=h,Bi|=h}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,pa(r,t.memoizedState)||(mr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Yt.lanes|=i,Bi|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function lf(e){var t=Xr(),n=t.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);pa(i,t.memoizedState)||(mr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Xv(){}function Qv(e,t){var n=Yt,r=Xr(),s=t(),i=!pa(r.memoizedState,s);if(i&&(r.memoizedState=s,mr=!0),r=r.queue,Im(ny.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Pn!==null&&Pn.memoizedState.tag&1){if(n.flags|=2048,yc(9,ty.bind(null,n,r,s,t),void 0,null),Tn===null)throw Error(Le(349));Mi&30||ey(n,t,s)}return s}function ey(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Yt.updateQueue,t===null?(t={lastEffect:null,stores:null},Yt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ty(e,t,n,r){t.value=n,t.getSnapshot=r,ry(t)&&ay(e)}function ny(e,t,n){return n(function(){ry(t)&&ay(e)})}function ry(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pa(e,n)}catch{return!0}}function ay(e){var t=os(e,1);t!==null&&fa(t,e,1,-1)}function Eg(e){var t=Aa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vc,lastRenderedState:e},t.queue=e,e=e.dispatch=pw.bind(null,Yt,e),[t.memoizedState,e]}function yc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Yt.updateQueue,t===null?(t={lastEffect:null,stores:null},Yt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function sy(){return Xr().memoizedState}function Gd(e,t,n,r){var s=Aa();Yt.flags|=e,s.memoizedState=yc(1|t,n,void 0,r===void 0?null:r)}function Hu(e,t,n,r){var s=Xr();r=r===void 0?null:r;var i=void 0;if(Dn!==null){var o=Dn.memoizedState;if(i=o.destroy,r!==null&&Pm(r,o.deps)){s.memoizedState=yc(t,n,i,r);return}}Yt.flags|=e,s.memoizedState=yc(1|t,n,i,r)}function Pg(e,t){return Gd(8390656,8,e,t)}function Im(e,t){return Hu(2048,8,e,t)}function iy(e,t){return Hu(4,2,e,t)}function oy(e,t){return Hu(4,4,e,t)}function ly(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cy(e,t,n){return n=n!=null?n.concat([e]):null,Hu(4,4,ly.bind(null,t,e),n)}function Fm(){}function dy(e,t){var n=Xr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function uy(e,t){var n=Xr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function hy(e,t,n){return Mi&21?(pa(n,t)||(n=vv(),Yt.lanes|=n,Bi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mr=!0),e.memoizedState=n)}function hw(e,t){var n=Et;Et=n!==0&&4>n?n:4,e(!0);var r=sf.transition;sf.transition={};try{e(!1),t()}finally{Et=n,sf.transition=r}}function fy(){return Xr().memoizedState}function fw(e,t,n){var r=Vs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},py(e))my(t,n);else if(n=Zv(e,t,n,r),n!==null){var s=lr();fa(n,e,r,s),gy(n,t,r)}}function pw(e,t,n){var r=Vs(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(py(e))my(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,pa(l,o)){var c=t.interleaved;c===null?(s.next=s,Cm(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Zv(e,t,s,r),n!==null&&(s=lr(),fa(n,e,r,s),gy(n,t,r))}}function py(e){var t=e.alternate;return e===Yt||t!==null&&t===Yt}function my(e,t){Yl=_u=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gy(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fm(e,n)}}var wu={readContext:Jr,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useInsertionEffect:Yn,useLayoutEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useMutableSource:Yn,useSyncExternalStore:Yn,useId:Yn,unstable_isNewReconciler:!1},mw={readContext:Jr,useCallback:function(e,t){return Aa().memoizedState=[e,t===void 0?null:t],e},useContext:Jr,useEffect:Pg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Gd(4194308,4,ly.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Gd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gd(4,2,e,t)},useMemo:function(e,t){var n=Aa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Aa();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=fw.bind(null,Yt,e),[r.memoizedState,e]},useRef:function(e){var t=Aa();return e={current:e},t.memoizedState=e},useState:Eg,useDebugValue:Fm,useDeferredValue:function(e){return Aa().memoizedState=e},useTransition:function(){var e=Eg(!1),t=e[0];return e=hw.bind(null,e[1]),Aa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Yt,s=Aa();if(Gt){if(n===void 0)throw Error(Le(407));n=n()}else{if(n=t(),Tn===null)throw Error(Le(349));Mi&30||ey(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Pg(ny.bind(null,r,i,e),[e]),r.flags|=2048,yc(9,ty.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Aa(),t=Tn.identifierPrefix;if(Gt){var n=ns,r=ts;n=(r&~(1<<32-ha(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=uw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gw={readContext:Jr,useCallback:dy,useContext:Jr,useEffect:Im,useImperativeHandle:cy,useInsertionEffect:iy,useLayoutEffect:oy,useMemo:uy,useReducer:of,useRef:sy,useState:function(){return of(vc)},useDebugValue:Fm,useDeferredValue:function(e){var t=Xr();return hy(t,Dn.memoizedState,e)},useTransition:function(){var e=of(vc)[0],t=Xr().memoizedState;return[e,t]},useMutableSource:Xv,useSyncExternalStore:Qv,useId:fy,unstable_isNewReconciler:!1},vw={readContext:Jr,useCallback:dy,useContext:Jr,useEffect:Im,useImperativeHandle:cy,useInsertionEffect:iy,useLayoutEffect:oy,useMemo:uy,useReducer:lf,useRef:sy,useState:function(){return lf(vc)},useDebugValue:Fm,useDeferredValue:function(e){var t=Xr();return Dn===null?t.memoizedState=e:hy(t,Dn.memoizedState,e)},useTransition:function(){var e=lf(vc)[0],t=Xr().memoizedState;return[e,t]},useMutableSource:Xv,useSyncExternalStore:Qv,useId:fy,unstable_isNewReconciler:!1};function ca(e,t){if(e&&e.defaultProps){t=Xt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function xp(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vu={isMounted:function(e){return(e=e._reactInternals)?Hi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=lr(),s=Vs(e),i=as(r,s);i.payload=t,n!=null&&(i.callback=n),t=Ws(e,i,s),t!==null&&(fa(t,e,s,r),Hd(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=lr(),s=Vs(e),i=as(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ws(e,i,s),t!==null&&(fa(t,e,s,r),Hd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=lr(),r=Vs(e),s=as(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ws(e,s,r),t!==null&&(fa(t,e,r,n),Hd(t,e,r))}};function qg(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!dc(n,r)||!dc(s,i):!0}function vy(e,t,n){var r=!1,s=Ys,i=t.contextType;return typeof i=="object"&&i!==null?i=Jr(i):(s=vr(t)?Ri:rr.current,r=t.contextTypes,i=(r=r!=null)?zo(e,s):Ys),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Tg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vu.enqueueReplaceState(t,t.state,null)}function bp(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Am(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Jr(i):(i=vr(t)?Ri:rr.current,s.context=zo(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(xp(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vu.enqueueReplaceState(s,s.state,null),xu(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Vo(e,t){try{var n="",r=t;do n+=Hb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function cf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _p(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yw=typeof WeakMap=="function"?WeakMap:Map;function yy(e,t,n){n=as(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Nu||(Nu=!0,Ep=r),_p(e,t)},n}function xy(e,t,n){n=as(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){_p(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){_p(e,t),typeof r!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ig(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new yw;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Pw.bind(null,e,t,n),t.then(e,e))}function Fg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rg(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=as(-1,1),t.tag=2,Ws(n,t,1))),n.lanes|=1),e)}var xw=ds.ReactCurrentOwner,mr=!1;function or(e,t,n,r){t.child=e===null?Kv(t,null,n,r):Wo(t,e.child,n,r)}function Og(e,t,n,r,s){n=n.render;var i=t.ref;return qo(t,s),r=qm(e,t,n,r,i,s),n=Tm(),e!==null&&!mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ls(e,t,s)):(Gt&&n&&_m(t),t.flags|=1,or(e,t,r,s),t.child)}function Mg(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Wm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,by(e,t,i,r,s)):(e=Jd(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:dc,n(o,r)&&e.ref===t.ref)return ls(e,t,s)}return t.flags|=1,e=Gs(i,r),e.ref=t.ref,e.return=t,t.child=e}function by(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(dc(i,r)&&e.ref===t.ref)if(mr=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(mr=!0);else return t.lanes=e.lanes,ls(e,t,s)}return wp(e,t,n,r,s)}function _y(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(ko,Lr),Lr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ut(ko,Lr),Lr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ut(ko,Lr),Lr|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ut(ko,Lr),Lr|=r;return or(e,t,s,n),t.child}function wy(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wp(e,t,n,r,s){var i=vr(n)?Ri:rr.current;return i=zo(t,i),qo(t,s),n=qm(e,t,n,r,i,s),r=Tm(),e!==null&&!mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ls(e,t,s)):(Gt&&r&&_m(t),t.flags|=1,or(e,t,n,s),t.child)}function Bg(e,t,n,r,s){if(vr(n)){var i=!0;pu(t)}else i=!1;if(qo(t,s),t.stateNode===null)Kd(e,t),vy(t,n,r),bp(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Jr(d):(d=vr(n)?Ri:rr.current,d=zo(t,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Tg(t,o,r,d),qs=!1;var g=t.memoizedState;o.state=g,xu(t,r,o,s),c=t.memoizedState,l!==r||g!==c||gr.current||qs?(typeof h=="function"&&(xp(t,n,h,r),c=t.memoizedState),(l=qs||qg(t,n,l,r,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Yv(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ca(t.type,l),o.props=d,m=t.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jr(c):(c=vr(n)?Ri:rr.current,c=zo(t,c));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==c)&&Tg(t,o,r,c),qs=!1,g=t.memoizedState,o.state=g,xu(t,r,o,s);var j=t.memoizedState;l!==m||g!==j||gr.current||qs?(typeof p=="function"&&(xp(t,n,p,r),j=t.memoizedState),(d=qs||qg(t,n,d,r,g,j,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,j,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),o.props=r,o.state=j,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return jp(e,t,n,r,i,s)}function jp(e,t,n,r,s,i){wy(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Sg(t,n,!1),ls(e,t,i);r=t.stateNode,xw.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Wo(t,e.child,null,i),t.child=Wo(t,null,l,i)):or(e,t,l,i),t.memoizedState=r.state,s&&Sg(t,n,!0),t.child}function jy(e){var t=e.stateNode;t.pendingContext?Ng(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ng(e,t.context,!1),Dm(e,t.containerInfo)}function Ug(e,t,n,r,s){return $o(),jm(s),t.flags|=256,or(e,t,n,r),t.child}var Np={dehydrated:null,treeContext:null,retryLane:0};function Sp(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ny(e,t,n){var r=t.pendingProps,s=Zt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ut(Zt,s&1),e===null)return vp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zu(o,r,0,null),e=Ii(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Sp(n),t.memoizedState=Np,e):Rm(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return bw(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Gs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Gs(l,i):(i=Ii(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Sp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Np,r}return i=e.child,e=i.sibling,r=Gs(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Rm(e,t){return t=Zu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Cd(e,t,n,r){return r!==null&&jm(r),Wo(t,e.child,null,n),e=Rm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bw(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=cf(Error(Le(422))),Cd(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Zu({mode:"visible",children:r.children},s,0,null),i=Ii(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Wo(t,e.child,null,o),t.child.memoizedState=Sp(o),t.memoizedState=Np,i);if(!(t.mode&1))return Cd(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Le(419)),r=cf(i,r,void 0),Cd(e,t,o,r)}if(l=(o&e.childLanes)!==0,mr||l){if(r=Tn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,os(e,s),fa(r,e,s,-1))}return $m(),r=cf(Error(Le(421))),Cd(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=qw.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Er=$s(s.nextSibling),qr=t,Gt=!0,ua=null,e!==null&&(Vr[Gr++]=ts,Vr[Gr++]=ns,Vr[Gr++]=Oi,ts=e.id,ns=e.overflow,Oi=t),t=Rm(t,r.children),t.flags|=4096,t)}function zg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yp(e.return,t,n)}function df(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Sy(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(or(e,t,r.children,n),r=Zt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zg(e,n,t);else if(e.tag===19)zg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ut(Zt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&bu(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),df(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&bu(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}df(t,!0,n,null,i);break;case"together":df(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ls(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Bi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Le(153));if(t.child!==null){for(e=t.child,n=Gs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Gs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _w(e,t,n){switch(t.tag){case 3:jy(t),$o();break;case 5:Jv(t);break;case 1:vr(t.type)&&pu(t);break;case 4:Dm(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ut(vu,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ut(Zt,Zt.current&1),t.flags|=128,null):n&t.child.childLanes?Ny(e,t,n):(Ut(Zt,Zt.current&1),e=ls(e,t,n),e!==null?e.sibling:null);Ut(Zt,Zt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Sy(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ut(Zt,Zt.current),r)break;return null;case 22:case 23:return t.lanes=0,_y(e,t,n)}return ls(e,t,n)}var ky,kp,Cy,Ay;ky=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kp=function(){};Cy=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,qi(qa.current);var i=null;switch(n){case"input":s=Kf(e,s),r=Kf(e,r),i=[];break;case"select":s=Xt({},s,{value:void 0}),r=Xt({},r,{value:void 0}),i=[];break;case"textarea":s=Jf(e,s),r=Jf(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=hu)}Qf(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(rc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(rc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&$t("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Ay=function(e,t,n,r){n!==r&&(t.flags|=4)};function Fl(e,t){if(!Gt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ww(e,t,n){var r=t.pendingProps;switch(wm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(t),null;case 1:return vr(t.type)&&fu(),Jn(t),null;case 3:return r=t.stateNode,Ho(),Ht(gr),Ht(rr),Em(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Sd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ua!==null&&(Tp(ua),ua=null))),kp(e,t),Jn(t),null;case 5:Lm(t);var s=qi(mc.current);if(n=t.type,e!==null&&t.stateNode!=null)Cy(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Le(166));return Jn(t),null}if(e=qi(qa.current),Sd(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Da]=t,r[fc]=i,e=(t.mode&1)!==0,n){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(s=0;s<Wl.length;s++)$t(Wl[s],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":J0(r,i),$t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},$t("invalid",r);break;case"textarea":Q0(r,i),$t("invalid",r)}Qf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Nd(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Nd(r.textContent,l,e),s=["children",""+l]):rc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$t("scroll",r)}switch(n){case"input":gd(r),X0(r,i,!0);break;case"textarea":gd(r),eg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=hu)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Da]=t,e[fc]=r,ky(e,t,!1,!1),t.stateNode=e;e:{switch(o=ep(n,r),n){case"dialog":$t("cancel",e),$t("close",e),s=r;break;case"iframe":case"object":case"embed":$t("load",e),s=r;break;case"video":case"audio":for(s=0;s<Wl.length;s++)$t(Wl[s],e);s=r;break;case"source":$t("error",e),s=r;break;case"img":case"image":case"link":$t("error",e),$t("load",e),s=r;break;case"details":$t("toggle",e),s=r;break;case"input":J0(e,r),s=Kf(e,r),$t("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Xt({},r,{value:void 0}),$t("invalid",e);break;case"textarea":Q0(e,r),s=Jf(e,r),$t("invalid",e);break;default:s=r}Qf(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?sv(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&rv(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ac(e,c):typeof c=="number"&&ac(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(rc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&$t("scroll",e):c!=null&&om(e,i,c,o))}switch(n){case"input":gd(e),X0(e,r,!1);break;case"textarea":gd(e),eg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Zs(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Do(e,!!r.multiple,i,!1):r.defaultValue!=null&&Do(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=hu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jn(t),null;case 6:if(e&&t.stateNode!=null)Ay(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Le(166));if(n=qi(mc.current),qi(qa.current),Sd(t)){if(r=t.stateNode,n=t.memoizedProps,r[Da]=t,(i=r.nodeValue!==n)&&(e=qr,e!==null))switch(e.tag){case 3:Nd(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Nd(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Da]=t,t.stateNode=r}return Jn(t),null;case 13:if(Ht(Zt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Gt&&Er!==null&&t.mode&1&&!(t.flags&128))Vv(),$o(),t.flags|=98560,i=!1;else if(i=Sd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Le(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Le(317));i[Da]=t}else $o(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jn(t),i=!1}else ua!==null&&(Tp(ua),ua=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Zt.current&1?Ln===0&&(Ln=3):$m())),t.updateQueue!==null&&(t.flags|=4),Jn(t),null);case 4:return Ho(),kp(e,t),e===null&&uc(t.stateNode.containerInfo),Jn(t),null;case 10:return km(t.type._context),Jn(t),null;case 17:return vr(t.type)&&fu(),Jn(t),null;case 19:if(Ht(Zt),i=t.memoizedState,i===null)return Jn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Fl(i,!1);else{if(Ln!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=bu(e),o!==null){for(t.flags|=128,Fl(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ut(Zt,Zt.current&1|2),t.child}e=e.sibling}i.tail!==null&&mn()>Go&&(t.flags|=128,r=!0,Fl(i,!1),t.lanes=4194304)}else{if(!r)if(e=bu(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Fl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Gt)return Jn(t),null}else 2*mn()-i.renderingStartTime>Go&&n!==1073741824&&(t.flags|=128,r=!0,Fl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=mn(),t.sibling=null,n=Zt.current,Ut(Zt,r?n&1|2:n&1),t):(Jn(t),null);case 22:case 23:return zm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Lr&1073741824&&(Jn(t),t.subtreeFlags&6&&(t.flags|=8192)):Jn(t),null;case 24:return null;case 25:return null}throw Error(Le(156,t.tag))}function jw(e,t){switch(wm(t),t.tag){case 1:return vr(t.type)&&fu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ho(),Ht(gr),Ht(rr),Em(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Lm(t),null;case 13:if(Ht(Zt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Le(340));$o()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ht(Zt),null;case 4:return Ho(),null;case 10:return km(t.type._context),null;case 22:case 23:return zm(),null;case 24:return null;default:return null}}var Ad=!1,nr=!1,Nw=typeof WeakSet=="function"?WeakSet:Set,Te=null;function So(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){an(e,t,r)}else n.current=null}function Cp(e,t,n){try{n()}catch(r){an(e,t,r)}}var $g=!1;function Sw(e,t){if(dp=cu,e=qv(),bm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,m=e,g=null;t:for(;;){for(var p;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(p=m.firstChild)!==null;)g=m,m=p;for(;;){if(m===e)break t;if(g===n&&++d===s&&(l=o),g===i&&++h===r&&(c=o),(p=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(up={focusedElem:e,selectionRange:n},cu=!1,Te=t;Te!==null;)if(t=Te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Te=e;else for(;Te!==null;){t=Te;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var N=j.memoizedProps,w=j.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?N:ca(t.type,N),w);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(C){an(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Te=e;break}Te=t.return}return j=$g,$g=!1,j}function Jl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Cp(t,n,i)}s=s.next}while(s!==r)}}function Gu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ap(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Dy(e){var t=e.alternate;t!==null&&(e.alternate=null,Dy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Da],delete t[fc],delete t[pp],delete t[ow],delete t[lw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ly(e){return e.tag===5||e.tag===3||e.tag===4}function Wg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ly(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=hu));else if(r!==4&&(e=e.child,e!==null))for(Dp(e,t,n),e=e.sibling;e!==null;)Dp(e,t,n),e=e.sibling}function Lp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Lp(e,t,n),e=e.sibling;e!==null;)Lp(e,t,n),e=e.sibling}var Bn=null,da=!1;function Ds(e,t,n){for(n=n.child;n!==null;)Ey(e,t,n),n=n.sibling}function Ey(e,t,n){if(Pa&&typeof Pa.onCommitFiberUnmount=="function")try{Pa.onCommitFiberUnmount(Mu,n)}catch{}switch(n.tag){case 5:nr||So(n,t);case 6:var r=Bn,s=da;Bn=null,Ds(e,t,n),Bn=r,da=s,Bn!==null&&(da?(e=Bn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Bn.removeChild(n.stateNode));break;case 18:Bn!==null&&(da?(e=Bn,n=n.stateNode,e.nodeType===8?nf(e.parentNode,n):e.nodeType===1&&nf(e,n),lc(e)):nf(Bn,n.stateNode));break;case 4:r=Bn,s=da,Bn=n.stateNode.containerInfo,da=!0,Ds(e,t,n),Bn=r,da=s;break;case 0:case 11:case 14:case 15:if(!nr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Cp(n,t,o),s=s.next}while(s!==r)}Ds(e,t,n);break;case 1:if(!nr&&(So(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){an(n,t,l)}Ds(e,t,n);break;case 21:Ds(e,t,n);break;case 22:n.mode&1?(nr=(r=nr)||n.memoizedState!==null,Ds(e,t,n),nr=r):Ds(e,t,n);break;default:Ds(e,t,n)}}function Hg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Nw),t.forEach(function(r){var s=Tw.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function oa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Bn=l.stateNode,da=!1;break e;case 3:Bn=l.stateNode.containerInfo,da=!0;break e;case 4:Bn=l.stateNode.containerInfo,da=!0;break e}l=l.return}if(Bn===null)throw Error(Le(160));Ey(i,o,s),Bn=null,da=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){an(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Py(t,e),t=t.sibling}function Py(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(oa(t,e),Sa(e),r&4){try{Jl(3,e,e.return),Gu(3,e)}catch(N){an(e,e.return,N)}try{Jl(5,e,e.return)}catch(N){an(e,e.return,N)}}break;case 1:oa(t,e),Sa(e),r&512&&n!==null&&So(n,n.return);break;case 5:if(oa(t,e),Sa(e),r&512&&n!==null&&So(n,n.return),e.flags&32){var s=e.stateNode;try{ac(s,"")}catch(N){an(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ev(s,i),ep(l,o);var d=ep(l,i);for(o=0;o<c.length;o+=2){var h=c[o],m=c[o+1];h==="style"?sv(s,m):h==="dangerouslySetInnerHTML"?rv(s,m):h==="children"?ac(s,m):om(s,h,m,d)}switch(l){case"input":Zf(s,i);break;case"textarea":tv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Do(s,!!i.multiple,p,!1):g!==!!i.multiple&&(i.defaultValue!=null?Do(s,!!i.multiple,i.defaultValue,!0):Do(s,!!i.multiple,i.multiple?[]:"",!1))}s[fc]=i}catch(N){an(e,e.return,N)}}break;case 6:if(oa(t,e),Sa(e),r&4){if(e.stateNode===null)throw Error(Le(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){an(e,e.return,N)}}break;case 3:if(oa(t,e),Sa(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lc(t.containerInfo)}catch(N){an(e,e.return,N)}break;case 4:oa(t,e),Sa(e);break;case 13:oa(t,e),Sa(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bm=mn())),r&4&&Hg(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(nr=(d=nr)||h,oa(t,e),nr=d):oa(t,e),Sa(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(Te=e,h=e.child;h!==null;){for(m=Te=h;Te!==null;){switch(g=Te,p=g.child,g.tag){case 0:case 11:case 14:case 15:Jl(4,g,g.return);break;case 1:So(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(N){an(r,n,N)}}break;case 5:So(g,g.return);break;case 22:if(g.memoizedState!==null){Gg(m);continue}}p!==null?(p.return=g,Te=p):Gg(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=av("display",o))}catch(N){an(e,e.return,N)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(N){an(e,e.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:oa(t,e),Sa(e),r&4&&Hg(e);break;case 21:break;default:oa(t,e),Sa(e)}}function Sa(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ly(n)){var r=n;break e}n=n.return}throw Error(Le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ac(s,""),r.flags&=-33);var i=Wg(e);Lp(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Wg(e);Dp(e,l,o);break;default:throw Error(Le(161))}}catch(c){an(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kw(e,t,n){Te=e,qy(e)}function qy(e,t,n){for(var r=(e.mode&1)!==0;Te!==null;){var s=Te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ad;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||nr;l=Ad;var d=nr;if(Ad=o,(nr=c)&&!d)for(Te=s;Te!==null;)o=Te,c=o.child,o.tag===22&&o.memoizedState!==null?Kg(s):c!==null?(c.return=o,Te=c):Kg(s);for(;i!==null;)Te=i,qy(i),i=i.sibling;Te=s,Ad=l,nr=d}Vg(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Te=i):Vg(e)}}function Vg(e){for(;Te!==null;){var t=Te;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nr||Gu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nr)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ca(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Lg(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Lg(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&lc(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}nr||t.flags&512&&Ap(t)}catch(g){an(t,t.return,g)}}if(t===e){Te=null;break}if(n=t.sibling,n!==null){n.return=t.return,Te=n;break}Te=t.return}}function Gg(e){for(;Te!==null;){var t=Te;if(t===e){Te=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Te=n;break}Te=t.return}}function Kg(e){for(;Te!==null;){var t=Te;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Gu(4,t)}catch(c){an(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){an(t,s,c)}}var i=t.return;try{Ap(t)}catch(c){an(t,i,c)}break;case 5:var o=t.return;try{Ap(t)}catch(c){an(t,o,c)}}}catch(c){an(t,t.return,c)}if(t===e){Te=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Te=l;break}Te=t.return}}var Cw=Math.ceil,ju=ds.ReactCurrentDispatcher,Om=ds.ReactCurrentOwner,Yr=ds.ReactCurrentBatchConfig,_t=0,Tn=null,wn=null,$n=0,Lr=0,ko=Qs(0),Ln=0,xc=null,Bi=0,Ku=0,Mm=0,Xl=null,pr=null,Bm=0,Go=1/0,Xa=null,Nu=!1,Ep=null,Hs=null,Dd=!1,Rs=null,Su=0,Ql=0,Pp=null,Zd=-1,Yd=0;function lr(){return _t&6?mn():Zd!==-1?Zd:Zd=mn()}function Vs(e){return e.mode&1?_t&2&&$n!==0?$n&-$n:dw.transition!==null?(Yd===0&&(Yd=vv()),Yd):(e=Et,e!==0||(e=window.event,e=e===void 0?16:Nv(e.type)),e):1}function fa(e,t,n,r){if(50<Ql)throw Ql=0,Pp=null,Error(Le(185));Cc(e,n,r),(!(_t&2)||e!==Tn)&&(e===Tn&&(!(_t&2)&&(Ku|=n),Ln===4&&Is(e,$n)),yr(e,r),n===1&&_t===0&&!(t.mode&1)&&(Go=mn()+500,Wu&&ei()))}function yr(e,t){var n=e.callbackNode;d_(e,t);var r=lu(e,e===Tn?$n:0);if(r===0)n!==null&&rg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rg(n),t===1)e.tag===0?cw(Zg.bind(null,e)):$v(Zg.bind(null,e)),sw(function(){!(_t&6)&&ei()}),n=null;else{switch(yv(r)){case 1:n=hm;break;case 4:n=mv;break;case 16:n=ou;break;case 536870912:n=gv;break;default:n=ou}n=Uy(n,Ty.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ty(e,t){if(Zd=-1,Yd=0,_t&6)throw Error(Le(327));var n=e.callbackNode;if(To()&&e.callbackNode!==n)return null;var r=lu(e,e===Tn?$n:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ku(e,r);else{t=r;var s=_t;_t|=2;var i=Fy();(Tn!==e||$n!==t)&&(Xa=null,Go=mn()+500,Ti(e,t));do try{Lw();break}catch(l){Iy(e,l)}while(!0);Sm(),ju.current=i,_t=s,wn!==null?t=0:(Tn=null,$n=0,t=Ln)}if(t!==0){if(t===2&&(s=sp(e),s!==0&&(r=s,t=qp(e,s))),t===1)throw n=xc,Ti(e,0),Is(e,r),yr(e,mn()),n;if(t===6)Is(e,r);else{if(s=e.current.alternate,!(r&30)&&!Aw(s)&&(t=ku(e,r),t===2&&(i=sp(e),i!==0&&(r=i,t=qp(e,i))),t===1))throw n=xc,Ti(e,0),Is(e,r),yr(e,mn()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Le(345));case 2:Ai(e,pr,Xa);break;case 3:if(Is(e,r),(r&130023424)===r&&(t=Bm+500-mn(),10<t)){if(lu(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){lr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=fp(Ai.bind(null,e,pr,Xa),t);break}Ai(e,pr,Xa);break;case 4:if(Is(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-ha(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=mn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cw(r/1960))-r,10<r){e.timeoutHandle=fp(Ai.bind(null,e,pr,Xa),r);break}Ai(e,pr,Xa);break;case 5:Ai(e,pr,Xa);break;default:throw Error(Le(329))}}}return yr(e,mn()),e.callbackNode===n?Ty.bind(null,e):null}function qp(e,t){var n=Xl;return e.current.memoizedState.isDehydrated&&(Ti(e,t).flags|=256),e=ku(e,t),e!==2&&(t=pr,pr=n,t!==null&&Tp(t)),e}function Tp(e){pr===null?pr=e:pr.push.apply(pr,e)}function Aw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!pa(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Is(e,t){for(t&=~Mm,t&=~Ku,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ha(t),r=1<<n;e[n]=-1,t&=~r}}function Zg(e){if(_t&6)throw Error(Le(327));To();var t=lu(e,0);if(!(t&1))return yr(e,mn()),null;var n=ku(e,t);if(e.tag!==0&&n===2){var r=sp(e);r!==0&&(t=r,n=qp(e,r))}if(n===1)throw n=xc,Ti(e,0),Is(e,t),yr(e,mn()),n;if(n===6)throw Error(Le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ai(e,pr,Xa),yr(e,mn()),null}function Um(e,t){var n=_t;_t|=1;try{return e(t)}finally{_t=n,_t===0&&(Go=mn()+500,Wu&&ei())}}function Ui(e){Rs!==null&&Rs.tag===0&&!(_t&6)&&To();var t=_t;_t|=1;var n=Yr.transition,r=Et;try{if(Yr.transition=null,Et=1,e)return e()}finally{Et=r,Yr.transition=n,_t=t,!(_t&6)&&ei()}}function zm(){Lr=ko.current,Ht(ko)}function Ti(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,aw(n)),wn!==null)for(n=wn.return;n!==null;){var r=n;switch(wm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fu();break;case 3:Ho(),Ht(gr),Ht(rr),Em();break;case 5:Lm(r);break;case 4:Ho();break;case 13:Ht(Zt);break;case 19:Ht(Zt);break;case 10:km(r.type._context);break;case 22:case 23:zm()}n=n.return}if(Tn=e,wn=e=Gs(e.current,null),$n=Lr=t,Ln=0,xc=null,Mm=Ku=Bi=0,pr=Xl=null,Pi!==null){for(t=0;t<Pi.length;t++)if(n=Pi[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Pi=null}return e}function Iy(e,t){do{var n=wn;try{if(Sm(),Vd.current=wu,_u){for(var r=Yt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}_u=!1}if(Mi=0,Pn=Dn=Yt=null,Yl=!1,gc=0,Om.current=null,n===null||n.return===null){Ln=1,xc=t,wn=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=$n,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Fg(o);if(p!==null){p.flags&=-257,Rg(p,o,l,i,t),p.mode&1&&Ig(i,d,t),t=p,c=d;var j=t.updateQueue;if(j===null){var N=new Set;N.add(c),t.updateQueue=N}else j.add(c);break e}else{if(!(t&1)){Ig(i,d,t),$m();break e}c=Error(Le(426))}}else if(Gt&&l.mode&1){var w=Fg(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Rg(w,o,l,i,t),jm(Vo(c,l));break e}}i=c=Vo(c,l),Ln!==4&&(Ln=2),Xl===null?Xl=[i]:Xl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=yy(i,c,t);Dg(i,y);break e;case 1:l=c;var _=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Hs===null||!Hs.has(S)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=xy(i,l,t);Dg(i,C);break e}}i=i.return}while(i!==null)}Oy(n)}catch(q){t=q,wn===n&&n!==null&&(wn=n=n.return);continue}break}while(!0)}function Fy(){var e=ju.current;return ju.current=wu,e===null?wu:e}function $m(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Tn===null||!(Bi&268435455)&&!(Ku&268435455)||Is(Tn,$n)}function ku(e,t){var n=_t;_t|=2;var r=Fy();(Tn!==e||$n!==t)&&(Xa=null,Ti(e,t));do try{Dw();break}catch(s){Iy(e,s)}while(!0);if(Sm(),_t=n,ju.current=r,wn!==null)throw Error(Le(261));return Tn=null,$n=0,Ln}function Dw(){for(;wn!==null;)Ry(wn)}function Lw(){for(;wn!==null&&!t_();)Ry(wn)}function Ry(e){var t=By(e.alternate,e,Lr);e.memoizedProps=e.pendingProps,t===null?Oy(e):wn=t,Om.current=null}function Oy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=jw(n,t),n!==null){n.flags&=32767,wn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ln=6,wn=null;return}}else if(n=ww(n,t,Lr),n!==null){wn=n;return}if(t=t.sibling,t!==null){wn=t;return}wn=t=e}while(t!==null);Ln===0&&(Ln=5)}function Ai(e,t,n){var r=Et,s=Yr.transition;try{Yr.transition=null,Et=1,Ew(e,t,n,r)}finally{Yr.transition=s,Et=r}return null}function Ew(e,t,n,r){do To();while(Rs!==null);if(_t&6)throw Error(Le(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Le(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(u_(e,i),e===Tn&&(wn=Tn=null,$n=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dd||(Dd=!0,Uy(ou,function(){return To(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Yr.transition,Yr.transition=null;var o=Et;Et=1;var l=_t;_t|=4,Om.current=null,Sw(e,n),Py(n,e),J_(up),cu=!!dp,up=dp=null,e.current=n,kw(n),n_(),_t=l,Et=o,Yr.transition=i}else e.current=n;if(Dd&&(Dd=!1,Rs=e,Su=s),i=e.pendingLanes,i===0&&(Hs=null),s_(n.stateNode),yr(e,mn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Nu)throw Nu=!1,e=Ep,Ep=null,e;return Su&1&&e.tag!==0&&To(),i=e.pendingLanes,i&1?e===Pp?Ql++:(Ql=0,Pp=e):Ql=0,ei(),null}function To(){if(Rs!==null){var e=yv(Su),t=Yr.transition,n=Et;try{if(Yr.transition=null,Et=16>e?16:e,Rs===null)var r=!1;else{if(e=Rs,Rs=null,Su=0,_t&6)throw Error(Le(331));var s=_t;for(_t|=4,Te=e.current;Te!==null;){var i=Te,o=i.child;if(Te.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Te=d;Te!==null;){var h=Te;switch(h.tag){case 0:case 11:case 15:Jl(8,h,i)}var m=h.child;if(m!==null)m.return=h,Te=m;else for(;Te!==null;){h=Te;var g=h.sibling,p=h.return;if(Dy(h),h===d){Te=null;break}if(g!==null){g.return=p,Te=g;break}Te=p}}}var j=i.alternate;if(j!==null){var N=j.child;if(N!==null){j.child=null;do{var w=N.sibling;N.sibling=null,N=w}while(N!==null)}}Te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Te=o;else e:for(;Te!==null;){if(i=Te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Jl(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Te=y;break e}Te=i.return}}var _=e.current;for(Te=_;Te!==null;){o=Te;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Te=S;else e:for(o=_;Te!==null;){if(l=Te,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Gu(9,l)}}catch(q){an(l,l.return,q)}if(l===o){Te=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,Te=C;break e}Te=l.return}}if(_t=s,ei(),Pa&&typeof Pa.onPostCommitFiberRoot=="function")try{Pa.onPostCommitFiberRoot(Mu,e)}catch{}r=!0}return r}finally{Et=n,Yr.transition=t}}return!1}function Yg(e,t,n){t=Vo(n,t),t=yy(e,t,1),e=Ws(e,t,1),t=lr(),e!==null&&(Cc(e,1,t),yr(e,t))}function an(e,t,n){if(e.tag===3)Yg(e,e,n);else for(;t!==null;){if(t.tag===3){Yg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hs===null||!Hs.has(r))){e=Vo(n,e),e=xy(t,e,1),t=Ws(t,e,1),e=lr(),t!==null&&(Cc(t,1,e),yr(t,e));break}}t=t.return}}function Pw(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=lr(),e.pingedLanes|=e.suspendedLanes&n,Tn===e&&($n&n)===n&&(Ln===4||Ln===3&&($n&130023424)===$n&&500>mn()-Bm?Ti(e,0):Mm|=n),yr(e,t)}function My(e,t){t===0&&(e.mode&1?(t=xd,xd<<=1,!(xd&130023424)&&(xd=4194304)):t=1);var n=lr();e=os(e,t),e!==null&&(Cc(e,t,n),yr(e,n))}function qw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),My(e,n)}function Tw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Le(314))}r!==null&&r.delete(t),My(e,n)}var By;By=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||gr.current)mr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return mr=!1,_w(e,t,n);mr=!!(e.flags&131072)}else mr=!1,Gt&&t.flags&1048576&&Wv(t,gu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Kd(e,t),e=t.pendingProps;var s=zo(t,rr.current);qo(t,n),s=qm(null,t,r,e,s,n);var i=Tm();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(r)?(i=!0,pu(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Am(t),s.updater=Vu,t.stateNode=s,s._reactInternals=t,bp(t,r,e,n),t=jp(null,t,r,!0,i,n)):(t.tag=0,Gt&&i&&_m(t),or(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Kd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Fw(r),e=ca(r,e),s){case 0:t=wp(null,t,r,e,n);break e;case 1:t=Bg(null,t,r,e,n);break e;case 11:t=Og(null,t,r,e,n);break e;case 14:t=Mg(null,t,r,ca(r.type,e),n);break e}throw Error(Le(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ca(r,s),wp(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ca(r,s),Bg(e,t,r,s,n);case 3:e:{if(jy(t),e===null)throw Error(Le(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Yv(e,t),xu(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Vo(Error(Le(423)),t),t=Ug(e,t,r,n,s);break e}else if(r!==s){s=Vo(Error(Le(424)),t),t=Ug(e,t,r,n,s);break e}else for(Er=$s(t.stateNode.containerInfo.firstChild),qr=t,Gt=!0,ua=null,n=Kv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($o(),r===s){t=ls(e,t,n);break e}or(e,t,r,n)}t=t.child}return t;case 5:return Jv(t),e===null&&vp(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,hp(r,s)?o=null:i!==null&&hp(r,i)&&(t.flags|=32),wy(e,t),or(e,t,o,n),t.child;case 6:return e===null&&vp(t),null;case 13:return Ny(e,t,n);case 4:return Dm(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Wo(t,null,r,n):or(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ca(r,s),Og(e,t,r,s,n);case 7:return or(e,t,t.pendingProps,n),t.child;case 8:return or(e,t,t.pendingProps.children,n),t.child;case 12:return or(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ut(vu,r._currentValue),r._currentValue=o,i!==null)if(pa(i.value,o)){if(i.children===s.children&&!gr.current){t=ls(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=as(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),yp(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Le(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),yp(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}or(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,qo(t,n),s=Jr(s),r=r(s),t.flags|=1,or(e,t,r,n),t.child;case 14:return r=t.type,s=ca(r,t.pendingProps),s=ca(r.type,s),Mg(e,t,r,s,n);case 15:return by(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ca(r,s),Kd(e,t),t.tag=1,vr(r)?(e=!0,pu(t)):e=!1,qo(t,n),vy(t,r,s),bp(t,r,s,n),jp(null,t,r,!0,e,n);case 19:return Sy(e,t,n);case 22:return _y(e,t,n)}throw Error(Le(156,t.tag))};function Uy(e,t){return pv(e,t)}function Iw(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(e,t,n,r){return new Iw(e,t,n,r)}function Wm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fw(e){if(typeof e=="function")return Wm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===cm)return 11;if(e===dm)return 14}return 2}function Gs(e,t){var n=e.alternate;return n===null?(n=Kr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Jd(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Wm(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case go:return Ii(n.children,s,i,t);case lm:o=8,s|=8;break;case Wf:return e=Kr(12,n,t,s|2),e.elementType=Wf,e.lanes=i,e;case Hf:return e=Kr(13,n,t,s),e.elementType=Hf,e.lanes=i,e;case Vf:return e=Kr(19,n,t,s),e.elementType=Vf,e.lanes=i,e;case J2:return Zu(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Z2:o=10;break e;case Y2:o=9;break e;case cm:o=11;break e;case dm:o=14;break e;case Ps:o=16,r=null;break e}throw Error(Le(130,e==null?e:typeof e,""))}return t=Kr(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Ii(e,t,n,r){return e=Kr(7,e,r,t),e.lanes=n,e}function Zu(e,t,n,r){return e=Kr(22,e,r,t),e.elementType=J2,e.lanes=n,e.stateNode={isHidden:!1},e}function uf(e,t,n){return e=Kr(6,e,null,t),e.lanes=n,e}function hf(e,t,n){return t=Kr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rw(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hh(0),this.expirationTimes=Hh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hm(e,t,n,r,s,i,o,l,c){return e=new Rw(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Am(i),e}function Ow(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zy(e){if(!e)return Ys;e=e._reactInternals;e:{if(Hi(e)!==e||e.tag!==1)throw Error(Le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Le(171))}if(e.tag===1){var n=e.type;if(vr(n))return zv(e,n,t)}return t}function $y(e,t,n,r,s,i,o,l,c){return e=Hm(n,r,!0,e,s,i,o,l,c),e.context=zy(null),n=e.current,r=lr(),s=Vs(n),i=as(r,s),i.callback=t??null,Ws(n,i,s),e.current.lanes=s,Cc(e,s,r),yr(e,r),e}function Yu(e,t,n,r){var s=t.current,i=lr(),o=Vs(s);return n=zy(n),t.context===null?t.context=n:t.pendingContext=n,t=as(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ws(s,t,o),e!==null&&(fa(e,s,o,i),Hd(e,s,o)),o}function Cu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vm(e,t){Jg(e,t),(e=e.alternate)&&Jg(e,t)}function Mw(){return null}var Wy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gm(e){this._internalRoot=e}Ju.prototype.render=Gm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Le(409));Yu(e,t,null,null)};Ju.prototype.unmount=Gm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ui(function(){Yu(null,e,null,null)}),t[is]=null}};function Ju(e){this._internalRoot=e}Ju.prototype.unstable_scheduleHydration=function(e){if(e){var t=_v();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ts.length&&t!==0&&t<Ts[n].priority;n++);Ts.splice(n,0,e),n===0&&jv(e)}};function Km(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xg(){}function Bw(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Cu(o);i.call(d)}}var o=$y(t,r,e,0,null,!1,!1,"",Xg);return e._reactRootContainer=o,e[is]=o.current,uc(e.nodeType===8?e.parentNode:e),Ui(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Cu(c);l.call(d)}}var c=Hm(e,0,!1,null,null,!1,!1,"",Xg);return e._reactRootContainer=c,e[is]=c.current,uc(e.nodeType===8?e.parentNode:e),Ui(function(){Yu(t,c,n,r)}),c}function Qu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Cu(o);l.call(c)}}Yu(t,o,e,s)}else o=Bw(n,t,e,s,r);return Cu(o)}xv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$l(t.pendingLanes);n!==0&&(fm(t,n|1),yr(t,mn()),!(_t&6)&&(Go=mn()+500,ei()))}break;case 13:Ui(function(){var r=os(e,1);if(r!==null){var s=lr();fa(r,e,1,s)}}),Vm(e,1)}};pm=function(e){if(e.tag===13){var t=os(e,134217728);if(t!==null){var n=lr();fa(t,e,134217728,n)}Vm(e,134217728)}};bv=function(e){if(e.tag===13){var t=Vs(e),n=os(e,t);if(n!==null){var r=lr();fa(n,e,t,r)}Vm(e,t)}};_v=function(){return Et};wv=function(e,t){var n=Et;try{return Et=e,t()}finally{Et=n}};np=function(e,t,n){switch(t){case"input":if(Zf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=$u(r);if(!s)throw Error(Le(90));Q2(r),Zf(r,s)}}}break;case"textarea":tv(e,n);break;case"select":t=n.value,t!=null&&Do(e,!!n.multiple,t,!1)}};lv=Um;cv=Ui;var Uw={usingClientEntryPoint:!1,Events:[Dc,bo,$u,iv,ov,Um]},Rl={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zw={bundleType:Rl.bundleType,version:Rl.version,rendererPackageName:Rl.rendererPackageName,rendererConfig:Rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hv(e),e===null?null:e.stateNode},findFiberByHostInstance:Rl.findFiberByHostInstance||Mw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ld.isDisabled&&Ld.supportsFiber)try{Mu=Ld.inject(zw),Pa=Ld}catch{}}Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uw;Ir.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Km(t))throw Error(Le(200));return Ow(e,t,null,n)};Ir.createRoot=function(e,t){if(!Km(e))throw Error(Le(299));var n=!1,r="",s=Wy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Hm(e,1,!1,null,null,n,!1,r,s),e[is]=t.current,uc(e.nodeType===8?e.parentNode:e),new Gm(t)};Ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Le(188)):(e=Object.keys(e).join(","),Error(Le(268,e)));return e=hv(t),e=e===null?null:e.stateNode,e};Ir.flushSync=function(e){return Ui(e)};Ir.hydrate=function(e,t,n){if(!Xu(t))throw Error(Le(200));return Qu(null,e,t,!0,n)};Ir.hydrateRoot=function(e,t,n){if(!Km(e))throw Error(Le(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Wy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=$y(t,null,e,1,n??null,s,!1,i,o),e[is]=t.current,uc(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ju(t)};Ir.render=function(e,t,n){if(!Xu(t))throw Error(Le(200));return Qu(null,e,t,!1,n)};Ir.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(Le(40));return e._reactRootContainer?(Ui(function(){Qu(null,null,e,!1,function(){e._reactRootContainer=null,e[is]=null})}),!0):!1};Ir.unstable_batchedUpdates=Um;Ir.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(Le(200));if(e==null||e._reactInternals===void 0)throw Error(Le(38));return Qu(e,t,n,!1,r)};Ir.version="18.3.1-next-f1338f8080-20240426";function Hy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hy)}catch(e){console.error(e)}}Hy(),H2.exports=Ir;var $w=H2.exports,Qg=$w;zf.createRoot=Qg.createRoot,zf.hydrateRoot=Qg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bc.apply(this,arguments)}var Os;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Os||(Os={}));const e1="popstate";function Ww(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:o,hash:l}=r.location;return Ip("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Au(s)}return Vw(t,n,null,e)}function Jt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vy(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hw(){return Math.random().toString(36).substr(2,8)}function t1(e,t){return{usr:e.state,key:e.key,idx:t}}function Ip(e,t,n,r){return n===void 0&&(n=null),bc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Xo(t):t,{state:n,key:t&&t.key||r||Hw()})}function Au(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Xo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Vw(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Os.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(bc({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){l=Os.Pop;let w=h(),y=w==null?null:w-d;d=w,c&&c({action:l,location:N.location,delta:y})}function g(w,y){l=Os.Push;let _=Ip(N.location,w,y);d=h()+1;let S=t1(_,d),C=N.createHref(_);try{o.pushState(S,"",C)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;s.location.assign(C)}i&&c&&c({action:l,location:N.location,delta:1})}function p(w,y){l=Os.Replace;let _=Ip(N.location,w,y);d=h();let S=t1(_,d),C=N.createHref(_);o.replaceState(S,"",C),i&&c&&c({action:l,location:N.location,delta:0})}function j(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof w=="string"?w:Au(w);return _=_.replace(/ $/,"%20"),Jt(y,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,y)}let N={get action(){return l},get location(){return e(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(e1,m),c=w,()=>{s.removeEventListener(e1,m),c=null}},createHref(w){return t(s,w)},createURL:j,encodeLocation(w){let y=j(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:p,go(w){return o.go(w)}};return N}var n1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(n1||(n1={}));function Gw(e,t,n){return n===void 0&&(n="/"),Kw(e,t,n)}function Kw(e,t,n,r){let s=typeof t=="string"?Xo(t):t,i=Ko(s.pathname||"/",n);if(i==null)return null;let o=Gy(e);Zw(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=ij(i);l=aj(o[c],d)}return l}function Gy(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Jt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Ks([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(Jt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Gy(i.children,t,h,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:nj(d,i.index),routesMeta:h})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Ky(i.path))s(i,o,c)}),t}function Ky(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Ky(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Zw(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:rj(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Yw=/^:[\w-]+$/,Jw=3,Xw=2,Qw=1,ej=10,tj=-2,r1=e=>e==="*";function nj(e,t){let n=e.split("/"),r=n.length;return n.some(r1)&&(r+=tj),t&&(r+=Xw),n.filter(s=>!r1(s)).reduce((s,i)=>s+(Yw.test(i)?Jw:i===""?Qw:ej),r)}function rj(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function aj(e,t,n){let{routesMeta:r}=e,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?t:t.slice(i.length)||"/",m=Fp({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),g=c.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Ks([i,m.pathname]),pathnameBase:dj(Ks([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Ks([i,m.pathnameBase]))}return o}function Fp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=sj(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,m)=>{let{paramName:g,isOptional:p}=h;if(g==="*"){let N=l[m]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const j=l[m];return p&&!j?d[g]=void 0:d[g]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function sj(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Vy(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function ij(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vy(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ko(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function oj(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Xo(e):e;return{pathname:n?n.startsWith("/")?n:lj(n,t):t,search:uj(r),hash:hj(s)}}function lj(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ff(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cj(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Zm(e,t){let n=cj(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ym(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Xo(e):(s=bc({},e),Jt(!s.pathname||!s.pathname.includes("?"),ff("?","pathname","search",s)),Jt(!s.pathname||!s.pathname.includes("#"),ff("#","pathname","hash",s)),Jt(!s.search||!s.search.includes("#"),ff("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?t[m]:"/"}let c=oj(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Ks=e=>e.join("/").replace(/\/\/+/g,"/"),dj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function fj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Zy=["post","put","patch","delete"];new Set(Zy);const pj=["get",...Zy];new Set(pj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _c(){return _c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_c.apply(this,arguments)}const eh=R.createContext(null),Yy=R.createContext(null),us=R.createContext(null),th=R.createContext(null),ti=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Jy=R.createContext(null);function mj(e,t){let{relative:n}=t===void 0?{}:t;Qo()||Jt(!1);let{basename:r,navigator:s}=R.useContext(us),{hash:i,pathname:o,search:l}=nh(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Ks([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Qo(){return R.useContext(th)!=null}function Vi(){return Qo()||Jt(!1),R.useContext(th).location}function Xy(e){R.useContext(us).static||R.useLayoutEffect(e)}function el(){let{isDataRoute:e}=R.useContext(ti);return e?Aj():gj()}function gj(){Qo()||Jt(!1);let e=R.useContext(eh),{basename:t,future:n,navigator:r}=R.useContext(us),{matches:s}=R.useContext(ti),{pathname:i}=Vi(),o=JSON.stringify(Zm(s,n.v7_relativeSplatPath)),l=R.useRef(!1);return Xy(()=>{l.current=!0}),R.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=Ym(d,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Ks([t,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[t,r,o,i,e])}function nh(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=R.useContext(us),{matches:s}=R.useContext(ti),{pathname:i}=Vi(),o=JSON.stringify(Zm(s,r.v7_relativeSplatPath));return R.useMemo(()=>Ym(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function vj(e,t){return yj(e,t)}function yj(e,t,n,r){Qo()||Jt(!1);let{navigator:s}=R.useContext(us),{matches:i}=R.useContext(ti),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Vi(),h;if(t){var m;let w=typeof t=="string"?Xo(t):t;c==="/"||(m=w.pathname)!=null&&m.startsWith(c)||Jt(!1),h=w}else h=d;let g=h.pathname||"/",p=g;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let j=Gw(e,{pathname:p}),N=jj(j&&j.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Ks([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Ks([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return t&&N?R.createElement(th.Provider,{value:{location:_c({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Os.Pop}},N):N}function xj(){let e=Cj(),t=fj(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),n?R.createElement("pre",{style:s},n):null,null)}const bj=R.createElement(xj,null);class _j extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?R.createElement(ti.Provider,{value:this.props.routeContext},R.createElement(Jy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wj(e){let{routeContext:t,match:n,children:r}=e,s=R.useContext(eh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(ti.Provider,{value:t},r)}function jj(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||Jt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:g,errors:p}=n,j=m.route.loader&&g[m.route.id]===void 0&&(!p||p[m.route.id]===void 0);if(m.route.lazy||j){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,g)=>{let p,j=!1,N=null,w=null;n&&(p=l&&m.route.id?l[m.route.id]:void 0,N=m.route.errorElement||bj,c&&(d<0&&g===0?(Dj("route-fallback"),j=!0,w=null):d===g&&(j=!0,w=m.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,g+1)),_=()=>{let S;return p?S=N:j?S=w:m.route.Component?S=R.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=h,R.createElement(wj,{match:m,routeContext:{outlet:h,matches:y,isDataRoute:n!=null},children:S})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?R.createElement(_j,{location:n.location,revalidation:n.revalidation,component:N,error:p,children:_(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):_()},null)}var Qy=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Qy||{}),e5=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(e5||{});function Nj(e){let t=R.useContext(eh);return t||Jt(!1),t}function Sj(e){let t=R.useContext(Yy);return t||Jt(!1),t}function kj(e){let t=R.useContext(ti);return t||Jt(!1),t}function t5(e){let t=kj(),n=t.matches[t.matches.length-1];return n.route.id||Jt(!1),n.route.id}function Cj(){var e;let t=R.useContext(Jy),n=Sj(),r=t5();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Aj(){let{router:e}=Nj(Qy.UseNavigateStable),t=t5(e5.UseNavigateStable),n=R.useRef(!1);return Xy(()=>{n.current=!0}),R.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,_c({fromRouteId:t},i)))},[e,t])}const a1={};function Dj(e,t,n){a1[e]||(a1[e]=!0)}function Lj(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Rp(e){let{to:t,replace:n,state:r,relative:s}=e;Qo()||Jt(!1);let{future:i,static:o}=R.useContext(us),{matches:l}=R.useContext(ti),{pathname:c}=Vi(),d=el(),h=Ym(t,Zm(l,i.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(h);return R.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function mt(e){Jt(!1)}function Ej(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Os.Pop,navigator:i,static:o=!1,future:l}=e;Qo()&&Jt(!1);let c=t.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:c,navigator:i,static:o,future:_c({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Xo(r));let{pathname:h="/",search:m="",hash:g="",state:p=null,key:j="default"}=r,N=R.useMemo(()=>{let w=Ko(h,c);return w==null?null:{location:{pathname:w,search:m,hash:g,state:p,key:j},navigationType:s}},[c,h,m,g,p,j,s]);return N==null?null:R.createElement(us.Provider,{value:d},R.createElement(th.Provider,{children:n,value:N}))}function rh(e){let{children:t,location:n}=e;return vj(Op(t),n)}new Promise(()=>{});function Op(e,t){t===void 0&&(t=[]);let n=[];return R.Children.forEach(e,(r,s)=>{if(!R.isValidElement(r))return;let i=[...t,s];if(r.type===R.Fragment){n.push.apply(n,Op(r.props.children,i));return}r.type!==mt&&Jt(!1),!r.props.index||!r.props.children||Jt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Op(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Du(){return Du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Du.apply(this,arguments)}function n5(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Pj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function qj(e,t){return e.button===0&&(!t||t==="_self")&&!Pj(e)}const Tj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ij=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Fj="6";try{window.__reactRouterVersion=Fj}catch{}const Rj=R.createContext({isTransitioning:!1}),Oj="startTransition",s1=Pb[Oj];function Mj(e){let{basename:t,children:n,future:r,window:s}=e,i=R.useRef();i.current==null&&(i.current=Ww({window:s,v5Compat:!0}));let o=i.current,[l,c]=R.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=R.useCallback(m=>{d&&s1?s1(()=>c(m)):c(m)},[c,d]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.useEffect(()=>Lj(r),[r]),R.createElement(Ej,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Bj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Uj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zr=R.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:m}=t,g=n5(t,Tj),{basename:p}=R.useContext(us),j,N=!1;if(typeof d=="string"&&Uj.test(d)&&(j=d,Bj))try{let S=new URL(window.location.href),C=d.startsWith("//")?new URL(S.protocol+d):new URL(d),q=Ko(C.pathname,p);C.origin===S.origin&&q!=null?d=q+C.search+C.hash:N=!0}catch{}let w=mj(d,{relative:s}),y=$j(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:m});function _(S){r&&r(S),S.defaultPrevented||y(S)}return R.createElement("a",Du({},g,{href:j||w,onClick:N||i?r:_,ref:n,target:c}))}),pn=R.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:h}=t,m=n5(t,Ij),g=nh(c,{relative:m.relative}),p=Vi(),j=R.useContext(Yy),{navigator:N,basename:w}=R.useContext(us),y=j!=null&&Wj(g)&&d===!0,_=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,S=p.pathname,C=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;s||(S=S.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&w&&(C=Ko(C,w)||C);const q=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let W=S===_||!o&&S.startsWith(_)&&S.charAt(q)==="/",E=C!=null&&(C===_||!o&&C.startsWith(_)&&C.charAt(_.length)==="/"),x={isActive:W,isPending:E,isTransitioning:y},A=W?r:void 0,U;typeof i=="function"?U=i(x):U=[i,W?"active":null,E?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(x):l;return R.createElement(Zr,Du({},m,{"aria-current":A,className:U,ref:n,style:L,to:c,viewTransition:d}),typeof h=="function"?h(x):h)});var Mp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Mp||(Mp={}));var i1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(i1||(i1={}));function zj(e){let t=R.useContext(eh);return t||Jt(!1),t}function $j(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=el(),d=Vi(),h=nh(e,{relative:o});return R.useCallback(m=>{if(qj(m,n)){m.preventDefault();let g=r!==void 0?r:Au(d)===Au(h);c(e,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,h,r,s,n,e,i,o,l])}function Wj(e,t){t===void 0&&(t={});let n=R.useContext(Rj);n==null&&Jt(!1);let{basename:r}=zj(Mp.useViewTransitionState),s=nh(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Ko(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ko(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Fp(s.pathname,o)!=null||Fp(s.pathname,i)!=null}const Hj=[{id:"sp1",name:"Studio A - Main Film Studio",capacity:20,description:"Large film studio with 5m ceiling, green screen wall, and professional lighting grid",department:"Moving Image",equipment_available:"Green screen (6m x 4m), lighting grid, C-stands, sandbags",status:"available",hourly_booking:!0},{id:"sp2",name:"Studio B - Photography Studio",capacity:8,description:"Medium studio with white cyclorama and product photography setup",department:"Moving Image",equipment_available:"White cyclorama, product table, backdrop support",status:"available",hourly_booking:!0},{id:"sp3",name:"Edit Suite 1",capacity:4,description:"Professional editing room with Mac Studio and dual 4K monitors",department:"Moving Image",equipment_available:'Mac Studio (M2 Ultra), 2x LG 32" 4K monitors, DaVinci Resolve, Adobe CC',status:"available",hourly_booking:!0},{id:"sp4",name:"Edit Suite 2",capacity:4,description:"Editing room with color grading setup",department:"Moving Image",equipment_available:"Mac Studio (M2 Max), calibrated monitor, Blackmagic panel",status:"available",hourly_booking:!0},{id:"sp5",name:"Sound Recording Booth",capacity:3,description:"Acoustically treated recording space",department:"Moving Image",equipment_available:"Rode NT1, audio interface, boom arm, acoustic treatment",status:"available",hourly_booking:!0},{id:"sp6",name:"Animation Lab",capacity:12,description:"Stop-motion and digital animation workspace",department:"Moving Image",equipment_available:"Stop-motion rigs, lighting, animation software",status:"available",hourly_booking:!0},{id:"sp7",name:"Design Lab 1",capacity:16,description:"Computer lab with iMac workstations",department:"Graphic Design",equipment_available:'16x iMac 27" (M3), Adobe CC, Figma, Sketch',status:"available",hourly_booking:!0},{id:"sp8",name:"Design Lab 2",capacity:16,description:"Computer lab with PC workstations",department:"Graphic Design",equipment_available:"16x Dell workstations, Adobe CC, Rhino, AutoCAD",status:"available",hourly_booking:!0},{id:"sp9",name:"Print Workshop",capacity:8,description:"Screen printing and risograph studio",department:"Graphic Design",equipment_available:"Risograph, screen printing stations, drying racks",status:"available",hourly_booking:!0},{id:"sp10",name:"Photography Studio GD",capacity:6,description:"Product photography studio for graphic design students",department:"Graphic Design",equipment_available:"Backdrop system, strobes, shooting table",status:"available",hourly_booking:!0},{id:"sp11",name:"Critique Room",capacity:20,description:"Presentation space with projector and pin-up walls",department:"Graphic Design",equipment_available:"4K projector, pin boards, presentation podium",status:"available",hourly_booking:!0},{id:"sp12",name:"Illustration Studio 1",capacity:18,description:"Traditional illustration workspace with natural light",department:"Illustration",equipment_available:"Drawing tables, easels, natural north-facing light",status:"available",hourly_booking:!0},{id:"sp13",name:"Illustration Studio 2",capacity:18,description:"Mixed media workspace",department:"Illustration",equipment_available:"Drawing tables, sink, storage cabinets",status:"available",hourly_booking:!0},{id:"sp14",name:"Digital Illustration Lab",capacity:12,description:"Computer lab with Cintiq displays",department:"Illustration",equipment_available:"12x Wacom Cintiq 22, Adobe CC, Procreate on iPad",status:"available",hourly_booking:!0},{id:"sp15",name:"Life Drawing Studio",capacity:20,description:"Large studio for life drawing sessions",department:"Illustration",equipment_available:"Easels, model platform, adjustable lighting",status:"available",hourly_booking:!0}],Vj=[{id:"bk1",user_id:"4",equipment_id:"eq1",start_date:"2025-10-05",end_date:"2025-10-08",status:"pending",purpose:"Final year film project - documentary shoot",created_at:"2025-10-01T10:00:00Z"},{id:"bk2",user_id:"10",equipment_id:"eq3",start_date:"2025-10-06",end_date:"2025-10-09",status:"pending",purpose:"Narrative short film - location filming",created_at:"2025-10-01T11:30:00Z"},{id:"bk3",user_id:"15",equipment_id:"eq49",start_date:"2025-10-07",end_date:"2025-10-10",status:"pending",purpose:"Music video production - studio setup",created_at:"2025-10-01T14:00:00Z"},{id:"bk4",user_id:"20",equipment_id:"eq88",start_date:"2025-10-08",end_date:"2025-10-11",status:"pending",purpose:"Commercial project requiring smooth camera movement",created_at:"2025-10-01T15:45:00Z"},{id:"bk5",user_id:"25",equipment_id:"eq101",start_date:"2025-10-09",end_date:"2025-10-12",status:"pending",purpose:"Video editing for thesis project",created_at:"2025-10-01T16:20:00Z"},{id:"bk6",user_id:"12",equipment_id:"eq4",start_date:"2025-10-03",end_date:"2025-10-06",status:"approved",purpose:"Interview series for documentary",created_at:"2025-09-28T09:00:00Z",approved_by:"2",approved_at:"2025-09-29T10:00:00Z"},{id:"bk7",user_id:"18",equipment_id:"eq12",start_date:"2025-10-04",end_date:"2025-10-07",status:"approved",purpose:"Event coverage - college open day",created_at:"2025-09-29T11:00:00Z",approved_by:"2",approved_at:"2025-09-30T14:00:00Z"},{id:"bk8",user_id:"22",equipment_id:"eq22",start_date:"2025-10-02",end_date:"2025-10-05",status:"approved",purpose:"Action shots for skateboarding documentary",created_at:"2025-09-27T13:00:00Z",approved_by:"2",approved_at:"2025-09-28T09:00:00Z"},{id:"bk9",user_id:"30",equipment_id:"eq31",start_date:"2025-10-05",end_date:"2025-10-08",status:"approved",purpose:"Portrait project using shallow depth of field",created_at:"2025-09-30T10:00:00Z",approved_by:"2",approved_at:"2025-10-01T09:00:00Z"},{id:"bk10",user_id:"35",equipment_id:"eq48",start_date:"2025-10-06",end_date:"2025-10-09",status:"approved",purpose:"Studio lighting for product photography",created_at:"2025-10-01T08:00:00Z",approved_by:"2",approved_at:"2025-10-01T10:30:00Z"},{id:"bk11",user_id:"40",equipment_id:"eq77",start_date:"2025-10-04",end_date:"2025-10-07",status:"approved",purpose:"Podcast recording series",created_at:"2025-09-29T15:00:00Z",approved_by:"5",approved_at:"2025-09-30T11:00:00Z"},{id:"bk12",user_id:"45",equipment_id:"eq102",start_date:"2025-10-03",end_date:"2025-10-10",status:"approved",purpose:"Motion graphics project for client brief",created_at:"2025-09-28T12:00:00Z",approved_by:"5",approved_at:"2025-09-29T09:00:00Z"},{id:"bk13",user_id:"50",equipment_id:"eq110",start_date:"2025-10-05",end_date:"2025-10-08",status:"approved",purpose:"Digital illustration for exhibition",created_at:"2025-09-30T14:00:00Z",approved_by:"5",approved_at:"2025-10-01T08:00:00Z"},{id:"bk14",user_id:"14",equipment_id:"eq5",start_date:"2025-09-20",end_date:"2025-09-23",status:"completed",purpose:"Short film production",created_at:"2025-09-15T10:00:00Z",approved_by:"2",approved_at:"2025-09-16T09:00:00Z",returned_at:"2025-09-23T15:00:00Z"},{id:"bk15",user_id:"19",equipment_id:"eq10",start_date:"2025-09-18",end_date:"2025-09-21",status:"completed",purpose:"Wedding videography practice",created_at:"2025-09-13T11:00:00Z",approved_by:"2",approved_at:"2025-09-14T10:00:00Z",returned_at:"2025-09-21T14:00:00Z"},{id:"bk16",user_id:"26",equipment_id:"eq50",start_date:"2025-09-15",end_date:"2025-09-18",status:"completed",purpose:"Studio portrait lighting",created_at:"2025-09-10T09:00:00Z",approved_by:"2",approved_at:"2025-09-11T08:00:00Z",returned_at:"2025-09-18T16:00:00Z"},{id:"bk17",user_id:"32",equipment_id:"eq75",start_date:"2025-09-22",end_date:"2025-09-25",status:"completed",purpose:"Interview audio recording",created_at:"2025-09-17T12:00:00Z",approved_by:"2",approved_at:"2025-09-18T09:00:00Z",returned_at:"2025-09-25T11:00:00Z"},{id:"bk18",user_id:"42",equipment_id:"eq103",start_date:"2025-09-19",end_date:"2025-09-26",status:"completed",purpose:"Graphic design portfolio work",created_at:"2025-09-14T10:00:00Z",approved_by:"5",approved_at:"2025-09-15T09:00:00Z",returned_at:"2025-09-26T15:00:00Z"},{id:"bk19",user_id:"16",equipment_id:"eq1",start_date:"2025-10-10",end_date:"2025-10-20",status:"denied",purpose:"Personal project",created_at:"2025-09-25T10:00:00Z",approved_by:"2",approved_at:"2025-09-26T09:00:00Z",denial_reason:"Booking period too long. Maximum 7 days for high-value equipment."},{id:"bk20",user_id:"28",equipment_id:"eq49",start_date:"2025-10-12",end_date:"2025-10-15",status:"denied",purpose:"Testing",created_at:"2025-09-27T11:00:00Z",approved_by:"2",approved_at:"2025-09-28T10:00:00Z",denial_reason:"Insufficient justification for professional lighting equipment. Please provide project details."},{id:"bk21",user_id:"24",equipment_id:"eq20",start_date:"2025-09-25",end_date:"2025-09-28",status:"overdue",purpose:"Action camera for sports filming",created_at:"2025-09-20T10:00:00Z",approved_by:"2",approved_at:"2025-09-21T09:00:00Z"},{id:"bk22",user_id:"38",equipment_id:"eq86",start_date:"2025-10-01",end_date:"2025-10-04",status:"cancelled",purpose:"Gimbal test for project",created_at:"2025-09-26T12:00:00Z",approved_by:"2",approved_at:"2025-09-27T10:00:00Z",cancelled_at:"2025-09-30T14:00:00Z"},{id:"bk23",user_id:"70",equipment_id:"eq141",start_date:"2025-10-06",end_date:"2025-10-09",status:"pending",purpose:"Digital painting for illustrated book project",created_at:"2025-10-01T12:00:00Z"},{id:"bk24",user_id:"75",equipment_id:"eq143",start_date:"2025-10-07",end_date:"2025-10-10",status:"pending",purpose:"Character design illustrations",created_at:"2025-10-01T13:30:00Z"},{id:"bk25",user_id:"55",equipment_id:"eq124",start_date:"2025-10-08",end_date:"2025-10-11",status:"pending",purpose:"High-resolution product photography for portfolio",created_at:"2025-10-01T14:45:00Z"}],Gj=[{id:"sb1",user_id:"3",space_id:"sp1",booking_date:"2025-10-02",start_time:"09:00",end_time:"13:00",status:"approved",purpose:"Green screen filming for student project",created_at:"2025-09-28T10:00:00Z"},{id:"sb2",user_id:"3",space_id:"sp3",booking_date:"2025-10-03",start_time:"14:00",end_time:"18:00",status:"approved",purpose:"Video editing session",created_at:"2025-09-29T11:00:00Z"},{id:"sb3",user_id:"7",space_id:"sp6",booking_date:"2025-10-04",start_time:"10:00",end_time:"16:00",status:"approved",purpose:"Stop-motion animation workshop",created_at:"2025-09-30T09:00:00Z"},{id:"sb4",user_id:"8",space_id:"sp7",booking_date:"2025-10-05",start_time:"09:00",end_time:"12:00",status:"approved",purpose:"Design critique session with students",created_at:"2025-10-01T08:00:00Z"},{id:"sb5",user_id:"6",space_id:"sp12",booking_date:"2025-10-05",start_time:"13:00",end_time:"17:00",status:"approved",purpose:"Traditional illustration workshop",created_at:"2025-10-01T09:00:00Z"},{id:"sb6",user_id:"12",space_id:"sp2",booking_date:"2025-10-06",start_time:"10:00",end_time:"14:00",status:"pending",purpose:"Product photography shoot",created_at:"2025-10-01T10:00:00Z"},{id:"sb7",user_id:"41",space_id:"sp10",booking_date:"2025-10-06",start_time:"14:00",end_time:"18:00",status:"pending",purpose:"Portfolio photography session",created_at:"2025-10-01T11:00:00Z"},{id:"sb8",user_id:"72",space_id:"sp15",booking_date:"2025-10-07",start_time:"09:00",end_time:"13:00",status:"pending",purpose:"Life drawing practice",created_at:"2025-10-01T12:00:00Z"},{id:"sb9",user_id:"18",space_id:"sp5",booking_date:"2025-10-07",start_time:"15:00",end_time:"17:00",status:"pending",purpose:"Voiceover recording for film",created_at:"2025-10-01T13:00:00Z"},{id:"sb10",user_id:"52",space_id:"sp9",booking_date:"2025-10-08",start_time:"10:00",end_time:"16:00",status:"pending",purpose:"Screen printing posters",created_at:"2025-10-01T14:00:00Z"}],Kj=[{id:"ff1",name:"room_booking",enabled:!0,description:"Enable room/space booking for staff",required_role:"staff"},{id:"ff2",name:"analytics_export",enabled:!0,description:"Enable analytics export (CSV/PDF)",required_role:"admin"},{id:"ff3",name:"equipment_notes",enabled:!0,description:"Enable equipment maintenance notes",required_role:"admin"},{id:"ff4",name:"csv_import",enabled:!1,description:"Enable CSV import for users/equipment",required_role:"master_admin"},{id:"ff5",name:"email_notifications",enabled:!1,description:"Enable email notifications via EmailJS",required_role:"admin"}],Zj=[{id:"usa1",user_id:"4",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa2",user_id:"10",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa3",user_id:"11",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa4",user_id:"12",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa5",user_id:"13",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa6",user_id:"14",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa7",user_id:"15",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa8",user_id:"16",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa9",user_id:"17",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa10",user_id:"18",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa11",user_id:"19",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa12",user_id:"20",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa13",user_id:"21",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa14",user_id:"22",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa15",user_id:"23",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa16",user_id:"24",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa17",user_id:"25",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa18",user_id:"26",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa19",user_id:"27",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa20",user_id:"28",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa21",user_id:"29",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa22",user_id:"30",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa23",user_id:"31",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa24",user_id:"32",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa25",user_id:"33",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa26",user_id:"34",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa27",user_id:"35",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa28",user_id:"36",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa29",user_id:"37",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa30",user_id:"38",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa31",user_id:"39",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa32",user_id:"40",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa33",user_id:"41",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa34",user_id:"42",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa35",user_id:"43",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa36",user_id:"44",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa37",user_id:"45",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa38",user_id:"46",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa39",user_id:"47",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa40",user_id:"48",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa41",user_id:"49",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa42",user_id:"50",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa43",user_id:"51",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa44",user_id:"52",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa45",user_id:"53",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa46",user_id:"54",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa47",user_id:"55",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa48",user_id:"56",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa49",user_id:"57",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa50",user_id:"58",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa51",user_id:"59",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa52",user_id:"60",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa53",user_id:"61",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa54",user_id:"62",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa55",user_id:"63",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa56",user_id:"64",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa57",user_id:"65",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa58",user_id:"66",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa59",user_id:"67",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa60",user_id:"68",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa61",user_id:"69",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa62",user_id:"70",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa63",user_id:"71",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa64",user_id:"72",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa65",user_id:"73",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa66",user_id:"74",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa67",user_id:"75",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa68",user_id:"76",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa69",user_id:"77",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa70",user_id:"78",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa71",user_id:"79",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa72",user_id:"80",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa73",user_id:"81",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa74",user_id:"82",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa75",user_id:"83",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa76",user_id:"84",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa77",user_id:"85",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa78",user_id:"86",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa79",user_id:"87",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa80",user_id:"88",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa81",user_id:"89",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa82",user_id:"90",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa83",user_id:"91",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa84",user_id:"92",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa85",user_id:"93",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa86",user_id:"94",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa87",user_id:"95",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa88",user_id:"96",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa89",user_id:"97",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa90",user_id:"98",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa91",user_id:"99",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa92",user_id:"100",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa93",user_id:"3",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa94",user_id:"7",sub_area_id:"sa5",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa95",user_id:"8",sub_area_id:"sa7",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"},{id:"usa96",user_id:"6",sub_area_id:"sa4",assigned_at:"2024-09-01T00:00:00Z",assigned_by:"1"}],Yj=[{id:"ida1",from_sub_area_id:"sa5",to_sub_area_id:"sa6",granted_by:"1",granted_at:"2024-09-01T00:00:00Z",expires_at:null,is_active:!0,notes:"For collaborative film/photo projects"},{id:"ida2",from_sub_area_id:"sa4",to_sub_area_id:"sa7",granted_by:"1",granted_at:"2024-09-01T00:00:00Z",expires_at:null,is_active:!0,notes:"For digital illustration workflows"},{id:"ida3",from_sub_area_id:"sa2",to_sub_area_id:"sa5",granted_by:"1",granted_at:"2024-09-01T00:00:00Z",expires_at:"2024-12-01T00:00:00Z",is_active:!0,notes:"Semester 1 video art project"},{id:"ida4",from_sub_area_id:"sa1",to_sub_area_id:"sa7",granted_by:"1",granted_at:"2024-09-01T00:00:00Z",expires_at:null,is_active:!0,notes:"Interdisciplinary design projects"},{id:"ida5",from_sub_area_id:"sa1",to_sub_area_id:"sa4",granted_by:"1",granted_at:"2024-09-01T00:00:00Z",expires_at:null,is_active:!0,notes:"Illustration for communication design"}],Jj=[{id:"ar1",requesting_admin_id:"2",from_sub_area_id:"sa5",to_sub_area_id:"sa6",status:"pending",reason:"Our students need access to DSLR cameras for film photography projects in Semester 2",requested_at:"2025-09-25T10:00:00Z",reviewed_by:null,reviewed_at:null,notes:null},{id:"ar2",requesting_admin_id:"104",from_sub_area_id:"sa4",to_sub_area_id:"sa7",status:"approved",reason:"Students need access to digital design tools for illustration workflows",requested_at:"2025-09-15T09:30:00Z",reviewed_by:"1",reviewed_at:"2025-09-16T14:20:00Z",notes:"Approved - interdisciplinary access grant created (ida2)"},{id:"ar3",requesting_admin_id:"5",from_sub_area_id:"sa7",to_sub_area_id:"sa2",status:"denied",reason:"Students want to experiment with fine art media for experimental design projects",requested_at:"2025-09-10T11:00:00Z",reviewed_by:"1",reviewed_at:"2025-09-12T10:15:00Z",notes:"Denied - Fine Art equipment is limited and prioritized for Fine Art students. Please submit specific project proposals for case-by-case approval."},{id:"ar4",requesting_admin_id:"103",from_sub_area_id:"sa3",to_sub_area_id:"sa5",status:"pending",reason:"Need video equipment to document sculpture installations and create time-lapse videos",requested_at:"2025-09-28T14:45:00Z",reviewed_by:null,reviewed_at:null,notes:null},{id:"ar5",requesting_admin_id:"101",from_sub_area_id:"sa1",to_sub_area_id:"sa4",status:"approved",reason:"Communication Design students need illustration tablets for visual communication projects",requested_at:"2025-09-01T08:00:00Z",reviewed_by:"1",reviewed_at:"2025-09-02T09:00:00Z",notes:"Approved - interdisciplinary access grant created (ida5)"},{id:"ar6",requesting_admin_id:"105",from_sub_area_id:"sa6",to_sub_area_id:"sa5",status:"pending",reason:"Need access to LED lighting equipment for studio photography sessions",requested_at:"2025-09-30T13:20:00Z",reviewed_by:null,reviewed_at:null,notes:null}],Xj=[{key:"cross_department_browsing_enabled",value:!1,description:"Allow students to browse equipment from other departments",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"cross_department_booking_enabled",value:!1,description:"Allow students to book equipment from other departments",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"cross_department_approval_required",value:!0,description:"Require department admin approval for cross-department bookings",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"staff_cross_department_requests_enabled",value:!0,description:"Allow staff to request equipment from other departments",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"equipment_kits_enabled",value:!0,description:"Enable equipment kit functionality for department admins",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"room_bookings_enabled",value:!0,description:"Master toggle for entire room bookings system",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"room_bookings_visible_staff",value:!0,description:"Show room bookings in Staff portal",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"},{key:"room_bookings_visible_dept_admin",value:!0,description:"Show room bookings in Department Admin portal",modified_by:"1",modified_at:"2024-01-15T10:00:00Z"}],Qj=[{id:"kit1",name:"Video Production Starter Kit",description:"Complete kit for basic video production - camera, tripod, mic, lighting",department_id:"COMMUNICATION_DESIGN",created_by:"2",created_at:"2024-02-01T14:00:00Z",is_active:!0,equipment_ids:["eq3","eq24","eq30","eq21"],image_url:"https://example.com/video-kit.jpg"},{id:"kit2",name:"Photography Essentials",description:"Essential photography kit - DSLR, tripod, reflector",department_id:"COMMUNICATION_DESIGN",created_by:"2",created_at:"2024-02-01T14:30:00Z",is_active:!0,equipment_ids:["eq4","eq25","eq40"],image_url:"https://example.com/photo-kit.jpg"},{id:"kit3",name:"Illustration Digital Kit",description:"Digital illustration setup - iPad Pro with Apple Pencil",department_id:"COMMUNICATION_DESIGN",created_by:"2",created_at:"2024-02-01T15:00:00Z",is_active:!0,equipment_ids:["eq16","eq17"],image_url:"https://example.com/illustration-kit.jpg"},{id:"kit4",name:"3D Printing Starter Kit",description:"Complete 3D printing setup with laptop and printer",department_id:"PRODUCT_DESIGN",created_by:"3",created_at:"2024-02-02T10:00:00Z",is_active:!0,equipment_ids:["eq41","eq46"],image_url:"https://example.com/3d-print-kit.jpg"},{id:"kit5",name:"VR Development Kit",description:"VR development setup - Quest 3 headset with development laptop",department_id:"PRODUCT_DESIGN",created_by:"3",created_at:"2024-02-02T10:30:00Z",is_active:!0,equipment_ids:["eq50","eq47"],image_url:"https://example.com/vr-kit.jpg"}],e4=[{id:"req1",requesting_user_id:"14",requesting_department_id:"COMMUNICATION_DESIGN",target_department_id:"MEDIA",equipment_type:"Canon 250D DSLR Kit",quantity:6,start_date:"2024-03-15",end_date:"2024-03-20",justification:"Running a 5-day video workshop for Fine Art Media students. Need 6 cameras for hands-on practice. Our department only has 2 available during this period.",status:"pending",created_at:"2024-02-20T09:00:00Z"},{id:"req2",requesting_user_id:"16",requesting_department_id:"PAINTING",target_department_id:"COMMUNICATION_DESIGN",equipment_type:'iPad Pro 12.9" + Apple Pencil',quantity:3,start_date:"2024-03-10",end_date:"2024-03-12",justification:"Digital painting workshop. Need tablets for student demonstrations.",status:"approved",reviewed_by:"2",reviewed_at:"2024-02-21T14:30:00Z",review_notes:"Approved. Equipment available for collection on March 10th at 9 AM from Room 204. Please return by 5 PM on March 12th. Contact me at admin.commdesign@ncad.ie if you need setup assistance.",created_at:"2024-02-20T11:00:00Z"},{id:"req3",requesting_user_id:"19",requesting_department_id:"SCULPTURE_APPLIED_MATERIALS",target_department_id:"PRODUCT_DESIGN",equipment_type:"Prusa i3 MK3S+ 3D Printer",quantity:2,start_date:"2024-03-01",end_date:"2024-03-05",justification:"Sculpture students need to print mold prototypes for ceramics project.",status:"denied",reviewed_by:"3",reviewed_at:"2024-02-21T16:00:00Z",review_notes:"Unfortunately our 3D printers are fully booked for our final year projects during this period. Please try again for a different date or contact Fine Art Media who may have alternative equipment.",created_at:"2024-02-20T15:00:00Z"},{id:"req4",requesting_user_id:"18",requesting_department_id:"MEDIA",target_department_id:"PRODUCT_DESIGN",equipment_type:"Meta Quest 3 VR Headset",quantity:1,start_date:"2024-03-18",end_date:"2024-03-22",justification:"VR installation project for photography student. Need headset for viewer interaction testing.",status:"pending",created_at:"2024-02-22T10:00:00Z"}],t4=[{id:"kitbook1",kit_id:"kit1",booking_ids:["book201","book202","book203","book204"],user_id:"24",start_date:"2024-03-05",end_date:"2024-03-08",status:"approved",created_at:"2024-02-25T11:00:00Z"},{id:"kitbook2",kit_id:"kit3",booking_ids:["book205","book206"],user_id:"25",start_date:"2024-03-10",end_date:"2024-03-12",status:"pending",created_at:"2024-02-26T14:00:00Z"}],n4=[{id:"grant1",requesting_department_id:"COMMUNICATION_DESIGN",lending_department_id:"MEDIA",equipment_type:"Sony A7 III Mirrorless Camera",quantity_available:3,start_date:"2024-03-01",end_date:"2024-06-30",status:"active",approved_by_lending_admin:"6",approved_by_master_admin:"1",collection_instructions:"Equipment available for collection from Media Department (Room 304, 3rd Floor). Collection hours: Mon-Fri 9 AM - 5 PM. Contact Lisa O'Brien at admin.media.photo@ncad.ie to arrange pickup. Please return equipment to the same location by 4 PM on your end date.",terms:"Students must handle equipment with care. Any damage must be reported immediately. Equipment must be returned on time or access will be revoked.",created_at:"2024-02-28T10:00:00Z",approved_at:"2024-02-28T14:30:00Z"},{id:"grant2",requesting_department_id:"PAINTING",lending_department_id:"COMMUNICATION_DESIGN",equipment_type:'iPad Pro 12.9" + Apple Pencil',quantity_available:5,start_date:"2024-03-10",end_date:"2024-04-30",status:"active",approved_by_lending_admin:"2",approved_by_master_admin:"1",collection_instructions:"iPad Pros available from Communication Design Equipment Store (Room 102, Ground Floor). Collection: Mon-Fri 10 AM - 4 PM. Contact Sarah Johnson at admin.commdesign@ncad.ie. Return to same location.",terms:"iPads must be returned fully charged. Do not install personal apps. Report any technical issues immediately.",created_at:"2024-03-08T11:00:00Z",approved_at:"2024-03-09T09:00:00Z"},{id:"grant3",requesting_department_id:"MEDIA",lending_department_id:"PRODUCT_DESIGN",equipment_type:"Meta Quest 3 VR Headset",quantity_available:2,start_date:"2024-03-15",end_date:"2024-05-15",status:"active",approved_by_lending_admin:"3",approved_by_master_admin:"1",collection_instructions:"VR headsets available from Product Design Lab (Room 205, 2nd Floor). Book collection time via admin.product@ncad.ie 24 hours in advance. Return with all accessories (controllers, charging cable, case).",terms:"Handle VR equipment with extreme care. Clean lenses before return. Maximum loan period: 3 days per booking.",created_at:"2024-03-12T14:00:00Z",approved_at:"2024-03-13T10:30:00Z"}],r4=[{id:"sa_comm_design",name:"Communication Design",school:"School of Design",created_at:"2024-01-01"},{id:"sa_product",name:"Product Design",school:"School of Design",created_at:"2024-01-01"},{id:"sa_painting",name:"Painting",school:"School of Fine Art",created_at:"2024-01-01"},{id:"sa_print",name:"Print",school:"School of Fine Art",created_at:"2024-01-01"},{id:"sa_media",name:"Media",school:"School of Fine Art",created_at:"2024-01-01"},{id:"sa_sculpture",name:"Sculpture & Applied Materials",school:"School of Fine Art",created_at:"2024-01-01"},{id:"sa_education",name:"Education",school:"School of Education",created_at:"2024-01-01"},{id:"sa_visual_culture",name:"Visual Culture",school:"School of Visual Culture",created_at:"2024-01-01"},{id:"sa_fy_ground",name:"First Year - Ground Floor",school:"First Year Studies",created_at:"2024-01-01"},{id:"sa_fy_top",name:"First Year - Top Floor",school:"First Year Studies",created_at:"2024-01-01"}],a4=[{id:"1",email:"master@ncad.ie",password:"master123",first_name:"Master",surname:"Admin",full_name:"Master Admin",role:"master_admin",department:"COMMUNICATION_DESIGN",created_at:"2024-01-01"},{id:"201",email:"viewonly@ncad.ie",password:"demo123",first_name:"View",surname:"Only",full_name:"View Only Staff",role:"view_only_staff",department:"COMMUNICATION_DESIGN",created_at:"2024-03-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!1,can_view_history:!0,can_view_analytics:!1}},{id:"202",email:"accounts@ncad.ie",password:"demo123",first_name:"Accounts",surname:"Officer",full_name:"Accounts Officer",role:"accounts_officer",department:"ADMINISTRATION",created_at:"2024-03-01",finance_permissions:{can_view_costs:!0,can_export_finance:!0,can_view_all_depts:!0}},{id:"203",email:"payroll@ncad.ie",password:"demo123",first_name:"Payroll",surname:"Coordinator",full_name:"Payroll Coordinator",role:"payroll_coordinator",department:"ADMINISTRATION",created_at:"2024-03-01",payroll_permissions:{can_view_staff_allocations:!0,can_export_payroll:!0}},{id:"204",email:"it@ncad.ie",password:"demo123",first_name:"IT",surname:"Support",full_name:"IT Support Technician",role:"it_support",department:"ADMINISTRATION",created_at:"2024-03-01",it_permissions:{can_manage_equipment:!0,can_view_logs:!0,can_reset_passwords:!1}},{id:"205",email:"budget@ncad.ie",password:"demo123",first_name:"Budget",surname:"Manager",full_name:"Budget Manager",role:"budget_manager",department:"ADMINISTRATION",created_at:"2024-03-01",budget_permissions:{can_view_budgets:!0,can_forecast_costs:!0,can_export_reports:!0}},{id:"2",email:"admin.commdesign@ncad.ie",password:"admin123",first_name:"Sarah",surname:"Johnson",full_name:"Sarah Johnson",role:"department_admin",managed_department_id:"sa_comm_design",department:"COMMUNICATION_DESIGN",created_at:"2024-01-15"},{id:"3",email:"admin.product@ncad.ie",password:"admin123",first_name:"Mark",surname:"Williams",full_name:"Mark Williams",role:"department_admin",managed_department_id:"sa_product",department:"PRODUCT_DESIGN",created_at:"2024-01-15"},{id:"4",email:"admin.painting@ncad.ie",password:"admin123",first_name:"Emma",surname:"Clarke",full_name:"Emma Clarke",role:"department_admin",managed_department_id:"sa_painting",department:"PAINTING",created_at:"2024-01-15"},{id:"5",email:"admin.print@ncad.ie",password:"admin123",first_name:"Robert",surname:"Taylor",full_name:"Robert Taylor",role:"department_admin",managed_department_id:"sa_print",department:"PRINT",created_at:"2024-01-15"},{id:"6",email:"admin.media.photo@ncad.ie",password:"admin123",first_name:"Lisa",surname:"O'Brien",full_name:"Lisa O'Brien",role:"department_admin",managed_department_id:"sa_media",department:"MEDIA",media_role:"Photography Admin",created_at:"2024-01-15"},{id:"7",email:"admin.media.video@ncad.ie",password:"admin123",first_name:"David",surname:"Murphy",full_name:"David Murphy",role:"department_admin",managed_department_id:"sa_media",department:"MEDIA",media_role:"Video Studio Admin",created_at:"2024-01-15"},{id:"8",email:"admin.media.physcomp@ncad.ie",password:"admin123",first_name:"Jennifer",surname:"Walsh",full_name:"Jennifer Walsh",role:"department_admin",managed_department_id:"sa_media",department:"MEDIA",media_role:"Physical Computing Admin",created_at:"2024-01-15"},{id:"9",email:"admin.sculpture@ncad.ie",password:"admin123",first_name:"Thomas",surname:"Anderson",full_name:"Thomas Anderson",role:"department_admin",managed_department_id:"sa_sculpture",department:"SCULPTURE_APPLIED_MATERIALS",created_at:"2024-01-15"},{id:"10",email:"admin.education@ncad.ie",password:"admin123",first_name:"Patricia",surname:"Moore",full_name:"Patricia Moore",role:"department_admin",managed_department_id:"sa_education",department:"EDUCATION",created_at:"2024-01-15"},{id:"11",email:"admin.visualculture@ncad.ie",password:"admin123",first_name:"Michael",surname:"Brown",full_name:"Michael Brown",role:"department_admin",managed_department_id:"sa_visual_culture",department:"VISUAL_CULTURE",created_at:"2024-01-15"},{id:"12",email:"admin.fy.ground@ncad.ie",password:"admin123",first_name:"Helen",surname:"Ryan",full_name:"Helen Ryan",role:"department_admin",managed_department_id:"sa_fy_ground",department:"FIRST_YEAR_GROUND_FLOOR",created_at:"2024-01-15"},{id:"13",email:"admin.fy.top@ncad.ie",password:"admin123",first_name:"James",surname:"Kelly",full_name:"James Kelly",role:"department_admin",managed_department_id:"sa_fy_top",department:"FIRST_YEAR_TOP_FLOOR",created_at:"2024-01-15"},{id:"14",email:"staff.commdesign@ncad.ie",password:"staff123",first_name:"Anna",surname:"Collins",full_name:"Anna Collins",role:"staff",department:"COMMUNICATION_DESIGN",managed_department_id:"sa_comm_design",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!0,can_export_data:!0,can_request_access:!0,email_notifications:!0,modified_by:"admin.commdesign@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"15",email:"staff.product@ncad.ie",password:"staff123",first_name:"Brian",surname:"Hughes",full_name:"Brian Hughes",role:"staff",department:"PRODUCT_DESIGN",managed_department_id:"sa_product",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.product@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"16",email:"staff.painting@ncad.ie",password:"staff123",first_name:"Claire",surname:"Doyle",full_name:"Claire Doyle",role:"staff",department:"PAINTING",managed_department_id:"sa_painting",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!1,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.painting@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"17",email:"staff.print@ncad.ie",password:"staff123",first_name:"Daniel",surname:"Quinn",full_name:"Daniel Quinn",role:"staff",department:"PRINT",managed_department_id:"sa_print",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.print@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"18",email:"staff.media@ncad.ie",password:"staff123",first_name:"Fiona",surname:"McCarthy",full_name:"Fiona McCarthy",role:"staff",department:"MEDIA",managed_department_id:"sa_media",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!0,can_export_data:!0,can_request_access:!0,email_notifications:!0,modified_by:"admin.media.photo@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"19",email:"staff.sculpture@ncad.ie",password:"staff123",first_name:"Gary",surname:"O'Connor",full_name:"Gary O'Connor",role:"staff",department:"SCULPTURE_APPLIED_MATERIALS",managed_department_id:"sa_sculpture",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!1,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.sculpture@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"20",email:"staff.education@ncad.ie",password:"staff123",first_name:"Hannah",surname:"Byrne",full_name:"Hannah Byrne",role:"staff",department:"EDUCATION",managed_department_id:"sa_education",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.education@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"21",email:"staff.visualculture@ncad.ie",password:"staff123",first_name:"Ian",surname:"Brennan",full_name:"Ian Brennan",role:"staff",department:"VISUAL_CULTURE",managed_department_id:"sa_visual_culture",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!1,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.visualculture@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"22",email:"staff.fy.ground@ncad.ie",password:"staff123",first_name:"Jane",surname:"Keegan",full_name:"Jane Keegan",role:"staff",department:"FIRST_YEAR_GROUND_FLOOR",managed_department_id:"sa_fy_ground",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.fy.ground@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},{id:"23",email:"staff.fy.top@ncad.ie",password:"staff123",first_name:"Kevin",surname:"Dunne",full_name:"Kevin Dunne",role:"staff",department:"FIRST_YEAR_TOP_FLOOR",managed_department_id:"sa_fy_top",created_at:"2024-02-01",view_permissions:{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0,modified_by:"admin.fy.top@ncad.ie",modified_at:"2024-02-05T14:30:00Z"}},...Array.from({length:40},(e,t)=>({id:String(24+t),email:`commdesign.student${t+1}@student.ncad.ie`,password:"student123",first_name:"CommDesign",surname:`Student${t+1}`,full_name:`CommDesign Student${t+1}`,role:"student",department:"COMMUNICATION_DESIGN",created_at:"2024-09-01"})),...Array.from({length:20},(e,t)=>({id:String(64+t),email:`product.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Product",surname:`Student${t+1}`,full_name:`Product Student${t+1}`,role:"student",department:"PRODUCT_DESIGN",created_at:"2024-09-01"})),...Array.from({length:12},(e,t)=>({id:String(84+t),email:`painting.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Painting",surname:`Student${t+1}`,full_name:`Painting Student${t+1}`,role:"student",department:"PAINTING",created_at:"2024-09-01"})),...Array.from({length:10},(e,t)=>({id:String(96+t),email:`print.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Print",surname:`Student${t+1}`,full_name:`Print Student${t+1}`,role:"student",department:"PRINT",created_at:"2024-09-01"})),...Array.from({length:25},(e,t)=>({id:String(106+t),email:`media.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Media",surname:`Student${t+1}`,full_name:`Media Student${t+1}`,role:"student",department:"MEDIA",created_at:"2024-09-01"})),...Array.from({length:10},(e,t)=>({id:String(131+t),email:`sculpture.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Sculpture",surname:`Student${t+1}`,full_name:`Sculpture Student${t+1}`,role:"student",department:"SCULPTURE_APPLIED_MATERIALS",created_at:"2024-09-01"})),...Array.from({length:5},(e,t)=>({id:String(141+t),email:`education.student${t+1}@student.ncad.ie`,password:"student123",first_name:"Education",surname:`Student${t+1}`,full_name:`Education Student${t+1}`,role:"student",department:"EDUCATION",created_at:"2024-09-01"})),...Array.from({length:2},(e,t)=>({id:String(146+t),email:`visualculture.student${t+1}@student.ncad.ie`,password:"student123",first_name:"VisualCulture",surname:`Student${t+1}`,full_name:`VisualCulture Student${t+1}`,role:"student",department:"VISUAL_CULTURE",created_at:"2024-09-01"})),{id:"148",email:"fy.ground.student1@student.ncad.ie",password:"student123",first_name:"FYGround",surname:"Student1",full_name:"FYGround Student1",role:"student",department:"FIRST_YEAR_GROUND_FLOOR",created_at:"2024-09-01"},{id:"149",email:"fy.top.student1@student.ncad.ie",password:"student123",first_name:"FYTop",surname:"Student1",full_name:"FYTop Student1",role:"student",department:"FIRST_YEAR_TOP_FLOOR",created_at:"2024-09-01"},{id:"150",email:"demo@ncad.ie",password:"demo123",first_name:"Demo",surname:"Student",full_name:"Demo Student",role:"student",department:"COMMUNICATION_DESIGN",created_at:"2024-01-01"}],s4=[{id:"eq1",product_name:"Canon EOS R5",tracking_number:"CD-CAM-001",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Mirrorless full-frame camera",link_to_image:"https://example.com/eosr5.jpg",created_at:"2024-01-10"},{id:"eq2",product_name:"Canon EOS R5",tracking_number:"CD-CAM-002",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Mirrorless full-frame camera",link_to_image:"https://example.com/eosr5.jpg",created_at:"2024-01-10"},{id:"eq3",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-003",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq4",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-004",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq5",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-005",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq6",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-006",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq7",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-007",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq8",product_name:"Canon 250D DSLR Kit",tracking_number:"CD-CAM-008",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"DSLR kit with 18-55mm lens",link_to_image:"https://example.com/250d.jpg",created_at:"2024-01-10"},{id:"eq9",product_name:'MacBook Pro 16"',tracking_number:"CD-COMP-001",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Apple Silicon M2 Pro",link_to_image:"https://example.com/macbookpro.jpg",created_at:"2024-01-10"},{id:"eq10",product_name:'MacBook Pro 16"',tracking_number:"CD-COMP-002",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Apple Silicon M2 Pro",link_to_image:"https://example.com/macbookpro.jpg",created_at:"2024-01-10"},{id:"eq11",product_name:'MacBook Pro 16"',tracking_number:"CD-COMP-003",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Apple Silicon M2 Pro",link_to_image:"https://example.com/macbookpro.jpg",created_at:"2024-01-10"},{id:"eq12",product_name:'MacBook Pro 16"',tracking_number:"CD-COMP-004",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Apple Silicon M2 Pro",link_to_image:"https://example.com/macbookpro.jpg",created_at:"2024-01-10"},{id:"eq13",product_name:'MacBook Pro 16"',tracking_number:"CD-COMP-005",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Apple Silicon M2 Pro",link_to_image:"https://example.com/macbookpro.jpg",created_at:"2024-01-10"},{id:"eq14",product_name:"Wacom Cintiq Pro 24",tracking_number:"CD-TAB-001",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Pen display tablet",link_to_image:"https://example.com/cintiq.jpg",created_at:"2024-01-10"},{id:"eq15",product_name:"Wacom Cintiq Pro 24",tracking_number:"CD-TAB-002",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Pen display tablet",link_to_image:"https://example.com/cintiq.jpg",created_at:"2024-01-10"},{id:"eq16",product_name:'iPad Pro 12.9" + Apple Pencil',tracking_number:"CD-TAB-003",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Tablet for illustration",link_to_image:"https://example.com/ipadpro.jpg",created_at:"2024-01-10"},{id:"eq17",product_name:'iPad Pro 12.9" + Apple Pencil',tracking_number:"CD-TAB-004",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Tablet for illustration",link_to_image:"https://example.com/ipadpro.jpg",created_at:"2024-01-10"},{id:"eq18",product_name:'iPad Pro 12.9" + Apple Pencil',tracking_number:"CD-TAB-005",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Tablet for illustration",link_to_image:"https://example.com/ipadpro.jpg",created_at:"2024-01-10"},{id:"eq19",product_name:"Epson SureColor P800",tracking_number:"CD-PRINT-001",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional photo printer",link_to_image:"https://example.com/epsonp800.jpg",created_at:"2024-01-10"},{id:"eq20",product_name:"Epson SureColor P800",tracking_number:"CD-PRINT-002",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional photo printer",link_to_image:"https://example.com/epsonp800.jpg",created_at:"2024-01-10"},{id:"eq21",product_name:"Godox SL-60W LED Light",tracking_number:"CD-LIGHT-001",category:"Lighting",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Continuous LED light",link_to_image:"https://example.com/sl60.jpg",created_at:"2024-01-10"},{id:"eq22",product_name:"Godox SL-60W LED Light",tracking_number:"CD-LIGHT-002",category:"Lighting",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Continuous LED light",link_to_image:"https://example.com/sl60.jpg",created_at:"2024-01-10"},{id:"eq23",product_name:"Godox SL-60W LED Light",tracking_number:"CD-LIGHT-003",category:"Lighting",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Continuous LED light",link_to_image:"https://example.com/sl60.jpg",created_at:"2024-01-10"},{id:"eq24",product_name:"Manfrotto 055 Tripod",tracking_number:"CD-SUPP-001",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional aluminum tripod",link_to_image:"https://example.com/manfrotto055.jpg",created_at:"2024-01-10"},{id:"eq25",product_name:"Manfrotto 055 Tripod",tracking_number:"CD-SUPP-002",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional aluminum tripod",link_to_image:"https://example.com/manfrotto055.jpg",created_at:"2024-01-10"},{id:"eq26",product_name:"Manfrotto 055 Tripod",tracking_number:"CD-SUPP-003",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional aluminum tripod",link_to_image:"https://example.com/manfrotto055.jpg",created_at:"2024-01-10"},{id:"eq27",product_name:"Manfrotto 055 Tripod",tracking_number:"CD-SUPP-004",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Professional aluminum tripod",link_to_image:"https://example.com/manfrotto055.jpg",created_at:"2024-01-10"},{id:"eq28",product_name:"DJI Ronin-SC Gimbal",tracking_number:"CD-SUPP-005",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Handheld stabilizer",link_to_image:"https://example.com/ronin.jpg",created_at:"2024-01-10"},{id:"eq29",product_name:"DJI Ronin-SC Gimbal",tracking_number:"CD-SUPP-006",category:"Support",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Handheld stabilizer",link_to_image:"https://example.com/ronin.jpg",created_at:"2024-01-10"},{id:"eq30",product_name:"Rode VideoMic Pro+",tracking_number:"CD-AUDIO-001",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"On-camera microphone",link_to_image:"https://example.com/rodemicpro.jpg",created_at:"2024-01-10"},{id:"eq31",product_name:"Rode VideoMic Pro+",tracking_number:"CD-AUDIO-002",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"On-camera microphone",link_to_image:"https://example.com/rodemicpro.jpg",created_at:"2024-01-10"},{id:"eq32",product_name:"Zoom H6 Audio Recorder",tracking_number:"CD-AUDIO-003",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Portable audio recorder",link_to_image:"https://example.com/zoomh6.jpg",created_at:"2024-01-10"},{id:"eq33",product_name:"Zoom H6 Audio Recorder",tracking_number:"CD-AUDIO-004",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Portable audio recorder",link_to_image:"https://example.com/zoomh6.jpg",created_at:"2024-01-10"},{id:"eq34",product_name:"Blackmagic Pocket Cinema 4K",tracking_number:"CD-CAM-009",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Digital film camera",link_to_image:"https://example.com/bmpcc4k.jpg",created_at:"2024-01-10"},{id:"eq35",product_name:"Blackmagic Pocket Cinema 4K",tracking_number:"CD-CAM-010",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Digital film camera",link_to_image:"https://example.com/bmpcc4k.jpg",created_at:"2024-01-10"},{id:"eq36",product_name:"Brother P-touch Label Maker",tracking_number:"CD-MISC-001",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Label printer",link_to_image:"https://example.com/ptouch.jpg",created_at:"2024-01-10"},{id:"eq37",product_name:"Epson FastFoto FF-680W Scanner",tracking_number:"CD-SCAN-001",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"High-speed photo scanner",link_to_image:"https://example.com/fastfoto.jpg",created_at:"2024-01-10"},{id:"eq38",product_name:"Epson FastFoto FF-680W Scanner",tracking_number:"CD-SCAN-002",category:"Computer",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"High-speed photo scanner",link_to_image:"https://example.com/fastfoto.jpg",created_at:"2024-01-10"},{id:"eq39",product_name:"X-Rite ColorChecker Passport",tracking_number:"CD-COLOR-001",category:"Camera",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"Color calibration tool",link_to_image:"https://example.com/colorchecker.jpg",created_at:"2024-01-10"},{id:"eq40",product_name:"Lastolite Reflector Kit",tracking_number:"CD-LIGHT-004",category:"Lighting",department:"COMMUNICATION_DESIGN",sub_area_id:"sa_comm_design",status:"available",description:"5-in-1 reflector set",link_to_image:"https://example.com/lastolite.jpg",created_at:"2024-01-10"},{id:"eq41",product_name:"Prusa i3 MK3S+ 3D Printer",tracking_number:"PD-3DP-001",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"FDM 3D printer",link_to_image:"https://example.com/prusa.jpg",created_at:"2024-01-11"},{id:"eq42",product_name:"Prusa i3 MK3S+ 3D Printer",tracking_number:"PD-3DP-002",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"FDM 3D printer",link_to_image:"https://example.com/prusa.jpg",created_at:"2024-01-11"},{id:"eq43",product_name:"Prusa i3 MK3S+ 3D Printer",tracking_number:"PD-3DP-003",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"FDM 3D printer",link_to_image:"https://example.com/prusa.jpg",created_at:"2024-01-11"},{id:"eq44",product_name:"Formlabs Form 3+ SLA Printer",tracking_number:"PD-3DP-004",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Resin 3D printer",link_to_image:"https://example.com/form3.jpg",created_at:"2024-01-11"},{id:"eq45",product_name:"Formlabs Form 3+ SLA Printer",tracking_number:"PD-3DP-005",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Resin 3D printer",link_to_image:"https://example.com/form3.jpg",created_at:"2024-01-11"},{id:"eq46",product_name:"Dell XPS 15 Laptop",tracking_number:"PD-COMP-001",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"High-performance laptop",link_to_image:"https://example.com/xps15.jpg",created_at:"2024-01-11"},{id:"eq47",product_name:"Dell XPS 15 Laptop",tracking_number:"PD-COMP-002",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"High-performance laptop",link_to_image:"https://example.com/xps15.jpg",created_at:"2024-01-11"},{id:"eq48",product_name:"Dell XPS 15 Laptop",tracking_number:"PD-COMP-003",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"High-performance laptop",link_to_image:"https://example.com/xps15.jpg",created_at:"2024-01-11"},{id:"eq49",product_name:"Dell XPS 15 Laptop",tracking_number:"PD-COMP-004",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"High-performance laptop",link_to_image:"https://example.com/xps15.jpg",created_at:"2024-01-11"},{id:"eq50",product_name:"Meta Quest 3 VR Headset",tracking_number:"PD-VR-001",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Virtual reality headset",link_to_image:"https://example.com/quest3.jpg",created_at:"2024-01-11"},{id:"eq51",product_name:"Meta Quest 3 VR Headset",tracking_number:"PD-VR-002",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Virtual reality headset",link_to_image:"https://example.com/quest3.jpg",created_at:"2024-01-11"},{id:"eq52",product_name:"Meta Quest 3 VR Headset",tracking_number:"PD-VR-003",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Virtual reality headset",link_to_image:"https://example.com/quest3.jpg",created_at:"2024-01-11"},{id:"eq53",product_name:"Arduino Starter Kit",tracking_number:"PD-ELEC-001",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Electronics prototyping kit",link_to_image:"https://example.com/arduino.jpg",created_at:"2024-01-11"},{id:"eq54",product_name:"Arduino Starter Kit",tracking_number:"PD-ELEC-002",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Electronics prototyping kit",link_to_image:"https://example.com/arduino.jpg",created_at:"2024-01-11"},{id:"eq55",product_name:"Dremel 4300 Rotary Tool",tracking_number:"PD-TOOL-001",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Multi-purpose rotary tool",link_to_image:"https://example.com/dremel.jpg",created_at:"2024-01-11"},{id:"eq56",product_name:"Dremel 4300 Rotary Tool",tracking_number:"PD-TOOL-002",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Multi-purpose rotary tool",link_to_image:"https://example.com/dremel.jpg",created_at:"2024-01-11"},{id:"eq57",product_name:"Caliper Digital Measuring Tool",tracking_number:"PD-MEAS-001",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Precision measurement",link_to_image:"https://example.com/caliper.jpg",created_at:"2024-01-11"},{id:"eq58",product_name:"Hot Glue Gun Set",tracking_number:"PD-TOOL-003",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Adhesive tool",link_to_image:"https://example.com/gluegun.jpg",created_at:"2024-01-11"},{id:"eq59",product_name:"Canon EOS 90D DSLR",tracking_number:"PD-CAM-001",category:"Camera",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Product photography camera",link_to_image:"https://example.com/eos90d.jpg",created_at:"2024-01-11"},{id:"eq60",product_name:"Canon EOS 90D DSLR",tracking_number:"PD-CAM-002",category:"Camera",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Product photography camera",link_to_image:"https://example.com/eos90d.jpg",created_at:"2024-01-11"},{id:"eq61",product_name:"Godox V1 Flash",tracking_number:"PD-LIGHT-001",category:"Lighting",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Round head flash",link_to_image:"https://example.com/v1flash.jpg",created_at:"2024-01-11"},{id:"eq62",product_name:"Godox V1 Flash",tracking_number:"PD-LIGHT-002",category:"Lighting",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Round head flash",link_to_image:"https://example.com/v1flash.jpg",created_at:"2024-01-11"},{id:"eq63",product_name:"Manfrotto Tripod",tracking_number:"PD-SUPP-001",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Aluminum tripod",link_to_image:"https://example.com/manfrotto.jpg",created_at:"2024-01-11"},{id:"eq64",product_name:"Manfrotto Tripod",tracking_number:"PD-SUPP-002",category:"Support",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Aluminum tripod",link_to_image:"https://example.com/manfrotto.jpg",created_at:"2024-01-11"},{id:"eq65",product_name:"Wacom Intuos Pro Tablet",tracking_number:"PD-TAB-001",category:"Computer",department:"PRODUCT_DESIGN",sub_area_id:"sa_product",status:"available",description:"Drawing tablet",link_to_image:"https://example.com/wacom.jpg",created_at:"2024-01-11"}],Ol="ncadbook_demo_data";class i4{constructor(){this.initializeStorage()}initializeStorage(){if(!localStorage.getItem(Ol)){const n={users:a4,equipment:s4,sub_areas:r4,system_settings:Xj,equipment_kits:Qj,cross_department_requests:e4,kit_bookings:t4,department_access_grants:n4,spaces:Hj,bookings:Vj,spaceBookings:Gj,featureFlags:Kj,user_sub_areas:Zj,interdisciplinary_access:Yj,access_requests:Jj,currentUser:null};localStorage.setItem(Ol,JSON.stringify(n))}}getData(){const t=localStorage.getItem(Ol);return t?JSON.parse(t):null}setData(t){localStorage.setItem(Ol,JSON.stringify(t))}saveData(t){this.setData(t)}async query(t,n={}){await this.simulateDelay();let s=this.getData()[t]||[];return Object.keys(n).forEach(i=>{s=s.filter(o=>o[i]===n[i])}),s}async findOne(t,n){return(await this.query(t,n))[0]||null}async insert(t,n){await this.simulateDelay();const r=this.getData();return r[t]||(r[t]=[]),r[t].push(n),this.setData(r),n}async update(t,n,r){await this.simulateDelay();const s=this.getData();let i=0;return s[t]=s[t].map(o=>Object.keys(n).every(c=>o[c]===n[c])?(i++,{...o,...r}):o),this.setData(s),i}async delete(t,n){await this.simulateDelay();const r=this.getData(),s=r[t].length;return r[t]=r[t].filter(i=>!Object.keys(n).every(o=>i[o]===n[o])),this.setData(r),s-r[t].length}setCurrentUser(t){const n=this.getData();n.currentUser=t,this.setData(n)}getCurrentUser(){return this.getData().currentUser}clearCurrentUser(){const t=this.getData();t.currentUser=null,this.setData(t)}simulateDelay(){return new Promise(t=>setTimeout(t,100+Math.random()*200))}reset(){localStorage.removeItem(Ol),this.initializeStorage()}}const xe=new i4;console.log(" Running in DEMO MODE - Using local data only (no database required)");const r5=!1;console.log(" Auth Debug:",{VITE_DEMO_MODE:"true",USE_SUPABASE:r5,mode:"Demo Mode"});const Io={async login(e,t){console.log(" Login attempt:",{email:e,USE_SUPABASE:r5});{console.log(" Demo mode - searching for user:",e);const n=await xe.findOne("users",{email:e,password:t});if(console.log(" User search result:",n?"Found":"Not found"),!n){const i=await xe.query("users");throw console.log(" Available demo users:",i.map(o=>({email:o.email,role:o.role}))),new Error("Invalid email or password")}const{password:r,...s}=n;return xe.setCurrentUser(s),console.log(" Demo login successful:",s.email,s.role),s}},async logout(){xe.clearCurrentUser()},async getCurrentUser(){return xe.getCurrentUser()},async register(e){if(await xe.findOne("users",{email:e.email}))throw new Error("User already exists");const n={id:Date.now().toString(),...e,created_at:new Date().toISOString()};await xe.insert("users",n);const{password:r,...s}=n;return s},hasPermission(e,t){const n={student:1,staff:2,admin:3,master_admin:4};return n[e==null?void 0:e.role]>=n[t]}},a5=R.createContext(null);function o4({children:e}){const[t,n]=R.useState(null),[r,s]=R.useState(!0);R.useEffect(()=>{(async()=>{try{const d=await Io.getCurrentUser();n(d)}catch(d){console.error("Failed to load user:",d)}finally{s(!1)}})()},[]);const l={user:t,loading:r,login:async(c,d)=>{const h=await Io.login(c,d);return n(h),h},logout:async()=>{await Io.logout(),n(null)},isAuthenticated:!!t};return a.jsx(a5.Provider,{value:l,children:e})}function sn(){const e=R.useContext(a5);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const l4=R.createContext();function c4({children:e}){const[t,n]=R.useState(()=>{const i=localStorage.getItem("ncad-theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});R.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("ncad-theme",t)},[t]);const s={theme:t,setTheme:n,toggleTheme:()=>{n(i=>i==="light"?"dark":"light")},isDark:t==="dark"};return a.jsx(l4.Provider,{value:s,children:e})}class d4 extends R.Component{constructor(n){super(n);kt(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"error-boundary",role:"alert",children:a.jsxs("div",{className:"error-boundary-content",children:[a.jsx("h2",{children:"Something went wrong"}),a.jsx("p",{children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),!1,a.jsxs("div",{className:"error-actions",children:[a.jsx("button",{onClick:this.handleReset,className:"btn btn-primary","data-testid":"error-reset-btn",children:"Try Again"}),a.jsx("button",{onClick:()=>window.location.href="/",className:"btn btn-secondary","data-testid":"error-home-btn",children:"Go to Home"})]})]})}):this.props.children}}function Jm(){const[e,t]=R.useState([]),[n,r]=R.useState(!1),[s,i]=R.useState(0);R.useEffect(()=>{o();const m=setInterval(o,3e4);return()=>clearInterval(m)},[]);const o=async()=>{var g;const m=xe.getCurrentUser();if(m)try{const p=xe.getData(),j=[];if(m.role==="student")p.bookings.filter(w=>w.user_id===m.id).forEach(w=>{w.status!=="pending"&&j.push({id:`booking-${w.id}`,type:w.status==="approved"?"success":"error",message:`Booking for ${w.equipment_name} has been ${w.status}`,timestamp:w.updated_at||w.created_at,read:!1})});else if(m.role==="department_admin"||m.role==="master_admin"){const N=p.bookings.filter(w=>w.status==="pending");if(N.length>0&&j.push({id:"pending-bookings",type:"info",message:`${N.length} booking${N.length>1?"s":""} awaiting approval`,timestamp:new Date().toISOString(),read:!1}),m.role==="master_admin"){const w=((g=p.access_requests)==null?void 0:g.filter(y=>y.status==="pending"))||[];w.length>0&&j.push({id:"access-requests",type:"info",message:`${w.length} access request${w.length>1?"s":""} pending review`,timestamp:new Date().toISOString(),read:!1})}}j.sort((N,w)=>new Date(w.timestamp)-new Date(N.timestamp)),t(j.slice(0,10)),i(j.filter(N=>!N.read).length)}catch(p){console.error("Failed to load notifications:",p)}},l=m=>{t(g=>g.map(p=>p.id===m?{...p,read:!0}:p)),i(g=>Math.max(0,g-1))},c=()=>{t(m=>m.map(g=>({...g,read:!0}))),i(0)},d=m=>{switch(m){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}},h=m=>{const g=new Date(m),j=new Date-g,N=Math.floor(j/6e4),w=Math.floor(j/36e5),y=Math.floor(j/864e5);return N<1?"Just now":N<60?`${N}m ago`:w<24?`${w}h ago`:y<7?`${y}d ago`:g.toLocaleDateString()};return a.jsxs("div",{className:"notification-center",children:[a.jsxs("button",{className:"notification-bell",onClick:()=>r(!n),"aria-label":`Notifications. ${s} unread`,"data-testid":"notification-bell",children:[a.jsx("span",{className:"bell-icon",children:""}),s>0&&a.jsx("span",{className:"notification-badge","data-testid":"notification-count",children:s>9?"9+":s})]}),n&&a.jsxs("div",{className:"notification-dropdown","data-testid":"notification-dropdown",children:[a.jsxs("div",{className:"notification-header",children:[a.jsx("h3",{children:"Notifications"}),s>0&&a.jsx("button",{onClick:c,className:"btn-text","data-testid":"mark-all-read-btn",children:"Mark all as read"})]}),a.jsx("div",{className:"notification-list",children:e.length===0?a.jsx("div",{className:"notification-empty",children:"No notifications"}):e.map(m=>a.jsxs("div",{className:`notification-item ${m.read?"read":"unread"}`,onClick:()=>!m.read&&l(m.id),"data-testid":"notification-item",children:[a.jsx("span",{className:`notification-icon notification-${m.type}`,children:d(m.type)}),a.jsxs("div",{className:"notification-content",children:[a.jsx("p",{className:"notification-message",children:m.message}),a.jsx("span",{className:"notification-time",children:h(m.timestamp)})]}),!m.read&&a.jsx("span",{className:"unread-dot"})]},m.id))})]})]})}function Xm(){const e=el(),t=Vi(),{user:n}=sn();if(!n)return null;const s=(()=>{switch(n.role){case"student":return[{path:"/student/equipment",icon:"",label:"Browse",testId:"nav-browse"},{path:"/student/bookings",icon:"",label:"Bookings",testId:"nav-bookings"},{path:"/student",icon:"",label:"Dashboard",testId:"nav-dashboard"}];case"staff":return[{path:"/staff",icon:"",label:"Dashboard",testId:"nav-dashboard"},{path:"/staff/rooms",icon:"",label:"Rooms",testId:"nav-rooms"},{path:"/staff/equipment",icon:"",label:"Equipment",testId:"nav-equipment"},{path:"/staff/bookings",icon:"",label:"Bookings",testId:"nav-bookings"}];case"department_admin":return[{path:"/admin",icon:"",label:"Dashboard",testId:"nav-dashboard"},{path:"/admin/bookings",icon:"",label:"Approvals",testId:"nav-approvals"},{path:"/admin/equipment",icon:"",label:"Equipment",testId:"nav-equipment"},{path:"/admin/staff",icon:"",label:"Staff",testId:"nav-staff"}];case"master_admin":return[{path:"/admin",icon:"",label:"Dashboard",testId:"nav-dashboard"},{path:"/admin/users",icon:"",label:"Users",testId:"nav-users"},{path:"/admin/analytics",icon:"",label:"Analytics",testId:"nav-analytics"},{path:"/admin/settings",icon:"",label:"Settings",testId:"nav-settings"}];default:return[]}})(),i=l=>!!(l===t.pathname||l!=="/"&&t.pathname.startsWith(l)),o=l=>{e(l)};return a.jsx("nav",{className:"mobile-bottom-nav","data-testid":"mobile-bottom-nav",children:s.map(l=>a.jsxs("button",{className:`nav-item ${i(l.path)?"active":""}`,onClick:()=>o(l.path),"data-testid":l.testId,"aria-label":l.label,"aria-current":i(l.path)?"page":void 0,children:[a.jsx("span",{className:"nav-icon",role:"img","aria-hidden":"true",children:l.icon}),a.jsx("span",{className:"nav-label",children:l.label})]},l.path))})}function xr(){const[e,t]=R.useState(null),[n,r]=R.useState(!0);return R.useEffect(()=>{(async()=>{try{const l=await Io.getCurrentUser();t(l)}catch(l){console.error("Failed to load user:",l)}finally{r(!1)}})()},[]),{user:e,loading:n,login:async(o,l)=>{const c=await Io.login(o,l);return t(c),c},logout:async()=>{await Io.logout(),t(null)},isAuthenticated:!!e}}const Co={getUserKits(e){const t=localStorage.getItem(`user_kits_${e}`);return t?JSON.parse(t):[]},saveUserKit(e,t){const n=this.getUserKits(e),r={id:Date.now().toString(),name:t.name,equipment_ids:t.equipment_ids,created_at:new Date().toISOString(),type:"user"};return n.push(r),localStorage.setItem(`user_kits_${e}`,JSON.stringify(n)),r},deleteUserKit(e,t){const r=this.getUserKits(e).filter(s=>s.id!==t);localStorage.setItem(`user_kits_${e}`,JSON.stringify(r))},updateUserKit(e,t,n){const s=this.getUserKits(e).map(i=>i.id===t?{...i,...n,updated_at:new Date().toISOString()}:i);localStorage.setItem(`user_kits_${e}`,JSON.stringify(s))},getAdminKits(){const e=localStorage.getItem("admin_kits");return e?JSON.parse(e):[]},saveAdminKit(e){const t=this.getAdminKits(),n={id:Date.now().toString(),name:e.name,description:e.description,equipment_ids:e.equipment_ids,department:e.department||"all",created_at:new Date().toISOString(),type:"admin"};return t.push(n),localStorage.setItem("admin_kits",JSON.stringify(t)),n},deleteAdminKit(e){const n=this.getAdminKits().filter(r=>r.id!==e);localStorage.setItem("admin_kits",JSON.stringify(n))},updateAdminKit(e,t){const r=this.getAdminKits().map(s=>s.id===e?{...s,...t,updated_at:new Date().toISOString()}:s);localStorage.setItem("admin_kits",JSON.stringify(r))},getAllKitsForUser(e,t){const n=this.getUserKits(e),r=this.getAdminKits().filter(s=>s.department==="all"||s.department===t);return[...n,...r]}};function s5({onClose:e,onSuccess:t}){const{user:n}=sn(),[r,s]=R.useState(1),[i,o]=R.useState(""),[l,c]=R.useState(""),[d,h]=R.useState([]),[m,g]=R.useState([]),[p,j]=R.useState(""),[N,w]=R.useState(!1),[y,_]=R.useState(""),[S,C]=R.useState(!1),[q,W]=R.useState("");R.useEffect(()=>{r===2&&i&&l&&E()},[r,i,l]);const E=async()=>{w(!0);try{const P=(await xe.query("equipment",{})).filter(T=>T.status==="available");h(P)}catch(O){_("Failed to load available equipment"),console.error(O)}finally{w(!1)}},x=O=>{if(O.preventDefault(),_(""),!i||!l){_("Please select both start and end dates");return}const P=new Date(i),T=new Date(l),X=new Date;if(X.setHours(0,0,0,0),P<X){_("Start date cannot be in the past");return}if(T<P){_("End date must be after start date");return}s(2)},A=O=>{g(P=>P.find(X=>X.id===O.id)?P.filter(X=>X.id!==O.id):[...P,O])},U=async O=>{if(O.preventDefault(),_(""),m.length===0){_("Please select at least one item");return}if(!p.trim()){_("Please provide a purpose for this booking");return}w(!0);try{S&&q.trim()&&Co.saveUserKit(n.id,{name:q,equipment_ids:m.map(P=>P.id)});for(const P of m)await xe.insert("bookings",{user_id:n.id,equipment_id:P.id,start_date:i,end_date:l,status:"pending",purpose:p,student_name:n.full_name,student_email:n.email,equipment_name:P.product_name,category:P.category,created_at:new Date().toISOString()});t()}catch(P){_("Failed to create booking: "+P.message),w(!1)}},L=[...new Set(d.map(O=>O.category))];return a.jsx("div",{className:"modal-overlay",onClick:e,children:a.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),style:{maxWidth:"800px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Book Multiple Items"}),a.jsx("button",{onClick:e,className:"modal-close","aria-label":"Close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2rem",position:"relative"},children:[a.jsxs("div",{style:{flex:1,textAlign:"center",zIndex:1},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:r>=1?"var(--primary-color)":"var(--border-color)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",fontWeight:"bold"},children:"1"}),a.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:r>=1?"var(--primary-color)":"var(--text-secondary)"},children:"Select Dates"})]}),a.jsxs("div",{style:{flex:1,textAlign:"center",zIndex:1},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:r>=2?"var(--primary-color)":"var(--border-color)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",fontWeight:"bold"},children:"2"}),a.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:r>=2?"var(--primary-color)":"var(--text-secondary)"},children:"Select Equipment"})]}),a.jsxs("div",{style:{flex:1,textAlign:"center",zIndex:1},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:r>=3?"var(--primary-color)":"var(--border-color)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",fontWeight:"bold"},children:"3"}),a.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:r>=3?"var(--primary-color)":"var(--text-secondary)"},children:"Confirm"})]}),a.jsx("div",{style:{position:"absolute",top:"20px",left:"20%",right:"20%",height:"2px",background:"var(--border-color)",zIndex:0}})]}),y&&a.jsx("div",{className:"error-message",style:{marginBottom:"1rem"},children:y}),r===1&&a.jsxs("form",{onSubmit:x,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Start Date *"}),a.jsx("input",{type:"date",value:i,onChange:O=>o(O.target.value),className:"form-input",required:!0,"data-testid":"start-date-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"End Date *"}),a.jsx("input",{type:"date",value:l,onChange:O=>c(O.target.value),className:"form-input",required:!0,"data-testid":"end-date-input"})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:e,className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary","data-testid":"next-to-equipment-btn",children:"Next: Select Equipment"})]})]}),r===2&&a.jsxs("div",{children:[a.jsxs("div",{style:{background:"var(--surface)",padding:"1rem",borderRadius:"var(--border-radius)",marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{margin:"0 0 0.5rem 0"},children:"Selected Dates"}),a.jsxs("p",{style:{margin:0,color:"var(--text-secondary)"},children:[new Date(i).toLocaleDateString()," - ",new Date(l).toLocaleDateString()]}),m.length>0&&a.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontWeight:"bold",color:"var(--primary-color)"},children:[m.length," item",m.length!==1?"s":""," selected"]})]}),N?a.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Loading available equipment..."}):a.jsxs(a.Fragment,{children:[L.map(O=>{const P=d.filter(T=>T.category===O);return P.length===0?null:a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text-primary)"},children:O}),a.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:P.map(T=>{const X=m.find(te=>te.id===T.id);return a.jsxs("div",{onClick:()=>A(T),style:{padding:"1rem",border:`2px solid ${X?"var(--primary-color)":"var(--border-color)"}`,borderRadius:"var(--border-radius)",cursor:"pointer",background:X?"rgba(102, 126, 234, 0.1)":"white",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"1rem"},"data-testid":"equipment-selection-item",children:[a.jsx("input",{type:"checkbox",checked:X,onChange:()=>{},style:{width:"20px",height:"20px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:T.product_name}),a.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:T.description})]}),a.jsx("div",{className:"equipment-category-label",style:{fontSize:"0.875rem"},children:T.category})]},T.id)})})]},O)}),d.length===0&&a.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"No equipment available for the selected dates."})]}),a.jsxs("div",{className:"modal-actions",style:{marginTop:"1.5rem"},children:[a.jsx("button",{onClick:()=>s(1),className:"btn btn-secondary",children:"Back"}),a.jsx("button",{onClick:()=>s(3),className:"btn btn-primary",disabled:m.length===0,"data-testid":"next-to-confirm-btn",children:"Next: Confirm Booking"})]})]}),r===3&&a.jsxs("form",{onSubmit:U,children:[a.jsxs("div",{style:{background:"var(--surface)",padding:"1.5rem",borderRadius:"var(--border-radius)",marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Booking Summary"}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Dates:"}),a.jsxs("div",{style:{color:"var(--text-secondary)"},children:[new Date(i).toLocaleDateString()," - ",new Date(l).toLocaleDateString()]})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Equipment (",m.length," item",m.length!==1?"s":"","):"]}),a.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"var(--text-secondary)"},children:m.map(O=>a.jsxs("li",{children:[O.product_name," (",O.category,")"]},O.id))})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{children:["Purpose / Justification *",a.jsx("span",{className:"required",children:" Required for booking approval"})]}),a.jsx("textarea",{value:p,onChange:O=>j(O.target.value),placeholder:"Please describe how you plan to use this equipment...",rows:4,required:!0,"data-testid":"booking-purpose"})]}),a.jsxs("div",{style:{background:"rgba(102, 126, 234, 0.1)",padding:"1rem",borderRadius:"var(--border-radius)",border:"1px solid var(--primary-color)",marginBottom:"1rem"},children:[a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",marginBottom:S?"0.75rem":"0"},children:[a.jsx("input",{type:"checkbox",checked:S,onChange:O=>C(O.target.checked),style:{width:"18px",height:"18px"},"data-testid":"save-as-kit-checkbox"}),a.jsx("span",{style:{fontWeight:"600"},children:"Save this selection as a reusable kit"})]}),S&&a.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[a.jsx("label",{style:{fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Kit Name *"}),a.jsx("input",{type:"text",value:q,onChange:O=>W(O.target.value),placeholder:"e.g., 'Documentary Filming Kit' or 'Studio Photography Setup'",className:"form-input",required:S,"data-testid":"kit-name-input"}),a.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",margin:"0.5rem 0 0 0"},children:"This kit will appear in your dashboard for quick rebooking."})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:()=>s(2),className:"btn btn-secondary",disabled:N,children:"Back"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:N,"data-testid":"submit-booking-btn",children:N?"Submitting...":"Submit Booking Request"})]})]})]})]})})}function Hn(){const[e,t]=R.useState([]),n=R.useCallback((s,i="success")=>{const o=Date.now();t(l=>[...l,{id:o,message:s,type:i}])},[]),r=R.useCallback(s=>{t(i=>i.filter(o=>o.id!==s))},[]);return{toasts:e,showToast:n,removeToast:r}}function Vn({message:e,type:t="success",onClose:n,duration:r=3e3}){return R.useEffect(()=>{const s=setTimeout(()=>{n()},r);return()=>clearTimeout(s)},[r,n]),a.jsxs("div",{className:`toast toast-${t}`,role:"alert","data-testid":"toast-notification",children:[a.jsxs("div",{className:"toast-content",children:[a.jsxs("span",{className:"toast-icon",children:[t==="success"&&"",t==="error"&&"",t==="info"&&""]}),a.jsx("span",{className:"toast-message",children:e})]}),a.jsx("button",{className:"toast-close",onClick:n,"aria-label":"Close notification",children:""})]})}function u4(){const{user:e}=xr(),t=el(),[n,r]=R.useState([]),[s,i]=R.useState([]),[o,l]=R.useState(!1),[c,d]=R.useState(!1),{toasts:h,showToast:m,removeToast:g}=Hn();R.useEffect(()=>{p()},[e]);const p=async()=>{if(e)try{const _=await xe.query("bookings",{user_id:e.id});r(_);const S=Co.getAllKitsForUser(e.id,e.department);i(S)}catch(_){console.error("Failed to load dashboard data:",_)}},j=n.filter(_=>_.status==="approved").length,N=n.filter(_=>_.status==="pending").length,w=n.length,y=()=>{m("Booking created successfully!","success"),d(!1),p()};return a.jsxs("div",{className:"student-dashboard",children:[a.jsxs("div",{className:"student-welcome",children:[a.jsxs("h2",{children:["Welcome, ",e==null?void 0:e.first_name,"! "]}),a.jsx("p",{children:"Your equipment booking dashboard"})]}),a.jsxs("div",{className:"student-dashboard-grid",children:[a.jsxs("div",{className:"student-card student-stat-card",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-2)"},children:[a.jsxs("h3",{children:[a.jsx("span",{className:"student-card-icon",children:""})," Your Stats"]}),a.jsx("button",{onClick:()=>l(!o),className:"btn btn-secondary btn-sm",style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem"},children:o?"Simple":"Detailed"})]}),o?a.jsxs("div",{className:"student-stat-grid",children:[a.jsxs("div",{className:"student-stat-item",children:[a.jsx("strong",{children:w}),a.jsx("span",{children:"Total"})]}),a.jsxs("div",{className:"student-stat-item",children:[a.jsx("strong",{children:j}),a.jsx("span",{children:"Active"})]}),a.jsxs("div",{className:"student-stat-item",children:[a.jsx("strong",{children:N}),a.jsx("span",{children:"Pending"})]}),a.jsxs("div",{className:"student-stat-item",children:[a.jsx("strong",{children:n.filter(_=>_.status==="completed").length}),a.jsx("span",{children:"Completed"})]})]}):a.jsxs("div",{children:[a.jsx("div",{className:"student-stat-number",children:j}),a.jsx("div",{className:"student-stat-label",children:"Active Bookings"}),N>0&&a.jsx("div",{style:{marginTop:"var(--space-2)",padding:"var(--space-2)",background:"var(--theme-warning-bg)",borderRadius:"var(--radius-sm)"},children:a.jsxs("span",{style:{fontSize:"var(--text-sm)",color:"var(--theme-warning-text)",fontWeight:"var(--font-semibold)"},children:[" ",N," pending approval"]})})]})]}),a.jsxs("div",{className:"student-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"student-card-icon",children:""})," Recent Activity"]}),n.length===0?a.jsxs("div",{className:"student-empty-state",children:[a.jsx("div",{className:"student-empty-state-icon",children:""}),a.jsx("p",{children:"No recent activity"})]}):a.jsx("div",{className:"student-activity-list",children:n.slice(0,3).map(_=>a.jsxs("div",{className:"student-activity-item",children:[a.jsx("div",{className:"student-activity-title",children:_.equipment_name}),a.jsxs("div",{className:"student-activity-meta",children:[a.jsx("span",{children:new Date(_.start_date).toLocaleDateString()}),a.jsx("span",{className:`student-status-badge ${_.status}`,children:_.status})]})]},_.id))})]}),a.jsxs("div",{className:"student-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"student-card-icon",children:""})," Saved Kits (",s.length,")"]}),s.length===0?a.jsxs("div",{className:"student-empty-state",children:[a.jsx("div",{className:"student-empty-state-icon",children:""}),a.jsx("p",{children:"No saved kits yet. Create custom kits when booking equipment!"})]}):a.jsx("div",{className:"student-kit-list",children:s.map(_=>{var S;return a.jsxs("div",{className:`student-kit-item ${_.type==="admin"?"admin-kit":""}`,onClick:()=>{m(`Booking kit: ${_.name}`,"info"),d(!0)},role:"button",tabIndex:0,onKeyPress:C=>{(C.key==="Enter"||C.key===" ")&&(m(`Booking kit: ${_.name}`,"info"),d(!0))},children:[a.jsxs("div",{className:"student-kit-name",children:[_.type==="admin"?"":""," ",_.name]}),a.jsxs("div",{className:"student-kit-meta",children:[((S=_.equipment_ids)==null?void 0:S.length)||0," items",_.type==="admin"&&"  Admin Kit"]})]},_.id)})})]}),a.jsxs("div",{className:"student-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"student-card-icon",children:""})," Quick Actions"]}),a.jsxs("div",{className:"student-quick-actions",children:[a.jsx("button",{onClick:()=>d(!0),className:"student-action-btn","data-testid":"quick-book-multiple",children:" Book Multiple Items"}),a.jsx("button",{onClick:()=>t("/student/equipment"),className:"student-action-btn secondary",children:" Browse Equipment"})]})]})]}),c&&a.jsx(s5,{onClose:()=>d(!1),onSuccess:y}),h.map(_=>a.jsx(Vn,{message:_.message,type:_.type,onClose:()=>g(_.id)},_.id))]})}const Bp={async createBooking(e){const{equipment_id:t,start_date:n,end_date:r,user_id:s,purpose:i}=e;if((await this.checkConflicts(t,n,r)).length>0)throw new Error("Equipment is already booked for selected dates");if((await xe.findOne("equipment",{id:t})).requires_justification&&(!i||i.trim().length<10))throw new Error("This equipment requires a detailed justification (minimum 10 characters)");const c={id:"bk"+Date.now(),user_id:s,equipment_id:t,start_date:n,end_date:r,purpose:i,status:"pending",created_at:new Date().toISOString()};return await xe.insert("bookings",c),c},async getUserBookings(e){return await xe.query("bookings",{user_id:e})},async getBookingById(e){return await xe.findOne("bookings",{id:e})},async cancelBooking(e){await xe.update("bookings",{id:e},{status:"cancelled",cancelled_at:new Date().toISOString()})},async checkConflicts(e,t,n){return(await xe.query("bookings",{equipment_id:e})).filter(s=>{if(["cancelled","denied","completed"].includes(s.status))return!1;const i=new Date(s.start_date),o=new Date(s.end_date),l=new Date(t),c=new Date(n);return l<=o&&c>=i})},async getBookingsWithEquipment(e){const t=await this.getUserBookings(e);return await Promise.all(t.map(async r=>{const s=await xe.findOne("equipment",{id:r.equipment_id});return{...r,equipment:s}}))}};class Ec{constructor(t=0,n="Network Error"){this.status=t,this.text=n}}const h4=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},zn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:h4()},Qm=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},f4=(e,t="https://api.emailjs.com")=>{if(!e)return;const n=Qm(e);zn.publicKey=n.publicKey,zn.blockHeadless=n.blockHeadless,zn.storageProvider=n.storageProvider,zn.blockList=n.blockList,zn.limitRate=n.limitRate,zn.origin=n.origin||t},i5=async(e,t,n={})=>{const r=await fetch(zn.origin+e,{method:"POST",headers:n,body:t}),s=await r.text(),i=new Ec(r.status,s);if(r.ok)return i;throw i},o5=(e,t,n)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},p4=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},l5=e=>e.webdriver||!e.languages||e.languages.length===0,c5=()=>new Ec(451,"Unavailable For Headless Browser"),m4=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},g4=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},v4=(e,t)=>e instanceof FormData?e.get(t):e[t],d5=(e,t)=>{if(g4(e))return!1;m4(e.list,e.watchVariable);const n=v4(t,e.watchVariable);return typeof n!="string"?!1:e.list.includes(n)},u5=()=>new Ec(403,"Forbidden"),y4=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},x4=async(e,t,n)=>{const r=Number(await n.get(e)||0);return t-Date.now()+r},h5=async(e,t,n)=>{if(!t.throttle||!n)return!1;y4(t.throttle,t.id);const r=t.id||e;return await x4(r,t.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},f5=()=>new Ec(429,"Too Many Requests"),b4=async(e,t,n,r)=>{const s=Qm(r),i=s.publicKey||zn.publicKey,o=s.blockHeadless||zn.blockHeadless,l=s.storageProvider||zn.storageProvider,c={...zn.blockList,...s.blockList},d={...zn.limitRate,...s.limitRate};return o&&l5(navigator)?Promise.reject(c5()):(o5(i,e,t),p4(n),n&&d5(c,n)?Promise.reject(u5()):await h5(location.pathname,d,l)?Promise.reject(f5()):i5("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:e,template_id:t,template_params:n}),{"Content-type":"application/json"}))},_4=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},w4=e=>typeof e=="string"?document.querySelector(e):e,j4=async(e,t,n,r)=>{const s=Qm(r),i=s.publicKey||zn.publicKey,o=s.blockHeadless||zn.blockHeadless,l=zn.storageProvider||s.storageProvider,c={...zn.blockList,...s.blockList},d={...zn.limitRate,...s.limitRate};if(o&&l5(navigator))return Promise.reject(c5());const h=w4(n);o5(i,e,t),_4(h);const m=new FormData(h);return d5(c,m)?Promise.reject(u5()):await h5(location.pathname,d,l)?Promise.reject(f5()):(m.append("lib_version","4.4.1"),m.append("service_id",e),m.append("template_id",t),m.append("user_id",i),i5("/api/v1.0/email/send-form",m))},ki={init:f4,send:b4,sendForm:j4,EmailJSResponseStatus:Ec},fn={serviceId:"YOUR_SERVICE_ID",publicKey:"YOUR_PUBLIC_KEY",templates:{bookingConfirmation:"template_booking_confirm",bookingApproved:"template_booking_approved",bookingDenied:"template_booking_denied",bookingOverdue:"template_booking_overdue",bookingReminder:"template_booking_reminder"}};class N4{constructor(){fn.publicKey!=="YOUR_PUBLIC_KEY"&&ki.init(fn.publicKey)}isConfigured(){return fn.serviceId!=="YOUR_SERVICE_ID"&&fn.publicKey!=="YOUR_PUBLIC_KEY"}async sendBookingConfirmation(t,n,r){if(!this.isConfigured())return console.warn("EmailJS not configured. Skipping email notification."),{success:!1,error:"EmailJS not configured"};try{const s=r.map(l=>l.product_name).join(", "),i={to_email:n.email,to_name:n.full_name,booking_id:t.id,equipment_list:s,start_date:new Date(t.start_date).toLocaleDateString(),end_date:new Date(t.end_date).toLocaleDateString(),purpose:t.purpose||"N/A",status:t.status},o=await ki.send(fn.serviceId,fn.templates.bookingConfirmation,i);return console.log("Booking confirmation email sent:",o),{success:!0,response:o}}catch(s){return console.error("Failed to send booking confirmation email:",s),{success:!1,error:s.message}}}async sendBookingApproved(t,n,r,s){if(!this.isConfigured())return console.warn("EmailJS not configured. Skipping email notification."),{success:!1,error:"EmailJS not configured"};try{const i=r.map(c=>c.product_name).join(", "),o={to_email:n.email,to_name:n.full_name,booking_id:t.id,equipment_list:i,start_date:new Date(t.start_date).toLocaleDateString(),end_date:new Date(t.end_date).toLocaleDateString(),approved_by:s.full_name,approved_at:new Date().toLocaleString(),return_instructions:"Please return equipment on time to avoid late fees."},l=await ki.send(fn.serviceId,fn.templates.bookingApproved,o);return console.log("Booking approval email sent:",l),{success:!0,response:l}}catch(i){return console.error("Failed to send booking approval email:",i),{success:!1,error:i.message}}}async sendBookingDenied(t,n,r,s,i){if(!this.isConfigured())return console.warn("EmailJS not configured. Skipping email notification."),{success:!1,error:"EmailJS not configured"};try{const o=r.map(d=>d.product_name).join(", "),l={to_email:n.email,to_name:n.full_name,booking_id:t.id,equipment_list:o,start_date:new Date(t.start_date).toLocaleDateString(),end_date:new Date(t.end_date).toLocaleDateString(),denied_by:s.full_name,denied_at:new Date().toLocaleString(),denial_reason:i||"No reason provided",support_email:"equipment@ncad.ie"},c=await ki.send(fn.serviceId,fn.templates.bookingDenied,l);return console.log("Booking denial email sent:",c),{success:!0,response:c}}catch(o){return console.error("Failed to send booking denial email:",o),{success:!1,error:o.message}}}async sendOverdueReminder(t,n,r,s){if(!this.isConfigured())return console.warn("EmailJS not configured. Skipping email notification."),{success:!1,error:"EmailJS not configured"};try{const i=r.map(c=>c.product_name).join(", "),o={to_email:n.email,to_name:n.full_name,booking_id:t.id,equipment_list:i,end_date:new Date(t.end_date).toLocaleDateString(),days_overdue:s,late_fee_warning:s>7?"Late fees may apply.":"",return_location:"Equipment Store, Building A",support_email:"equipment@ncad.ie"},l=await ki.send(fn.serviceId,fn.templates.bookingOverdue,o);return console.log("Overdue reminder email sent:",l),{success:!0,response:l}}catch(i){return console.error("Failed to send overdue reminder email:",i),{success:!1,error:i.message}}}async sendBookingReminder(t,n,r,s){if(!this.isConfigured())return console.warn("EmailJS not configured. Skipping email notification."),{success:!1,error:"EmailJS not configured"};try{const i=r.map(c=>c.product_name).join(", "),o={to_email:n.email,to_name:n.full_name,booking_id:t.id,equipment_list:i,start_date:new Date(t.start_date).toLocaleDateString(),end_date:new Date(t.end_date).toLocaleDateString(),days_until_pickup:s,pickup_location:"Equipment Store, Building A",pickup_hours:"Mon-Fri: 9am-5pm"},l=await ki.send(fn.serviceId,fn.templates.bookingReminder,o);return console.log("Booking reminder email sent:",l),{success:!0,response:l}}catch(i){return console.error("Failed to send booking reminder email:",i),{success:!1,error:i.message}}}updateConfig(t){t.serviceId&&(fn.serviceId=t.serviceId),t.publicKey&&(fn.publicKey=t.publicKey,ki.init(t.publicKey)),t.templates&&(fn.templates={...fn.templates,...t.templates})}getConfig(){return{serviceId:fn.serviceId,publicKey:fn.publicKey,templates:{...fn.templates},isConfigured:this.isConfigured()}}}const Un=new N4;function S4({equipmentId:e,selectedStartDate:t,selectedEndDate:n}){const[r,s]=R.useState([]),[i,o]=R.useState(new Date);R.useEffect(()=>{e&&l()},[e,i]);const l=async()=>{try{const q=(await xe.query("bookings",{equipment_id:e})).filter(W=>W.status==="approved");s(q)}catch(C){console.error("Failed to load bookings:",C)}},c=C=>{const q=C.getFullYear(),W=C.getMonth(),E=new Date(q,W,1),A=new Date(q,W+1,0).getDate(),U=E.getDay();return{daysInMonth:A,startDayOfWeek:U,year:q,month:W}},d=C=>{const q=C.toISOString().split("T")[0];return r.some(W=>{const E=new Date(W.start_date),x=new Date(W.end_date),A=new Date(q);return A>=E&&A<=x})},h=C=>{if(!t||!n)return!1;const q=C.toISOString().split("T")[0],W=new Date(t),E=new Date(n),x=new Date(q);return x>=W&&x<=E},m=C=>{const q=new Date;return q.setHours(0,0,0,0),C<q},{daysInMonth:g,startDayOfWeek:p,year:j,month:N}=c(i),w=()=>{o(new Date(j,N-1))},y=()=>{o(new Date(j,N+1))},_=["January","February","March","April","May","June","July","August","September","October","November","December"],S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return a.jsxs("div",{className:"booking-conflict-calendar","data-testid":"conflict-calendar",children:[a.jsxs("div",{className:"calendar-header",children:[a.jsx("button",{onClick:w,className:"btn btn-secondary btn-sm","aria-label":"Previous month","data-testid":"prev-month-btn",children:"Previous"}),a.jsxs("h3",{children:[_[N]," ",j]}),a.jsx("button",{onClick:y,className:"btn btn-secondary btn-sm","aria-label":"Next month","data-testid":"next-month-btn",children:"Next"})]}),a.jsxs("div",{className:"calendar-legend",children:[a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-color available"}),a.jsx("span",{children:"Available"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-color booked"}),a.jsx("span",{children:"Booked"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-color selected"}),a.jsx("span",{children:"Your Selection"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-color past"}),a.jsx("span",{children:"Past"})]})]}),a.jsxs("div",{className:"calendar-grid",children:[a.jsx("div",{className:"calendar-days-header",children:S.map(C=>a.jsx("div",{className:"calendar-day-name",children:C},C))}),a.jsxs("div",{className:"calendar-days",children:[Array.from({length:p}).map((C,q)=>a.jsx("div",{className:"calendar-day empty"},`empty-${q}`)),Array.from({length:g}).map((C,q)=>{const W=q+1,E=new Date(j,N,W),x=d(E),A=h(E),U=m(E),L=["calendar-day",x&&"booked",A&&"selected",U&&"past"].filter(Boolean).join(" ");return a.jsx("div",{className:L,"data-testid":`calendar-day-${W}`,"aria-label":`${_[N]} ${W}, ${j}${x?" - Booked":""}${A?" - Selected":""}`,children:W},W)})]})]}),a.jsx("div",{className:"calendar-info",children:a.jsx("p",{children:"This calendar shows when this equipment is already booked. Select dates that are available."})})]})}function k4({selectedStartDate:e,selectedEndDate:t,onStartDateChange:n,onEndDateChange:r,minDate:s=new Date,unavailableDates:i=[],mode:o="range"}){const[l,c]=R.useState(new Date),[d,h]=R.useState(!0),[m,g]=R.useState(!1),[p,j]=R.useState(null),N=R.useRef(null),w=R.useRef(0),y=de=>{const D=de.getFullYear(),H=de.getMonth(),J=new Date(D,H,1),ne=new Date(D,H+1,0).getDate(),le=J.getDay();return{daysInMonth:ne,startingDayOfWeek:le,year:D,month:H}},{daysInMonth:_,startingDayOfWeek:S,year:C,month:q}=y(l),W=()=>{c(new Date(l.getFullYear(),l.getMonth()-1,1))},E=()=>{c(new Date(l.getFullYear(),l.getMonth()+1,1))},x=de=>{w.current=de.touches[0].clientX},A=de=>{const D=de.changedTouches[0].clientX,H=w.current-D;H>50?E():H<-50&&W()},U=de=>i.some(D=>D.toDateString()===de.toDateString()),L=de=>{const D=new Date(s);return D.setHours(0,0,0,0),de.setHours(0,0,0,0),de<D},O=de=>{if(!e)return!1;const D=de.toDateString(),H=e.toDateString();if(o==="single"||!t)return D===H;const J=t.toDateString();return D===H||D===J},P=de=>!e||!t||o==="single"?!1:de>e&&de<t,T=de=>{const D=new Date(C,q,de);if(!(L(D)||U(D))){if(o==="single"){n(D);return}d||!e?(n(D),r(null),h(!1)):(D<e?(r(e),n(D)):r(D),h(!0))}},X=de=>{if(o!=="range")return;const D=new Date(C,q,de);L(D)||U(D)||(g(!0),j(D),n(D),r(null))},te=de=>{if(!m||o!=="range")return;const D=new Date(C,q,de);L(D)||U(D)||(D>p?r(D):(n(D),r(p)))},oe=()=>{g(!1),j(null),h(!0)};R.useEffect(()=>(document.addEventListener("mouseup",oe),()=>document.removeEventListener("mouseup",oe)),[]);const Z=de=>{const D=new Date(C,q,de),H=["calendar-day"];return L(D)&&H.push("disabled"),U(D)&&H.push("unavailable"),O(D)&&H.push("selected"),P(D)&&H.push("in-range"),D.toDateString()===new Date().toDateString()&&H.push("today"),H.join(" ")},se=()=>{const de=[];for(let D=0;D<S;D++)de.push(a.jsx("div",{className:"calendar-day empty"},`empty-${D}`));for(let D=1;D<=_;D++)de.push(a.jsx("button",{type:"button",className:Z(D),onClick:()=>T(D),onMouseDown:()=>X(D),onMouseEnter:()=>te(D),disabled:L(new Date(C,q,D))||U(new Date(C,q,D)),"data-testid":`calendar-day-${D}`,"aria-label":`${q+1}/${D}/${C}`,children:D},D));return de},ee=["January","February","March","April","May","June","July","August","September","October","November","December"];return a.jsxs("div",{className:"mobile-calendar",ref:N,onTouchStart:x,onTouchEnd:A,"data-testid":"mobile-calendar",children:[a.jsxs("div",{className:"calendar-header",children:[a.jsx("button",{type:"button",className:"calendar-nav-btn",onClick:W,"aria-label":"Previous month","data-testid":"prev-month-btn",children:""}),a.jsxs("h3",{className:"calendar-month-year",children:[ee[q]," ",C]}),a.jsx("button",{type:"button",className:"calendar-nav-btn",onClick:E,"aria-label":"Next month","data-testid":"next-month-btn",children:""})]}),a.jsxs("div",{className:"calendar-weekdays",children:[a.jsx("div",{className:"calendar-weekday",children:"Sun"}),a.jsx("div",{className:"calendar-weekday",children:"Mon"}),a.jsx("div",{className:"calendar-weekday",children:"Tue"}),a.jsx("div",{className:"calendar-weekday",children:"Wed"}),a.jsx("div",{className:"calendar-weekday",children:"Thu"}),a.jsx("div",{className:"calendar-weekday",children:"Fri"}),a.jsx("div",{className:"calendar-weekday",children:"Sat"})]}),a.jsx("div",{className:"calendar-grid","data-testid":"calendar-grid",children:se()}),o==="range"&&a.jsxs("div",{className:"calendar-hint",children:[d&&!e&&a.jsx("span",{children:"Tap to select start date"}),!d&&e&&!t&&a.jsx("span",{children:"Tap to select end date"}),e&&t&&a.jsx("span",{children:"Drag to select range or tap to change"})]})]})}function p5({equipment:e,onClose:t,onSuccess:n}){const{user:r}=xr(),[s,i]=R.useState(""),[o,l]=R.useState(""),[c,d]=R.useState(null),[h,m]=R.useState(null),[g,p]=R.useState(""),[j,N]=R.useState(""),[w,y]=R.useState({}),[_,S]=R.useState(!1),[C,q]=R.useState(window.innerWidth<=768),W=()=>{var P;return r?r.role==="student"||r.role==="department_admin"||r.role==="master_admin"?!0:r.role==="staff"?((P=r.view_permissions)==null?void 0:P.can_create_bookings)!==!1:!0:!1},E=()=>{const P={};return s||(P.startDate="Start date is required"),o?s&&o<s&&(P.endDate="End date must be after start date"):P.endDate="End date is required",e.requires_justification&&(!g||g.trim().length<10)&&(P.purpose="Purpose must be at least 10 characters"),P},x=async P=>{P.preventDefault(),N(""),y({});const T=E();if(Object.keys(T).length>0){y(T);return}S(!0);try{const X=await Bp.createBooking({equipment_id:e.id,start_date:s,end_date:o,purpose:g,user_id:r.id});try{const te=[e],oe=await Un.sendBookingConfirmation(X,r,te);!oe.success&&Un.isConfigured()&&console.warn("Email notification failed, but booking was created:",oe.error)}catch(te){console.error("Failed to send booking confirmation email:",te)}n(X),t()}catch(X){N(X.message)}finally{S(!1)}},A=new Date().toISOString().split("T")[0],U=P=>{d(P),i(O(P))},L=P=>{m(P),P&&l(O(P))},O=P=>{if(!P)return"";const T=P.getFullYear(),X=String(P.getMonth()+1).padStart(2,"0"),te=String(P.getDate()).padStart(2,"0");return`${T}-${X}-${te}`};return W()?a.jsx("div",{className:"modal-overlay",onClick:t,"data-testid":"modal-overlay",children:a.jsxs("div",{className:"modal-content modal",onClick:P=>P.stopPropagation(),"data-testid":"booking-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Book Equipment"}),a.jsx("button",{className:"modal-close",onClick:t,"aria-label":"Close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"equipment-summary",children:[a.jsx("h3",{children:e.product_name}),a.jsxs("p",{children:[e.category," - ",e.department]})]}),e.isCrossDepartment&&a.jsxs("div",{className:"cross-department-notice",style:{marginTop:"1rem",marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#e3f2fd",border:"2px solid #2196f3",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.75rem"},children:[a.jsx("span",{style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:""}),a.jsx("h4",{style:{margin:0,color:"#1976d2",fontSize:"1.1rem"},children:"Cross-Department Equipment"})]}),a.jsxs("p",{style:{margin:"0.5rem 0",color:"#333",fontSize:"0.95rem"},children:[a.jsx("strong",{children:"From:"})," ",e.lendingDepartment]}),a.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #bbdefb"},children:[a.jsx("h5",{style:{margin:"0 0 0.5rem 0",color:"#1976d2",fontSize:"0.9rem"},children:" Collection Instructions"}),a.jsx("p",{style:{margin:0,fontSize:"0.875rem",lineHeight:"1.5",color:"#333",whiteSpace:"pre-wrap"},children:e.collectionInstructions})]}),e.crossDeptTerms&&a.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",backgroundColor:"#fff8e1",borderRadius:"4px",border:"1px solid #ffe082"},children:[a.jsx("h5",{style:{margin:"0 0 0.5rem 0",color:"#f57c00",fontSize:"0.9rem"},children:" Terms & Conditions"}),a.jsx("p",{style:{margin:0,fontSize:"0.875rem",lineHeight:"1.5",color:"#333",whiteSpace:"pre-wrap"},children:e.crossDeptTerms})]})]}),a.jsxs("form",{onSubmit:x,"data-testid":"booking-form",noValidate:!0,children:[C?a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Select Dates"}),a.jsx(k4,{selectedStartDate:c,selectedEndDate:h,onStartDateChange:U,onEndDateChange:L,minDate:new Date,mode:"range"}),(w.startDate||w.endDate)&&a.jsx("div",{className:"field-error",role:"alert",children:w.startDate||w.endDate})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"start-date",children:"Start Date"}),a.jsx("input",{id:"start-date",name:"startDate",type:"date",value:s,onChange:P=>i(P.target.value),min:A,required:!0,"data-testid":"start-date-input",className:w.startDate?"error":""}),w.startDate&&a.jsx("div",{className:"field-error",role:"alert",children:w.startDate})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"end-date",children:"End Date"}),a.jsx("input",{id:"end-date",name:"endDate",type:"date",value:o,onChange:P=>l(P.target.value),min:s||A,required:!0,"data-testid":"end-date-input",className:w.endDate?"error":""}),w.endDate&&a.jsx("div",{className:"field-error",role:"alert",children:w.endDate})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"purpose",children:["Purpose/Justification",e.requires_justification&&a.jsx("span",{className:"required",children:" *Required (min 10 chars)"})]}),a.jsx("textarea",{id:"purpose",name:"purpose",value:g,onChange:P=>p(P.target.value),placeholder:"Describe how you will use this equipment...",rows:"4",required:e.requires_justification,"data-testid":"purpose-input",className:w.purpose?"error":""}),w.purpose&&a.jsx("div",{className:"field-error",role:"alert",children:w.purpose})]}),s&&o&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Booking Availability Calendar"}),a.jsx(S4,{equipmentId:e.id,selectedStartDate:s,selectedEndDate:o})]}),j&&a.jsx("div",{className:"error-message",role:"alert",children:j}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary","data-testid":"cancel-booking-btn",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:_,"data-testid":"submit-booking-btn",children:_?"Creating Booking...":"Create Booking"})]})]})]})]})}):a.jsx("div",{className:"modal-overlay",onClick:t,"data-testid":"modal-overlay",children:a.jsxs("div",{className:"modal-content modal",onClick:P=>P.stopPropagation(),"data-testid":"booking-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Access Restricted"}),a.jsx("button",{className:"modal-close",onClick:t,"aria-label":"Close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"restriction-message",style:{textAlign:"center",padding:"2rem",background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"8px"},children:[a.jsx("h3",{style:{color:"#856404",marginBottom:"1rem"},children:"Cannot Create Booking"}),a.jsx("p",{style:{color:"#856404",marginBottom:"0.5rem"},children:"You do not have permission to create equipment bookings."}),a.jsx("p",{style:{color:"#856404"},children:"Please contact your department admin to request access."})]}),a.jsx("div",{className:"modal-actions",style:{marginTop:"1.5rem",display:"flex",justifyContent:"center"},children:a.jsx("button",{onClick:t,className:"btn btn-secondary",children:"Close"})})]})]})})}const C4={camera:"",lens:"",lighting:"",audio:"",video:"",tripod:"",computer:"",software:"",storage:"",accessory:"",default:""},A4=(e="",t="")=>{const n=`${e} ${t}`.toLowerCase();return n.match(/camera|canon|nikon|sony|dslr|mirrorless/)?"camera":n.match(/lens|mm|f\/|zoom|prime|telephoto|wide/)?"lens":n.match(/light|led|softbox|reflector|flash|strobe/)?"lighting":n.match(/mic|microphone|audio|recorder|sound|boom/)?"audio":n.match(/video|camcorder|recorder/)?"video":n.match(/tripod|stand|mount|rig|gimbal/)?"tripod":n.match(/computer|laptop|mac|pc|imac/)?"computer":n.match(/software|license|adobe|final cut/)?"software":n.match(/sd card|memory|hard drive|ssd|storage/)?"storage":n.match(/cable|adapter|charger|battery|bag|case/)?"accessory":"default"};function m5({equipment:e,size:t="medium",showCategory:n=!1}){const[r,s]=R.useState(!1),[i,o]=R.useState(!0),l=A4(e==null?void 0:e.product_name,e==null?void 0:e.description),c=C4[l],d=(e==null?void 0:e.link_to_image)&&!r,h=()=>{s(!0),o(!1)},m=()=>{o(!1)};return a.jsx("div",{className:`equipment-image equipment-image--${t}`,children:d?a.jsxs(a.Fragment,{children:[i&&a.jsx("div",{className:"equipment-image-skeleton",children:a.jsx("span",{className:"equipment-image-placeholder-icon",children:c})}),a.jsx("img",{src:e.link_to_image,alt:e.product_name,onError:h,onLoad:m,loading:"lazy",className:i?"equipment-image-hidden":"equipment-image-loaded"})]}):a.jsxs("div",{className:"equipment-image-placeholder",children:[a.jsx("span",{className:"equipment-image-placeholder-icon",children:c}),n&&a.jsx("span",{className:"equipment-image-category",children:l})]})})}function D4({equipment:e,onClose:t,onBookClick:n}){return e?a.jsx("div",{className:"modal-overlay",onClick:t,"data-testid":"modal-overlay",children:a.jsxs("div",{className:"modal-content equipment-details",onClick:r=>r.stopPropagation(),"data-testid":"equipment-details",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:e.product_name}),a.jsx("button",{className:"btn-close",onClick:t,"aria-label":"Close details",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx(m5,{equipment:e,size:"detail",showCategory:!0}),a.jsxs("div",{className:"equipment-details-info",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Category:"}),a.jsx("span",{className:"value",children:e.category})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Department:"}),a.jsx("span",{className:"value",children:e.department})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Status:"}),a.jsx("span",{className:`status status-${e.status}`,children:e.status})]}),a.jsxs("div",{className:"detail-row detail-description",children:[a.jsx("span",{className:"label",children:"Description:"}),a.jsx("p",{className:"value",children:e.description})]}),e.link_to_image&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Manufacturer Link:"}),a.jsx("a",{href:e.link_to_image,target:"_blank",rel:"noopener noreferrer",children:"View Product Info"})]})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"btn btn-secondary",onClick:t,children:"Close"}),e.status==="available"&&n&&a.jsx("button",{className:"btn btn-primary",onClick:()=>{t(),n(e)},"data-testid":"book-from-details-btn",children:"Book Equipment"})]})]})}):null}function ah({onSearch:e,placeholder:t="Search...",debounceMs:n=300,ariaLabel:r="Search"}){const[s,i]=R.useState(""),o=R.useRef(null);R.useEffect(()=>(o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{e(s)},n),()=>{o.current&&clearTimeout(o.current)}),[s,n,e]);const l=()=>{i(""),e("")};return a.jsxs("div",{className:"search-bar",role:"search",children:[a.jsx("label",{htmlFor:"search-input",className:"visually-hidden",children:r}),a.jsx("input",{id:"search-input",type:"text",value:s,onChange:c=>i(c.target.value),placeholder:t,className:"search-input","aria-label":r,"data-testid":"search-input"}),s&&a.jsx("button",{onClick:l,className:"btn-clear-search","aria-label":"Clear search","data-testid":"clear-search-btn",children:"Clear"})]})}function wc({currentPage:e,totalItems:t,itemsPerPage:n=20,onPageChange:r,loading:s=!1}){const i=Math.ceil(t/n);if(i<=1)return null;const o=(e-1)*n+1,l=Math.min(e*n,t),c=()=>{e>1&&r(e-1)},d=()=>{e<i&&r(e+1)},h=g=>{r(g)},m=()=>{const g=[];if(i<=5)for(let j=1;j<=i;j++)g.push(j);else{let j=Math.max(1,e-2),N=Math.min(i,e+2);e<=3?N=5:e>=i-2&&(j=i-5+1),j>1&&(g.push(1),j>2&&g.push("..."));for(let w=j;w<=N;w++)g.push(w);N<i&&(N<i-1&&g.push("..."),g.push(i))}return g};return a.jsxs("div",{className:"pagination",role:"navigation","aria-label":"Pagination",children:[a.jsxs("div",{className:"pagination-info",children:["Showing ",o," to ",l," of ",t," items"]}),a.jsxs("div",{className:"pagination-controls",children:[a.jsx("button",{onClick:c,disabled:e===1||s,className:"btn btn-secondary btn-sm","aria-label":"Previous page","data-testid":"pagination-prev",children:"Previous"}),a.jsx("div",{className:"pagination-pages",children:m().map((g,p)=>g==="..."?a.jsx("span",{className:"pagination-ellipsis",children:"..."},`ellipsis-${p}`):a.jsx("button",{onClick:()=>h(g),disabled:s,className:`btn btn-sm ${e===g?"btn-primary":"btn-secondary"}`,"aria-label":`Page ${g}`,"aria-current":e===g?"page":void 0,"data-testid":`pagination-page-${g}`,children:g},g))}),a.jsx("button",{onClick:d,disabled:e===i||s,className:"btn btn-secondary btn-sm","aria-label":"Next page","data-testid":"pagination-next",children:"Next"})]}),a.jsx("div",{className:"pagination-mobile",children:e<i&&a.jsx("button",{onClick:d,disabled:s,className:"btn btn-primary btn-block","data-testid":"load-more-btn",children:s?"Loading...":"Load More"})})]})}function jc({type:e="card",count:t=3}){const n=()=>{switch(e){case"card":return a.jsxs("div",{className:"skeleton-card",children:[a.jsx("div",{className:"skeleton-image"}),a.jsxs("div",{className:"skeleton-content",children:[a.jsx("div",{className:"skeleton-title"}),a.jsx("div",{className:"skeleton-text"}),a.jsx("div",{className:"skeleton-text",style:{width:"70%"}}),a.jsx("div",{className:"skeleton-button"})]})]});case"table-row":return a.jsxs("tr",{className:"skeleton-row",children:[a.jsx("td",{children:a.jsx("div",{className:"skeleton-text"})}),a.jsx("td",{children:a.jsx("div",{className:"skeleton-text",style:{width:"60%"}})}),a.jsx("td",{children:a.jsx("div",{className:"skeleton-text",style:{width:"80%"}})}),a.jsx("td",{children:a.jsx("div",{className:"skeleton-text",style:{width:"50%"}})}),a.jsx("td",{children:a.jsx("div",{className:"skeleton-button"})})]});case"list-item":return a.jsxs("div",{className:"skeleton-list-item",children:[a.jsx("div",{className:"skeleton-text"}),a.jsx("div",{className:"skeleton-text",style:{width:"80%"}})]});default:return a.jsxs("div",{className:"skeleton-block",children:[a.jsx("div",{className:"skeleton-text"}),a.jsx("div",{className:"skeleton-text",style:{width:"90%"}}),a.jsx("div",{className:"skeleton-text",style:{width:"75%"}})]})}};return a.jsx("div",{className:"loading-skeleton","aria-busy":"true","aria-label":"Loading content",children:Array.from({length:t}).map((r,s)=>a.jsx("div",{children:n()},s))})}function L4({onFilterChange:e}){const[t,n]=R.useState("all"),[r,s]=R.useState(""),i=l=>{n(l),e(l==="custom"&&r?{type:"custom",date:r}:{type:l})},o=l=>{s(l),l&&(n("custom"),e({type:"custom",date:l}))};return a.jsxs("div",{className:"availability-filter",role:"group","aria-label":"Filter by availability",children:[a.jsx("div",{className:"filter-label",children:a.jsx("strong",{children:"Availability:"})}),a.jsxs("div",{className:"filter-options",children:[a.jsx("button",{onClick:()=>i("all"),className:t==="all"?"btn btn-primary btn-sm":"btn btn-secondary btn-sm","data-testid":"filter-all",children:"All Equipment"}),a.jsx("button",{onClick:()=>i("available"),className:t==="available"?"btn btn-primary btn-sm":"btn btn-secondary btn-sm","data-testid":"filter-available-now",children:"Available Now"}),a.jsx("button",{onClick:()=>i("custom"),className:t==="custom"?"btn btn-primary btn-sm":"btn btn-secondary btn-sm","data-testid":"filter-custom-date",children:"Available on Date"})]}),t==="custom"&&a.jsxs("div",{className:"custom-date-picker",children:[a.jsx("label",{htmlFor:"availability-date",className:"visually-hidden",children:"Select date"}),a.jsx("input",{id:"availability-date",type:"date",value:r,onChange:l=>o(l.target.value),min:new Date().toISOString().split("T")[0],className:"date-input","data-testid":"custom-date-input"})]})]})}function e0({onRefresh:e,children:t}){const[n,r]=R.useState(0),[s,i]=R.useState(!1),[o,l]=R.useState(!1),[c,d]=R.useState(0),h=R.useRef(null),m=80,g=120,p=S=>{var q;(((q=h.current)==null?void 0:q.scrollTop)||window.scrollY)===0&&!o&&(d(S.touches[0].clientY),i(!0))},j=S=>{if(!s||o)return;const q=S.touches[0].clientY-c;if(q>0){q>10&&S.preventDefault();const E=Math.min(q*.5,g);r(E)}},N=async()=>{if(s)if(i(!1),n>=m&&!o){l(!0),window.navigator.vibrate&&window.navigator.vibrate(50);try{await e()}catch(S){console.error("Refresh failed:",S)}finally{setTimeout(()=>{l(!1),r(0)},500)}}else r(0)},w=()=>o?360:n/m*180,y=()=>o?1:Math.min(n/m,1),_=()=>o?"Refreshing...":n>=m?"Release to refresh":n>0?"Pull to refresh":"";return a.jsxs("div",{ref:h,className:"pull-to-refresh-container",onTouchStart:p,onTouchMove:j,onTouchEnd:N,"data-testid":"pull-to-refresh-container",children:[a.jsxs("div",{className:`pull-indicator ${o?"refreshing":""}`,style:{transform:`translateY(${n}px)`,opacity:y(),transition:s?"none":"transform 0.3s ease-out, opacity 0.3s ease-out"},"data-testid":"pull-indicator",children:[a.jsx("div",{className:`spinner ${o?"spinning":""}`,style:{transform:`rotate(${w()}deg)`,transition:o?"none":"transform 0.2s ease-out"},children:a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"3",strokeLinecap:"round"})})}),a.jsx("span",{className:"status-message",children:_()})]}),a.jsx("div",{className:"pull-to-refresh-content",style:{transform:`translateY(${n}px)`,transition:s?"none":"transform 0.3s ease-out"},children:t})]})}async function g5(e,t=!0){try{const n=await xe.query("equipment_kits",{department_id:e});return t?n.filter(r=>r.is_active):n}catch(n){throw console.error("Error fetching equipment kits:",n),n}}async function t0(e){try{const t=await xe.query("equipment_kits",{id:e});if(t.length===0)throw new Error("Kit not found");const n=t[0],r=await xe.query("equipment");return n.equipment=n.equipment_ids.map(s=>r.find(i=>i.id===s)).filter(Boolean),n}catch(t){throw console.error("Error fetching kit:",t),t}}async function E4(e){try{const t={id:`kit${Date.now()}`,...e,created_at:new Date().toISOString(),is_active:!0},n=xe.getData();return n.equipment_kits=n.equipment_kits||[],n.equipment_kits.push(t),xe.saveData(n),t}catch(t){throw console.error("Error creating kit:",t),t}}async function v5(e,t){try{const n=xe.getData(),r=n.equipment_kits||[],s=r.findIndex(i=>i.id===e);if(s===-1)throw new Error("Kit not found");return r[s]={...r[s],...t,updated_at:new Date().toISOString()},n.equipment_kits=r,xe.saveData(n),r[s]}catch(n){throw console.error("Error updating kit:",n),n}}async function P4(e){try{await v5(e,{is_active:!1})}catch(t){throw console.error("Error deleting kit:",t),t}}async function y5(e,t,n){try{const r=await t0(e),s=await xe.query("bookings"),i=[];for(const o of r.equipment_ids){const l=s.filter(c=>{if(c.equipment_id!==o||c.status!=="approved")return!1;const d=new Date(c.start_date),h=new Date(c.end_date),m=new Date(t),g=new Date(n);return m<=h&&g>=d});if(l.length>0){const c=r.equipment.find(d=>d.id===o);i.push({equipment:c,conflictingBookings:l})}}return{available:i.length===0,unavailableItems:i}}catch(r){throw console.error("Error checking kit availability:",r),r}}async function q4(e){const{kitId:t,userId:n,startDate:r,endDate:s,justification:i}=e;try{if(!(await y5(t,r,s)).available)throw new Error("Some equipment in this kit is not available for the selected dates");const l=await t0(t),c=[];for(const m of l.equipment_ids){const g={id:`book${Date.now()}_${m}`,equipment_id:m,user_id:n,start_date:r,end_date:s,status:"pending",justification:i||`Part of kit booking: ${l.name}`,kit_booking_id:`kitbook${Date.now()}`,created_at:new Date().toISOString()},p=xe.getData();p.bookings=p.bookings||[],p.bookings.push(g),xe.saveData(p),c.push(g.id)}const d={id:`kitbook${Date.now()}`,kit_id:t,booking_ids:c,user_id:n,start_date:r,end_date:s,status:"pending",created_at:new Date().toISOString()},h=xe.getData();return h.kit_bookings=h.kit_bookings||[],h.kit_bookings.push(d),xe.saveData(h),d}catch(o){throw console.error("Error booking kit:",o),o}}function T4({onBookingSuccess:e}){const{user:t}=sn(),[n,r]=R.useState([]),[s,i]=R.useState(null),[o,l]=R.useState(null),[c,d]=R.useState(!0),[h,m]=R.useState({start:"",end:""}),[g,p]=R.useState(null),[j,N]=R.useState(!1),[w,y]=R.useState(!1),[_,S]=R.useState("");R.useEffect(()=>{C()},[]);const C=async()=>{d(!0);try{const x=await g5(t.department,!0);r(x)}catch(x){console.error("Failed to load kits:",x)}finally{d(!1)}},q=async x=>{i(x),m({start:"",end:""}),p(null),S("");try{const A=await t0(x.id);l(A)}catch(A){console.error("Failed to load kit details:",A)}},W=async()=>{if(!h.start||!h.end){alert("Please select both start and end dates");return}N(!0);try{const x=await y5(s.id,h.start,h.end);p(x)}catch(x){console.error("Failed to check availability:",x),alert("Failed to check availability")}finally{N(!1)}},E=async()=>{if(!g||!g.available){alert("Please check availability first");return}if(_.trim().length<30){alert("Please provide a justification (minimum 30 characters)");return}y(!0);try{await q4({kitId:s.id,userId:t.id,startDate:h.start,endDate:h.end,justification:_.trim()}),alert(`Kit booked successfully! ${o.equipment_ids.length} individual bookings created. Awaiting admin approval.`),i(null),l(null),m({start:"",end:""}),p(null),S(""),e&&e()}catch(x){console.error("Failed to book kit:",x),alert(x.message||"Failed to book kit")}finally{y(!1)}};return c?a.jsx("div",{className:"kit-browser",children:a.jsx("p",{children:"Loading equipment kits..."})}):n.length===0?a.jsx("div",{className:"kit-browser",children:a.jsx("div",{className:"empty-state-small",children:a.jsx("p",{children:"No equipment kits available for your department yet."})})}):a.jsxs("div",{className:"kit-browser",children:[a.jsx("h3",{children:"Equipment Kits"}),a.jsx("p",{className:"kit-browser-subtitle",children:"Book pre-configured equipment bundles for common use cases"}),a.jsx("div",{className:"kits-list",children:n.map(x=>a.jsxs("div",{className:`kit-item ${(s==null?void 0:s.id)===x.id?"selected":""}`,onClick:()=>q(x),children:[x.image_url&&a.jsx("div",{className:"kit-item-image",children:a.jsx("img",{src:x.image_url,alt:x.name})}),a.jsxs("div",{className:"kit-item-info",children:[a.jsx("h4",{children:x.name}),a.jsx("p",{children:x.description}),a.jsxs("small",{children:[x.equipment_ids.length," items in this kit"]})]})]},x.id))}),s&&o&&a.jsxs("div",{className:"kit-details-panel",children:[a.jsxs("h4",{children:["Book: ",s.name]}),a.jsxs("div",{className:"kit-equipment",children:[a.jsx("strong",{children:"Equipment in this kit:"}),a.jsx("ul",{children:o.equipment.map(x=>a.jsxs("li",{children:[x.product_name," (",x.tracking_number,") - ",a.jsx("span",{className:`status-${x.status}`,children:x.status})]},x.id))})]}),a.jsxs("div",{className:"booking-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Start Date"}),a.jsx("input",{type:"date",value:h.start,onChange:x=>m({...h,start:x.target.value}),min:new Date().toISOString().split("T")[0]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"End Date"}),a.jsx("input",{type:"date",value:h.end,onChange:x=>m({...h,end:x.target.value}),min:h.start||new Date().toISOString().split("T")[0]})]})]}),a.jsx("button",{onClick:W,className:"btn btn-secondary btn-sm",disabled:!h.start||!h.end||j,children:j?"Checking...":"Check Availability"}),g&&a.jsx("div",{className:`availability-result ${g.available?"available":"unavailable"}`,children:g.available?a.jsxs("p",{children:[a.jsx("strong",{children:" All equipment available!"})," You can proceed with booking."]}):a.jsxs("div",{children:[a.jsx("p",{children:a.jsx("strong",{children:" Some equipment unavailable"})}),a.jsx("ul",{children:g.unavailableItems.map((x,A)=>a.jsxs("li",{children:[x.equipment.product_name," - Booked ",x.conflictingBookings.length," time(s)"]},A))}),a.jsx("p",{className:"suggestion",children:"Please select different dates or book individual items instead."})]})}),(g==null?void 0:g.available)&&a.jsxs("div",{className:"justification-section",children:[a.jsx("label",{children:"Justification *"}),a.jsx("textarea",{value:_,onChange:x=>S(x.target.value),placeholder:"Explain why you need this equipment kit (minimum 30 characters)...",rows:"3",minLength:"30"}),a.jsxs("small",{className:_.length<30?"text-error":"text-success",children:[_.length," / 30 characters minimum"]})]}),a.jsxs("div",{className:"booking-actions",children:[a.jsx("button",{onClick:()=>{i(null),l(null),p(null)},className:"btn btn-secondary",children:"Cancel"}),(g==null?void 0:g.available)&&a.jsx("button",{onClick:E,className:"btn btn-primary",disabled:w||_.length<30,children:w?"Booking...":`Book Kit (${o.equipment_ids.length} items)`})]})]})]})]})}async function n0(){try{return await xe.query("sub_areas")||[]}catch(e){throw console.error("Failed to get departments:",e),e}}async function I4(e,t,n=null,r="",s=null){try{const i={id:`ida${Date.now()}`,from_sub_area_id:e,to_sub_area_id:t,granted_by:s,granted_at:new Date().toISOString(),expires_at:n,is_active:!0,notes:r||""};return await xe.insert("interdisciplinary_access",i),i}catch(i){throw console.error("Failed to grant access:",i),i}}async function F4(e,t,n,r){try{const s={id:`ar${Date.now()}`,requesting_admin_id:e,from_sub_area_id:t,to_sub_area_id:n,status:"pending",reason:r||"",requested_at:new Date().toISOString(),reviewed_by:null,reviewed_at:null,notes:null};return await xe.insert("access_requests",s),s}catch(s){throw console.error("Failed to create access request:",s),s}}async function R4(e=null){try{let t=await xe.query("access_requests");return e&&(t=t.filter(n=>n.status===e)),t}catch(t){throw console.error("Failed to get access requests:",t),t}}async function O4(e){try{return await xe.query("access_requests",{requesting_admin_id:e})}catch(t){throw console.error("Failed to get department admin requests:",t),t}}async function M4(e,t,n=null){try{const r=await xe.findOne("access_requests",{id:e});if(!r)throw new Error("Access request not found");if(r.status!=="pending")throw new Error("Can only approve pending requests");const s=await I4(r.from_sub_area_id,r.to_sub_area_id,n,`Created from access request ${e}`,t);return await xe.update("access_requests",{id:e},{status:"approved",reviewed_by:t,reviewed_at:new Date().toISOString(),notes:`Approved - interdisciplinary access grant created (${s.id})`}),{request:await xe.findOne("access_requests",{id:e}),grant:s}}catch(r){throw console.error("Failed to approve access request:",r),r}}async function B4(e,t,n){try{const r=await xe.findOne("access_requests",{id:e});if(!r)throw new Error("Access request not found");if(r.status!=="pending")throw new Error("Can only deny pending requests");return await xe.update("access_requests",{id:e},{status:"denied",reviewed_by:t,reviewed_at:new Date().toISOString(),notes:n||"Request denied"}),await xe.findOne("access_requests",{id:e})}catch(r){throw console.error("Failed to deny access request:",r),r}}async function x5(e){try{const n=(await xe.query("system_settings")).find(r=>r.key===e);return n?n.value:null}catch(t){throw console.error("Error fetching system setting:",t),t}}async function U4(){try{return await xe.query("system_settings")}catch(e){throw console.error("Error fetching system settings:",e),e}}async function z4(e,t,n){try{const r=await xe.query("system_settings"),s=r.findIndex(c=>c.key===e);if(s===-1)throw new Error(`Setting with key '${e}' not found`);const i={...r[s],value:t,modified_by:n,modified_at:new Date().toISOString()},o=await xe.query("system_settings");o[s]=i;const l=xe.getData();return l.system_settings=o,xe.saveData(l),i}catch(r){throw console.error("Error updating system setting:",r),r}}async function $4(){const e=await x5("cross_department_browsing_enabled");return e===!0||e==="true"}async function W4(){const e=await x5("equipment_kits_enabled");return e===!0||e==="true"}function b5(){const{user:e}=sn(),[t,n]=R.useState([]),[r,s]=R.useState([]),[i,o]=R.useState(!0),[l,c]=R.useState("all"),[d,h]=R.useState("large"),[m,g]=R.useState(null),[p,j]=R.useState(!1),[N,w]=R.useState(!1),[y,_]=R.useState(!1),[S,C]=R.useState([]),[q,W]=R.useState("all"),[E,x]=R.useState(""),[A,U]=R.useState(1),L=20,[O,P]=R.useState({type:"all"}),{toasts:T,showToast:X,removeToast:te}=Hn(),[oe,Z]=R.useState(!1),[se,ee]=R.useState("my_department"),[de,D]=R.useState(!1),H=()=>{var ue;return e?e.role==="student"||e.role==="department_admin"||e.role==="master_admin"?!0:e.role==="staff"?((ue=e.view_permissions)==null?void 0:ue.can_view_catalog)!==!1:!0:!1};R.useEffect(()=>{J()},[]),R.useEffect(()=>{ne(),V()},[l,q,se]);const J=async()=>{try{const ue=await $4();Z(ue);const qe=await W4();D(qe)}catch(ue){console.error("Failed to check system settings:",ue)}};R.useEffect(()=>{let ue=t;if(E.trim()){const qe=E.toLowerCase();ue=ue.filter(Ee=>Ee.product_name.toLowerCase().includes(qe)||Ee.description.toLowerCase().includes(qe)||Ee.category.toLowerCase().includes(qe))}O.type==="available"?ue=ue.filter(qe=>qe.status==="available"):O.type==="custom"&&O.date&&(ue=ue.filter(async qe=>!(await xe.query("bookings",{equipment_id:qe.id})).some(Oe=>{const Ye=new Date(Oe.start_date),Qe=new Date(Oe.end_date),Je=new Date(O.date);return Je>=Ye&&Je<=Qe&&Oe.status==="approved"}))),s(ue),U(1)},[t,E,O]);const V=async()=>{try{const ue=await n0();C(ue)}catch(ue){console.error("Failed to load sub-areas:",ue)}},ne=async()=>{o(!0);try{const ue=xe.getCurrentUser();if(ue&&ue.role==="student"){const qe=await xe.query("equipment");let Ee=qe.filter(Ye=>Ye.department===ue.department);const Xe=await xe.query("department_access_grants",{requesting_department_id:ue.department,status:"active"}),Oe=new Date;for(const Ye of Xe){const Qe=new Date(Ye.start_date),Je=new Date(Ye.end_date);if(Oe>=Qe&&Oe<=Je){const ot=qe.filter(Ue=>Ue.department===Ye.lending_department_id&&Ue.product_name===Ye.equipment_type).slice(0,Ye.quantity_available).map(Ue=>({...Ue,isCrossDepartment:!0,crossDeptGrantId:Ye.id,collectionInstructions:Ye.collection_instructions,crossDeptTerms:Ye.terms,lendingDepartment:Ye.lending_department_id}));Ee=Ee.concat(ot)}}l!=="all"&&(Ee=Ee.filter(Ye=>Ye.category===l)),q!=="all"&&(Ee=Ee.filter(Ye=>Ye.sub_area_id===q)),n(Ee)}else{const qe=l==="all"?{}:{category:l};let Ee=await xe.query("equipment",qe);q!=="all"&&(Ee=Ee.filter(Xe=>Xe.sub_area_id===q)),n(Ee)}}catch(ue){console.error("Failed to load equipment:",ue)}finally{o(!1)}},le=ue=>{const qe=S.find(Ee=>Ee.id===ue);return qe?qe.name:""},me=["all","Camera","Computer","Lighting","Support"],re=ue=>{g(ue),_(!0)},fe=ue=>{if(ue.status!=="available"){X("This equipment is not available for booking","error");return}g(ue),j(!0)},be=()=>{X("Booking created successfully! Awaiting admin approval.","success"),j(!1)},Se=()=>{X("Multiple bookings created successfully! Awaiting admin approval.","success"),w(!1),ne()},Ae=ue=>{x(ue)},ye=ue=>{U(ue),window.scrollTo({top:0,behavior:"smooth"})},Q=async()=>{await ne(),await V()},at=(A-1)*L,nt=at+L,Ve=r.slice(at,nt);return!i&&!H()?a.jsxs("div",{className:"access-restricted",children:[a.jsxs("div",{className:"restriction-message",children:[a.jsx("h2",{children:"Access Restricted"}),a.jsx("p",{children:"You do not have permission to view the equipment catalog."}),a.jsx("p",{children:"Please contact your department admin to request access."})]}),a.jsx("style",{jsx:!0,children:`
          .access-restricted {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 60vh;
            padding: 2rem;
          }
          .restriction-message {
            text-align: center;
            max-width: 500px;
            padding: 2rem;
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
          }
          .restriction-message h2 {
            color: #856404;
            margin-bottom: 1rem;
          }
          .restriction-message p {
            color: #856404;
            margin-bottom: 0.5rem;
          }
        `})]}):a.jsxs("div",{className:"equipment-browse",children:[a.jsxs(e0,{onRefresh:Q,children:[a.jsxs("div",{className:"browse-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[a.jsx("h2",{children:"Browse Equipment"}),a.jsx("button",{onClick:()=>w(!0),className:"btn btn-primary","data-testid":"book-multiple-items-btn",style:{whiteSpace:"nowrap"},children:"Book Multiple Items"})]}),a.jsx(ah,{onSearch:Ae,placeholder:"Search equipment by name, description, or category...",ariaLabel:"Search equipment"}),a.jsx(L4,{onFilterChange:P}),e&&e.role==="student"&&de&&a.jsx(T4,{onBookingSuccess:ne}),a.jsxs("div",{className:"filter-controls-compact",style:{display:"grid",gridTemplateColumns:S.length>0&&(e==null?void 0:e.role)!=="student"?"repeat(auto-fit, minmax(200px, 1fr))":"1fr",gap:"1rem",marginTop:"1rem",marginBottom:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"category-filter",style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",fontSize:"0.875rem"},children:"Category"}),a.jsx("select",{id:"category-filter",value:l,onChange:ue=>c(ue.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #ced4da",fontSize:"0.95rem",cursor:"pointer",backgroundColor:"white"},children:me.map(ue=>a.jsx("option",{value:ue,children:ue==="all"?"All Categories":ue},ue))})]}),S.length>0&&(e==null?void 0:e.role)!=="student"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"department-filter",style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",fontSize:"0.875rem"},children:"Department"}),a.jsxs("select",{id:"department-filter",value:q,onChange:ue=>W(ue.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #ced4da",fontSize:"0.95rem",cursor:"pointer",backgroundColor:"white"},children:[a.jsx("option",{value:"all",children:"All Departments"}),S.map(ue=>a.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]})]}),a.jsxs("div",{className:"view-toggle",children:[a.jsx("button",{className:`btn-view ${d==="large"?"active":""}`,onClick:()=>h("large"),"data-testid":"view-large-btn",children:"Large Details"}),a.jsx("button",{className:`btn-view ${d==="compact"?"active":""}`,onClick:()=>h("compact"),"data-testid":"view-compact-btn",children:"Compact List"})]}),i?d==="large"?a.jsx("div",{className:"equipment-grid",children:a.jsx(jc,{type:"card",count:6})}):a.jsxs("table",{className:"equipment-table-compact",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Equipment"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:a.jsx(jc,{type:"table-row",count:8})})]}):r.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"No equipment found matching your search criteria."})}):d==="large"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"equipment-grid",children:Ve.map(ue=>a.jsxs("div",{className:"equipment-card","data-testid":"equipment-card",children:[a.jsx("div",{onClick:()=>re(ue),style:{cursor:"pointer"},children:a.jsx(m5,{equipment:ue,size:"medium"})}),a.jsxs("div",{className:"equipment-info",children:[a.jsx("h3",{onClick:()=>re(ue),style:{cursor:"pointer"},children:ue.product_name}),a.jsx("p",{className:"category",children:ue.category}),a.jsx("p",{className:"description",children:ue.description}),a.jsxs("div",{className:"equipment-meta",children:[a.jsx("span",{className:`status status-${ue.status}`,children:ue.status}),a.jsx("span",{className:"department",children:ue.department})]}),ue.isCrossDepartment&&a.jsxs("div",{className:"cross-department-badge",style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"4px",fontSize:"0.875rem"},children:[a.jsx("strong",{style:{color:"#1976d2"},children:" Cross-Department Access"}),a.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",color:"#666"},children:["From ",ue.lendingDepartment]})]}),ue.isInterdisciplinary&&a.jsxs("div",{className:"interdisciplinary-badge",children:["Available via ",le(ue.fromSubAreaId)]}),a.jsx("button",{className:"btn btn-primary btn-block",onClick:qe=>{qe.stopPropagation(),fe(ue)},disabled:ue.status!=="available","data-testid":"book-equipment-btn",children:ue.status==="available"?"Book Equipment":"Not Available"})]})]},ue.id))}),a.jsx(wc,{currentPage:A,totalItems:r.length,itemsPerPage:L,onPageChange:ye,loading:i})]}):a.jsxs(a.Fragment,{children:[a.jsxs("table",{className:"equipment-table-compact","data-testid":"equipment-table-compact",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Equipment"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Ve.map(ue=>a.jsxs("tr",{"data-testid":"equipment-row-compact",children:[a.jsx("td",{onClick:()=>re(ue),style:{cursor:"pointer",fontWeight:"600"},children:ue.product_name}),a.jsx("td",{children:ue.category}),a.jsxs("td",{children:[ue.department,ue.isCrossDepartment&&a.jsxs("div",{style:{marginTop:"0.25rem",fontSize:"0.75rem",color:"#1976d2",fontWeight:"600"},children:[" From ",ue.lendingDepartment]}),ue.isInterdisciplinary&&a.jsxs("div",{className:"interdisciplinary-badge",style:{marginTop:"0.25rem"},children:["Via ",le(ue.fromSubAreaId)]})]}),a.jsx("td",{children:a.jsx("span",{className:`status status-${ue.status}`,children:ue.status})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>fe(ue),disabled:ue.status!=="available","data-testid":"book-equipment-btn-compact",children:ue.status==="available"?"Book":"Unavailable"})})]},ue.id))})]}),a.jsx(wc,{currentPage:A,totalItems:r.length,itemsPerPage:L,onPageChange:ye,loading:i})]})]}),y&&m&&a.jsx(D4,{equipment:m,onClose:()=>_(!1),onBookClick:fe}),p&&m&&a.jsx(p5,{equipment:m,onClose:()=>j(!1),onSuccess:be}),N&&a.jsx(s5,{onClose:()=>w(!1),onSuccess:Se}),T.map(ue=>a.jsx(Vn,{message:ue.message,type:ue.type,onClose:()=>te(ue.id)},ue.id))]})}class H4{exportToCSV(t,n,r=null){if(!t||t.length===0){console.warn("No data to export");return}const s=r||Object.keys(t[0]).map(c=>({key:c,label:c})),i=s.map(c=>this.escapeCSVValue(c.label)).join(","),o=t.map(c=>s.map(d=>{const h=this.getNestedValue(c,d.key);return this.escapeCSVValue(h)}).join(",")),l=[i,...o].join(`
`);this.downloadFile(l,`${n}.csv`,"text/csv;charset=utf-8;")}exportBookingsToCSV(t,n="bookings"){const r=[{key:"equipment.product_name",label:"Equipment"},{key:"equipment.category",label:"Category"},{key:"start_date",label:"Start Date"},{key:"end_date",label:"End Date"},{key:"status",label:"Status"},{key:"purpose",label:"Purpose"},{key:"created_at",label:"Requested Date"}],s=t.map(i=>({...i,start_date:this.formatDate(i.start_date),end_date:this.formatDate(i.end_date),created_at:this.formatDate(i.created_at)}));this.exportToCSV(s,n,r)}exportEquipmentToCSV(t,n="equipment"){const r=[{key:"product_name",label:"Product Name"},{key:"category",label:"Category"},{key:"department",label:"Department"},{key:"status",label:"Status"},{key:"tracking_number",label:"Tracking Number"},{key:"description",label:"Description"}];this.exportToCSV(t,n,r)}exportToPDF(t,n){const r=window.open("","_blank");r.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>${n}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              padding: 20px;
              max-width: 800px;
              margin: 0 auto;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin: 20px 0;
            }
            th, td {
              border: 1px solid #ddd;
              padding: 12px;
              text-align: left;
            }
            th {
              background-color: #f4f4f4;
              font-weight: bold;
            }
            h1 {
              color: #333;
              border-bottom: 2px solid #333;
              padding-bottom: 10px;
            }
            .no-print {
              margin: 20px 0;
            }
            @media print {
              .no-print {
                display: none;
              }
            }
          </style>
        </head>
        <body>
          <div class="no-print">
            <button onclick="window.print()">Print / Save as PDF</button>
            <button onclick="window.close()">Close</button>
          </div>
          ${t}
        </body>
      </html>
    `),r.document.close()}exportBookingsToPDF(t,n="My Bookings Report"){const r=t.map(i=>{var o,l;return`
      <tr>
        <td>${((o=i.equipment)==null?void 0:o.product_name)||"Unknown"}</td>
        <td>${((l=i.equipment)==null?void 0:l.category)||"N/A"}</td>
        <td>${this.formatDate(i.start_date)}</td>
        <td>${this.formatDate(i.end_date)}</td>
        <td><strong>${i.status}</strong></td>
      </tr>
    `}).join(""),s=`
      <h1>${n}</h1>
      <p><strong>Generated:</strong> ${this.formatDate(new Date)}</p>
      <p><strong>Total Bookings:</strong> ${t.length}</p>
      <table>
        <thead>
          <tr>
            <th>Equipment</th>
            <th>Category</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          ${r}
        </tbody>
      </table>
    `;this.exportToPDF(s,n.replace(/\s+/g,"_"))}escapeCSVValue(t){if(t==null)return"";const n=String(t);return n.includes(",")||n.includes('"')||n.includes(`
`)?`"${n.replace(/"/g,'""')}"`:n}getNestedValue(t,n){return n.split(".").reduce((r,s)=>r==null?void 0:r[s],t)||""}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}downloadFile(t,n,r){const s=new Blob([t],{type:r}),i=URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}}const o1=new H4;function _5(){const{user:e}=xr(),[t,n]=R.useState([]),[r,s]=R.useState(!0),[i,o]=R.useState(!1),[l,c]=R.useState(null),{toasts:d,showToast:h,removeToast:m}=Hn(),g=()=>{var x;return e?e.role==="student"||e.role==="department_admin"||e.role==="master_admin"?!0:e.role==="staff"?((x=e.view_permissions)==null?void 0:x.can_view_history)!==!1:!0:!1},p=()=>{var x;return e?e.role==="student"||e.role==="department_admin"||e.role==="master_admin"?!0:e.role==="staff"?((x=e.view_permissions)==null?void 0:x.can_cancel_bookings)!==!1:!0:!1},j=()=>{var x;return e?e.role==="student"||e.role==="department_admin"||e.role==="master_admin"?!0:e.role==="staff"?((x=e.view_permissions)==null?void 0:x.can_export_data)!==!1:!0:!1};R.useEffect(()=>{N()},[e]);const N=async()=>{s(!0);try{const x=await Bp.getBookingsWithEquipment(e.id);n(x.sort((A,U)=>new Date(U.created_at)-new Date(A.created_at)))}catch(x){console.error("Failed to load bookings:",x)}finally{s(!1)}},w=async x=>{try{await Bp.cancelBooking(x),await N(),h("Booking cancelled successfully","success")}catch(A){h("Failed to cancel booking: "+A.message,"error")}},y=x=>({pending:"warning",approved:"success",denied:"error",cancelled:"secondary",active:"primary",completed:"success"})[x]||"secondary",_=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),S=x=>{c(x.equipment),o(!0)},C=()=>{h("Booking created successfully! Awaiting admin approval.","success"),o(!1),c(null),N()},q=()=>{o1.exportBookingsToCSV(t,`my_bookings_${new Date().toISOString().split("T")[0]}`),h("Bookings exported to CSV","success")},W=()=>{o1.exportBookingsToPDF(t,"My Bookings Report"),h("Opening PDF export...","success")},E=async()=>{await N()};return r?a.jsx("div",{className:"loading",children:"Loading your bookings..."}):g()?t.length===0?a.jsxs("div",{className:"empty-state","data-testid":"no-bookings",children:[a.jsx("h2",{children:"No Bookings Yet"}),a.jsx("p",{children:"You haven't made any equipment bookings."}),a.jsx(Zr,{to:`/${e.role}/equipment`,className:"btn btn-primary",children:"Browse Equipment"})]}):a.jsxs("div",{className:"my-bookings",children:[a.jsxs(e0,{onRefresh:E,children:[a.jsxs("div",{className:"bookings-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[a.jsxs("div",{children:[a.jsx("h2",{children:"My Bookings"}),a.jsxs("p",{className:"subtitle",children:[t.length," total booking(s)"]})]}),j()&&a.jsxs("div",{className:"export-actions",children:[a.jsx("button",{onClick:q,className:"btn btn-secondary btn-sm","data-testid":"export-csv-btn",children:"Export CSV"}),a.jsx("button",{onClick:W,className:"btn btn-secondary btn-sm","data-testid":"export-pdf-btn",children:"Export PDF"})]})]}),a.jsx("div",{className:"bookings-list","data-testid":"bookings-list",children:t.map(x=>{var A,U;return a.jsxs("div",{className:"booking-item booking-card","data-testid":"booking-card",children:[a.jsxs("div",{className:"booking-header",children:[a.jsxs("div",{children:[a.jsx("h3",{children:((A=x.equipment)==null?void 0:A.product_name)||"Unknown Equipment"}),a.jsx("p",{className:"category",children:(U=x.equipment)==null?void 0:U.category})]}),a.jsx("span",{className:`status-badge status-${y(x.status)}`,children:x.status})]}),a.jsxs("div",{className:"booking-details",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Dates:"}),a.jsxs("span",{children:[_(x.start_date)," - ",_(x.end_date)]})]}),x.purpose&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Purpose:"}),a.jsx("span",{children:x.purpose})]}),x.denial_reason&&a.jsxs("div",{className:"detail-row error",children:[a.jsx("span",{className:"label",children:"Denial Reason:"}),a.jsx("span",{children:x.denial_reason})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Created:"}),a.jsx("span",{children:_(x.created_at)})]})]}),a.jsxs("div",{className:"booking-actions",children:[x.status==="pending"&&p()&&a.jsx("button",{onClick:()=>w(x.id),className:"btn btn-secondary btn-sm","data-testid":"cancel-booking-btn",children:"Cancel Booking"}),x.status==="pending"&&!p()&&a.jsx("span",{style:{fontSize:"0.85rem",color:"#666",fontStyle:"italic"},children:"Cannot cancel (no permission)"}),(x.status==="completed"||x.status==="denied")&&x.equipment&&a.jsx("button",{onClick:()=>S(x),className:"btn btn-primary btn-sm","data-testid":"rebook-btn",children:"Book Again"})]})]},x.id)})})]}),i&&l&&a.jsx(p5,{equipment:l,onClose:()=>{o(!1),c(null)},onSuccess:C}),d.map(x=>a.jsx(Vn,{message:x.message,type:x.type,onClose:()=>m(x.id)},x.id))]}):a.jsxs("div",{className:"access-restricted",children:[a.jsxs("div",{className:"restriction-message",children:[a.jsx("h2",{children:"Access Restricted"}),a.jsx("p",{children:"You do not have permission to view booking history."}),a.jsx("p",{children:"Please contact your department admin to request access."})]}),a.jsx("style",{jsx:!0,children:`
          .access-restricted {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 60vh;
            padding: 2rem;
          }
          .restriction-message {
            text-align: center;
            max-width: 500px;
            padding: 2rem;
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
          }
          .restriction-message h2 {
            color: #856404;
            margin-bottom: 1rem;
          }
          .restriction-message p {
            color: #856404;
            margin-bottom: 0.5rem;
          }
        `})]})}function V4(){const{user:e,logout:t}=sn();return a.jsxs("div",{className:"student-portal",children:[a.jsx("header",{className:"student-header",children:a.jsxs("div",{className:"student-header-content",children:[a.jsx("h1",{children:" NCADbook"}),a.jsxs("div",{className:"student-header-actions",children:[a.jsx(Jm,{}),a.jsx("span",{className:"student-user-info",children:e==null?void 0:e.full_name}),a.jsx("button",{onClick:t,className:"btn btn-secondary btn-sm",children:"Logout"})]})]})}),a.jsxs("nav",{className:"student-nav",children:[a.jsx(pn,{to:"/student",end:!0,className:({isActive:n})=>`student-nav-link ${n?"active":""}`,children:" Dashboard"}),a.jsx(pn,{to:"/student/equipment",className:({isActive:n})=>`student-nav-link ${n?"active":""}`,children:" Browse Equipment"}),a.jsx(pn,{to:"/student/bookings",className:({isActive:n})=>`student-nav-link ${n?"active":""}`,children:" My Bookings"})]}),a.jsx("main",{className:"student-main",children:a.jsxs(rh,{children:[a.jsx(mt,{index:!0,element:a.jsx(u4,{})}),a.jsx(mt,{path:"equipment",element:a.jsx(b5,{})}),a.jsx(mt,{path:"bookings",element:a.jsx(_5,{})})]})}),a.jsx(Xm,{})]})}function G4(){const{user:e}=xr(),[t,n]=R.useState({myBookings:0,mySpaceBookings:0,availableSpaces:0}),[r,s]=R.useState(!0);R.useEffect(()=>{i()},[e]);const i=async()=>{try{const o=await xe.query("bookings",{user_id:e.id}),l=await xe.query("spaceBookings",{user_id:e.id}),c=await xe.query("spaces");n({myBookings:o.filter(d=>d.status!=="cancelled").length,mySpaceBookings:l.filter(d=>d.status!=="cancelled").length,availableSpaces:c.filter(d=>d.status==="available").length})}catch(o){console.error("Failed to load stats:",o)}finally{s(!1)}};return r?a.jsxs("div",{className:"staff-dashboard",children:[a.jsx("div",{className:"staff-skeleton"}),a.jsx("div",{className:"staff-skeleton"}),a.jsx("div",{className:"staff-skeleton"})]}):a.jsxs("div",{className:"staff-dashboard","data-testid":"staff-dashboard",children:[a.jsxs("div",{className:"staff-welcome",children:[a.jsxs("h2",{children:["Welcome, ",e==null?void 0:e.first_name,"! "]}),a.jsx("p",{children:"Staff Dashboard - Equipment & Space Management"})]}),a.jsxs("div",{className:"staff-stats-grid",children:[a.jsxs("div",{className:"staff-stat-card",children:[a.jsx("div",{className:"staff-stat-icon",children:""}),a.jsx("div",{className:"staff-stat-number",children:t.myBookings}),a.jsx("div",{className:"staff-stat-label",children:"Equipment Bookings"})]}),a.jsxs("div",{className:"staff-stat-card",children:[a.jsx("div",{className:"staff-stat-icon",children:""}),a.jsx("div",{className:"staff-stat-number",children:t.mySpaceBookings}),a.jsx("div",{className:"staff-stat-label",children:"Room Bookings"})]}),a.jsxs("div",{className:"staff-stat-card",children:[a.jsx("div",{className:"staff-stat-icon",children:""}),a.jsx("div",{className:"staff-stat-number",children:t.availableSpaces}),a.jsx("div",{className:"staff-stat-label",children:"Spaces Available"})]})]}),a.jsxs("div",{className:"staff-dashboard-grid",children:[a.jsxs("div",{className:"staff-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"staff-card-icon",children:""})," Quick Actions"]}),a.jsxs("div",{className:"staff-quick-actions",children:[a.jsx(Zr,{to:"/staff/rooms",className:"staff-action-btn","data-testid":"book-room-link",children:" Book a Room"}),a.jsx(Zr,{to:"/staff/equipment",className:"staff-action-btn secondary","data-testid":"browse-equipment-link",children:" Browse Equipment"}),a.jsx(Zr,{to:"/staff/bookings",className:"staff-action-btn secondary","data-testid":"view-bookings-link",children:" My Bookings"}),a.jsx(Zr,{to:"/staff/cross-department-requests",className:"staff-action-btn secondary",children:" Request Equipment"})]})]}),a.jsxs("div",{className:"staff-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"staff-card-icon",children:""})," Staff Features"]}),a.jsxs("ul",{className:"staff-features-list",children:[a.jsx("li",{children:"Book rooms and spaces by the hour"}),a.jsx("li",{children:"Book equipment for projects"}),a.jsx("li",{children:"Manage all bookings in one place"}),a.jsx("li",{children:"Auto-approved room bookings"}),a.jsx("li",{children:"Request cross-department equipment"})]})]})]})]})}const La={async createSpaceBooking(e){const{space_id:t,booking_date:n,start_time:r,end_time:s,user_id:i,purpose:o}=e;if((await this.checkConflicts(t,n,r,s)).length>0)throw new Error("Space is already booked for selected time slot");const c={id:"sb"+Date.now(),user_id:i,space_id:t,booking_date:n,start_time:r,end_time:s,purpose:o,status:"approved",created_at:new Date().toISOString(),approved_at:new Date().toISOString()};return await xe.insert("spaceBookings",c),c},async getUserSpaceBookings(e){return await xe.query("spaceBookings",{user_id:e})},async getSpaceBookingById(e){return await xe.findOne("spaceBookings",{id:e})},async cancelSpaceBooking(e){await xe.update("spaceBookings",{id:e},{status:"cancelled",cancelled_at:new Date().toISOString()})},async checkConflicts(e,t,n,r){return(await xe.query("spaceBookings",{space_id:e})).filter(i=>{if(i.status==="cancelled"||i.booking_date!==t)return!1;const o=this.timeToMinutes(i.start_time),l=this.timeToMinutes(i.end_time),c=this.timeToMinutes(n),d=this.timeToMinutes(r);return c<l&&d>o})},async getSpaceBookingsWithDetails(e){const t=await this.getUserSpaceBookings(e);return await Promise.all(t.map(async r=>{const s=await xe.findOne("spaces",{id:r.space_id});return{...r,space:s}}))},async getSpaceBookingsForDate(e,t){return(await xe.query("spaceBookings",{space_id:e})).filter(r=>r.booking_date===t&&r.status!=="cancelled")},timeToMinutes(e){const[t,n]=e.split(":").map(Number);return t*60+n},minutesToTime(e){const t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}};function K4({selectedRoom:e,onDateTimeSelect:t,selectedDates:n=[],recurringPattern:r=null}){var L,O;const[s,i]=R.useState(new Date),[o,l]=R.useState({}),[c,d]=R.useState({}),[h,m]=R.useState(!1),[g,p]=R.useState(!1),[j,N]=R.useState(null);R.useEffect(()=>{e&&w()},[e,s]);const w=async()=>{if(e){m(!0);try{const P=s.getFullYear(),T=s.getMonth(),X=new Date(P,T+1,0).getDate(),te={};for(let oe=1;oe<=X;oe++){const Z=new Date(P,T,oe),se=Z.toISOString().split("T")[0];if(Z<new Date().setHours(0,0,0,0)){te[se]={available:!1,isPast:!0};continue}const ee=await La.getSpaceBookingsForDate(e.id,se),de=9,D=ee.length,H=de-D;te[se]={available:H>0,totalSlots:de,bookedSlots:D,availableSlots:H,bookings:ee}}l(te)}catch(P){console.error("Failed to load availability:",P)}finally{m(!1)}}},y=()=>{const P=[];for(let T=9;T<18;T++)P.push({start:`${T.toString().padStart(2,"0")}:00`,end:`${(T+1).toString().padStart(2,"0")}:00`,label:`${T}:00 - ${T+1}:00`});return P},_=(P,T)=>{const X=o[P];return!X||!X.bookings?!1:X.bookings.some(te=>{const oe=La.timeToMinutes(te.start_time),Z=La.timeToMinutes(te.end_time),se=La.timeToMinutes(T.start),ee=La.timeToMinutes(T.end);return se<Z&&ee>oe})},S=P=>{const T=P.toISOString().split("T")[0],X=o[T];!X||!X.available||X.isPast||(N(T),p(!0))},C=P=>{if(!j||_(j,P))return;const X=c[j]||[];if(X.findIndex(oe=>oe.start===P.start)>=0){const oe=X.filter(Z=>Z.start!==P.start);d({...c,[j]:oe})}else d({...c,[j]:[...X,P]})},q=()=>{t&&t(j,c[j]||[]),p(!1)},W=()=>{i(new Date(s.getFullYear(),s.getMonth()-1))},E=()=>{i(new Date(s.getFullYear(),s.getMonth()+1))},x=()=>{var Z;const P=s.getFullYear(),T=s.getMonth(),X=new Date(P,T,1).getDay(),te=new Date(P,T+1,0).getDate(),oe=[];for(let se=0;se<X;se++)oe.push(a.jsx("div",{className:"calendar-day empty"},`empty-${se}`));for(let se=1;se<=te;se++){const ee=new Date(P,T,se),de=ee.toISOString().split("T")[0],D=o[de]||{},H=D.isPast,J=de===new Date().toISOString().split("T")[0],V=((Z=c[de])==null?void 0:Z.length)>0;let ne="calendar-day";H?ne+=" past":D.available?V?ne+=" selected":D.availableSlots===D.totalSlots?ne+=" fully-available":D.availableSlots>0&&(ne+=" partially-available"):ne+=" unavailable",J&&(ne+=" today"),oe.push(a.jsxs("div",{className:ne,onClick:()=>S(ee),title:D.available?`${D.availableSlots}/${D.totalSlots} slots available`:"No slots available",children:[a.jsx("div",{className:"day-number",children:se}),!H&&D.available&&a.jsx("div",{className:"availability-indicator",children:a.jsx("div",{className:"availability-bar",style:{width:`${D.availableSlots/D.totalSlots*100}%`}})}),V&&a.jsx("div",{className:"selected-badge",children:c[de].length})]},se))}return oe},A=["January","February","March","April","May","June","July","August","September","October","November","December"],U=y();return a.jsxs("div",{className:"room-calendar",children:[a.jsxs("div",{className:"calendar-header",children:[a.jsx("button",{onClick:W,className:"btn-month-nav","aria-label":"Previous month",children:""}),a.jsxs("h3",{className:"calendar-month",children:[A[s.getMonth()]," ",s.getFullYear()]}),a.jsx("button",{onClick:E,className:"btn-month-nav","aria-label":"Next month",children:""})]}),a.jsxs("div",{className:"calendar-legend",children:[a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color fully-available"}),a.jsx("span",{children:"Fully Available"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color partially-available"}),a.jsx("span",{children:"Partially Available"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color unavailable"}),a.jsx("span",{children:"Unavailable"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color selected"}),a.jsx("span",{children:"Selected"})]})]}),a.jsxs("div",{className:"calendar-weekdays",children:[a.jsx("div",{children:"Sun"}),a.jsx("div",{children:"Mon"}),a.jsx("div",{children:"Tue"}),a.jsx("div",{children:"Wed"}),a.jsx("div",{children:"Thu"}),a.jsx("div",{children:"Fri"}),a.jsx("div",{children:"Sat"})]}),a.jsx("div",{className:"calendar-grid",children:h?a.jsx("div",{className:"calendar-loading",children:"Loading availability..."}):x()}),g&&j&&a.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:a.jsxs("div",{className:"modal-content time-modal",onClick:P=>P.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:"Select Time Slots"}),a.jsx("button",{className:"btn-close",onClick:()=>p(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"time-modal-date",children:new Date(j).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsx("div",{className:"time-slots-grid",children:U.map(P=>{var oe;const T=_(j,P),X=(oe=c[j])==null?void 0:oe.some(Z=>Z.start===P.start);let te="time-slot";return T?te+=" booked":X&&(te+=" selected"),a.jsxs("button",{className:te,onClick:()=>C(P),disabled:T,children:[P.label,T&&a.jsx("span",{className:"slot-badge",children:"Booked"}),X&&!T&&a.jsx("span",{className:"slot-badge",children:""})]},P.start)})})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"btn btn-secondary",onClick:()=>p(!1),children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:q,disabled:!((L=c[j])!=null&&L.length),children:["Confirm (",((O=c[j])==null?void 0:O.length)||0," slots)"]})]})]})})]})}const Bt={NONE:"none",DAILY:"daily",WEEKLY:"weekly",BIWEEKLY:"biweekly",MONTHLY:"monthly"},pf=[{value:0,label:"Sun"},{value:1,label:"Mon"},{value:2,label:"Tue"},{value:3,label:"Wed"},{value:4,label:"Thu"},{value:5,label:"Fri"},{value:6,label:"Sat"}];function Z4({onPatternChange:e,initialPattern:t=null}){const[n,r]=R.useState((t==null?void 0:t.type)||Bt.NONE),[s,i]=R.useState((t==null?void 0:t.days)||[]),[o,l]=R.useState((t==null?void 0:t.weekdaysOnly)||!0),[c,d]=R.useState((t==null?void 0:t.endDate)||""),[h,m]=R.useState((t==null?void 0:t.occurrences)||10),g=S=>{if(r(S),(S===Bt.WEEKLY||S===Bt.BIWEEKLY)&&s.length===0){const C=new Date().getDay();i([C])}y(S,s,o,c,h)},p=S=>{let C;s.includes(S)?C=s.filter(q=>q!==S):C=[...s,S].sort((q,W)=>q-W),i(C),y(n,C,o,c,h)},j=S=>{l(S),y(n,s,S,c,h)},N=S=>{d(S),y(n,s,o,S,h)},w=S=>{m(S),y(n,s,o,c,S)},y=(S,C,q,W,E)=>{if(S===Bt.NONE){e(null);return}const x={type:S,days:S===Bt.WEEKLY||S===Bt.BIWEEKLY?C:[],weekdaysOnly:S===Bt.DAILY?q:!1,endDate:W,occurrences:parseInt(E)||10};e(x)},_=()=>{if(n===Bt.NONE)return"No recurrence";let S="";switch(n){case Bt.DAILY:S=o?"Every weekday":"Every day";break;case Bt.WEEKLY:s.length===0?S="Weekly (select days)":S=`Every ${s.map(q=>pf[q].label).join(", ")}`;break;case Bt.BIWEEKLY:s.length===0?S="Bi-weekly (select days)":S=`Every other ${s.map(q=>pf[q].label).join(", ")}`;break;case Bt.MONTHLY:S="Monthly on the same day";break}return c?S+=` until ${new Date(c).toLocaleDateString()}`:S+=` for ${h} occurrences`,S};return a.jsxs("div",{className:"recurring-booking-selector",children:[a.jsxs("div",{className:"recurring-header",children:[a.jsx("h4",{children:"Recurring Booking"}),a.jsx("p",{className:"recurring-description",children:_()})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Recurrence Pattern"}),a.jsxs("select",{value:n,onChange:S=>g(S.target.value),className:"select-input",children:[a.jsx("option",{value:Bt.NONE,children:"One-time booking"}),a.jsx("option",{value:Bt.DAILY,children:"Daily"}),a.jsx("option",{value:Bt.WEEKLY,children:"Weekly"}),a.jsx("option",{value:Bt.BIWEEKLY,children:"Bi-weekly"}),a.jsx("option",{value:Bt.MONTHLY,children:"Monthly"})]})]}),n===Bt.DAILY&&a.jsx("div",{className:"form-group",children:a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:o,onChange:S=>j(S.target.checked)}),a.jsx("span",{children:"Weekdays only (Mon-Fri)"})]})}),(n===Bt.WEEKLY||n===Bt.BIWEEKLY)&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Select Days"}),a.jsx("div",{className:"weekday-selector",children:pf.map(S=>a.jsx("button",{type:"button",className:`weekday-btn ${s.includes(S.value)?"selected":""}`,onClick:()=>p(S.value),children:S.label},S.value))})]}),n!==Bt.NONE&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"End Recurrence"}),a.jsxs("div",{className:"recurrence-end-options",children:[a.jsxs("label",{className:"radio-label",children:[a.jsx("input",{type:"radio",name:"end-type",checked:!c,onChange:()=>N("")}),a.jsx("span",{children:"After"}),a.jsx("input",{type:"number",min:"1",max:"52",value:h,onChange:S=>w(S.target.value),disabled:!!c,className:"occurrences-input"}),a.jsx("span",{children:"occurrences"})]}),a.jsxs("label",{className:"radio-label",children:[a.jsx("input",{type:"radio",name:"end-type",checked:!!c,onChange:()=>{const S=new Date;S.setMonth(S.getMonth()+3),N(S.toISOString().split("T")[0])}}),a.jsx("span",{children:"On date"}),a.jsx("input",{type:"date",value:c,onChange:S=>N(S.target.value),disabled:!c,min:new Date().toISOString().split("T")[0],className:"date-input"})]})]})]}),a.jsxs("div",{className:"recurrence-warning",children:[a.jsx("span",{className:"warning-icon",children:""}),a.jsx("p",{children:"Recurring bookings will be created for all available slots matching this pattern. Conflicts will be skipped."})]})]})]})}function Y4(e,t){if(!t||t.type===Bt.NONE)return[e];const n=[],r=new Date(e);let s=new Date(r),i=0;const o=t.endDate?365:t.occurrences;for(;i<o;){let l=!1;switch(t.type){case Bt.DAILY:if(t.weekdaysOnly){const d=s.getDay();l=d>=1&&d<=5}else l=!0;break;case Bt.WEEKLY:l=t.days.includes(s.getDay());break;case Bt.BIWEEKLY:l=Math.floor((s-r)/(7*24*60*60*1e3))%2===0&&t.days.includes(s.getDay());break;case Bt.MONTHLY:l=s.getDate()===r.getDate();break}if(l){const c=s.toISOString().split("T")[0];if(t.endDate&&c>t.endDate)break;n.push(c),i++}if(s.setDate(s.getDate()+1),t.endDate&&s>new Date(t.endDate))break}return n}function J4(){const{user:e}=xr(),[t,n]=R.useState([]),[r,s]=R.useState(null),[i,o]=R.useState({}),[l,c]=R.useState(null),[d,h]=R.useState(!1),[m,g]=R.useState(""),[p,j]=R.useState(!0),[N,w]=R.useState("calendar"),{toasts:y,showToast:_,removeToast:S}=Hn();R.useEffect(()=>{C()},[]);const C=async()=>{try{const L=await xe.query("spaces");n(L),L.length>0&&s(L[0])}catch(L){console.error("Failed to load spaces:",L)}finally{j(!1)}},q=(L,O)=>{if(O.length===0){const{[L]:P,...T}=i;o(T)}else o({...i,[L]:O})},W=L=>{c(L)},E=()=>Object.values(i).reduce((L,O)=>L+O.length,0),x=()=>Object.keys(i).length,A=()=>{if(E()===0){_("Please select at least one date and time slot","error");return}h(!0)},U=async()=>{if(!m.trim()){_("Please provide a purpose for the booking","error");return}try{let L=Object.keys(i);if(l){const te=L[0],oe=i[te],Z=Y4(te,l),se={};Z.forEach(ee=>{se[ee]=oe}),L=Z,o(se)}const O=L.map(async te=>{const oe=i[te];if(!oe||oe.length===0)return null;const Z=[...oe].sort((de,D)=>La.timeToMinutes(de.start)-La.timeToMinutes(D.start)),se=Z[0].start,ee=Z[Z.length-1].end;return La.createSpaceBooking({space_id:r.id,booking_date:te,start_time:se,end_time:ee,user_id:e.id,purpose:m})}),P=await Promise.allSettled(O),T=P.filter(te=>te.status==="fulfilled").length,X=P.filter(te=>te.status==="rejected").length;h(!1),g(""),o({}),c(null),X===0?_(`Successfully created ${T} booking${T!==1?"s":""}!`,"success"):_(`Created ${T} booking(s), ${X} failed (likely conflicts)`,"warning")}catch(L){_("Failed to create bookings: "+L.message,"error")}};return p?a.jsx("div",{className:"loading",children:"Loading spaces..."}):a.jsxs("div",{className:"room-booking-calendar",children:[a.jsx("h2",{children:"Room & Space Booking"}),a.jsx("p",{className:"subtitle",children:"Select dates and times from the calendar below"}),a.jsxs("div",{className:"booking-controls",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"space-select",children:"Select Space"}),a.jsx("select",{id:"space-select",value:(r==null?void 0:r.id)||"",onChange:L=>{const O=t.find(P=>P.id===L.target.value);s(O),o({})},className:"select-input",children:t.map(L=>a.jsxs("option",{value:L.id,children:[L.name," (Capacity: ",L.capacity,")"]},L.id))})]}),a.jsxs("div",{className:"view-toggle-group",children:[a.jsx("button",{className:`btn ${N==="calendar"?"btn-primary":"btn-secondary"}`,onClick:()=>w("calendar"),children:" Calendar View"}),a.jsx("button",{className:`btn ${N==="legacy"?"btn-primary":"btn-secondary"}`,onClick:()=>w("legacy"),children:" Day View"})]})]}),r&&a.jsxs("div",{className:"space-details",children:[a.jsx("h3",{children:r.name}),a.jsx("p",{children:r.description}),a.jsxs("p",{className:"equipment-list",children:[a.jsx("strong",{children:"Available Equipment:"})," ",r.equipment_available]})]}),N==="calendar"?a.jsxs(a.Fragment,{children:[a.jsx(K4,{selectedRoom:r,onDateTimeSelect:q,selectedDates:Object.keys(i)}),a.jsx(Z4,{onPatternChange:W}),E()>0&&a.jsxs("div",{className:"booking-summary-card",children:[a.jsxs("div",{className:"summary-content",children:[a.jsx("h4",{children:"Booking Summary"}),a.jsxs("p",{children:[a.jsxs("strong",{children:[x()," date",x()!==1?"s":""]})," selected with ",a.jsxs("strong",{children:[E()," time slot",E()!==1?"s":""]})]}),l&&l.type!=="none"&&a.jsx("p",{className:"recurring-info",children:" Recurring pattern will be applied"})]}),a.jsx("button",{onClick:A,className:"btn btn-primary btn-lg",children:"Proceed to Book"})]})]}):a.jsx("div",{className:"legacy-view-message",children:a.jsx("p",{children:"Switch to Calendar View to see room availability and book multiple dates"})}),d&&a.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:a.jsxs("div",{className:"modal-content booking-modal",onClick:L=>L.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Confirm Booking"}),a.jsx("button",{className:"btn-close",onClick:()=>h(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"booking-summary",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Space:"})," ",r.name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Dates:"})," ",x()," date(s)"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Total Time Slots:"})," ",E()]}),l&&l.type!=="none"&&a.jsxs("div",{className:"recurring-summary",children:[a.jsx("p",{className:"recurring-badge",children:" Recurring Booking"}),a.jsx("p",{children:"Pattern will be applied to generate multiple bookings"})]}),a.jsxs("div",{className:"dates-list",children:[a.jsx("h4",{children:"Selected Dates & Times:"}),Object.entries(i).slice(0,5).map(([L,O])=>{const P=[...O].sort((T,X)=>La.timeToMinutes(T.start)-La.timeToMinutes(X.start));return a.jsxs("div",{className:"date-entry",children:[a.jsx("strong",{children:new Date(L).toLocaleDateString()}),a.jsxs("span",{children:[" ",P[0].start," - ",P[P.length-1].end]})]},L)}),Object.keys(i).length>5&&a.jsxs("p",{className:"more-dates",children:["... and ",Object.keys(i).length-5," more"]})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"purpose",children:"Purpose"}),a.jsx("textarea",{id:"purpose",value:m,onChange:L=>g(L.target.value),placeholder:"What will you use this space for?",rows:"3",required:!0})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{onClick:()=>h(!1),className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:U,className:"btn btn-primary",children:"Confirm Booking"})]})]})}),y.map(L=>a.jsx(Vn,{message:L.message,type:L.type,onClose:()=>S(L.id)},L.id)),a.jsx("style",{jsx:!0,children:`
        .room-booking-calendar {
          padding: var(--space-4);
        }

        .booking-controls {
          display: flex;
          gap: var(--space-4);
          margin-bottom: var(--space-4);
          flex-wrap: wrap;
          align-items: flex-end;
        }

        .form-group {
          flex: 1;
          min-width: 250px;
        }

        .view-toggle-group {
          display: flex;
          gap: var(--space-2);
        }

        .space-details {
          background: var(--theme-bg-secondary);
          padding: var(--space-4);
          border-radius: var(--radius-lg);
          margin-bottom: var(--space-4);
        }

        .space-details h3 {
          margin: 0 0 var(--space-2) 0;
        }

        .space-details p {
          margin: var(--space-2) 0;
          color: var(--theme-text-secondary);
        }

        .equipment-list {
          font-size: var(--text-sm);
        }

        .booking-summary-card {
          background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
          color: white;
          padding: var(--space-4);
          border-radius: var(--radius-lg);
          margin-top: var(--space-4);
          display: flex;
          justify-content: space-between;
          align-items: center;
          flex-wrap: wrap;
          gap: var(--space-3);
        }

        .summary-content h4 {
          margin: 0 0 var(--space-2) 0;
        }

        .summary-content p {
          margin: var(--space-1) 0;
        }

        .recurring-info {
          font-style: italic;
          opacity: 0.9;
        }

        .btn-lg {
          padding: var(--space-3) var(--space-6);
          font-size: var(--text-lg);
          font-weight: var(--font-semibold);
        }

        .booking-modal {
          max-width: 600px;
        }

        .booking-summary {
          background: var(--theme-bg-secondary);
          padding: var(--space-4);
          border-radius: var(--radius-md);
          margin-bottom: var(--space-4);
        }

        .recurring-summary {
          background: #fef3c7;
          padding: var(--space-3);
          border-radius: var(--radius-sm);
          margin-top: var(--space-3);
        }

        .recurring-badge {
          color: #92400e;
          font-weight: var(--font-semibold);
          margin-bottom: var(--space-1);
        }

        .dates-list {
          margin-top: var(--space-3);
        }

        .dates-list h4 {
          font-size: var(--text-sm);
          margin-bottom: var(--space-2);
          text-transform: uppercase;
          color: var(--theme-text-secondary);
        }

        .date-entry {
          padding: var(--space-2);
          background: var(--theme-bg-tertiary);
          border-radius: var(--radius-sm);
          margin-bottom: var(--space-1);
          display: flex;
          justify-content: space-between;
        }

        .more-dates {
          font-style: italic;
          color: var(--theme-text-secondary);
          text-align: center;
          margin-top: var(--space-2);
        }

        .legacy-view-message {
          text-align: center;
          padding: var(--space-6);
          background: var(--theme-bg-secondary);
          border-radius: var(--radius-lg);
          color: var(--theme-text-secondary);
        }
      `})]})}async function w5(e){try{const t=await xe.query("equipment"),n=await xe.query("sub_areas"),r=t.filter(i=>i.product_name.toLowerCase().includes(e.toLowerCase())&&i.status==="available"),s={};return r.forEach(i=>{if(!s[i.department]){const o=n.find(l=>l.id===i.sub_area_id);s[i.department]={departmentId:i.department,departmentName:o?o.name:i.department,availableCount:0,equipmentIds:[]}}s[i.department].availableCount++,s[i.department].equipmentIds.push(i.id)}),Object.values(s).sort((i,o)=>o.availableCount-i.availableCount)}catch(t){throw console.error("Error getting equipment availability:",t),t}}async function j5(e,t){try{const n=await w5(e);if(n.length===0)return{routingType:"none",targetDepartments:[],message:`No departments have '${e}' available`};const r=n.find(s=>s.availableCount>=t);return r?{routingType:"single",targetDepartments:[r],message:`Request will be sent to ${r.departmentName} (${r.availableCount} available)`}:{routingType:"broadcast",targetDepartments:n,message:`Request exceeds any single department's capacity. Will be broadcast to all ${n.length} departments with this equipment type.`}}catch(n){throw console.error("Error determining request routing:",n),n}}async function X4(e){const{requestingUserId:t,requestingDepartmentId:n,equipmentType:r,quantity:s,startDate:i,endDate:o,justification:l}=e;try{const c=await j5(r,s);if(c.routingType==="none")throw new Error(c.message);const d=[];if(c.routingType==="single"){const h=c.targetDepartments[0],m={id:`req${Date.now()}`,requesting_user_id:t,requesting_department_id:n,target_department_id:h.departmentId,equipment_type:r,quantity:s,start_date:i,end_date:o,justification:l,status:"pending",routing_type:"single",created_at:new Date().toISOString()},g=xe.getData();g.cross_department_requests=g.cross_department_requests||[],g.cross_department_requests.push(m),xe.saveData(g),d.push(m)}else for(const h of c.targetDepartments){const m={id:`req${Date.now()}_${h.departmentId}`,requesting_user_id:t,requesting_department_id:n,target_department_id:h.departmentId,equipment_type:r,quantity:s,start_date:i,end_date:o,justification:l,status:"pending",routing_type:"broadcast",broadcast_group_id:`bcast${Date.now()}`,available_at_department:h.availableCount,created_at:new Date().toISOString()},g=xe.getData();g.cross_department_requests=g.cross_department_requests||[],g.cross_department_requests.push(m),xe.saveData(g),d.push(m)}return{routingType:c.routingType,message:c.message,requests:d}}catch(c){throw console.error("Error creating cross-department request:",c),c}}async function Q4(e,t=null){try{let n=await xe.query("cross_department_requests",{target_department_id:e});t&&(n=n.filter(s=>s.status===t));const r=await xe.query("users");return n=n.map(s=>{const i=r.find(o=>o.id===s.requesting_user_id);return{...s,requesting_user_name:i?i.full_name:"Unknown",requesting_user_email:i?i.email:""}}),n}catch(n){throw console.error("Error fetching department requests:",n),n}}async function e3(e){try{const t=await xe.query("cross_department_requests",{requesting_user_id:e}),n=await xe.query("sub_areas");return t.map(r=>{const s=n.find(i=>i.id===r.target_department_id);return{...r,target_department_name:s?s.name:r.target_department_id}})}catch(t){throw console.error("Error fetching user requests:",t),t}}async function t3(e,t,n){try{const r=xe.getData(),s=r.cross_department_requests||[],i=s.findIndex(o=>o.id===e);if(i===-1)throw new Error("Request not found");return s[i]={...s[i],status:"approved",reviewed_by:t,reviewed_at:new Date().toISOString(),review_notes:n},r.cross_department_requests=s,xe.saveData(r),console.log(`Request ${e} approved. Staff will receive notification with instructions.`),s[i]}catch(r){throw console.error("Error approving request:",r),r}}async function n3(e,t,n){try{const r=xe.getData(),s=r.cross_department_requests||[],i=s.findIndex(o=>o.id===e);if(i===-1)throw new Error("Request not found");return s[i]={...s[i],status:"denied",reviewed_by:t,reviewed_at:new Date().toISOString(),review_notes:n},r.cross_department_requests=s,xe.saveData(r),s[i]}catch(r){throw console.error("Error denying request:",r),r}}async function r3(e){try{const t=xe.getData(),n=t.cross_department_requests||[],r=n.findIndex(s=>s.id===e);if(r===-1)throw new Error("Request not found");if(n[r].status!=="pending")throw new Error("Only pending requests can be cancelled");return n[r]={...n[r],status:"cancelled",cancelled_at:new Date().toISOString()},t.cross_department_requests=n,xe.saveData(t),n[r]}catch(t){throw console.error("Error cancelling request:",t),t}}function N5(){const e=el(),{user:t}=sn(),[n,r]=R.useState(""),[s,i]=R.useState(1),[o,l]=R.useState(""),[c,d]=R.useState(""),[h,m]=R.useState(""),[g,p]=R.useState(null),[j,N]=R.useState(null),[w,y]=R.useState(!1),[_,S]=R.useState(!1),{toasts:C,showToast:q,removeToast:W}=Hn(),[E,x]=R.useState([]);R.useEffect(()=>{A()},[]);const A=async()=>{try{const P=await xe.query("equipment"),T=[...new Set(P.map(X=>X.product_name))];x(T.sort())}catch(P){console.error("Failed to load equipment types:",P)}},U=async()=>{if(!n||s<1){q("Please select equipment type and quantity","error");return}S(!0);try{const P=await w5(n);p(P);const T=await j5(n,s);N(T)}catch(P){console.error("Failed to check availability:",P),q("Failed to check availability","error")}finally{S(!1)}},L=async P=>{if(P.preventDefault(),!n||s<1||!o||!c||h.trim().length<50){q("Please fill all required fields. Justification must be at least 50 characters.","error");return}y(!0);try{const T={requestingUserId:t.id,requestingDepartmentId:t.department,equipmentType:n,quantity:s,startDate:o,endDate:c,justification:h},X=await X4(T);q(`Request created successfully! ${X.routingType==="broadcast"?`Sent to ${X.requests.length} departments`:"Sent to 1 department"}`,"success"),setTimeout(()=>{e("/staff/my-cross-department-requests")},1500)}catch(T){console.error("Failed to create request:",T),q(T.message||"Failed to create request","error")}finally{y(!1)}},O=()=>{e("/staff")};return a.jsxs("div",{className:"page-container",style:{maxWidth:"900px",margin:"0 auto",padding:"2rem 1rem"},children:[a.jsxs("div",{className:"page-header",style:{marginBottom:"2rem"},children:[a.jsx("button",{onClick:O,className:"btn btn-secondary btn-sm",style:{marginBottom:"1rem"},children:" Back"}),a.jsx("h2",{children:"Request Equipment from Another Department"}),a.jsx("p",{style:{color:"#666",marginTop:"0.5rem"},children:"Request equipment from other departments when your department doesn't have what you need"})]}),a.jsxs("div",{className:"cross-dept-request-form",children:[a.jsxs("form",{onSubmit:L,children:[a.jsxs("div",{className:"form-section",children:[a.jsx("h3",{children:"Equipment Details"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"equipment-type",children:"Equipment Type *"}),a.jsxs("select",{id:"equipment-type",value:n,onChange:P=>r(P.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select equipment type..."}),E.map(P=>a.jsx("option",{value:P,children:P},P))]}),a.jsx("small",{children:"Select the type of equipment you need"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"quantity",children:"Quantity *"}),a.jsx("input",{type:"number",id:"quantity",min:"1",max:"50",value:s,onChange:P=>i(parseInt(P.target.value)),required:!0}),a.jsx("small",{children:"How many items do you need?"})]}),a.jsx("button",{type:"button",onClick:U,className:"btn btn-secondary btn-sm",disabled:!n||s<1||_,style:{marginTop:"0.5rem"},children:_?"Checking...":"Check Availability"})]}),g&&a.jsxs("div",{className:"availability-preview",children:[a.jsx("h4",{children:"Equipment Availability Across Departments"}),g.length===0?a.jsxs("p",{className:"no-availability",children:['No departments have "',n,'" available']}):a.jsxs("table",{className:"availability-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Available"})]})}),a.jsx("tbody",{children:g.map(P=>a.jsxs("tr",{children:[a.jsx("td",{children:P.departmentName}),a.jsx("td",{className:"availability-count",children:P.availableCount})]},P.departmentId))})]})]}),j&&a.jsxs("div",{className:`routing-preview routing-${j.routingType}`,children:[a.jsxs("h4",{children:[j.routingType==="single"&&" Single Department Request",j.routingType==="broadcast"&&" Broadcast Request"]}),a.jsx("p",{children:j.message})]}),a.jsxs("div",{className:"form-section",children:[a.jsx("h3",{children:"Booking Dates"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"start-date",children:"Start Date *"}),a.jsx("input",{type:"date",id:"start-date",value:o,onChange:P=>l(P.target.value),min:new Date().toISOString().split("T")[0],required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"end-date",children:"End Date *"}),a.jsx("input",{type:"date",id:"end-date",value:c,onChange:P=>d(P.target.value),min:o||new Date().toISOString().split("T")[0],required:!0})]})]}),a.jsxs("div",{className:"form-section",children:[a.jsx("h3",{children:"Justification"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"justification",children:"Why do you need this equipment? *"}),a.jsx("textarea",{id:"justification",value:h,onChange:P=>m(P.target.value),rows:"5",placeholder:"Provide a detailed justification for your request (minimum 50 characters)...",required:!0,minLength:"50"}),a.jsxs("small",{className:h.length<50?"text-error":"text-success",children:[h.length," / 50 characters minimum"]})]})]}),a.jsxs("div",{className:"form-actions",style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"2rem",paddingTop:"1.5rem",borderTop:"1px solid #dee2e6"},children:[a.jsx("button",{type:"button",onClick:O,className:"btn btn-secondary",disabled:w,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:w||j&&j.routingType==="none",children:w?"Submitting...":"Submit Request"})]})]}),C.map(P=>a.jsx(Vn,{message:P.message,type:P.type,onClose:()=>W(P.id)},P.id))]})]})}function a3(){const{user:e}=sn(),[t,n]=R.useState([]),[r,s]=R.useState(!0),[i,o]=R.useState(!1),[l,c]=R.useState("all"),{toasts:d,showToast:h,removeToast:m}=Hn();R.useEffect(()=>{g()},[]);const g=async()=>{s(!0);try{const y=await e3(e.id);n(y)}catch(y){console.error("Failed to load requests:",y),h("Failed to load requests","error")}finally{s(!1)}},p=async y=>{if(confirm("Are you sure you want to cancel this request?"))try{await r3(y),h("Request cancelled successfully","success"),g()}catch(_){console.error("Failed to cancel request:",_),h(_.message||"Failed to cancel request","error")}},j=()=>{g()},N=l==="all"?t:t.filter(y=>y.status===l),w=y=>({pending:"status-pending",approved:"status-approved",denied:"status-denied",cancelled:"status-cancelled"})[y]||"";return r?a.jsxs("div",{className:"my-cross-dept-requests",children:[a.jsx("h2",{children:"My Cross-Department Requests"}),a.jsx("p",{children:"Loading requests..."})]}):a.jsxs("div",{className:"my-cross-dept-requests",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h2",{children:"My Cross-Department Equipment Requests"}),a.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary",children:"+ New Request"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsxs("button",{onClick:()=>c("all"),className:l==="all"?"tab-active":"tab",children:["All (",t.length,")"]}),a.jsxs("button",{onClick:()=>c("pending"),className:l==="pending"?"tab-active":"tab",children:["Pending (",t.filter(y=>y.status==="pending").length,")"]}),a.jsxs("button",{onClick:()=>c("approved"),className:l==="approved"?"tab-active":"tab",children:["Approved (",t.filter(y=>y.status==="approved").length,")"]}),a.jsxs("button",{onClick:()=>c("denied"),className:l==="denied"?"tab-active":"tab",children:["Denied (",t.filter(y=>y.status==="denied").length,")"]})]}),N.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsxs("p",{children:["No ",l!=="all"?l:""," requests found."]}),l==="all"&&a.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary",style:{marginTop:"1rem"},children:"Create Your First Request"})]}):a.jsx("div",{className:"requests-list",children:N.map(y=>a.jsxs("div",{className:"request-card",children:[a.jsxs("div",{className:"request-header",children:[a.jsxs("div",{children:[a.jsx("h3",{children:y.equipment_type}),a.jsx("span",{className:`status-badge ${w(y.status)}`,children:y.status.charAt(0).toUpperCase()+y.status.slice(1)})]}),y.status==="pending"&&a.jsx("button",{onClick:()=>p(y.id),className:"btn btn-secondary btn-sm",children:"Cancel Request"})]}),a.jsxs("div",{className:"request-details",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Target Department:"}),a.jsx("span",{className:"detail-value",children:y.target_department_name})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Quantity:"}),a.jsx("span",{className:"detail-value",children:y.quantity})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Dates:"}),a.jsxs("span",{className:"detail-value",children:[new Date(y.start_date).toLocaleDateString()," - ",new Date(y.end_date).toLocaleDateString()]})]}),y.routing_type&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Request Type:"}),a.jsx("span",{className:"detail-value",children:y.routing_type==="broadcast"?" Broadcast to Multiple Departments":" Single Department"})]})]}),a.jsxs("div",{className:"request-justification",children:[a.jsx("strong",{children:"Justification:"}),a.jsx("p",{children:y.justification})]}),y.status==="approved"&&y.review_notes&&a.jsxs("div",{className:"request-instructions approved",children:[a.jsx("strong",{children:" Approved - Collection Instructions:"}),a.jsx("p",{children:y.review_notes}),a.jsxs("small",{children:["Reviewed: ",new Date(y.reviewed_at).toLocaleString()]})]}),y.status==="denied"&&y.review_notes&&a.jsxs("div",{className:"request-instructions denied",children:[a.jsx("strong",{children:" Denied - Reason:"}),a.jsx("p",{children:y.review_notes}),a.jsxs("small",{children:["Reviewed: ",new Date(y.reviewed_at).toLocaleString()]})]}),a.jsx("div",{className:"request-metadata",children:a.jsxs("small",{children:["Created: ",new Date(y.created_at).toLocaleString()]})})]},y.id))}),i&&a.jsx(N5,{onClose:()=>o(!1),onSuccess:j}),d.map(y=>a.jsx(Vn,{message:y.message,type:y.type,onClose:()=>m(y.id)},y.id)),a.jsx("style",{jsx:!0,children:`
        .my-cross-dept-requests {
          padding: 2rem;
        }

        .page-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 2rem;
        }

        .filter-tabs {
          display: flex;
          gap: 0.5rem;
          margin-bottom: 2rem;
          border-bottom: 2px solid #eee;
        }

        .tab,
        .tab-active {
          padding: 0.75rem 1.5rem;
          border: none;
          background: none;
          cursor: pointer;
          font-weight: 600;
          color: #666;
          border-bottom: 3px solid transparent;
          transition: all 0.2s;
        }

        .tab:hover {
          color: #333;
          background-color: #f5f5f5;
        }

        .tab-active {
          color: #1976d2;
          border-bottom-color: #1976d2;
        }

        .requests-list {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
        }

        .request-card {
          background: #fff;
          border: 1px solid #ddd;
          border-radius: 8px;
          padding: 1.5rem;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .request-header {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          margin-bottom: 1rem;
        }

        .request-header h3 {
          margin: 0 0 0.5rem 0;
          color: #333;
        }

        .status-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 12px;
          font-size: 0.875rem;
          font-weight: 600;
        }

        .status-pending {
          background-color: #fff3cd;
          color: #856404;
        }

        .status-approved {
          background-color: #d4edda;
          color: #155724;
        }

        .status-denied {
          background-color: #f8d7da;
          color: #721c24;
        }

        .status-cancelled {
          background-color: #e2e3e5;
          color: #383d41;
        }

        .request-details {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
          margin-bottom: 1rem;
        }

        .detail-row {
          display: flex;
          gap: 0.5rem;
        }

        .detail-label {
          font-weight: 600;
          color: #666;
          min-width: 150px;
        }

        .detail-value {
          color: #333;
        }

        .request-justification {
          margin-top: 1rem;
          padding: 1rem;
          background-color: #f5f5f5;
          border-radius: 4px;
        }

        .request-justification strong {
          display: block;
          margin-bottom: 0.5rem;
          color: #333;
        }

        .request-justification p {
          margin: 0;
          color: #555;
          line-height: 1.5;
        }

        .request-instructions {
          margin-top: 1rem;
          padding: 1rem;
          border-radius: 4px;
          border-left: 4px solid;
        }

        .request-instructions.approved {
          background-color: #e8f5e9;
          border-left-color: #4caf50;
        }

        .request-instructions.denied {
          background-color: #ffebee;
          border-left-color: #f44336;
        }

        .request-instructions strong {
          display: block;
          margin-bottom: 0.5rem;
          color: #333;
        }

        .request-instructions p {
          margin: 0 0 0.5rem 0;
          color: #555;
          line-height: 1.5;
        }

        .request-instructions small {
          color: #999;
          font-size: 0.85rem;
        }

        .request-metadata {
          margin-top: 1rem;
          padding-top: 1rem;
          border-top: 1px solid #eee;
        }

        .request-metadata small {
          color: #999;
        }

        .empty-state {
          text-align: center;
          padding: 3rem;
          color: #666;
        }

        @media (max-width: 768px) {
          .my-cross-dept-requests {
            padding: 1rem;
          }

          .page-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
          }

          .filter-tabs {
            flex-wrap: wrap;
          }

          .request-header {
            flex-direction: column;
            gap: 1rem;
          }

          .detail-label {
            min-width: 120px;
          }
        }
      `})]})}function s3(){const{user:e,logout:t}=sn();return a.jsxs("div",{className:"staff-portal",children:[a.jsx("header",{className:"staff-header",children:a.jsxs("div",{className:"staff-header-content",children:[a.jsx("h1",{children:" NCADbook Staff"}),a.jsxs("div",{className:"staff-header-actions",children:[a.jsx(Jm,{}),a.jsx("span",{className:"staff-user-info",children:e==null?void 0:e.full_name}),a.jsx("button",{onClick:t,className:"btn btn-secondary btn-sm",children:"Logout"})]})]})}),a.jsxs("nav",{className:"staff-nav",children:[a.jsx(pn,{to:"/staff",end:!0,className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" Dashboard"}),a.jsx(pn,{to:"/staff/rooms",className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" Book Rooms"}),a.jsx(pn,{to:"/staff/equipment",className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" Equipment"}),a.jsx(pn,{to:"/staff/bookings",className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" My Bookings"}),a.jsx(pn,{to:"/staff/cross-department-requests",className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" Request Equipment"}),a.jsx(pn,{to:"/staff/my-cross-department-requests",className:({isActive:n})=>`staff-nav-link ${n?"active":""}`,children:" My Requests"})]}),a.jsx("main",{className:"staff-main",children:a.jsxs(rh,{children:[a.jsx(mt,{index:!0,element:a.jsx(G4,{})}),a.jsx(mt,{path:"rooms",element:a.jsx(J4,{})}),a.jsx(mt,{path:"equipment",element:a.jsx(b5,{})}),a.jsx(mt,{path:"bookings",element:a.jsx(_5,{})}),a.jsx(mt,{path:"cross-department-requests",element:a.jsx(N5,{})}),a.jsx(mt,{path:"my-cross-department-requests",element:a.jsx(a3,{})})]})}),a.jsx(Xm,{})]})}function i3(){const{user:e}=xr(),[t,n]=R.useState({totalBookings:0,pendingBookings:0,approvedBookings:0,totalEquipment:0,availableEquipment:0,totalUsers:0}),[r,s]=R.useState(!0);R.useEffect(()=>{i()},[]);const i=async()=>{try{const o=await xe.query("bookings"),l=await xe.query("equipment"),c=await xe.query("users");n({totalBookings:o.length,pendingBookings:o.filter(d=>d.status==="pending").length,approvedBookings:o.filter(d=>d.status==="approved").length,totalEquipment:l.length,availableEquipment:l.filter(d=>d.status==="available").length,totalUsers:c.filter(d=>d.role==="student").length})}catch(o){console.error("Failed to load stats:",o)}finally{s(!1)}};return r?a.jsx("div",{className:"admin-dashboard",children:a.jsx("div",{className:"admin-stats-grid",children:[1,2,3,4,5].map(o=>a.jsx("div",{className:"admin-skeleton"},o))})}):a.jsxs("div",{className:"admin-dashboard",children:[a.jsxs("div",{className:"admin-welcome",children:[a.jsxs("h2",{children:["Welcome, ",e==null?void 0:e.first_name,"! "]}),a.jsxs("p",{children:[(e==null?void 0:e.role)==="master_admin"?"Master Admin":"Department Admin"," Dashboard Overview"]})]}),a.jsxs("div",{className:"admin-stats-grid",children:[a.jsxs("div",{className:"admin-stat-card",children:[a.jsx("div",{className:"admin-stat-icon",children:""}),a.jsx("div",{className:"admin-stat-number",children:t.totalBookings}),a.jsx("div",{className:"admin-stat-label",children:"Total Bookings"})]}),a.jsxs("div",{className:"admin-stat-card",children:[a.jsx("div",{className:"admin-stat-icon",children:""}),a.jsx("div",{className:"admin-stat-number",children:t.pendingBookings}),a.jsx("div",{className:"admin-stat-label",children:"Pending Approval"})]}),a.jsxs("div",{className:"admin-stat-card",children:[a.jsx("div",{className:"admin-stat-icon",children:""}),a.jsx("div",{className:"admin-stat-number",children:t.approvedBookings}),a.jsx("div",{className:"admin-stat-label",children:"Approved"})]}),a.jsxs("div",{className:"admin-stat-card",children:[a.jsx("div",{className:"admin-stat-icon",children:""}),a.jsxs("div",{className:"admin-stat-number",children:[t.availableEquipment,"/",t.totalEquipment]}),a.jsx("div",{className:"admin-stat-label",children:"Equipment Available"})]}),a.jsxs("div",{className:"admin-stat-card",children:[a.jsx("div",{className:"admin-stat-icon",children:""}),a.jsx("div",{className:"admin-stat-number",children:t.totalUsers}),a.jsx("div",{className:"admin-stat-label",children:"Students"})]})]}),a.jsxs("div",{className:"admin-dashboard-grid",children:[a.jsxs("div",{className:"admin-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"admin-card-icon",children:""})," Quick Actions"]}),a.jsxs("div",{className:"admin-quick-actions",children:[a.jsxs("a",{href:"/admin/approvals",className:"admin-action-btn",children:[" Review Pending Bookings (",t.pendingBookings,")"]}),a.jsx("a",{href:"/admin/equipment",className:"admin-action-btn secondary",children:" Manage Equipment"}),(e==null?void 0:e.role)==="master_admin"&&a.jsx("a",{href:"/admin/users",className:"admin-action-btn secondary",children:" Manage Users"})]})]}),a.jsxs("div",{className:"admin-card",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"admin-card-icon",children:""})," Admin Info"]}),a.jsxs("div",{className:"admin-info-content",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Role:"})," ",(e==null?void 0:e.role)==="master_admin"?"Master Admin":"Department Admin"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Department:"})," ",(e==null?void 0:e.department)||"System"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",e==null?void 0:e.email]})]})]})]})]})}function o3({selectedCount:e,onApproveAll:t,onDenyAll:n,onClearSelection:r,loading:s=!1,actions:i=[]}){if(e===0)return null;const o=[{label:"Approve Selected",onClick:t,className:"btn-success",testId:"bulk-approve-btn"},{label:"Deny Selected",onClick:n,className:"btn-error",testId:"bulk-deny-btn"}],l=i.length>0?i:o;return a.jsxs("div",{className:"bulk-action-bar",role:"toolbar","aria-label":"Bulk actions",children:[a.jsxs("div",{className:"bulk-action-info",children:[a.jsxs("span",{className:"selected-count","data-testid":"selected-count",children:[e," item",e!==1?"s":""," selected"]}),a.jsx("button",{onClick:r,className:"btn-text",disabled:s,"data-testid":"clear-selection-btn",children:"Clear selection"})]}),a.jsx("div",{className:"bulk-action-buttons",children:l.map((c,d)=>a.jsx("button",{onClick:c.onClick,disabled:s,className:`btn btn-sm ${c.className||"btn-primary"}`,"data-testid":c.testId,children:s?"Processing...":c.label},d))})]})}function l3({booking:e,onApprove:t,onDeny:n,onSelectToggle:r,isSelected:s,formatDate:i,getStatusColor:o,children:l}){var A,U,L,O,P,T;const[c,d]=R.useState(0),[h,m]=R.useState(!1),[g,p]=R.useState(0),j=R.useRef(null),N=100,w=X=>{e.status==="pending"&&(p(X.touches[0].clientX),m(!0))},y=X=>{if(!h||e.status!=="pending")return;const oe=X.touches[0].clientX-g,Z=150,se=Math.max(-Z,Math.min(Z,oe));d(se)},_=()=>{!h||e.status!=="pending"||(c>N?(t(e.id),window.navigator.vibrate&&window.navigator.vibrate(50)):c<-N&&(n(e),window.navigator.vibrate&&window.navigator.vibrate([50,50])),d(0),m(!1))},S=X=>{e.status==="pending"&&(p(X.clientX),m(!0))},C=X=>{if(!h||e.status!=="pending")return;const oe=X.clientX-g,Z=150,se=Math.max(-Z,Math.min(Z,oe));d(se)},q=()=>{!h||e.status!=="pending"||(c>N?t(e.id):c<-N&&n(e),d(0),m(!1))};R.useEffect(()=>{const X=te=>{h&&te.preventDefault()};return document.addEventListener("mousemove",C),document.addEventListener("mouseup",q),document.addEventListener("touchmove",X,{passive:!1}),()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",q),document.removeEventListener("touchmove",X)}},[h,c]);const E=c>50?"approve":c<-50?"deny":null,x=Math.min(Math.abs(c)/N,1);return a.jsxs("div",{ref:j,className:`swipe-action-card ${h?"dragging":""} ${E?`hint-${E}`:""}`,style:{transform:`translateX(${c}px)`,transition:h?"none":"transform 0.3s ease-out"},onTouchStart:w,onTouchMove:y,onTouchEnd:_,onMouseDown:S,"data-testid":"swipe-action-card",children:[e.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"swipe-action-bg swipe-approve",style:{opacity:c>0?x:0},children:[a.jsx("span",{className:"action-icon",children:""}),a.jsx("span",{className:"action-text",children:"Approve"})]}),a.jsxs("div",{className:"swipe-action-bg swipe-deny",style:{opacity:c<0?x:0},children:[a.jsx("span",{className:"action-icon",children:""}),a.jsx("span",{className:"action-text",children:"Deny"})]})]}),a.jsxs("div",{className:"approval-item","data-testid":"booking-card",children:[a.jsxs("div",{className:"approval-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[e.status==="pending"&&r&&a.jsx("input",{type:"checkbox",checked:s,onChange:()=>r(e.id),"data-testid":`select-booking-${e.id}`,"aria-label":`Select booking for ${(A=e.equipment)==null?void 0:A.product_name}`,style:{marginTop:"0.25rem"},onClick:X=>X.stopPropagation()}),a.jsxs("div",{children:[a.jsx("h3",{children:((U=e.equipment)==null?void 0:U.product_name)||"Unknown Equipment"}),a.jsxs("p",{className:"student-name",children:["Requested by: ",((L=e.student)==null?void 0:L.full_name)||"Unknown","(",(O=e.student)==null?void 0:O.department,")"]})]})]}),a.jsx("span",{className:"status-badge status-"+o(e.status),children:e.status})]}),a.jsxs("div",{className:"approval-details",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Equipment:"}),a.jsxs("span",{children:[(P=e.equipment)==null?void 0:P.category," - ",(T=e.equipment)==null?void 0:T.tracking_number]})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Dates:"}),a.jsxs("span",{children:[i(e.start_date)," - ",i(e.end_date)]})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Purpose:"}),a.jsx("span",{children:e.purpose||"Not provided"})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"label",children:"Requested:"}),a.jsx("span",{children:i(e.created_at)})]}),e.denial_reason&&a.jsxs("div",{className:"detail-row error",children:[a.jsx("span",{className:"label",children:"Denial Reason:"}),a.jsx("span",{children:e.denial_reason})]})]}),l]})]})}function c3(){var me;const{user:e}=xr(),[t,n]=R.useState([]),[r,s]=R.useState([]),[i,o]=R.useState(!0),[l,c]=R.useState("pending"),[d,h]=R.useState(null),[m,g]=R.useState(!1),[p,j]=R.useState(""),[N,w]=R.useState(""),[y,_]=R.useState(1),S=20,[C,q]=R.useState([]),[W,E]=R.useState(!1),{toasts:x,showToast:A,removeToast:U}=Hn();R.useEffect(()=>{L()},[l]),R.useEffect(()=>{let re=t;if(N.trim()){const fe=N.toLowerCase();re=re.filter(be=>{var Se,Ae,ye,Q;return((Se=be.equipment)==null?void 0:Se.product_name.toLowerCase().includes(fe))||((Ae=be.student)==null?void 0:Ae.full_name.toLowerCase().includes(fe))||((ye=be.student)==null?void 0:ye.email.toLowerCase().includes(fe))||((Q=be.purpose)==null?void 0:Q.toLowerCase().includes(fe))})}s(re),_(1)},[t,N]);const L=async()=>{o(!0);try{const re=await xe.query("bookings"),fe=await Promise.all(re.map(async Se=>{const Ae=await xe.findOne("equipment",{id:Se.equipment_id}),ye=await xe.findOne("users",{id:Se.user_id});return{...Se,equipment:Ae,student:ye}})),be=l==="all"?fe:fe.filter(Se=>Se.status===l);n(be.sort((Se,Ae)=>new Date(Ae.created_at)-new Date(Se.created_at)))}catch(re){console.error("Failed to load bookings:",re)}finally{o(!1)}},O=async re=>{try{const fe=t.find(be=>be.id===re);await xe.update("bookings",{id:re},{status:"approved",approved_by:e.id,approved_at:new Date().toISOString()});try{const be=[fe.equipment],Se=await Un.sendBookingApproved(fe,fe.student,be,e);!Se.success&&Un.isConfigured()&&console.warn("Email notification failed:",Se.error)}catch(be){console.error("Failed to send approval email:",be)}await L(),A("Booking approved successfully","success")}catch(fe){A("Failed to approve booking: "+fe.message,"error")}},P=re=>{h(re),g(!0)},T=async()=>{if(!p.trim()){A("Please provide a reason for denial","error");return}try{await xe.update("bookings",{id:d.id},{status:"denied",denied_by:e.id,denied_at:new Date().toISOString(),denial_reason:p});try{const re=[d.equipment],fe=await Un.sendBookingDenied(d,d.student,re,e,p);!fe.success&&Un.isConfigured()&&console.warn("Email notification failed:",fe.error)}catch(re){console.error("Failed to send denial email:",re)}g(!1),j(""),h(null),await L(),A("Booking denied","success")}catch(re){A("Failed to deny booking: "+re.message,"error")}},X=re=>new Date(re).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),te=re=>({pending:"warning",approved:"success",denied:"error",cancelled:"secondary"})[re]||"secondary",oe=re=>{w(re)},Z=re=>{_(re),window.scrollTo({top:0,behavior:"smooth"})},se=async()=>{await L()},ee=re=>{q(fe=>fe.includes(re)?fe.filter(be=>be!==re):[...fe,re])},de=()=>{C.length===le.length?q([]):q(le.map(re=>re.id))},D=async()=>{E(!0);try{const re=C.map(async fe=>{const be=t.find(Se=>Se.id===fe);await xe.update("bookings",{id:fe},{status:"approved",approved_by:e.id,approved_at:new Date().toISOString()});try{const Se=[be.equipment];await Un.sendBookingApproved(be,be.student,Se,e)}catch(Se){console.error("Failed to send approval email:",Se)}});await Promise.all(re),await L(),q([]),A(`Successfully approved ${re.length} booking(s)`,"success")}catch(re){A("Failed to approve bookings: "+re.message,"error")}finally{E(!1)}},H=()=>{C.length!==0&&(h(null),g(!0))},J=async()=>{if(!p.trim()){A("Please provide a reason for denial","error");return}E(!0);try{const re=C.map(async fe=>{const be=t.find(Se=>Se.id===fe);await xe.update("bookings",{id:fe},{status:"denied",denied_by:e.id,denied_at:new Date().toISOString(),denial_reason:p});try{const Se=[be.equipment];await Un.sendBookingDenied(be,be.student,Se,e,p)}catch(Se){console.error("Failed to send denial email:",Se)}});await Promise.all(re),await L(),q([]),g(!1),j(""),A(`Successfully denied ${re.length} booking(s)`,"success")}catch(re){A("Failed to deny bookings: "+re.message,"error")}finally{E(!1)}},V=(y-1)*S,ne=V+S,le=r.slice(V,ne);return a.jsxs("div",{className:"booking-approvals","data-testid":"booking-approvals",children:[a.jsxs(e0,{onRefresh:se,children:[a.jsxs("div",{className:"approvals-header",children:[a.jsx("h2",{children:"Booking Approvals"}),a.jsx("div",{className:"filter-controls",children:["pending","approved","denied","cancelled","all"].map(re=>a.jsx("button",{onClick:()=>c(re),className:l===re?"btn btn-primary btn-sm":"btn btn-secondary btn-sm","data-testid":`filter-${re}`,children:re.charAt(0).toUpperCase()+re.slice(1)},re))})]}),a.jsx(ah,{onSearch:oe,placeholder:"Search by equipment, student name, or purpose...",ariaLabel:"Search bookings"}),l==="pending"&&le.length>0&&a.jsx(o3,{selectedCount:C.length,onApproveAll:D,onDenyAll:H,onClearSelection:()=>q([]),loading:W}),i?a.jsx("div",{className:"approvals-list",children:a.jsx(jc,{type:"list-item",count:8})}):r.length===0?a.jsx("div",{className:"empty-state","data-testid":"empty-state",children:a.jsxs("p",{children:["No ",l!=="all"?l:""," bookings found",N?" matching your search":""]})}):a.jsxs(a.Fragment,{children:[l==="pending"&&le.length>0&&a.jsx("div",{className:"select-all-container",style:{marginBottom:"1rem"},children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:C.length===le.length&&le.length>0,onChange:de,"data-testid":"select-all-checkbox"}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:"Select All on Page"})]})}),a.jsx("div",{className:"approvals-list","data-testid":"bookings-list",children:le.map(re=>a.jsx(l3,{booking:re,onApprove:O,onDeny:P,onSelectToggle:ee,isSelected:C.includes(re.id),formatDate:X,getStatusColor:te,children:re.status==="pending"&&a.jsxs("div",{className:"approval-actions",children:[a.jsx("button",{onClick:()=>O(re.id),className:"btn btn-primary btn-sm","data-testid":"approve-btn",children:"Approve"}),a.jsx("button",{onClick:()=>{h(re),g(!0)},className:"btn btn-secondary btn-sm","data-testid":"deny-btn",children:"Deny"})]})},re.id))}),a.jsx(wc,{currentPage:y,totalItems:r.length,itemsPerPage:S,onPageChange:Z,loading:i})]})]}),m&&a.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),"data-testid":"modal-overlay",children:a.jsxs("div",{className:"modal-content",onClick:re=>re.stopPropagation(),"data-testid":"deny-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{children:["Deny Booking",C.length>0?"s":""]}),a.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[C.length>0?a.jsxs("p",{children:["Deny ",a.jsx("strong",{children:C.length})," selected booking(s)?"]}):d?a.jsxs("p",{children:["Deny booking for ",a.jsx("strong",{children:(me=d.equipment)==null?void 0:me.product_name}),"?"]}):null,a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"deny-reason",children:"Reason for Denial (required)"}),a.jsx("textarea",{id:"deny-reason",value:p,onChange:re=>j(re.target.value),placeholder:"Explain why this booking is being denied...",rows:"4",required:!0,"data-testid":"deny-reason-input"})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:()=>g(!1),className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:C.length>0?J:T,className:"btn btn-primary","data-testid":"confirm-deny-btn",disabled:W,children:W?"Processing...":"Deny Booking"})]})]})]})}),x.map(re=>a.jsx(Vn,{message:re.message,type:re.type,onClose:()=>U(re.id)},re.id))]})}function d3({equipmentId:e,equipmentName:t}){const{user:n}=sn(),[r,s]=R.useState([]),[i,o]=R.useState(!1),[l,c]=R.useState({type:"general",content:""}),[d,h]=R.useState(!1);R.useEffect(()=>{m()},[e]);const m=()=>{const N=JSON.parse(localStorage.getItem("ncadbook_demo_data")),_=(N.demoEquipmentNotes||[]).filter(S=>S.equipment_id===e).sort((S,C)=>new Date(C.created_at)-new Date(S.created_at)).map(S=>{const C=N.users.find(q=>q.id===S.created_by);return{...S,creator_name:C?C.full_name:"Unknown"}});s(_)},g=async()=>{if(!l.content.trim()){alert("Please enter a note");return}h(!0);const N=JSON.parse(localStorage.getItem("ncadbook_demo_data")),w={id:`en${Date.now()}`,equipment_id:e,note_type:l.type,note:l.content,created_by:n.id,created_at:new Date().toISOString()};N.demoEquipmentNotes=N.demoEquipmentNotes||[],N.demoEquipmentNotes.push(w),localStorage.setItem("ncadbook_demo_data",JSON.stringify(N)),c({type:"general",content:""}),o(!1),h(!1),m()},p=N=>{const w={maintenance:"#3b82f6",damage:"#ef4444",usage:"#10b981",general:"#64748b"};return w[N]||w.general},j=N=>{const w={maintenance:"M",damage:"D",usage:"U",general:"G"};return w[N]||w.general};return n.role!=="admin"&&n.role!=="master_admin"?null:a.jsxs("div",{className:"equipment-notes-section",children:[a.jsxs("div",{className:"notes-header",children:[a.jsx("h3",{children:"Equipment Notes"}),a.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary btn-sm",children:"+ Add Note"})]}),r.length===0?a.jsx("div",{className:"empty-notes",children:a.jsx("p",{children:"No notes for this equipment yet."})}):a.jsx("div",{className:"notes-list",children:r.map(N=>a.jsxs("div",{className:"note-item",style:{borderLeftColor:p(N.note_type)},children:[a.jsxs("div",{className:"note-header",children:[a.jsxs("div",{className:"note-type",children:[a.jsx("span",{className:"note-icon",children:j(N.note_type)}),a.jsx("span",{className:"note-type-label",children:N.note_type})]}),a.jsxs("div",{className:"note-meta",children:[a.jsx("span",{className:"note-creator",children:N.creator_name}),a.jsx("span",{className:"note-date",children:new Date(N.created_at).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),a.jsx("div",{className:"note-content",children:N.note})]},N.id))}),i&&a.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:a.jsxs("div",{className:"modal-content",onClick:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{children:["Add Note - ",t]}),a.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"note-type",children:"Note Type"}),a.jsxs("select",{id:"note-type",value:l.type,onChange:N=>c({...l,type:N.target.value}),className:"select-input",children:[a.jsx("option",{value:"general",children:"General"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"damage",children:"Damage"}),a.jsx("option",{value:"usage",children:"Usage"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"note-content",children:"Note"}),a.jsx("textarea",{id:"note-content",value:l.content,onChange:N=>c({...l,content:N.target.value}),placeholder:"Enter note details...",rows:"5",className:"form-textarea"})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:()=>o(!1),className:"btn btn-secondary",disabled:d,children:"Cancel"}),a.jsx("button",{onClick:g,className:"btn btn-primary",disabled:d,children:d?"Adding...":"Add Note"})]})]})]})})]})}function u3(){const[e,t]=R.useState([]),[n,r]=R.useState([]),[s,i]=R.useState(!0),[o,l]=R.useState("all"),[c,d]=R.useState(!1),[h,m]=R.useState(null),[g,p]=R.useState(""),[j,N]=R.useState(1),w=20;R.useEffect(()=>{y()},[o]),R.useEffect(()=>{let x=e;if(g.trim()){const A=g.toLowerCase();x=x.filter(U=>U.product_name.toLowerCase().includes(A)||U.description.toLowerCase().includes(A)||U.tracking_number.toLowerCase().includes(A)||U.category.toLowerCase().includes(A))}r(x),N(1)},[e,g]);const y=async()=>{i(!0);try{const x=o==="all"?{}:{status:o},A=await xe.query("equipment",x);t(A)}catch(x){console.error("Failed to load equipment:",x)}finally{i(!1)}},_=async(x,A)=>{try{await xe.update("equipment",{id:x},{status:A}),await y(),alert("Equipment status updated")}catch(U){alert("Failed to update status: "+U.message)}},S=x=>{p(x)},C=x=>{N(x),window.scrollTo({top:0,behavior:"smooth"})},q=(j-1)*w,W=q+w,E=n.slice(q,W);return a.jsxs("div",{className:"equipment-management",children:[a.jsx("h2",{children:"Equipment Management"}),a.jsx("p",{className:"subtitle",children:"Manage equipment inventory and status"}),a.jsx(ah,{onSearch:S,placeholder:"Search by name, tracking number, or category...",ariaLabel:"Search equipment"}),a.jsx("div",{className:"management-controls",children:a.jsx("div",{className:"filter-controls",children:["all","available","booked","maintenance"].map(x=>a.jsx("button",{onClick:()=>l(x),className:o===x?"btn btn-primary btn-sm":"btn btn-secondary btn-sm",children:x.charAt(0).toUpperCase()+x.slice(1)},x))})}),s?a.jsx("div",{className:"equipment-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Equipment"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Tracking #"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:a.jsx(jc,{type:"table-row",count:10})})]})}):n.length===0?a.jsx("div",{className:"empty-state",children:a.jsxs("p",{children:["No equipment found",g?" matching your search":""]})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"equipment-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Equipment"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Tracking #"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:E.map(x=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("strong",{children:x.product_name}),a.jsx("br",{}),a.jsx("small",{children:x.description})]}),a.jsx("td",{children:x.category}),a.jsx("td",{className:"tracking-number",children:x.tracking_number}),a.jsx("td",{children:x.department}),a.jsx("td",{children:a.jsxs("select",{value:x.status,onChange:A=>_(x.id,A.target.value),className:"status-select",children:[a.jsx("option",{value:"available",children:"Available"}),a.jsx("option",{value:"booked",children:"Booked"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"out_of_service",children:"Out of Service"})]})}),a.jsx("td",{children:a.jsx("button",{onClick:()=>{m(x),d(!0)},className:"btn btn-secondary btn-sm",children:"View Details"})})]},x.id))})]})}),a.jsx(wc,{currentPage:j,totalItems:n.length,itemsPerPage:w,onPageChange:C,loading:s})]}),c&&h&&a.jsx("div",{className:"modal-overlay",onClick:()=>d(!1),children:a.jsxs("div",{className:"modal-content equipment-detail-modal",onClick:x=>x.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:h.product_name}),a.jsx("button",{className:"modal-close",onClick:()=>d(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"equipment-detail-info",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Tracking Number:"}),a.jsx("span",{className:"detail-value tracking-number",children:h.tracking_number})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Category:"}),a.jsx("span",{className:"detail-value",children:h.category})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Department:"}),a.jsx("span",{className:"detail-value",children:h.department})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Status:"}),a.jsx("span",{className:`status status-${h.status}`,children:h.status})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Description:"}),a.jsx("span",{className:"detail-value",children:h.description})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Requires Justification:"}),a.jsx("span",{className:"detail-value",children:h.requires_justification?"Yes":"No"})]})]}),a.jsx(d3,{equipmentId:h.id,equipmentName:h.product_name})]})]})})]})}const h3="modulepreload",f3=function(e){return"/NCADbook/"+e},l1={},mf=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=f3(c),c in l1)return;l1[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":h3,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,p)=>{m.addEventListener("load",g),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function Lt(e){"@babel/helpers - typeof";return Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(e)}var ma=Uint8Array,Pr=Uint16Array,r0=Int32Array,a0=new ma([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s0=new ma([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c1=new ma([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S5=function(e,t){for(var n=new Pr(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var s=new r0(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},k5=S5(a0,2),p3=k5.b,Up=k5.r;p3[28]=258,Up[258]=28;var m3=S5(s0,0),d1=m3.r,zp=new Pr(32768);for(var Wt=0;Wt<32768;++Wt){var Ls=(Wt&43690)>>1|(Wt&21845)<<1;Ls=(Ls&52428)>>2|(Ls&13107)<<2,Ls=(Ls&61680)>>4|(Ls&3855)<<4,zp[Wt]=((Ls&65280)>>8|(Ls&255)<<8)>>1}var ec=function(e,t,n){for(var r=e.length,s=0,i=new Pr(t);s<r;++s)e[s]&&++i[e[s]-1];var o=new Pr(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(n){l=new Pr(1<<t);var c=15-t;for(s=0;s<r;++s)if(e[s])for(var d=s<<4|e[s],h=t-e[s],m=o[e[s]-1]++<<h,g=m|(1<<h)-1;m<=g;++m)l[zp[m]>>c]=d}else for(l=new Pr(r),s=0;s<r;++s)e[s]&&(l[s]=zp[o[e[s]-1]++]>>15-e[s]);return l},zi=new ma(288);for(var Wt=0;Wt<144;++Wt)zi[Wt]=8;for(var Wt=144;Wt<256;++Wt)zi[Wt]=9;for(var Wt=256;Wt<280;++Wt)zi[Wt]=7;for(var Wt=280;Wt<288;++Wt)zi[Wt]=8;var Lu=new ma(32);for(var Wt=0;Wt<32;++Wt)Lu[Wt]=5;var g3=ec(zi,9,0),v3=ec(Lu,5,0),C5=function(e){return(e+7)/8|0},y3=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new ma(e.subarray(t,n))},Za=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Ml=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},gf=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var s=n.length,i=n.slice();if(!s)return{t:D5,l:0};if(s==1){var o=new ma(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(q,W){return q.f-W.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],d=0,h=1,m=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};h!=s-1;)l=n[n[d].f<n[m].f?d++:m++],c=n[d!=h&&n[d].f<n[m].f?d++:m++],n[h++]={s:-1,f:l.f+c.f,l,r:c};for(var g=i[0].s,r=1;r<s;++r)i[r].s>g&&(g=i[r].s);var p=new Pr(g+1),j=$p(n[h-1],p,0);if(j>t){var r=0,N=0,w=j-t,y=1<<w;for(i.sort(function(W,E){return p[E.s]-p[W.s]||W.f-E.f});r<s;++r){var _=i[r].s;if(p[_]>t)N+=y-(1<<j-p[_]),p[_]=t;else break}for(N>>=w;N>0;){var S=i[r].s;p[S]<t?N-=1<<t-p[S]++-1:++r}for(;r>=0&&N;--r){var C=i[r].s;p[C]==t&&(--p[C],++N)}j=t}return{t:new ma(p),l:j}},$p=function(e,t,n){return e.s==-1?Math.max($p(e.l,t,n+1),$p(e.r,t,n+1)):t[e.s]=n},u1=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Pr(++t),r=0,s=e[0],i=1,o=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:n.subarray(0,r),n:t}},Bl=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},A5=function(e,t,n){var r=n.length,s=C5(t+2);e[s]=r&255,e[s+1]=r>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<r;++i)e[s+i+4]=n[i];return(s+4+r)*8},h1=function(e,t,n,r,s,i,o,l,c,d,h){Za(t,h++,n),++s[256];for(var m=gf(s,15),g=m.t,p=m.l,j=gf(i,15),N=j.t,w=j.l,y=u1(g),_=y.c,S=y.n,C=u1(N),q=C.c,W=C.n,E=new Pr(19),x=0;x<_.length;++x)++E[_[x]&31];for(var x=0;x<q.length;++x)++E[q[x]&31];for(var A=gf(E,7),U=A.t,L=A.l,O=19;O>4&&!U[c1[O-1]];--O);var P=d+5<<3,T=Bl(s,zi)+Bl(i,Lu)+o,X=Bl(s,g)+Bl(i,N)+o+14+3*O+Bl(E,U)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&P<=T&&P<=X)return A5(t,h,e.subarray(c,c+d));var te,oe,Z,se;if(Za(t,h,1+(X<T)),h+=2,X<T){te=ec(g,p,0),oe=g,Z=ec(N,w,0),se=N;var ee=ec(U,L,0);Za(t,h,S-257),Za(t,h+5,W-1),Za(t,h+10,O-4),h+=14;for(var x=0;x<O;++x)Za(t,h+3*x,U[c1[x]]);h+=3*O;for(var de=[_,q],D=0;D<2;++D)for(var H=de[D],x=0;x<H.length;++x){var J=H[x]&31;Za(t,h,ee[J]),h+=U[J],J>15&&(Za(t,h,H[x]>>5&127),h+=H[x]>>12)}}else te=g3,oe=zi,Z=v3,se=Lu;for(var x=0;x<l;++x){var V=r[x];if(V>255){var J=V>>18&31;Ml(t,h,te[J+257]),h+=oe[J+257],J>7&&(Za(t,h,V>>23&31),h+=a0[J]);var ne=V&31;Ml(t,h,Z[ne]),h+=se[ne],ne>3&&(Ml(t,h,V>>5&8191),h+=s0[ne])}else Ml(t,h,te[V]),h+=oe[V]}return Ml(t,h,te[256]),h+oe[256]},x3=new r0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),D5=new ma(0),b3=function(e,t,n,r,s,i){var o=i.z||e.length,l=new ma(r+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(r,l.length-s),d=i.l,h=(i.r||0)&7;if(t){h&&(c[0]=i.r>>3);for(var m=x3[t-1],g=m>>13,p=m&8191,j=(1<<n)-1,N=i.p||new Pr(32768),w=i.h||new Pr(j+1),y=Math.ceil(n/3),_=2*y,S=function(ye){return(e[ye]^e[ye+1]<<y^e[ye+2]<<_)&j},C=new r0(25e3),q=new Pr(288),W=new Pr(32),E=0,x=0,A=i.i||0,U=0,L=i.w||0,O=0;A+2<o;++A){var P=S(A),T=A&32767,X=w[P];if(N[T]=X,w[P]=T,L<=A){var te=o-A;if((E>7e3||U>24576)&&(te>423||!d)){h=h1(e,c,0,C,q,W,x,U,O,A-O,h),U=E=x=0,O=A;for(var oe=0;oe<286;++oe)q[oe]=0;for(var oe=0;oe<30;++oe)W[oe]=0}var Z=2,se=0,ee=p,de=T-X&32767;if(te>2&&P==S(A-de))for(var D=Math.min(g,te)-1,H=Math.min(32767,A),J=Math.min(258,te);de<=H&&--ee&&T!=X;){if(e[A+Z]==e[A+Z-de]){for(var V=0;V<J&&e[A+V]==e[A+V-de];++V);if(V>Z){if(Z=V,se=de,V>D)break;for(var ne=Math.min(de,V-2),le=0,oe=0;oe<ne;++oe){var me=A-de+oe&32767,re=N[me],fe=me-re&32767;fe>le&&(le=fe,X=me)}}}T=X,X=N[T],de+=T-X&32767}if(se){C[U++]=268435456|Up[Z]<<18|d1[se];var be=Up[Z]&31,Se=d1[se]&31;x+=a0[be]+s0[Se],++q[257+be],++W[Se],L=A+Z,++E}else C[U++]=e[A],++q[e[A]]}}for(A=Math.max(A,L);A<o;++A)C[U++]=e[A],++q[e[A]];h=h1(e,c,d,C,q,W,x,U,O,A-O,h),d||(i.r=h&7|c[h/8|0]<<3,h-=7,i.h=w,i.p=N,i.i=A,i.w=L)}else{for(var A=i.w||0;A<o+d;A+=65535){var Ae=A+65535;Ae>=o&&(c[h/8|0]=d,Ae=o),h=A5(c,h+1,e.subarray(A,Ae))}i.i=o}return y3(l,0,r+C5(h)+s)},L5=function(){var e=1,t=0;return{p:function(n){for(var r=e,s=t,i=n.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=r+=n[o];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}e=r,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},_3=function(e,t,n,r,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new ma(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return b3(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,s)},E5=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},w3=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=L5();s.p(t.dictionary),E5(e,2,s.d())}};function Wp(e,t){t||(t={});var n=L5();n.p(e);var r=_3(e,t,t.dictionary?6:2,4);return w3(r,t),E5(r,r.length-4,n.d()),r}var j3=typeof TextDecoder<"u"&&new TextDecoder,N3=0;try{j3.decode(D5,{stream:!0}),N3=1}catch{}function S3(e){if(Array.isArray(e))return e}function k3(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function f1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function C3(e,t){if(e){if(typeof e=="string")return f1(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f1(e,t):void 0}}function A3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p1(e,t){return S3(e)||k3(e,t)||C3(e,t)||A3()}function m1(e,t="utf8"){return new TextDecoder(t).decode(e)}const D3=new TextEncoder;function L3(e){return D3.encode(e)}const E3=1024*8,P3=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),vf={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class i0{constructor(t=E3,n={}){kt(this,"buffer");kt(this,"byteLength");kt(this,"byteOffset");kt(this,"length");kt(this,"offset");kt(this,"lastWrittenByte");kt(this,"littleEndian");kt(this,"_data");kt(this,"_mark");kt(this,"_marks");let r=!1;typeof t=="number"?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const s=n.offset?n.offset>>>0:0,i=t.byteLength-s;let o=s;(ArrayBuffer.isView(t)||t instanceof i0)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+s),t=t.buffer),r?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=(this.offset+t)*2,s=new Uint8Array(r);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const r=vf[n].BYTES_PER_ELEMENT*t,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+r);if(this.littleEndian===P3&&n!=="uint8"&&n!=="int8"){const l=new Uint8Array(this.buffer.slice(s,s+r));l.reverse();const c=new vf[n](l.buffer);return this.offset+=r,c.reverse(),c}const o=new vf[n](i);return this.offset+=r,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return m1(this.readBytes(t))}decodeText(t=1,n="utf8"){return m1(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(L3(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function tl(e){let t=e.length;for(;--t>=0;)e[t]=0}const q3=3,T3=258,P5=29,I3=256,F3=I3+1+P5,q5=30,R3=512,O3=new Array((F3+2)*2);tl(O3);const M3=new Array(q5*2);tl(M3);const B3=new Array(R3);tl(B3);const U3=new Array(T3-q3+1);tl(U3);const z3=new Array(P5);tl(z3);const $3=new Array(q5);tl($3);const W3=(e,t,n,r)=>{let s=e&65535|0,i=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do s=s+t[r++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0};var Hp=W3;const H3=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},V3=new Uint32Array(H3()),G3=(e,t,n,r)=>{const s=V3,i=r+n;e^=-1;for(let o=r;o<i;o++)e=e>>>8^s[(e^t[o])&255];return e^-1};var ka=G3,Vp={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},T5={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const K3=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Z3=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)K3(n,r)&&(e[r]=n[r])}}return e},Y3=e=>{let t=0;for(let r=0,s=e.length;r<s;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,s=0,i=e.length;r<i;r++){let o=e[r];n.set(o,s),s+=o.length}return n},I5={assign:Z3,flattenChunks:Y3};let F5=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{F5=!1}const Nc=new Uint8Array(256);for(let e=0;e<256;e++)Nc[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Nc[254]=Nc[254]=1;var J3=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,s,i,o=e.length,l=0;for(s=0;s<o;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(l),i=0,s=0;i<l;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|n&63):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|n&63):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|n&63);return t};const X3=(e,t)=>{if(t<65534&&e.subarray&&F5)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var Q3=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,s;const i=new Array(n*2);for(s=0,r=0;r<n;){let o=e[r++];if(o<128){i[s++]=o;continue}let l=Nc[o];if(l>4){i[s++]=65533,r+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&r<n;)o=o<<6|e[r++]&63,l--;if(l>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return X3(i,s)},eN=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Nc[e[n]]>t?n:t},Gp={string2buf:J3,buf2string:Q3,utf8border:eN};function tN(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nN=tN;const Ed=16209,rN=16191;var aN=function(t,n){let r,s,i,o,l,c,d,h,m,g,p,j,N,w,y,_,S,C,q,W,E,x,A,U;const L=t.state;r=t.next_in,A=t.input,s=r+(t.avail_in-5),i=t.next_out,U=t.output,o=i-(n-t.avail_out),l=i+(t.avail_out-257),c=L.dmax,d=L.wsize,h=L.whave,m=L.wnext,g=L.window,p=L.hold,j=L.bits,N=L.lencode,w=L.distcode,y=(1<<L.lenbits)-1,_=(1<<L.distbits)-1;e:do{j<15&&(p+=A[r++]<<j,j+=8,p+=A[r++]<<j,j+=8),S=N[p&y];t:for(;;){if(C=S>>>24,p>>>=C,j-=C,C=S>>>16&255,C===0)U[i++]=S&65535;else if(C&16){q=S&65535,C&=15,C&&(j<C&&(p+=A[r++]<<j,j+=8),q+=p&(1<<C)-1,p>>>=C,j-=C),j<15&&(p+=A[r++]<<j,j+=8,p+=A[r++]<<j,j+=8),S=w[p&_];n:for(;;){if(C=S>>>24,p>>>=C,j-=C,C=S>>>16&255,C&16){if(W=S&65535,C&=15,j<C&&(p+=A[r++]<<j,j+=8,j<C&&(p+=A[r++]<<j,j+=8)),W+=p&(1<<C)-1,W>c){t.msg="invalid distance too far back",L.mode=Ed;break e}if(p>>>=C,j-=C,C=i-o,W>C){if(C=W-C,C>h&&L.sane){t.msg="invalid distance too far back",L.mode=Ed;break e}if(E=0,x=g,m===0){if(E+=d-C,C<q){q-=C;do U[i++]=g[E++];while(--C);E=i-W,x=U}}else if(m<C){if(E+=d+m-C,C-=m,C<q){q-=C;do U[i++]=g[E++];while(--C);if(E=0,m<q){C=m,q-=C;do U[i++]=g[E++];while(--C);E=i-W,x=U}}}else if(E+=m-C,C<q){q-=C;do U[i++]=g[E++];while(--C);E=i-W,x=U}for(;q>2;)U[i++]=x[E++],U[i++]=x[E++],U[i++]=x[E++],q-=3;q&&(U[i++]=x[E++],q>1&&(U[i++]=x[E++]))}else{E=i-W;do U[i++]=U[E++],U[i++]=U[E++],U[i++]=U[E++],q-=3;while(q>2);q&&(U[i++]=U[E++],q>1&&(U[i++]=U[E++]))}}else if(C&64){t.msg="invalid distance code",L.mode=Ed;break e}else{S=w[(S&65535)+(p&(1<<C)-1)];continue n}break}}else if(C&64)if(C&32){L.mode=rN;break e}else{t.msg="invalid literal/length code",L.mode=Ed;break e}else{S=N[(S&65535)+(p&(1<<C)-1)];continue t}break}}while(r<s&&i<l);q=j>>3,r-=q,j-=q<<3,p&=(1<<j)-1,t.next_in=r,t.next_out=i,t.avail_in=r<s?5+(s-r):5-(r-s),t.avail_out=i<l?257+(l-i):257-(i-l),L.hold=p,L.bits=j};const co=15,g1=852,v1=592,y1=0,yf=1,x1=2,sN=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),iN=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),oN=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),lN=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),cN=(e,t,n,r,s,i,o,l)=>{const c=l.bits;let d=0,h=0,m=0,g=0,p=0,j=0,N=0,w=0,y=0,_=0,S,C,q,W,E,x=null,A;const U=new Uint16Array(co+1),L=new Uint16Array(co+1);let O=null,P,T,X;for(d=0;d<=co;d++)U[d]=0;for(h=0;h<r;h++)U[t[n+h]]++;for(p=c,g=co;g>=1&&U[g]===0;g--);if(p>g&&(p=g),g===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,l.bits=1,0;for(m=1;m<g&&U[m]===0;m++);for(p<m&&(p=m),w=1,d=1;d<=co;d++)if(w<<=1,w-=U[d],w<0)return-1;if(w>0&&(e===y1||g!==1))return-1;for(L[1]=0,d=1;d<co;d++)L[d+1]=L[d]+U[d];for(h=0;h<r;h++)t[n+h]!==0&&(o[L[t[n+h]]++]=h);if(e===y1?(x=O=o,A=20):e===yf?(x=sN,O=iN,A=257):(x=oN,O=lN,A=0),_=0,h=0,d=m,E=i,j=p,N=0,q=-1,y=1<<p,W=y-1,e===yf&&y>g1||e===x1&&y>v1)return 1;for(;;){P=d-N,o[h]+1<A?(T=0,X=o[h]):o[h]>=A?(T=O[o[h]-A],X=x[o[h]-A]):(T=96,X=0),S=1<<d-N,C=1<<j,m=C;do C-=S,s[E+(_>>N)+C]=P<<24|T<<16|X|0;while(C!==0);for(S=1<<d-1;_&S;)S>>=1;if(S!==0?(_&=S-1,_+=S):_=0,h++,--U[d]===0){if(d===g)break;d=t[n+o[h]]}if(d>p&&(_&W)!==q){for(N===0&&(N=p),E+=m,j=d-N,w=1<<j;j+N<g&&(w-=U[j+N],!(w<=0));)j++,w<<=1;if(y+=1<<j,e===yf&&y>g1||e===x1&&y>v1)return 1;q=_&W,s[q]=p<<24|j<<16|E-i|0}}return _!==0&&(s[E+_]=d-N<<24|64<<16|0),l.bits=p,0};var tc=cN;const dN=0,R5=1,O5=2,{Z_FINISH:b1,Z_BLOCK:uN,Z_TREES:Pd,Z_OK:$i,Z_STREAM_END:hN,Z_NEED_DICT:fN,Z_STREAM_ERROR:Qr,Z_DATA_ERROR:M5,Z_MEM_ERROR:B5,Z_BUF_ERROR:pN,Z_DEFLATED:_1}=T5,sh=16180,w1=16181,j1=16182,N1=16183,S1=16184,k1=16185,C1=16186,A1=16187,D1=16188,L1=16189,Eu=16190,Ya=16191,xf=16192,E1=16193,bf=16194,P1=16195,q1=16196,T1=16197,I1=16198,qd=16199,Td=16200,F1=16201,R1=16202,O1=16203,M1=16204,B1=16205,_f=16206,U1=16207,z1=16208,Vt=16209,U5=16210,z5=16211,mN=852,gN=592,vN=15,yN=vN,$1=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function xN(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Gi=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<sh||t.mode>z5?1:0},$5=e=>{if(Gi(e))return Qr;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=sh,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(mN),t.distcode=t.distdyn=new Int32Array(gN),t.sane=1,t.back=-1,$i},W5=e=>{if(Gi(e))return Qr;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,$5(e)},H5=(e,t)=>{let n;if(Gi(e))return Qr;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Qr:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,W5(e))},V5=(e,t)=>{if(!e)return Qr;const n=new xN;e.state=n,n.strm=e,n.window=null,n.mode=sh;const r=H5(e,t);return r!==$i&&(e.state=null),r},bN=e=>V5(e,yN);let W1=!0,wf,jf;const _N=e=>{if(W1){wf=new Int32Array(512),jf=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(tc(R5,e.lens,0,288,wf,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;tc(O5,e.lens,0,32,jf,0,e.work,{bits:5}),W1=!1}e.lencode=wf,e.lenbits=9,e.distcode=jf,e.distbits=5},G5=(e,t,n,r)=>{let s;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>r&&(s=r),i.window.set(t.subarray(n-r,n-r+s),i.wnext),r-=s,r?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},wN=(e,t)=>{let n,r,s,i,o,l,c,d,h,m,g,p,j,N,w=0,y,_,S,C,q,W,E,x;const A=new Uint8Array(4);let U,L;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Gi(e)||!e.output||!e.input&&e.avail_in!==0)return Qr;n=e.state,n.mode===Ya&&(n.mode=xf),o=e.next_out,s=e.output,c=e.avail_out,i=e.next_in,r=e.input,l=e.avail_in,d=n.hold,h=n.bits,m=l,g=c,x=$i;e:for(;;)switch(n.mode){case sh:if(n.wrap===0){n.mode=xf;break}for(;h<16;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(n.wrap&2&&d===35615){n.wbits===0&&(n.wbits=15),n.check=0,A[0]=d&255,A[1]=d>>>8&255,n.check=ka(n.check,A,2,0),d=0,h=0,n.mode=w1;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=Vt;break}if((d&15)!==_1){e.msg="unknown compression method",n.mode=Vt;break}if(d>>>=4,h-=4,E=(d&15)+8,n.wbits===0&&(n.wbits=E),E>15||E>n.wbits){e.msg="invalid window size",n.mode=Vt;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=d&512?L1:Ya,d=0,h=0;break;case w1:for(;h<16;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(n.flags=d,(n.flags&255)!==_1){e.msg="unknown compression method",n.mode=Vt;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Vt;break}n.head&&(n.head.text=d>>8&1),n.flags&512&&n.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,n.check=ka(n.check,A,2,0)),d=0,h=0,n.mode=j1;case j1:for(;h<32;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.head&&(n.head.time=d),n.flags&512&&n.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,A[2]=d>>>16&255,A[3]=d>>>24&255,n.check=ka(n.check,A,4,0)),d=0,h=0,n.mode=N1;case N1:for(;h<16;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.head&&(n.head.xflags=d&255,n.head.os=d>>8),n.flags&512&&n.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,n.check=ka(n.check,A,2,0)),d=0,h=0,n.mode=S1;case S1:if(n.flags&1024){for(;h<16;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),n.flags&512&&n.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,n.check=ka(n.check,A,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=k1;case k1:if(n.flags&1024&&(p=n.length,p>l&&(p=l),p&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+p),E)),n.flags&512&&n.wrap&4&&(n.check=ka(n.check,r,p,i)),l-=p,i+=p,n.length-=p),n.length))break e;n.length=0,n.mode=C1;case C1:if(n.flags&2048){if(l===0)break e;p=0;do E=r[i+p++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E));while(E&&p<l);if(n.flags&512&&n.wrap&4&&(n.check=ka(n.check,r,p,i)),l-=p,i+=p,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=A1;case A1:if(n.flags&4096){if(l===0)break e;p=0;do E=r[i+p++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E));while(E&&p<l);if(n.flags&512&&n.wrap&4&&(n.check=ka(n.check,r,p,i)),l-=p,i+=p,E)break e}else n.head&&(n.head.comment=null);n.mode=D1;case D1:if(n.flags&512){for(;h<16;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(n.wrap&4&&d!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Vt;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Ya;break;case L1:for(;h<32;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}e.adler=n.check=$1(d),d=0,h=0,n.mode=Eu;case Eu:if(n.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,n.hold=d,n.bits=h,fN;e.adler=n.check=1,n.mode=Ya;case Ya:if(t===uN||t===Pd)break e;case xf:if(n.last){d>>>=h&7,h-=h&7,n.mode=_f;break}for(;h<3;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}switch(n.last=d&1,d>>>=1,h-=1,d&3){case 0:n.mode=E1;break;case 1:if(_N(n),n.mode=qd,t===Pd){d>>>=2,h-=2;break e}break;case 2:n.mode=q1;break;case 3:e.msg="invalid block type",n.mode=Vt}d>>>=2,h-=2;break;case E1:for(d>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Vt;break}if(n.length=d&65535,d=0,h=0,n.mode=bf,t===Pd)break e;case bf:n.mode=P1;case P1:if(p=n.length,p){if(p>l&&(p=l),p>c&&(p=c),p===0)break e;s.set(r.subarray(i,i+p),o),l-=p,i+=p,c-=p,o+=p,n.length-=p;break}n.mode=Ya;break;case q1:for(;h<14;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(n.nlen=(d&31)+257,d>>>=5,h-=5,n.ndist=(d&31)+1,d>>>=5,h-=5,n.ncode=(d&15)+4,d>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Vt;break}n.have=0,n.mode=T1;case T1:for(;n.have<n.ncode;){for(;h<3;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.lens[O[n.have++]]=d&7,d>>>=3,h-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,U={bits:n.lenbits},x=tc(dN,n.lens,0,19,n.lencode,0,n.work,U),n.lenbits=U.bits,x){e.msg="invalid code lengths set",n.mode=Vt;break}n.have=0,n.mode=I1;case I1:for(;n.have<n.nlen+n.ndist;){for(;w=n.lencode[d&(1<<n.lenbits)-1],y=w>>>24,_=w>>>16&255,S=w&65535,!(y<=h);){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(S<16)d>>>=y,h-=y,n.lens[n.have++]=S;else{if(S===16){for(L=y+2;h<L;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(d>>>=y,h-=y,n.have===0){e.msg="invalid bit length repeat",n.mode=Vt;break}E=n.lens[n.have-1],p=3+(d&3),d>>>=2,h-=2}else if(S===17){for(L=y+3;h<L;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}d>>>=y,h-=y,E=0,p=3+(d&7),d>>>=3,h-=3}else{for(L=y+7;h<L;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}d>>>=y,h-=y,E=0,p=11+(d&127),d>>>=7,h-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Vt;break}for(;p--;)n.lens[n.have++]=E}}if(n.mode===Vt)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Vt;break}if(n.lenbits=9,U={bits:n.lenbits},x=tc(R5,n.lens,0,n.nlen,n.lencode,0,n.work,U),n.lenbits=U.bits,x){e.msg="invalid literal/lengths set",n.mode=Vt;break}if(n.distbits=6,n.distcode=n.distdyn,U={bits:n.distbits},x=tc(O5,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,U),n.distbits=U.bits,x){e.msg="invalid distances set",n.mode=Vt;break}if(n.mode=qd,t===Pd)break e;case qd:n.mode=Td;case Td:if(l>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,n.hold=d,n.bits=h,aN(e,g),o=e.next_out,s=e.output,c=e.avail_out,i=e.next_in,r=e.input,l=e.avail_in,d=n.hold,h=n.bits,n.mode===Ya&&(n.back=-1);break}for(n.back=0;w=n.lencode[d&(1<<n.lenbits)-1],y=w>>>24,_=w>>>16&255,S=w&65535,!(y<=h);){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(_&&!(_&240)){for(C=y,q=_,W=S;w=n.lencode[W+((d&(1<<C+q)-1)>>C)],y=w>>>24,_=w>>>16&255,S=w&65535,!(C+y<=h);){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}d>>>=C,h-=C,n.back+=C}if(d>>>=y,h-=y,n.back+=y,n.length=S,_===0){n.mode=B1;break}if(_&32){n.back=-1,n.mode=Ya;break}if(_&64){e.msg="invalid literal/length code",n.mode=Vt;break}n.extra=_&15,n.mode=F1;case F1:if(n.extra){for(L=n.extra;h<L;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=R1;case R1:for(;w=n.distcode[d&(1<<n.distbits)-1],y=w>>>24,_=w>>>16&255,S=w&65535,!(y<=h);){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(!(_&240)){for(C=y,q=_,W=S;w=n.distcode[W+((d&(1<<C+q)-1)>>C)],y=w>>>24,_=w>>>16&255,S=w&65535,!(C+y<=h);){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}d>>>=C,h-=C,n.back+=C}if(d>>>=y,h-=y,n.back+=y,_&64){e.msg="invalid distance code",n.mode=Vt;break}n.offset=S,n.extra=_&15,n.mode=O1;case O1:if(n.extra){for(L=n.extra;h<L;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Vt;break}n.mode=M1;case M1:if(c===0)break e;if(p=g-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Vt;break}p>n.wnext?(p-=n.wnext,j=n.wsize-p):j=n.wnext-p,p>n.length&&(p=n.length),N=n.window}else N=s,j=o-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do s[o++]=N[j++];while(--p);n.length===0&&(n.mode=Td);break;case B1:if(c===0)break e;s[o++]=n.length,c--,n.mode=Td;break;case _f:if(n.wrap){for(;h<32;){if(l===0)break e;l--,d|=r[i++]<<h,h+=8}if(g-=c,e.total_out+=g,n.total+=g,n.wrap&4&&g&&(e.adler=n.check=n.flags?ka(n.check,s,g,o-g):Hp(n.check,s,g,o-g)),g=c,n.wrap&4&&(n.flags?d:$1(d))!==n.check){e.msg="incorrect data check",n.mode=Vt;break}d=0,h=0}n.mode=U1;case U1:if(n.wrap&&n.flags){for(;h<32;){if(l===0)break e;l--,d+=r[i++]<<h,h+=8}if(n.wrap&4&&d!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Vt;break}d=0,h=0}n.mode=z1;case z1:x=hN;break e;case Vt:x=M5;break e;case U5:return B5;case z5:default:return Qr}return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,n.hold=d,n.bits=h,(n.wsize||g!==e.avail_out&&n.mode<Vt&&(n.mode<_f||t!==b1))&&G5(e,e.output,e.next_out,g-e.avail_out),m-=e.avail_in,g-=e.avail_out,e.total_in+=m,e.total_out+=g,n.total+=g,n.wrap&4&&g&&(e.adler=n.check=n.flags?ka(n.check,s,g,e.next_out-g):Hp(n.check,s,g,e.next_out-g)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Ya?128:0)+(n.mode===qd||n.mode===bf?256:0),(m===0&&g===0||t===b1)&&x===$i&&(x=pN),x},jN=e=>{if(Gi(e))return Qr;let t=e.state;return t.window&&(t.window=null),e.state=null,$i},NN=(e,t)=>{if(Gi(e))return Qr;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,$i):Qr},SN=(e,t)=>{const n=t.length;let r,s,i;return Gi(e)||(r=e.state,r.wrap!==0&&r.mode!==Eu)?Qr:r.mode===Eu&&(s=1,s=Hp(s,t,n,0),s!==r.check)?M5:(i=G5(e,t,n,n),i?(r.mode=U5,B5):(r.havedict=1,$i))};var kN=W5,CN=H5,AN=$5,DN=bN,LN=V5,EN=wN,PN=jN,qN=NN,TN=SN,IN="pako inflate (from Nodeca project)",es={inflateReset:kN,inflateReset2:CN,inflateResetKeep:AN,inflateInit:DN,inflateInit2:LN,inflate:EN,inflateEnd:PN,inflateGetHeader:qN,inflateSetDictionary:TN,inflateInfo:IN};function FN(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var RN=FN;const K5=Object.prototype.toString,{Z_NO_FLUSH:ON,Z_FINISH:MN,Z_OK:Sc,Z_STREAM_END:Nf,Z_NEED_DICT:Sf,Z_STREAM_ERROR:BN,Z_DATA_ERROR:H1,Z_MEM_ERROR:UN}=T5;function Pc(e){this.options=I5.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nN,this.strm.avail_out=0;let n=es.inflateInit2(this.strm,t.windowBits);if(n!==Sc)throw new Error(Vp[n]);if(this.header=new RN,es.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Gp.string2buf(t.dictionary):K5.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=es.inflateSetDictionary(this.strm,t.dictionary),n!==Sc)))throw new Error(Vp[n])}Pc.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?MN:ON,K5.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=es.inflate(n,o),i===Sf&&s&&(i=es.inflateSetDictionary(n,s),i===Sc?i=es.inflate(n,o):i===H1&&(i=Sf));n.avail_in>0&&i===Nf&&n.state.wrap>0&&e[n.next_in]!==0;)es.inflateReset(n),i=es.inflate(n,o);switch(i){case BN:case H1:case Sf:case UN:return this.onEnd(i),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||i===Nf))if(this.options.to==="string"){let c=Gp.utf8border(n.output,n.next_out),d=n.next_out-c,h=Gp.buf2string(n.output,c);n.next_out=d,n.avail_out=r-d,d&&n.output.set(n.output.subarray(c,c+d),0),this.onData(h)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(i===Sc&&l===0)){if(i===Nf)return i=es.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Pc.prototype.onData=function(e){this.chunks.push(e)};Pc.prototype.onEnd=function(e){e===Sc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=I5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function zN(e,t){const n=new Pc(t);if(n.push(e),n.err)throw n.msg||Vp[n.err];return n.result}var $N=Pc,WN=zN,HN={Inflate:$N,inflate:WN};const{Inflate:VN,inflate:GN}=HN;var V1=VN,KN=GN;const Z5=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;Z5[e]=t}const G1=4294967295;function ZN(e,t,n){let r=e;for(let s=0;s<n;s++)r=Z5[(r^t[s])&255]^r>>>8;return r}function YN(e,t){return(ZN(G1,e,t)^G1)>>>0}function K1(e,t,n){const r=e.readUint32(),s=YN(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${s}`)}function Y5(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function J5(e,t,n,r){let s=0;for(;s<r;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-r]&255}function X5(e,t,n,r){let s=0;if(n.length===0)for(;s<r;s++)t[s]=e[s];else for(;s<r;s++)t[s]=e[s]+n[s]&255}function Q5(e,t,n,r,s){let i=0;if(n.length===0){for(;i<s;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+(t[i-s]>>1)&255}else{for(;i<s;i++)t[i]=e[i]+(n[i]>>1)&255;for(;i<r;i++)t[i]=e[i]+(t[i-s]+n[i]>>1)&255}}function ex(e,t,n,r,s){let i=0;if(n.length===0){for(;i<s;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-s]&255}else{for(;i<s;i++)t[i]=e[i]+n[i]&255;for(;i<r;i++)t[i]=e[i]+JN(t[i-s],n[i],n[i-s])&255}}function JN(e,t,n){const r=e+t-n,s=Math.abs(r-e),i=Math.abs(r-t),o=Math.abs(r-n);return s<=i&&s<=o?e:i<=o?t:n}function XN(e,t,n,r,s,i){switch(e){case 0:Y5(t,n,s);break;case 1:J5(t,n,s,i);break;case 2:X5(t,n,r,s);break;case 3:Q5(t,n,r,s,i);break;case 4:ex(t,n,r,s,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const QN=new Uint16Array([255]),eS=new Uint8Array(QN.buffer),tS=eS[0]===255;function nS(e){const{data:t,width:n,height:r,channels:s,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*s,c=new Uint8Array(r*n*l);let d=0;for(let h=0;h<7;h++){const m=o[h],g=Math.ceil((n-m.x)/m.xStep),p=Math.ceil((r-m.y)/m.yStep);if(g<=0||p<=0)continue;const j=g*l,N=new Uint8Array(j);for(let w=0;w<p;w++){const y=t[d++],_=t.subarray(d,d+j);d+=j;const S=new Uint8Array(j);XN(y,_,S,N,j,l),N.set(S);for(let C=0;C<g;C++){const q=m.x+C*m.xStep,W=m.y+w*m.yStep;if(!(q>=n||W>=r))for(let E=0;E<l;E++)c[(W*n+q)*l+E]=S[C*l+E]}}}if(i===16){const h=new Uint16Array(c.buffer);if(tS)for(let m=0;m<h.length;m++)h[m]=rS(h[m]);return h}else return c}function rS(e){return(e&255)<<8|e>>8&255}const aS=new Uint16Array([255]),sS=new Uint8Array(aS.buffer),iS=sS[0]===255,oS=new Uint8Array(0);function Z1(e){const{data:t,width:n,height:r,channels:s,depth:i}=e,o=Math.ceil(i/8)*s,l=Math.ceil(i/8*s*n),c=new Uint8Array(r*l);let d=oS,h=0,m,g;for(let p=0;p<r;p++){switch(m=t.subarray(h+1,h+1+l),g=c.subarray(p*l,(p+1)*l),t[h]){case 0:Y5(m,g,l);break;case 1:J5(m,g,l,o);break;case 2:X5(m,g,d,l);break;case 3:Q5(m,g,d,l,o);break;case 4:ex(m,g,d,l,o);break;default:throw new Error(`Unsupported filter: ${t[h]}`)}d=g,h+=l+1}if(i===16){const p=new Uint16Array(c.buffer);if(iS)for(let j=0;j<p.length;j++)p[j]=lS(p[j]);return p}else return c}function lS(e){return(e&255)<<8|e>>8&255}const Xd=Uint8Array.of(137,80,78,71,13,10,26,10);function Y1(e){if(!cS(e.readBytes(Xd.length)))throw new Error("wrong PNG signature")}function cS(e){if(e.length<Xd.length)return!1;for(let t=0;t<Xd.length;t++)if(e[t]!==Xd[t])return!1;return!0}const dS="tEXt",uS=0,tx=new TextDecoder("latin1");function hS(e){if(pS(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const fS=/^[\u0000-\u00FF]*$/;function pS(e){if(!fS.test(e))throw new Error("invalid latin1 text")}function mS(e,t,n){const r=nx(t);e[r]=gS(t,n-r.length-1)}function nx(e){for(e.mark();e.readByte()!==uS;);const t=e.offset;e.reset();const n=tx.decode(e.readBytes(t-e.offset-1));return e.skip(1),hS(n),n}function gS(e,t){return tx.decode(e.readBytes(t))}const Dr={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},kf={UNKNOWN:-1,DEFLATE:0},J1={UNKNOWN:-1,ADAPTIVE:0},Cf={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Id={NONE:0,BACKGROUND:1,PREVIOUS:2},Af={SOURCE:0,OVER:1};class vS extends i0{constructor(n,r={}){super(n);kt(this,"_checkCrc");kt(this,"_inflator");kt(this,"_png");kt(this,"_apng");kt(this,"_end");kt(this,"_hasPalette");kt(this,"_palette");kt(this,"_hasTransparency");kt(this,"_transparency");kt(this,"_compressionMethod");kt(this,"_filterMethod");kt(this,"_interlaceMethod");kt(this,"_colorType");kt(this,"_isAnimated");kt(this,"_numberOfFrames");kt(this,"_numberOfPlays");kt(this,"_frames");kt(this,"_writingDataChunks");const{checkCrc:s=!1}=r;this._checkCrc=s,this._inflator=new V1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=kf.UNKNOWN,this._filterMethod=J1.UNKNOWN,this._interlaceMethod=Cf.UNKNOWN,this._colorType=Dr.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Y1(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(Y1(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const s=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case dS:mS(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?K1(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const s=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=s+n;break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?K1(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=yS(this.readUint8());const r=this.readUint8();this._colorType=r;let s;switch(r){case Dr.GREYSCALE:s=1;break;case Dr.TRUECOLOUR:s=3;break;case Dr.INDEXED_COLOUR:s=1;break;case Dr.GREYSCALE_ALPHA:s=2;break;case Dr.TRUECOLOUR_ALPHA:s=4;break;case Dr.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==kf.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<r;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,s=this.offset+this.byteOffset;if(s+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Dr.GREYSCALE:case Dr.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Dr.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const s=this.readByte();this._palette[r].push(s)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Dr.UNKNOWN:case Dr.GREYSCALE_ALPHA:case Dr.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=nx(this),s=this.readUint8();if(s!==kf.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:KN(i)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),s=this.readByte();this._png.resolution={x:n,y:r,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(n);if(s){if(s.data=Z1({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)r.data=s.data;else{const i=this._apng.frames.at(n-1);this.disposeFrame(s,i,r),this.addFrameDataToCanvas(r,s)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,s){switch(n.disposeOp){case Id.NONE:break;case Id.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*n.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)s.data[l+c]=0}break;case Id.PREVIOUS:s.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const s=1<<this._png.depth,i=(o,l)=>{const c=((o+r.yOffset)*this._png.width+r.xOffset+l)*this._png.channels,d=(o*r.width+l)*this._png.channels;return{index:c,frameIndex:d}};switch(r.blendOp){case Af.SOURCE:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:c,frameIndex:d}=i(o,l);for(let h=0;h<this._png.channels;h++)n.data[c+h]=r.data[d+h]}break;case Af.OVER:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:c,frameIndex:d}=i(o,l);for(let h=0;h<this._png.channels;h++){const m=r.data[d+this._png.channels-1]/s,g=h%(this._png.channels-1)===0?1:r.data[d+h],p=Math.floor(m*g+(1-m)*n.data[c+h]);n.data[c+h]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==J1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Cf.NO_INTERLACE)this._png.data=Z1({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Cf.ADAM7)this._png.data=nS({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Id.NONE,blendOp:Af.SOURCE,data:n}),this._inflator=new V1,this._writingDataChunks=!1}}function yS(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var X1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(X1||(X1={}));function xS(e,t){return new vS(e,t).decode()}var tt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Df(){tt.console&&typeof tt.console.log=="function"&&tt.console.log.apply(tt.console,arguments)}var Ft={log:Df,warn:function(e){tt.console&&(typeof tt.console.warn=="function"?tt.console.warn.apply(tt.console,arguments):Df.call(null,arguments))},error:function(e){tt.console&&(typeof tt.console.error=="function"?tt.console.error.apply(tt.console,arguments):Df(e))}};function Lf(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Di(r.response,t,n)},r.onerror=function(){Ft.error("could not download file")},r.send()}function Q1(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Fd(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Di=tt.saveAs||((typeof window>"u"?"undefined":Lt(window))!=="object"||window!==tt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=tt.URL||tt.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?Q1(s.href)?Lf(e,t,n):Fd(s,s.target="_blank"):Fd(s)):(s.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){Fd(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(Q1(e))Lf(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Fd(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Lt(i)!=="object"&&(Ft.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return Lf(e,t,n);var s=e.type==="application/octet-stream",i=/constructor/i.test(tt.HTMLElement)||tt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Lt(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var h=l.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},l.readAsDataURL(e)}else{var c=tt.URL||tt.webkitURL,d=c.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function rx(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,i=n[r].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}var Qd=tt.atob.bind(tt),e2=tt.btoa.bind(tt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ef(e,t){var n=e[0],r=e[1],s=e[2],i=e[3];n=Xn(n,r,s,i,t[0],7,-680876936),i=Xn(i,n,r,s,t[1],12,-389564586),s=Xn(s,i,n,r,t[2],17,606105819),r=Xn(r,s,i,n,t[3],22,-1044525330),n=Xn(n,r,s,i,t[4],7,-176418897),i=Xn(i,n,r,s,t[5],12,1200080426),s=Xn(s,i,n,r,t[6],17,-1473231341),r=Xn(r,s,i,n,t[7],22,-45705983),n=Xn(n,r,s,i,t[8],7,1770035416),i=Xn(i,n,r,s,t[9],12,-1958414417),s=Xn(s,i,n,r,t[10],17,-42063),r=Xn(r,s,i,n,t[11],22,-1990404162),n=Xn(n,r,s,i,t[12],7,1804603682),i=Xn(i,n,r,s,t[13],12,-40341101),s=Xn(s,i,n,r,t[14],17,-1502002290),n=Qn(n,r=Xn(r,s,i,n,t[15],22,1236535329),s,i,t[1],5,-165796510),i=Qn(i,n,r,s,t[6],9,-1069501632),s=Qn(s,i,n,r,t[11],14,643717713),r=Qn(r,s,i,n,t[0],20,-373897302),n=Qn(n,r,s,i,t[5],5,-701558691),i=Qn(i,n,r,s,t[10],9,38016083),s=Qn(s,i,n,r,t[15],14,-660478335),r=Qn(r,s,i,n,t[4],20,-405537848),n=Qn(n,r,s,i,t[9],5,568446438),i=Qn(i,n,r,s,t[14],9,-1019803690),s=Qn(s,i,n,r,t[3],14,-187363961),r=Qn(r,s,i,n,t[8],20,1163531501),n=Qn(n,r,s,i,t[13],5,-1444681467),i=Qn(i,n,r,s,t[2],9,-51403784),s=Qn(s,i,n,r,t[7],14,1735328473),n=er(n,r=Qn(r,s,i,n,t[12],20,-1926607734),s,i,t[5],4,-378558),i=er(i,n,r,s,t[8],11,-2022574463),s=er(s,i,n,r,t[11],16,1839030562),r=er(r,s,i,n,t[14],23,-35309556),n=er(n,r,s,i,t[1],4,-1530992060),i=er(i,n,r,s,t[4],11,1272893353),s=er(s,i,n,r,t[7],16,-155497632),r=er(r,s,i,n,t[10],23,-1094730640),n=er(n,r,s,i,t[13],4,681279174),i=er(i,n,r,s,t[0],11,-358537222),s=er(s,i,n,r,t[3],16,-722521979),r=er(r,s,i,n,t[6],23,76029189),n=er(n,r,s,i,t[9],4,-640364487),i=er(i,n,r,s,t[12],11,-421815835),s=er(s,i,n,r,t[15],16,530742520),n=tr(n,r=er(r,s,i,n,t[2],23,-995338651),s,i,t[0],6,-198630844),i=tr(i,n,r,s,t[7],10,1126891415),s=tr(s,i,n,r,t[14],15,-1416354905),r=tr(r,s,i,n,t[5],21,-57434055),n=tr(n,r,s,i,t[12],6,1700485571),i=tr(i,n,r,s,t[3],10,-1894986606),s=tr(s,i,n,r,t[10],15,-1051523),r=tr(r,s,i,n,t[1],21,-2054922799),n=tr(n,r,s,i,t[8],6,1873313359),i=tr(i,n,r,s,t[15],10,-30611744),s=tr(s,i,n,r,t[6],15,-1560198380),r=tr(r,s,i,n,t[13],21,1309151649),n=tr(n,r,s,i,t[4],6,-145523070),i=tr(i,n,r,s,t[11],10,-1120210379),s=tr(s,i,n,r,t[2],15,718787259),r=tr(r,s,i,n,t[9],21,-343485551),e[0]=Ms(n,e[0]),e[1]=Ms(r,e[1]),e[2]=Ms(s,e[2]),e[3]=Ms(i,e[3])}function ih(e,t,n,r,s,i){return t=Ms(Ms(t,e),Ms(r,i)),Ms(t<<s|t>>>32-s,n)}function Xn(e,t,n,r,s,i,o){return ih(t&n|~t&r,e,t,s,i,o)}function Qn(e,t,n,r,s,i,o){return ih(t&r|n&~r,e,t,s,i,o)}function er(e,t,n,r,s,i,o){return ih(t^n^r,e,t,s,i,o)}function tr(e,t,n,r,s,i,o){return ih(n^(t|~r),e,t,s,i,o)}function ax(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Ef(r,bS(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Ef(r,s),t=0;t<16;t++)s[t]=0;return s[14]=8*n,Ef(r,s),r}function bS(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var t2="0123456789abcdef".split("");function _S(e){for(var t="",n=0;n<4;n++)t+=t2[e>>8*n+4&15]+t2[e>>8*n&15];return t}function wS(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Kp(e){return ax(e).map(wS).join("")}var jS=function(e){for(var t=0;t<e.length;t++)e[t]=_S(e[t]);return e.join("")}(ax("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ms(e,t){if(jS){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Zp(e,t){var n,r,s,i;if(e!==n){for(var o=(s=e,i=1+(256/e.length|0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var h=l[c];d=(d+h+o.charCodeAt(c))%256,l[c]=l[d],l[d]=h}n=e,r=l}else l=r;var m=t.length,g=0,p=0,j="";for(c=0;c<m;c++)p=(p+(h=l[g=(g+1)%256]))%256,l[g]=l[p],l[p]=h,o=l[(l[g]+l[p])%256],j+=String.fromCharCode(t.charCodeAt(c)^o);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var n2={print:4,modify:8,copy:16,"annot-forms":32};function fo(e,t,n,r){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(n2.perm!==void 0)throw new Error("Invalid permission: "+l);s+=n2[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=Kp(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Zp(this.encryptionKey,this.padding)}function po(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var s=e.charCodeAt(r);t+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):e[r]}return t}function r2(e){if(Lt(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var i=Math.random().toString(35);return t[n][i]=[r,!!s],i},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[n]){var o=t[n][i];try{o[0].apply(e,r)}catch(l){tt.console&&Ft.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Pu(e){if(!(this instanceof Pu))return new Pu(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function sx(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Li(e,t,n,r,s){if(!(this instanceof Li))return new Li(e,t,n,r,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,sx.call(this,r,s)}function Ao(e,t,n,r,s){if(!(this instanceof Ao))return new Ao(e,t,n,r,s);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,sx.call(this,r,s)}function He(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",h=null;Lt(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,s=e.format||s,i=e.compress||e.compressPdf||i,(h=e.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=r2;var j="1.3",N=p.__private__.getPdfVersion=function(){return j};p.__private__.setPdfVersion=function(v){j=v};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return w};var y=p.__private__.getPageFormat=function(v){return w[v]};s=s||"a4";var _="compat",S="advanced",C=_;function q(){this.saveGraphicsState(),Q(new Ze(et,0,0,-et,0,pi()*et).toString()+" cm"),this.setFontSize(this.getFontSize()/et),d="n",C=S}function W(){this.restoreGraphicsState(),d="S",C=_}var E=p.__private__.combineFontStyleAndFontWeight=function(v,I){if(v=="bold"&&I=="normal"||v=="bold"&&I==400||v=="normal"&&I=="italic"||v=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(v=I==400||I==="normal"?v==="italic"?"italic":"normal":I!=700&&I!=="bold"||v!=="normal"?(I==700?"bold":I)+""+v:"bold"),v};p.advancedAPI=function(v){var I=C===_;return I&&q.call(this),typeof v!="function"||(v(this),I&&W.call(this)),this},p.compatAPI=function(v){var I=C===S;return I&&W.call(this),typeof v!="function"||(v(this),I&&q.call(this)),this},p.isAdvancedAPI=function(){return C===S};var x,A=function(v){if(C!==S)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},U=p.roundToPrecision=p.__private__.roundToPrecision=function(v,I){var Y=t||I;if(isNaN(v)||isNaN(Y))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Y).replace(/0+$/,"")};x=p.hpf=p.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return U(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return U(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return U(v,16)};var L=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return U(v,2)},O=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return U(v,3)},P=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return C===_?v*et:C===S?v:void 0},T=function(v){return P(function(I){return C===_?pi()-I:C===S?I:void 0}(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(t=parseInt(v,10))};var X,te="00000000000000000000000000000000",oe=p.__private__.getFileId=function(){return te},Z=p.__private__.setFileId=function(v){return te=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(ln=new fo(h.userPermissions,h.userPassword,h.ownerPassword,te)),te};p.setFileId=function(v){return Z(v),this},p.getFileId=function(){return oe()};var se=p.__private__.convertDateToPDFDate=function(v){var I=v.getTimezoneOffset(),Y=I<0?"+":"-",ae=Math.floor(Math.abs(I/60)),he=Math.abs(I%60),je=[Y,J(ae),"'",J(he),"'"].join("");return["D:",v.getFullYear(),J(v.getMonth()+1),J(v.getDate()),J(v.getHours()),J(v.getMinutes()),J(v.getSeconds()),je].join("")},ee=p.__private__.convertPDFDateToDate=function(v){var I=parseInt(v.substr(2,4),10),Y=parseInt(v.substr(6,2),10)-1,ae=parseInt(v.substr(8,2),10),he=parseInt(v.substr(10,2),10),je=parseInt(v.substr(12,2),10),Ce=parseInt(v.substr(14,2),10);return new Date(I,Y,ae,he,je,Ce,0)},de=p.__private__.setCreationDate=function(v){var I;if(v===void 0&&(v=new Date),v instanceof Date)I=se(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=v}return X=I},D=p.__private__.getCreationDate=function(v){var I=X;return v==="jsDate"&&(I=ee(X)),I};p.setCreationDate=function(v){return de(v),this},p.getCreationDate=function(v){return D(v)};var H,J=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},V=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},ne=0,le=[],me=[],re=0,fe=[],be=[],Se=!1,Ae=me;p.__private__.setCustomOutputDestination=function(v){Se=!0,Ae=v};var ye=function(v){Se||(Ae=v)};p.__private__.resetCustomOutputDestination=function(){Se=!1,Ae=me};var Q=p.__private__.out=function(v){return v=v.toString(),re+=v.length+1,Ae.push(v),Ae},at=p.__private__.write=function(v){return Q(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},nt=p.__private__.getArrayBuffer=function(v){for(var I=v.length,Y=new ArrayBuffer(I),ae=new Uint8Array(Y);I--;)ae[I]=v.charCodeAt(I);return Y},Ve=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ve};var ue=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return ue=C===S?v/et:v,this};var qe,Ee=p.__private__.getFontSize=p.getFontSize=function(){return C===_?ue:ue*et},Xe=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return Xe=v,this},p.__private__.getR2L=p.getR2L=function(){return Xe};var Oe,Ye=p.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))qe=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');qe=v}else qe=parseInt(v,10)};p.__private__.getZoomMode=function(){return qe};var Qe,Je=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Oe=v};p.__private__.getPageMode=function(){return Oe};var Ct=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Qe=v};p.__private__.getLayoutMode=function(){return Qe},p.__private__.setDisplayMode=p.setDisplayMode=function(v,I,Y){return Ye(v),Ct(I),Je(Y),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(ot).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[v]},p.__private__.getDocumentProperties=function(){return ot},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var I in ot)ot.hasOwnProperty(I)&&v[I]&&(ot[I]=v[I]);return this},p.__private__.setDocumentProperty=function(v,I){if(Object.keys(ot).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[v]=I};var Ue,et,Ge,Rt,wt,$e={},dt={},Pt=[],Ke={},vt={},ut={},on={},jn=null,qt=0,st=[],Nt=new r2(p),ni=e.hotfixes||[],Gn={},Ia={},ya=[],Ze=function v(I,Y,ae,he,je,Ce){if(!(this instanceof v))return new v(I,Y,ae,he,je,Ce);isNaN(I)&&(I=1),isNaN(Y)&&(Y=0),isNaN(ae)&&(ae=0),isNaN(he)&&(he=1),isNaN(je)&&(je=0),isNaN(Ce)&&(Ce=0),this._matrix=[I,Y,ae,he,je,Ce]};Object.defineProperty(Ze.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ze.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ze.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ze.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ze.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ze.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ze.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ze.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ze.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ze.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ze.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ze.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ze.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ze.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ze.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ze.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ze.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(x).join(v)},Ze.prototype.multiply=function(v){var I=v.sx*this.sx+v.shy*this.shx,Y=v.sx*this.shy+v.shy*this.sy,ae=v.shx*this.sx+v.sy*this.shx,he=v.shx*this.shy+v.sy*this.sy,je=v.tx*this.sx+v.ty*this.shx+this.tx,Ce=v.tx*this.shy+v.ty*this.sy+this.ty;return new Ze(I,Y,ae,he,je,Ce)},Ze.prototype.decompose=function(){var v=this.sx,I=this.shy,Y=this.shx,ae=this.sy,he=this.tx,je=this.ty,Ce=Math.sqrt(v*v+I*I),Re=(v/=Ce)*Y+(I/=Ce)*ae;Y-=v*Re,ae-=I*Re;var ze=Math.sqrt(Y*Y+ae*ae);return Re/=ze,v*(ae/=ze)<I*(Y/=ze)&&(v=-v,I=-I,Re=-Re,Ce=-Ce),{scale:new Ze(Ce,0,0,ze,0,0),translate:new Ze(1,0,0,1,he,je),rotate:new Ze(v,I,-I,v,0,0),skew:new Ze(1,0,Re,1,0,0)}},Ze.prototype.toString=function(v){return this.join(" ")},Ze.prototype.inversed=function(){var v=this.sx,I=this.shy,Y=this.shx,ae=this.sy,he=this.tx,je=this.ty,Ce=1/(v*ae-I*Y),Re=ae*Ce,ze=-I*Ce,rt=-Y*Ce,lt=v*Ce;return new Ze(Re,ze,rt,lt,-Re*he-rt*je,-ze*he-lt*je)},Ze.prototype.applyToPoint=function(v){var I=v.x*this.sx+v.y*this.shx+this.tx,Y=v.x*this.shy+v.y*this.sy+this.ty;return new hi(I,Y)},Ze.prototype.applyToRectangle=function(v){var I=this.applyToPoint(v),Y=this.applyToPoint(new hi(v.x+v.w,v.y+v.h));return new hl(I.x,I.y,Y.x-I.x,Y.y-I.y)},Ze.prototype.clone=function(){var v=this.sx,I=this.shy,Y=this.shx,ae=this.sy,he=this.tx,je=this.ty;return new Ze(v,I,Y,ae,he,je)},p.Matrix=Ze;var Fa=p.matrixMult=function(v,I){return I.multiply(v)},Ra=new Ze(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ra;var Rr=function(v,I){if(!vt[v]){var Y=(I instanceof Li?"Sh":"P")+(Object.keys(Ke).length+1).toString(10);I.id=Y,vt[v]=Y,Ke[Y]=I,Nt.publish("addPattern",I)}};p.ShadingPattern=Li,p.TilingPattern=Ao,p.addShadingPattern=function(v,I){return A("addShadingPattern()"),Rr(v,I),this},p.beginTilingPattern=function(v){A("beginTilingPattern()"),fl(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,I){A("endTilingPattern()"),I.stream=be[H].join(`
`),Rr(v,I),Nt.publish("endTilingPattern",I),ya.pop().restore()};var Or,Qt=p.__private__.newObject=function(){var v=En();return In(v,!0),v},En=p.__private__.newObjectDeferred=function(){return ne++,le[ne]=function(){return re},ne},In=function(v,I){return I=typeof I=="boolean"&&I,le[v]=re,I&&Q(v+" 0 obj"),v},ri=p.__private__.newAdditionalObject=function(){var v={objId:En(),content:""};return fe.push(v),v},hs=En(),ea=En(),xa=p.__private__.decodeColorString=function(v){var I=v.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length!==5||I[4]!=="k"&&I[4]!=="K"||(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var Y=parseFloat(I[0]);I=[Y,Y,Y,"r"]}for(var ae="#",he=0;he<3;he++)ae+=("0"+Math.floor(255*parseFloat(I[he])).toString(16)).slice(-2);return ae},ta=p.__private__.encodeColorString=function(v){var I;typeof v=="string"&&(v={ch1:v});var Y=v.ch1,ae=v.ch2,he=v.ch3,je=v.ch4,Ce=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Y=="string"&&Y.charAt(0)!=="#"){var Re=new rx(Y);if(Re.ok)Y=Re.toHex();else if(!/^\d*\.?\d*$/.test(Y))throw new Error('Invalid color "'+Y+'" passed to jsPDF.encodeColorString.')}if(typeof Y=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Y)&&(Y="#"+Y[1]+Y[1]+Y[2]+Y[2]+Y[3]+Y[3]),typeof Y=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Y)){var ze=parseInt(Y.substr(1),16);Y=ze>>16&255,ae=ze>>8&255,he=255&ze}if(ae===void 0||je===void 0&&Y===ae&&ae===he)I=typeof Y=="string"?Y+" "+Ce[0]:v.precision===2?L(Y/255)+" "+Ce[0]:O(Y/255)+" "+Ce[0];else if(je===void 0||Lt(je)==="object"){if(je&&!isNaN(je.a)&&je.a===0)return["1.","1.","1.",Ce[1]].join(" ");I=typeof Y=="string"?[Y,ae,he,Ce[1]].join(" "):v.precision===2?[L(Y/255),L(ae/255),L(he/255),Ce[1]].join(" "):[O(Y/255),O(ae/255),O(he/255),Ce[1]].join(" ")}else I=typeof Y=="string"?[Y,ae,he,je,Ce[2]].join(" "):v.precision===2?[L(Y),L(ae),L(he),L(je),Ce[2]].join(" "):[O(Y),O(ae),O(he),O(je),Ce[2]].join(" ");return I},na=p.__private__.getFilters=function(){return o},Mr=p.__private__.putStream=function(v){var I=(v=v||{}).data||"",Y=v.filters||na(),ae=v.alreadyAppliedFilters||[],he=v.addLength1||!1,je=I.length,Ce=v.objectId,Re=function(Nn){return Nn};if(h!==null&&Ce===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Re=ln.encryptor(Ce,0));var ze={};Y===!0&&(Y=["FlateEncode"]);var rt=v.additionalKeyValues||[],lt=(ze=He.API.processDataByFilters!==void 0?He.API.processDataByFilters(I,Y):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(ae)?ae.join(" "):ae.toString());if(ze.data.length!==0&&(rt.push({key:"Length",value:ze.data.length}),he===!0&&rt.push({key:"Length1",value:je})),lt.length!=0)if(lt.split("/").length-1==1)rt.push({key:"Filter",value:lt});else{rt.push({key:"Filter",value:"["+lt+"]"});for(var jt=0;jt<rt.length;jt+=1)if(rt[jt].key==="DecodeParms"){for(var Kt=[],bn=0;bn<ze.reverseChain.split("/").length-1;bn+=1)Kt.push("null");Kt.push(rt[jt].value),rt[jt].value="["+Kt.join(" ")+"]"}}Q("<<");for(var Ot=0;Ot<rt.length;Ot++)Q("/"+rt[Ot].key+" "+rt[Ot].value);Q(">>"),ze.data.length!==0&&(Q("stream"),Q(Re(ze.data)),Q("endstream"))},ai=p.__private__.putPage=function(v){var I=v.number,Y=v.data,ae=v.objId,he=v.contentsObjId;In(ae,!0),Q("<</Type /Page"),Q("/Parent "+v.rootDictionaryObjId+" 0 R"),Q("/Resources "+v.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(x(v.mediaBox.bottomLeftX))+" "+parseFloat(x(v.mediaBox.bottomLeftY))+" "+x(v.mediaBox.topRightX)+" "+x(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&Q("/CropBox ["+x(v.cropBox.bottomLeftX)+" "+x(v.cropBox.bottomLeftY)+" "+x(v.cropBox.topRightX)+" "+x(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&Q("/BleedBox ["+x(v.bleedBox.bottomLeftX)+" "+x(v.bleedBox.bottomLeftY)+" "+x(v.bleedBox.topRightX)+" "+x(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&Q("/TrimBox ["+x(v.trimBox.bottomLeftX)+" "+x(v.trimBox.bottomLeftY)+" "+x(v.trimBox.topRightX)+" "+x(v.trimBox.topRightY)+"]"),v.artBox!==null&&Q("/ArtBox ["+x(v.artBox.bottomLeftX)+" "+x(v.artBox.bottomLeftY)+" "+x(v.artBox.topRightX)+" "+x(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&Q("/UserUnit "+v.userUnit),Nt.publish("putPage",{objId:ae,pageContext:st[I],pageNumber:I,page:Y}),Q("/Contents "+he+" 0 R"),Q(">>"),Q("endobj");var je=Y.join(`
`);return C===S&&(je+=`
Q`),In(he,!0),Mr({data:je,filters:na(),objectId:he}),Q("endobj"),ae},ba=p.__private__.putPages=function(){var v,I,Y=[];for(v=1;v<=qt;v++)st[v].objId=En(),st[v].contentsObjId=En();for(v=1;v<=qt;v++)Y.push(ai({number:v,data:be[v],objId:st[v].objId,contentsObjId:st[v].contentsObjId,mediaBox:st[v].mediaBox,cropBox:st[v].cropBox,bleedBox:st[v].bleedBox,trimBox:st[v].trimBox,artBox:st[v].artBox,userUnit:st[v].userUnit,rootDictionaryObjId:hs,resourceDictionaryObjId:ea}));In(hs,!0),Q("<</Type /Pages");var ae="/Kids [";for(I=0;I<qt;I++)ae+=Y[I]+" 0 R ";Q(ae+"]"),Q("/Count "+qt),Q(">>"),Q("endobj"),Nt.publish("postPutPages")},si=function(v){Nt.publish("putFont",{font:v,out:Q,newObject:Qt,putStream:Mr}),v.isAlreadyPutted!==!0&&(v.objectNumber=Qt(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+po(v.postScriptName)),Q("/Subtype /Type1"),typeof v.encoding=="string"&&Q("/Encoding /"+v.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},Zi=function(v){v.objectNumber=Qt();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[x(v.x),x(v.y),x(v.x+v.width),x(v.y+v.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Y=v.pages[1].join(`
`);Mr({data:Y,additionalKeyValues:I,objectId:v.objectNumber}),Q("endobj")},Yi=function(v,I){I||(I=21);var Y=Qt(),ae=function(Ce,Re){var ze,rt=[],lt=1/(Re-1);for(ze=0;ze<1;ze+=lt)rt.push(ze);if(rt.push(1),Ce[0].offset!=0){var jt={offset:0,color:Ce[0].color};Ce.unshift(jt)}if(Ce[Ce.length-1].offset!=1){var Kt={offset:1,color:Ce[Ce.length-1].color};Ce.push(Kt)}for(var bn="",Ot=0,Nn=0;Nn<rt.length;Nn++){for(ze=rt[Nn];ze>Ce[Ot+1].offset;)Ot++;var _n=Ce[Ot].offset,Fn=(ze-_n)/(Ce[Ot+1].offset-_n),Ur=Ce[Ot].color,ur=Ce[Ot+1].color;bn+=V(Math.round((1-Fn)*Ur[0]+Fn*ur[0]).toString(16))+V(Math.round((1-Fn)*Ur[1]+Fn*ur[1]).toString(16))+V(Math.round((1-Fn)*Ur[2]+Fn*ur[2]).toString(16))}return bn.trim()}(v.colors,I),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+I+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Mr({data:ae,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Y}),Q("endobj"),v.objectNumber=Qt(),Q("<< /ShadingType "+v.type),Q("/ColorSpace /DeviceRGB");var je="/Coords ["+x(parseFloat(v.coords[0]))+" "+x(parseFloat(v.coords[1]))+" ";v.type===2?je+=x(parseFloat(v.coords[2]))+" "+x(parseFloat(v.coords[3])):je+=x(parseFloat(v.coords[2]))+" "+x(parseFloat(v.coords[3]))+" "+x(parseFloat(v.coords[4]))+" "+x(parseFloat(v.coords[5])),Q(je+="]"),v.matrix&&Q("/Matrix ["+v.matrix.toString()+"]"),Q("/Function "+Y+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},Ji=function(v,I){var Y=En(),ae=Qt();I.push({resourcesOid:Y,objectOid:ae}),v.objectNumber=ae;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+v.boundingBox.map(x).join(" ")+"]"}),he.push({key:"XStep",value:x(v.xStep)}),he.push({key:"YStep",value:x(v.yStep)}),he.push({key:"Resources",value:Y+" 0 R"}),v.matrix&&he.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Mr({data:v.stream,additionalKeyValues:he,objectId:v.objectNumber}),Q("endobj")},lh=function(v){for(var I in v.objectNumber=Qt(),Q("<<"),v)switch(I){case"opacity":Q("/ca "+L(v[I]));break;case"stroke-opacity":Q("/CA "+L(v[I]))}Q(">>"),Q("endobj")},nl=function(v){In(v.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var I in Q("/Font <<"),$e)$e.hasOwnProperty(I)&&(m===!1||m===!0&&g.hasOwnProperty(I))&&Q("/"+I+" "+$e[I].objectNumber+" 0 R");Q(">>")}(),function(){if(Object.keys(Ke).length>0){for(var I in Q("/Shading <<"),Ke)Ke.hasOwnProperty(I)&&Ke[I]instanceof Li&&Ke[I].objectNumber>=0&&Q("/"+I+" "+Ke[I].objectNumber+" 0 R");Nt.publish("putShadingPatternDict"),Q(">>")}}(),function(I){if(Object.keys(Ke).length>0){for(var Y in Q("/Pattern <<"),Ke)Ke.hasOwnProperty(Y)&&Ke[Y]instanceof p.TilingPattern&&Ke[Y].objectNumber>=0&&Ke[Y].objectNumber<I&&Q("/"+Y+" "+Ke[Y].objectNumber+" 0 R");Nt.publish("putTilingPatternDict"),Q(">>")}}(v.objectOid),function(){if(Object.keys(ut).length>0){var I;for(I in Q("/ExtGState <<"),ut)ut.hasOwnProperty(I)&&ut[I].objectNumber>=0&&Q("/"+I+" "+ut[I].objectNumber+" 0 R");Nt.publish("putGStateDict"),Q(">>")}}(),function(){for(var I in Q("/XObject <<"),Gn)Gn.hasOwnProperty(I)&&Gn[I].objectNumber>=0&&Q("/"+I+" "+Gn[I].objectNumber+" 0 R");Nt.publish("putXobjectDict"),Q(">>")}(),Q(">>"),Q("endobj")},qc=function(v){dt[v.fontName]=dt[v.fontName]||{},dt[v.fontName][v.fontStyle]=v.id},Tc=function(v,I,Y,ae,he){var je={id:"F"+(Object.keys($e).length+1).toString(10),postScriptName:v,fontName:I,fontStyle:Y,encoding:ae,isStandardFont:he||!1,metadata:{}};return Nt.publish("addFont",{font:je,instance:this}),$e[je.id]=je,qc(je),je.id},Br=p.__private__.pdfEscape=p.pdfEscape=function(v,I){return function(Y,ae){var he,je,Ce,Re,ze,rt,lt,jt,Kt;if(Ce=(ae=ae||{}).sourceEncoding||"Unicode",ze=ae.outputEncoding,(ae.autoencode||ze)&&$e[Ue].metadata&&$e[Ue].metadata[Ce]&&$e[Ue].metadata[Ce].encoding&&(Re=$e[Ue].metadata[Ce].encoding,!ze&&$e[Ue].encoding&&(ze=$e[Ue].encoding),!ze&&Re.codePages&&(ze=Re.codePages[0]),typeof ze=="string"&&(ze=Re[ze]),ze)){for(lt=!1,rt=[],he=0,je=Y.length;he<je;he++)(jt=ze[Y.charCodeAt(he)])?rt.push(String.fromCharCode(jt)):rt.push(Y[he]),rt[he].charCodeAt(0)>>8&&(lt=!0);Y=rt.join("")}for(he=Y.length;lt===void 0&&he!==0;)Y.charCodeAt(he-1)>>8&&(lt=!0),he--;if(!lt)return Y;for(rt=ae.noBOM?[]:[254,255],he=0,je=Y.length;he<je;he++){if((Kt=(jt=Y.charCodeAt(he))>>8)>>8)throw new Error("Character at position "+he+" of string '"+Y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");rt.push(Kt),rt.push(jt-(Kt<<8))}return String.fromCharCode.apply(void 0,rt)}(v,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rl=p.__private__.beginPage=function(v){be[++qt]=[],st[qt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Fc(qt),ye(be[H])},Ic=function(v,I){var Y,ae,he;switch(n=I||n,typeof v=="string"&&(Y=y(v.toLowerCase()),Array.isArray(Y)&&(ae=Y[0],he=Y[1])),Array.isArray(v)&&(ae=v[0]*et,he=v[1]*et),isNaN(ae)&&(ae=s[0],he=s[1]),(ae>14400||he>14400)&&(Ft.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ae=Math.min(14400,ae),he=Math.min(14400,he)),s=[ae,he],n.substr(0,1)){case"l":he>ae&&(s=[he,ae]);break;case"p":ae>he&&(s=[he,ae])}rl(s),vh(ll),Q(Qi),dl!==0&&Q(dl+" J"),ul!==0&&Q(ul+" j"),Nt.publish("addPage",{pageNumber:qt})},al=function(v){v>0&&v<=qt&&(be.splice(v,1),st.splice(v,1),qt--,H>qt&&(H=qt),this.setPage(H))},Fc=function(v){v>0&&v<=qt&&(H=v)},Rc=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return be.length-1},Oc=function(v,I,Y){var ae,he=void 0;return Y=Y||{},v=v!==void 0?v:$e[Ue].fontName,I=I!==void 0?I:$e[Ue].fontStyle,ae=v.toLowerCase(),dt[ae]!==void 0&&dt[ae][I]!==void 0?he=dt[ae][I]:dt[v]!==void 0&&dt[v][I]!==void 0?he=dt[v][I]:Y.disableWarning===!1&&Ft.warn("Unable to look up font label for font '"+v+"', '"+I+"'. Refer to getFontList() for available fonts."),he||Y.noFallback||(he=dt.times[I])==null&&(he=dt.times.normal),he},Xi=p.__private__.putInfo=function(){var v=Qt(),I=function(ae){return ae};for(var Y in h!==null&&(I=ln.encryptor(v,0)),Q("<<"),Q("/Producer ("+Br(I("jsPDF "+He.version))+")"),ot)ot.hasOwnProperty(Y)&&ot[Y]&&Q("/"+Y.substr(0,1).toUpperCase()+Y.substr(1)+" ("+Br(I(ot[Y]))+")");Q("/CreationDate ("+Br(I(X))+")"),Q(">>"),Q("endobj")},ch=p.__private__.putCatalog=function(v){var I=(v=v||{}).rootDictionaryObjId||hs;switch(Qt(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+I+" 0 R"),qe||(qe="fullwidth"),qe){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Y=""+qe;Y.substr(Y.length-1)==="%"&&(qe=parseInt(qe)/100),typeof qe=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+L(qe)+"]")}switch(Qe||(Qe="continuous"),Qe){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}Oe&&Q("/PageMode /"+Oe),Nt.publish("putCatalog"),Q(">>"),Q("endobj")},xn=p.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(ne+1)),Q("/Root "+ne+" 0 R"),Q("/Info "+(ne-1)+" 0 R"),h!==null&&Q("/Encrypt "+ln.oid+" 0 R"),Q("/ID [ <"+te+"> <"+te+"> ]"),Q(">>")},Mc=p.__private__.putHeader=function(){Q("%PDF-"+j),Q("%")},Bc=p.__private__.putXRef=function(){var v="0000000000";Q("xref"),Q("0 "+(ne+1)),Q("0000000000 65535 f ");for(var I=1;I<=ne;I++)typeof le[I]=="function"?Q((v+le[I]()).slice(-10)+" 00000 n "):le[I]!==void 0?Q((v+le[I]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Oa=p.__private__.buildDocument=function(){var v;ne=0,re=0,me=[],le=[],fe=[],hs=En(),ea=En(),ye(me),Nt.publish("buildDocument"),Mc(),ba(),function(){Nt.publish("putAdditionalObjects");for(var Y=0;Y<fe.length;Y++){var ae=fe[Y];In(ae.objId,!0),Q(ae.content),Q("endobj")}Nt.publish("postPutAdditionalObjects")}(),v=[],function(){for(var Y in $e)$e.hasOwnProperty(Y)&&(m===!1||m===!0&&g.hasOwnProperty(Y))&&si($e[Y])}(),function(){var Y;for(Y in ut)ut.hasOwnProperty(Y)&&lh(ut[Y])}(),function(){for(var Y in Gn)Gn.hasOwnProperty(Y)&&Zi(Gn[Y])}(),function(Y){var ae;for(ae in Ke)Ke.hasOwnProperty(ae)&&(Ke[ae]instanceof Li?Yi(Ke[ae]):Ke[ae]instanceof Ao&&Ji(Ke[ae],Y))}(v),Nt.publish("putResources"),v.forEach(nl),nl({resourcesOid:ea,objectOid:Number.MAX_SAFE_INTEGER}),Nt.publish("postPutResources"),h!==null&&(ln.oid=Qt(),Q("<<"),Q("/Filter /Standard"),Q("/V "+ln.v),Q("/R "+ln.r),Q("/U <"+ln.toHexString(ln.U)+">"),Q("/O <"+ln.toHexString(ln.O)+">"),Q("/P "+ln.P),Q(">>"),Q("endobj")),Xi(),ch();var I=re;return Bc(),xn(),Q("startxref"),Q(""+I),Q("%%EOF"),ye(be[H]),me.join(`
`)},ii=p.__private__.getBlob=function(v){return new Blob([nt(v)],{type:"application/pdf"})},ra=p.output=p.__private__.output=(Or=function(v,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",v){case void 0:return Oa();case"save":p.save(I.filename);break;case"arraybuffer":return nt(Oa());case"blob":return ii(Oa());case"bloburi":case"bloburl":if(tt.URL!==void 0&&typeof tt.URL.createObjectURL=="function")return tt.URL&&tt.URL.createObjectURL(ii(Oa()))||void 0;Ft.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Y="",ae=Oa();try{Y=e2(ae)}catch{Y=e2(unescape(encodeURIComponent(ae)))}return"data:application/pdf;filename="+I.filename+";base64,"+Y;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tt)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(he=I.pdfObjectUrl,je="");var Ce='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",Re=tt.open();return Re!==null&&Re.document.write(Ce),Re}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tt)==="[object Window]"){var ze='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',rt=tt.open();if(rt!==null){rt.document.write(ze);var lt=this;rt.document.documentElement.querySelector("#pdfViewer").onload=function(){rt.document.title=I.filename,rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(lt.output("bloburl"))}}return rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',Kt=tt.open();if(Kt!==null&&(Kt.document.write(jt),Kt.document.title=I.filename),Kt||typeof safari>"u")return Kt;break;case"datauri":case"dataurl":return tt.document.location.href=this.output("datauristring",I);default:return null}},Or.foo=function(){try{return Or.apply(this,arguments)}catch(Y){var v=Y.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var I="Error in function "+v.split(`
`)[0].split("<")[0]+": "+Y.message;if(!tt.console)throw new Error(I);tt.console.error(I,Y),tt.alert&&alert(I)}},Or.foo.bar=Or,Or.foo),oi=function(v){return Array.isArray(ni)===!0&&ni.indexOf(v)>-1};switch(r){case"pt":et=1;break;case"mm":et=72/25.4;break;case"cm":et=72/2.54;break;case"in":et=72;break;case"px":et=oi("px_scaling")==1?.75:96/72;break;case"pc":case"em":et=12;break;case"ex":et=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);et=r}var ln=null;de(),Z();var sl=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:st[v].objId,pageNumber:v,pageContext:st[v]}},dh=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in st)if(st[I].objId===v)break;return sl(I)},uh=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:st[H].objId,pageNumber:H,pageContext:st[H]}};p.addPage=function(){return Ic.apply(this,arguments),this},p.setPage=function(){return Fc.apply(this,arguments),ye.call(this,be[H]),this},p.insertPage=function(v){return this.addPage(),this.movePage(H,v),this},p.movePage=function(v,I){var Y,ae;if(v>I){Y=be[v],ae=st[v];for(var he=v;he>I;he--)be[he]=be[he-1],st[he]=st[he-1];be[I]=Y,st[I]=ae,this.setPage(I)}else if(v<I){Y=be[v],ae=st[v];for(var je=v;je<I;je++)be[je]=be[je+1],st[je]=st[je+1];be[I]=Y,st[I]=ae,this.setPage(I)}return this},p.deletePage=function(){return al.apply(this,arguments),this},p.__private__.text=p.text=function(v,I,Y,ae,he){var je,Ce,Re,ze,rt,lt,jt,Kt,bn,Ot=(ae=ae||{}).scope||this;if(typeof v=="number"&&typeof I=="number"&&(typeof Y=="string"||Array.isArray(Y))){var Nn=Y;Y=I,I=v,v=Nn}if(arguments[3]instanceof Ze==0?(Re=arguments[4],ze=arguments[5],Lt(jt=arguments[3])==="object"&&jt!==null||(typeof Re=="string"&&(ze=Re,Re=null),typeof jt=="string"&&(ze=jt,jt=null),typeof jt=="number"&&(Re=jt,jt=null),ae={flags:jt,angle:Re,align:ze})):(A("The transform parameter of text() with a Matrix value"),bn=he),isNaN(I)||isNaN(Y)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Ot;var _n,Fn="",Ur=typeof ae.lineHeightFactor=="number"?ae.lineHeightFactor:ci,ur=Ot.internal.scaleFactor;function Kc(St){return St=St.split("	").join(Array(ae.TabLen||9).join(" ")),Br(St,jt)}function ro(St){for(var Tt,dn=St.concat(),Sn=[],Ha=dn.length;Ha--;)typeof(Tt=dn.shift())=="string"?Sn.push(Tt):Array.isArray(St)&&(Tt.length===1||Tt[1]===void 0&&Tt[2]===void 0)?Sn.push(Tt[0]):Sn.push([Tt[0],Tt[1],Tt[2]]);return Sn}function mi(St,Tt){var dn;if(typeof St=="string")dn=Tt(St)[0];else if(Array.isArray(St)){for(var Sn,Ha,jl=St.concat(),io=[],Jc=jl.length;Jc--;)typeof(Sn=jl.shift())=="string"?io.push(Tt(Sn)[0]):Array.isArray(Sn)&&typeof Sn[0]=="string"&&(Ha=Tt(Sn[0],Sn[1],Sn[2]),io.push([Ha[0],Ha[1],Ha[2]]));dn=io}return dn}var ms=!1,gi=!0;if(typeof v=="string")ms=!0;else if(Array.isArray(v)){var vi=v.concat();Ce=[];for(var yi,Kn=vi.length;Kn--;)(typeof(yi=vi.shift())!="string"||Array.isArray(yi)&&typeof yi[0]!="string")&&(gi=!1);ms=gi}if(ms===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var xi=ue/Ot.internal.scaleFactor,bi=xi*(Ur-1);switch(ae.baseline){case"bottom":Y-=bi;break;case"top":Y+=xi-bi;break;case"hanging":Y+=xi-2*bi;break;case"middle":Y+=xi/2-bi}if((lt=ae.maxWidth||0)>0&&(typeof v=="string"?v=Ot.splitTextToSize(v,lt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(St,Tt){return St.concat(Ot.splitTextToSize(Tt,lt))},[]))),je={text:v,x:I,y:Y,options:ae,mutex:{pdfEscape:Br,activeFontKey:Ue,fonts:$e,activeFontSize:ue}},Nt.publish("preProcessText",je),v=je.text,Re=(ae=je.options).angle,bn instanceof Ze==0&&Re&&typeof Re=="number"){Re*=Math.PI/180,ae.rotationDirection===0&&(Re=-Re),C===S&&(Re=-Re);var pl=Math.cos(Re),ml=Math.sin(Re);bn=new Ze(pl,ml,-ml,pl,0,0)}else Re&&Re instanceof Ze&&(bn=Re);C!==S||bn||(bn=Ra),(rt=ae.charSpace||to)!==void 0&&(Fn+=x(P(rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Kt=ae.horizontalScale)!==void 0&&(Fn+=x(100*Kt)+` Tz
`),ae.lang;var en=-1,$a=ae.renderingMode!==void 0?ae.renderingMode:ae.stroke,ao=Ot.internal.getCurrentPageInfo().pageContext;switch($a){case 0:case!1:case"fill":en=0;break;case 1:case!0:case"stroke":en=1;break;case 2:case"fillThenStroke":en=2;break;case 3:case"invisible":en=3;break;case 4:case"fillAndAddForClipping":en=4;break;case 5:case"strokeAndAddPathForClipping":en=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":en=6;break;case 7:case"addToPathForClipping":en=7}var Zc=ao.usedRenderingMode!==void 0?ao.usedRenderingMode:-1;en!==-1?Fn+=en+` Tr
`:Zc!==-1&&(Fn+=`0 Tr
`),en!==-1&&(ao.usedRenderingMode=en),ze=ae.align||"left";var zr,_i=ue*Ur,gl=Ot.internal.pageSize.getWidth(),vl=$e[Ue];rt=ae.charSpace||to,lt=ae.maxWidth||0,jt=Object.assign({autoencode:!0,noBOM:!0},ae.flags);var gs=[],wi=function(St){return Ot.getStringUnitWidth(St,{font:vl,charSpace:rt,fontSize:ue,doKerning:!1})*ue/ur};if(Object.prototype.toString.call(v)==="[object Array]"){var _r;Ce=ro(v),ze!=="left"&&(zr=Ce.map(wi));var wr,vs=0;if(ze==="right"){I-=zr[0],v=[],Kn=Ce.length;for(var Wa=0;Wa<Kn;Wa++)Wa===0?(wr=Ma(I),_r=Ba(Y)):(wr=P(vs-zr[Wa]),_r=-_i),v.push([Ce[Wa],wr,_r]),vs=zr[Wa]}else if(ze==="center"){I-=zr[0]/2,v=[],Kn=Ce.length;for(var ys=0;ys<Kn;ys++)ys===0?(wr=Ma(I),_r=Ba(Y)):(wr=P((vs-zr[ys])/2),_r=-_i),v.push([Ce[ys],wr,_r]),vs=zr[ys]}else if(ze==="left"){v=[],Kn=Ce.length;for(var yl=0;yl<Kn;yl++)v.push(Ce[yl])}else if(ze==="justify"&&vl.encoding==="Identity-H"){v=[],Kn=Ce.length,lt=lt!==0?lt:gl;for(var so=0,cn=0;cn<Kn;cn++)if(_r=cn===0?Ba(Y):-_i,wr=cn===0?Ma(I):so,cn<Kn-1){var Yc=P((lt-zr[cn])/(Ce[cn].split(" ").length-1)),wa=Ce[cn].split(" ");v.push([wa[0]+" ",wr,_r]),so=0;for(var ja=1;ja<wa.length;ja++){var xl=(wi(wa[ja-1]+" "+wa[ja])-wi(wa[ja]))*ur+Yc;ja==wa.length-1?v.push([wa[ja],xl,0]):v.push([wa[ja]+" ",xl,0]),so-=xl}}else v.push([Ce[cn],wr,_r]);v.push(["",so,0])}else{if(ze!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Kn=Ce.length,lt=lt!==0?lt:gl,cn=0;cn<Kn;cn++){_r=cn===0?Ba(Y):-_i,wr=cn===0?Ma(I):0;var bl=Ce[cn].split(" ").length-1,_l=bl>0?(lt-zr[cn])/bl:0;cn<Kn-1?gs.push(x(P(_l))):gs.push(0),v.push([Ce[cn],wr,_r])}}}(typeof ae.R2L=="boolean"?ae.R2L:Xe)===!0&&(v=mi(v,function(St,Tt,dn){return[St.split("").reverse().join(""),Tt,dn]})),je={text:v,x:I,y:Y,options:ae,mutex:{pdfEscape:Br,activeFontKey:Ue,fonts:$e,activeFontSize:ue}},Nt.publish("postProcessText",je),v=je.text,_n=je.mutex.isHex||!1;var wl=$e[Ue].encoding;wl!=="WinAnsiEncoding"&&wl!=="StandardEncoding"||(v=mi(v,function(St,Tt,dn){return[Kc(St),Tt,dn]})),Ce=ro(v),v=[];for(var xs,bs,_s,ji=Array.isArray(Ce[0])?1:0,ws="",Ni=function(St,Tt,dn){var Sn="";return dn instanceof Ze?(dn=typeof ae.angle=="number"?Fa(dn,new Ze(1,0,0,1,St,Tt)):Fa(new Ze(1,0,0,1,St,Tt),dn),C===S&&(dn=Fa(new Ze(1,0,0,-1,0,0),dn)),Sn=dn.join(" ")+` Tm
`):Sn=x(St)+" "+x(Tt)+` Td
`,Sn},$r=0;$r<Ce.length;$r++){switch(ws="",ji){case 1:_s=(_n?"<":"(")+Ce[$r][0]+(_n?">":")"),xs=parseFloat(Ce[$r][1]),bs=parseFloat(Ce[$r][2]);break;case 0:_s=(_n?"<":"(")+Ce[$r]+(_n?">":")"),xs=Ma(I),bs=Ba(Y)}gs!==void 0&&gs[$r]!==void 0&&(ws=gs[$r]+` Tw
`),$r===0?v.push(ws+Ni(xs,bs,bn)+_s):ji===0?v.push(ws+_s):ji===1&&v.push(ws+Ni(xs,bs,bn)+_s)}v=ji===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var Na=`BT
/`;return Na+=Ue+" "+ue+` Tf
`,Na+=x(ue*Ur)+` TL
`,Na+=di+`
`,Na+=Fn,Na+=v,Q(Na+="ET"),g[Ue]=!0,Ot};var hh=p.__private__.clip=p.clip=function(v){return Q(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return hh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Q("n"),this};var _a=p.__private__.isValidStyle=function(v){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(I=!0),I};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return _a(v)&&(d=v),this};var Uc=p.__private__.getStyle=p.getStyle=function(v){var I=d;switch(v){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=v}return I},zc=p.close=function(){return Q("h"),this};p.stroke=function(){return Q("S"),this},p.fill=function(v){return fs("f",v),this},p.fillEvenOdd=function(v){return fs("f*",v),this},p.fillStroke=function(v){return fs("B",v),this},p.fillStrokeEvenOdd=function(v){return fs("B*",v),this};var fs=function(v,I){Lt(I)==="object"?ph(I,v):Q(v)},il=function(v){v===null||C===S&&v===void 0||(v=Uc(v),Q(v))};function fh(v,I,Y,ae,he){var je=new Ao(I||this.boundingBox,Y||this.xStep,ae||this.yStep,this.gState,he||this.matrix);je.stream=this.stream;var Ce=v+"$$"+this.cloneIndex+++"$$";return Rr(Ce,je),je}var ph=function(v,I){var Y=vt[v.key],ae=Ke[Y];if(ae instanceof Li)Q("q"),Q(mh(I)),ae.gState&&p.setGState(ae.gState),Q(v.matrix.toString()+" cm"),Q("/"+Y+" sh"),Q("Q");else if(ae instanceof Ao){var he=new Ze(1,0,0,-1,0,pi());v.matrix&&(he=he.multiply(v.matrix||Ra),Y=fh.call(ae,v.key,v.boundingBox,v.xStep,v.yStep,he).id),Q("q"),Q("/Pattern cs"),Q("/"+Y+" scn"),ae.gState&&p.setGState(ae.gState),Q(I),Q("Q")}},mh=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ol=p.moveTo=function(v,I){return Q(x(P(v))+" "+x(T(I))+" m"),this},li=p.lineTo=function(v,I){return Q(x(P(v))+" "+x(T(I))+" l"),this},ps=p.curveTo=function(v,I,Y,ae,he,je){return Q([x(P(v)),x(T(I)),x(P(Y)),x(T(ae)),x(P(he)),x(T(je)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,I,Y,ae,he){if(isNaN(v)||isNaN(I)||isNaN(Y)||isNaN(ae)||!_a(he))throw new Error("Invalid arguments passed to jsPDF.line");return C===_?this.lines([[Y-v,ae-I]],v,I,[1,1],he||"S"):this.lines([[Y-v,ae-I]],v,I,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,I,Y,ae,he,je){var Ce,Re,ze,rt,lt,jt,Kt,bn,Ot,Nn,_n,Fn;if(typeof v=="number"&&(Fn=Y,Y=I,I=v,v=Fn),ae=ae||[1,1],je=je||!1,isNaN(I)||isNaN(Y)||!Array.isArray(v)||!Array.isArray(ae)||!_a(he)||typeof je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ol(I,Y),Ce=ae[0],Re=ae[1],rt=v.length,Nn=I,_n=Y,ze=0;ze<rt;ze++)(lt=v[ze]).length===2?(Nn=lt[0]*Ce+Nn,_n=lt[1]*Re+_n,li(Nn,_n)):(jt=lt[0]*Ce+Nn,Kt=lt[1]*Re+_n,bn=lt[2]*Ce+Nn,Ot=lt[3]*Re+_n,Nn=lt[4]*Ce+Nn,_n=lt[5]*Re+_n,ps(jt,Kt,bn,Ot,Nn,_n));return je&&zc(),il(he),this},p.path=function(v){for(var I=0;I<v.length;I++){var Y=v[I],ae=Y.c;switch(Y.op){case"m":ol(ae[0],ae[1]);break;case"l":li(ae[0],ae[1]);break;case"c":ps.apply(this,ae);break;case"h":zc()}}return this},p.__private__.rect=p.rect=function(v,I,Y,ae,he){if(isNaN(v)||isNaN(I)||isNaN(Y)||isNaN(ae)||!_a(he))throw new Error("Invalid arguments passed to jsPDF.rect");return C===_&&(ae=-ae),Q([x(P(v)),x(T(I)),x(P(Y)),x(P(ae)),"re"].join(" ")),il(he),this},p.__private__.triangle=p.triangle=function(v,I,Y,ae,he,je,Ce){if(isNaN(v)||isNaN(I)||isNaN(Y)||isNaN(ae)||isNaN(he)||isNaN(je)||!_a(Ce))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Y-v,ae-I],[he-Y,je-ae],[v-he,I-je]],v,I,[1,1],Ce,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,I,Y,ae,he,je,Ce){if(isNaN(v)||isNaN(I)||isNaN(Y)||isNaN(ae)||isNaN(he)||isNaN(je)||!_a(Ce))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Re=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*Y),je=Math.min(je,.5*ae),this.lines([[Y-2*he,0],[he*Re,0,he,je-je*Re,he,je],[0,ae-2*je],[0,je*Re,-he*Re,je,-he,je],[2*he-Y,0],[-he*Re,0,-he,-je*Re,-he,-je],[0,2*je-ae],[0,-je*Re,he*Re,-je,he,-je]],v+he,I,[1,1],Ce,!0),this},p.__private__.ellipse=p.ellipse=function(v,I,Y,ae,he){if(isNaN(v)||isNaN(I)||isNaN(Y)||isNaN(ae)||!_a(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var je=4/3*(Math.SQRT2-1)*Y,Ce=4/3*(Math.SQRT2-1)*ae;return ol(v+Y,I),ps(v+Y,I-Ce,v+je,I-ae,v,I-ae),ps(v-je,I-ae,v-Y,I-Ce,v-Y,I),ps(v-Y,I+Ce,v-je,I+ae,v,I+ae),ps(v+je,I+ae,v+Y,I+Ce,v+Y,I),il(he),this},p.__private__.circle=p.circle=function(v,I,Y,ae){if(isNaN(v)||isNaN(I)||isNaN(Y)||!_a(ae))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,I,Y,Y,ae)},p.setFont=function(v,I,Y){return Y&&(I=E(I,Y)),Ue=Oc(v,I,{disableWarning:!1}),this};var gh=p.__private__.getFont=p.getFont=function(){return $e[Oc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,I,Y={};for(v in dt)if(dt.hasOwnProperty(v))for(I in Y[v]=[],dt[v])dt[v].hasOwnProperty(I)&&Y[v].push(I);return Y},p.addFont=function(v,I,Y,ae,he){var je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&je.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&je.indexOf(arguments[3])==-1&&(Y=E(Y,ae)),Tc.call(this,v,I,Y,he=he||"Identity-H")};var ci,ll=e.lineWidth||.200025,it=p.__private__.getLineWidth=p.getLineWidth=function(){return ll},vh=p.__private__.setLineWidth=p.setLineWidth=function(v){return ll=v,Q(x(P(v))+" w"),this};p.__private__.setLineDash=He.API.setLineDash=He.API.setLineDashPattern=function(v,I){if(v=v||[],I=I||0,isNaN(I)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Y){return x(P(Y))}).join(" "),I=x(P(I)),Q("["+v+"] "+I+" d"),this};var yh=p.__private__.getLineHeight=p.getLineHeight=function(){return ue*ci};p.__private__.getLineHeight=p.getLineHeight=function(){return ue*ci};var xh=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(ci=v),this},bh=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return ci};xh(e.lineHeight);var Ma=p.__private__.getHorizontalCoordinate=function(v){return P(v)},Ba=p.__private__.getVerticalCoordinate=function(v){return C===S?v:st[H].mediaBox.topRightY-st[H].mediaBox.bottomLeftY-P(v)},_h=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return x(Ma(v))},wh=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return x(Ba(v))},Qi=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return xa(Qi)},p.__private__.setStrokeColor=p.setDrawColor=function(v,I,Y,ae){return Qi=ta({ch1:v,ch2:I,ch3:Y,ch4:ae,pdfColorType:"draw",precision:2}),Q(Qi),this};var cl=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return xa(cl)},p.__private__.setFillColor=p.setFillColor=function(v,I,Y,ae){return cl=ta({ch1:v,ch2:I,ch3:Y,ch4:ae,pdfColorType:"fill",precision:2}),Q(cl),this};var di=e.textColor||"0 g",eo=p.__private__.getTextColor=p.getTextColor=function(){return xa(di)};p.__private__.setTextColor=p.setTextColor=function(v,I,Y,ae){return di=ta({ch1:v,ch2:I,ch3:Y,ch4:ae,pdfColorType:"text",precision:3}),this};var to=e.charSpace,jh=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(to||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return to=v,this};var dl=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var I=p.CapJoinStyles[v];if(I===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return dl=I,Q(I+" J"),this};var ul=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var I=p.CapJoinStyles[v];if(I===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ul=I,Q(I+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(x(P(v))+" M"),this},p.GState=Pu,p.setGState=function(v){(v=typeof v=="string"?ut[on[v]]:ui(null,v)).equals(jn)||(Q("/"+v.id+" gs"),jn=v)};var ui=function(v,I){if(!v||!on[v]){var Y=!1;for(var ae in ut)if(ut.hasOwnProperty(ae)&&ut[ae].equals(I)){Y=!0;break}if(Y)I=ut[ae];else{var he="GS"+(Object.keys(ut).length+1).toString(10);ut[he]=I,I.id=he}return v&&(on[v]=I.id),Nt.publish("addGState",I),I}};p.addGState=function(v,I){return ui(v,I),this},p.saveGraphicsState=function(){return Q("q"),Pt.push({key:Ue,size:ue,color:di}),this},p.restoreGraphicsState=function(){Q("Q");var v=Pt.pop();return Ue=v.key,ue=v.size,di=v.color,jn=null,this},p.setCurrentTransformationMatrix=function(v){return Q(v.toString()+" cm"),this},p.comment=function(v){return Q("#"+v),this};var hi=function(v,I){var Y=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Y},set:function(je){isNaN(je)||(Y=parseFloat(je))}});var ae=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ae},set:function(je){isNaN(je)||(ae=parseFloat(je))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(je){he=je.toString()}}),this},hl=function(v,I,Y,ae){hi.call(this,v,I),this.type="rect";var he=Y||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(Ce){isNaN(Ce)||(he=parseFloat(Ce))}});var je=ae||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return je},set:function(Ce){isNaN(Ce)||(je=parseFloat(Ce))}}),this},no=function(){this.page=qt,this.currentPage=H,this.pages=be.slice(0),this.pagesContext=st.slice(0),this.x=Ge,this.y=Rt,this.matrix=wt,this.width=$c(H),this.height=Ua(H),this.outputDestination=Ae,this.id="",this.objectNumber=-1};no.prototype.restore=function(){qt=this.page,H=this.currentPage,st=this.pagesContext,be=this.pages,Ge=this.x,Rt=this.y,wt=this.matrix,Wc(H,this.width),za(H,this.height),Ae=this.outputDestination};var fl=function(v,I,Y,ae,he){ya.push(new no),qt=H=0,be=[],Ge=v,Rt=I,wt=he,rl([Y,ae])};for(var fi in p.beginFormObject=function(v,I,Y,ae,he){return fl(v,I,Y,ae,he),this},p.endFormObject=function(v){return function(I){if(Ia[I])ya.pop().restore();else{var Y=new no,ae="Xo"+(Object.keys(Gn).length+1).toString(10);Y.id=ae,Ia[I]=ae,Gn[ae]=Y,Nt.publish("addFormObject",Y),ya.pop().restore()}}(v),this},p.doFormObject=function(v,I){var Y=Gn[Ia[v]];return Q("q"),Q(I.toString()+" cm"),Q("/"+Y.id+" Do"),Q("Q"),this},p.getFormObject=function(v){var I=Gn[Ia[v]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},p.save=function(v,I){return v=v||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(Di(ii(Oa()),v),typeof Di.unload=="function"&&tt.setTimeout&&setTimeout(Di.unload,911),this):new Promise(function(Y,ae){try{var he=Di(ii(Oa()),v);typeof Di.unload=="function"&&tt.setTimeout&&setTimeout(Di.unload,911),Y(he)}catch(je){ae(je.message)}})},He.API)He.API.hasOwnProperty(fi)&&(fi==="events"&&He.API.events.length?function(v,I){var Y,ae,he;for(he=I.length-1;he!==-1;he--)Y=I[he][0],ae=I[he][1],v.subscribe.apply(v,[Y].concat(typeof ae=="function"?[ae]:ae))}(Nt,He.API.events):p[fi]=He.API[fi]);function $c(v){return st[v].mediaBox.topRightX-st[v].mediaBox.bottomLeftX}function Wc(v,I){st[v].mediaBox.topRightX=I+st[v].mediaBox.bottomLeftX}function Ua(v){return st[v].mediaBox.topRightY-st[v].mediaBox.bottomLeftY}function za(v,I){st[v].mediaBox.topRightY=I+st[v].mediaBox.bottomLeftY}var Hc=p.getPageWidth=function(v){return $c(v=v||H)/et},Vc=p.setPageWidth=function(v,I){Wc(v,I*et)},pi=p.getPageHeight=function(v){return Ua(v=v||H)/et},Gc=p.setPageHeight=function(v,I){za(v,I*et)};return p.internal={pdfEscape:Br,getStyle:Uc,getFont:gh,getFontSize:Ee,getCharSpace:jh,getTextColor:eo,getLineHeight:yh,getLineHeightFactor:bh,getLineWidth:it,write:at,getHorizontalCoordinate:Ma,getVerticalCoordinate:Ba,getCoordinateString:_h,getVerticalCoordinateString:wh,collections:{},newObject:Qt,newAdditionalObject:ri,newObjectDeferred:En,newObjectDeferredBegin:In,getFilters:na,putStream:Mr,events:Nt,scaleFactor:et,pageSize:{getWidth:function(){return Hc(H)},setWidth:function(v){Vc(H,v)},getHeight:function(){return pi(H)},setHeight:function(v){Gc(H,v)}},encryptionOptions:h,encryption:ln,getEncryptor:function(v){return h!==null?ln.encryptor(v,0):function(I){return I}},output:ra,getNumberOfPages:Rc,pages:be,out:Q,f2:L,f3:O,getPageInfo:sl,getPageInfoByObjId:dh,getCurrentPageInfo:uh,getPDFVersion:N,Point:hi,Rectangle:hl,Matrix:Ze,hasHotfix:oi},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Hc(H)},set:function(v){Vc(H,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return pi(H)},set:function(v){Gc(H,v)},enumerable:!0,configurable:!0}),(function(v){for(var I=0,Y=Ve.length;I<Y;I++){var ae=Tc.call(this,v[I][0],v[I][1],v[I][2],Ve[I][3],!0);m===!1&&(g[ae]=!0);var he=v[I][0].split("-");qc({id:ae,fontName:he[0],fontStyle:he[1]||""})}Nt.publish("addFonts",{fonts:$e,dictionary:dt})}).call(p,Ve),Ue="F1",Ic(s,n),Nt.publish("initialized"),p}fo.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},fo.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},fo.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},fo.prototype.processOwnerPassword=function(e,t){return Zp(Kp(t).substr(0,5),e)},fo.prototype.encryptor=function(e,t){var n=Kp(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return Zp(n,r)}},Pu.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Lt(e)!==Lt(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},He.API={events:[]},He.version="3.0.3";var rn=He.API,o0=1,Ki=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},uo=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ct=function(e){return e.toFixed(2)},Es=function(e){return e.toFixed(5)};rn.__acroform__={};var br=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},a2=function(e){return e*o0},Ca=function(e){var t=new ox,n=Fe.internal.getHeight(e)||0,r=Fe.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ct(r)),Number(ct(n))],t},NS=rn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},SS=rn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},kS=rn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},gn=rn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return kS(e,t-1)},vn=rn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return NS(e,t-1)},yn=rn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return SS(e,t-1)},CS=rn.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=n(s)||0,c.lowerLeft_Y=r(i+l)||0,c.upperRight_X=n(s+o)||0,c.upperRight_Y=r(i)||0,[Number(ct(c.lowerLeft_X)),Number(ct(c.lowerLeft_Y)),Number(ct(c.upperRight_X)),Number(ct(c.upperRight_Y))]},AS=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=Yp(e,n),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+ct(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Ca(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},Yp=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(L){return L.split(`
`)}):s.map(function(L){return[L]});var i=n,o=Fe.internal.getHeight(e)||0;o=o<0?-o:o;var l=Fe.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(L,O,P){if(L+1<s.length){var T=O+" "+s[L+1][0];return Rd(T,e,P).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,h,m=Rd("3",e,i).height,g=e.multiline?o-i:(o-m)/2,p=g+=2,j=0,N=0,w=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Rd(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",_=0,S=0;S<s.length;S++)if(s.hasOwnProperty(S)){var C=!1;if(s[S].length!==1&&w!==s[S].length-1){if((m+2)*(_+2)+2>o)continue e;y+=s[S][w],C=!0,N=S,S--}else{y=(y+=s[S][w]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var q=parseInt(S),W=c(q,y,i),E=S>=s.length-1;if(W&&!E){y+=" ",w=0;continue}if(W||E){if(E)N=q;else if(e.multiline&&(m+2)*(_+2)+2>o)continue e}else{if(!e.multiline||(m+2)*(_+2)+2>o)continue e;N=q}}for(var x="",A=j;A<=N;A++){var U=s[A];if(e.multiline){if(A===N){x+=U[w]+" ",w=(w+1)%U.length;continue}if(A===j){x+=U[U.length-1]+" ";continue}}x+=U[0]+" "}switch(x=x.substr(x.length-1)==" "?x.substr(0,x.length-1):x,h=Rd(x,e,i).width,e.textAlign){case"right":d=l-h-2;break;case"center":d=(l-h)/2;break;default:d=2}t+=ct(d)+" "+ct(p)+` Td
`,t+="("+Ki(x)+`) Tj
`,t+=-ct(d)+` 0 Td
`,p=-(i+2),h=0,j=C?N:N+1,_++,y=""}break}return r.text=t,r.fontSize=i,r},Rd=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},DS={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},LS=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},ES=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ga.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(DS)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");o0=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new lx,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&LS(i,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,s){var i=!r;for(var o in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=CS(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Fe.createDefaultAppearanceStream(l),Lt(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var h=AS(l);c.push({key:"AP",value:"<</N "+h+">>"}),s.internal.acroformPlugin.xForms.push(h)}if(l.appearanceStreamContent){var m="";for(var g in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(g)){var p=l.appearanceStreamContent[g];if(m+="/"+g+" ",m+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var j=p[o];typeof j=="function"&&(j=j.call(s,l)),m+="/"+o+" "+j+" ",s.internal.acroformPlugin.xForms.indexOf(j)>=0||s.internal.acroformPlugin.xForms.push(j)}}else typeof(j=p)=="function"&&(j=j.call(s,l)),m+="/"+o+" "+j,s.internal.acroformPlugin.xForms.indexOf(j)>=0||s.internal.acroformPlugin.xForms.push(j);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&function(N,w){for(var y in N)if(N.hasOwnProperty(y)){var _=y,S=N[y];w.internal.newObjectDeferredBegin(S.objId,!0),Lt(S)==="object"&&typeof S.putStream=="function"&&S.putStream(),delete N[_]}}(s.internal.acroformPlugin.xForms,s)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},ix=rn.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Lt(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),s+="("+Ki(r(e[i].toString()))+")"):s+=e[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Pf=function(e,t,n){var r=function(s){return s};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Ki(r(e))+")"},Ea=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ea.prototype.toString=function(){return this.objId+" 0 R"},Ea.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ea.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],s=this[r];s&&(Array.isArray(s)?e.push({key:r,value:ix(s,this.objId,this.scope)}):s instanceof Ea?(s.scope=this.scope,e.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:r,value:s}))}return e};var ox=function(){Ea.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};br(ox,Ea);var lx=function(){Ea.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ki(n(e))+")"}},set:function(n){e=n}})};br(lx,Ea);var ga=function e(){Ea.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!gn(t,3)},set:function(y){y?this.F=vn(t,3):this.F=yn(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof qu)return;i="FieldObject"+e.FieldNum++}var y=function(_){return _};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Ki(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/o0:d},set:function(y){d=y}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(y){h=y}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof qu||this instanceof Fi))return Pf(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=y}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof qn==0?Pf(g,this.objId,this.scope):g},set:function(y){y=y.toString(),g=this instanceof qn==0?y.substr(0,1)==="("?uo(y.substr(1,y.length-2)):uo(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof qn==1?uo(g.substr(1,g.length-1)):g},set:function(y){y=y.toString(),g=this instanceof qn==1?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof qn==0?Pf(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof qn==0?y.substr(0,1)==="("?uo(y.substr(1,y.length-2)):uo(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof qn==1?uo(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof qn==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(y){y=!!y,N=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(y){j=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,1)},set:function(y){y?this.Ff=vn(this.Ff,1):this.Ff=yn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,2)},set:function(y){y?this.Ff=vn(this.Ff,2):this.Ff=yn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,3)},set:function(y){y?this.Ff=vn(this.Ff,3):this.Ff=yn(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');w=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(w){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:w=2;break;case"center":case 1:w=1;break;default:w=0}}})};br(ga,Ea);var Fo=function(){ga.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ix(t,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(r,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,18)},set:function(n){n?this.Ff=vn(this.Ff,18):this.Ff=yn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=vn(this.Ff,19):this.Ff=yn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,20)},set:function(n){n?(this.Ff=vn(this.Ff,20),t.sort()):this.Ff=yn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,22)},set:function(n){n?this.Ff=vn(this.Ff,22):this.Ff=yn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,23)},set:function(n){n?this.Ff=vn(this.Ff,23):this.Ff=yn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,27)},set:function(n){n?this.Ff=vn(this.Ff,27):this.Ff=yn(this.Ff,27)}}),this.hasAppearanceStream=!1};br(Fo,ga);var Ro=function(){Fo.call(this),this.fontName="helvetica",this.combo=!1};br(Ro,Fo);var Oo=function(){Ro.call(this),this.combo=!0};br(Oo,Ro);var eu=function(){Oo.call(this),this.edit=!0};br(eu,Oo);var qn=function(){ga.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,15)},set:function(n){n?this.Ff=vn(this.Ff,15):this.Ff=yn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,16)},set:function(n){n?this.Ff=vn(this.Ff,16):this.Ff=yn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,17)},set:function(n){n?this.Ff=vn(this.Ff,17):this.Ff=yn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,26)},set:function(n){n?this.Ff=vn(this.Ff,26):this.Ff=yn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,s=[];for(r in s.push("<<"),t)s.push("/"+r+" ("+Ki(n(t[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){Lt(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};br(qn,ga);var tu=function(){qn.call(this),this.pushButton=!0};br(tu,qn);var Mo=function(){qn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};br(Mo,qn);var qu=function(){var e,t;ga.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+Ki(s(r[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Lt(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Fe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};br(qu,ga),Mo.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Mo.prototype.createOption=function(e){var t=new qu;return t.Parent=this,t.optionName=e,this.Kids.push(t),PS.call(this.scope,t),t};var nu=function(){qn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Fe.CheckBox.createAppearanceStream()};br(nu,qn);var Fi=function(){ga.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,13)},set:function(t){t?this.Ff=vn(this.Ff,13):this.Ff=yn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,21)},set:function(t){t?this.Ff=vn(this.Ff,21):this.Ff=yn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,23)},set:function(t){t?this.Ff=vn(this.Ff,23):this.Ff=yn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,24)},set:function(t){t?this.Ff=vn(this.Ff,24):this.Ff=yn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,25)},set:function(t){t?this.Ff=vn(this.Ff,25):this.Ff=yn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,26)},set:function(t){t?this.Ff=vn(this.Ff,26):this.Ff=yn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};br(Fi,ga);var ru=function(){Fi.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,14)},set:function(e){e?this.Ff=vn(this.Ff,14):this.Ff=yn(this.Ff,14)}}),this.password=!0};br(ru,Fi);var Fe={CheckBox:{createAppearanceStream:function(){return{N:{On:Fe.CheckBox.YesNormal},D:{On:Fe.CheckBox.YesPushDown,Off:Fe.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ca(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=Yp(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+ct(Fe.internal.getWidth(e))+" "+ct(Fe.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ct(i.fontSize)+" Tf "+s),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Ca(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),s=[],i=Fe.internal.getHeight(e),o=Fe.internal.getWidth(e),l=Yp(e,e.caption);return s.push("1 g"),s.push("0 0 "+ct(o)+" "+ct(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+ct(o-1)+" "+ct(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+ct(l.fontSize)+" Tf "+r),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Ca(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ct(Fe.internal.getWidth(e))+" "+ct(Fe.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Fe.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Fe.RadioButton.Circle.YesNormal,t.D[e]=Fe.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ca(e);t.scope=e.scope;var n=[],r=Fe.internal.getWidth(e)<=Fe.internal.getHeight(e)?Fe.internal.getWidth(e)/4:Fe.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Fe.internal.Bezier_C,i=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Es(Fe.internal.getWidth(e)/2)+" "+Es(Fe.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ca(e);t.scope=e.scope;var n=[],r=Fe.internal.getWidth(e)<=Fe.internal.getHeight(e)?Fe.internal.getWidth(e)/4:Fe.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Fe.internal.Bezier_C).toFixed(5)),o=Number((r*Fe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Es(Fe.internal.getWidth(e)/2)+" "+Es(Fe.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Es(Fe.internal.getWidth(e)/2)+" "+Es(Fe.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Ca(e);t.scope=e.scope;var n=[],r=Fe.internal.getWidth(e)<=Fe.internal.getHeight(e)?Fe.internal.getWidth(e)/4:Fe.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Fe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Es(Fe.internal.getWidth(e)/2)+" "+Es(Fe.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Fe.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Fe.RadioButton.Cross.YesNormal,t.D[e]=Fe.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ca(e);t.scope=e.scope;var n=[],r=Fe.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+ct(Fe.internal.getWidth(e)-2)+" "+ct(Fe.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(ct(r.x1.x)+" "+ct(r.x1.y)+" m"),n.push(ct(r.x2.x)+" "+ct(r.x2.y)+" l"),n.push(ct(r.x4.x)+" "+ct(r.x4.y)+" m"),n.push(ct(r.x3.x)+" "+ct(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ca(e);t.scope=e.scope;var n=Fe.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+ct(Fe.internal.getWidth(e))+" "+ct(Fe.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ct(Fe.internal.getWidth(e)-2)+" "+ct(Fe.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ct(n.x1.x)+" "+ct(n.x1.y)+" m"),r.push(ct(n.x2.x)+" "+ct(n.x2.y)+" l"),r.push(ct(n.x4.x)+" "+ct(n.x4.y)+" m"),r.push(ct(n.x3.x)+" "+ct(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Ca(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ct(Fe.internal.getWidth(e))+" "+ct(Fe.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Fe.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Fe.internal.getWidth(e),n=Fe.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Fe.internal.getWidth=function(e){var t=0;return Lt(e)==="object"&&(t=a2(e.Rect[2])),t},Fe.internal.getHeight=function(e){var t=0;return Lt(e)==="object"&&(t=a2(e.Rect[3])),t};var PS=rn.addField=function(e){if(ES(this,e),!(e instanceof ga))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};rn.AcroFormChoiceField=Fo,rn.AcroFormListBox=Ro,rn.AcroFormComboBox=Oo,rn.AcroFormEditBox=eu,rn.AcroFormButton=qn,rn.AcroFormPushButton=tu,rn.AcroFormRadioButton=Mo,rn.AcroFormCheckBox=nu,rn.AcroFormTextField=Fi,rn.AcroFormPasswordField=ru,rn.AcroFormAppearance=Fe,rn.AcroForm={ChoiceField:Fo,ListBox:Ro,ComboBox:Oo,EditBox:eu,Button:qn,PushButton:tu,RadioButton:Mo,CheckBox:nu,TextField:Fi,PasswordField:ru,Appearance:Fe},He.AcroForm={ChoiceField:Fo,ListBox:Ro,ComboBox:Oo,EditBox:eu,Button:qn,PushButton:tu,RadioButton:Mo,CheckBox:nu,TextField:Fi,PasswordField:ru,Appearance:Fe};He.AcroForm;function cx(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(L,O){var P,T,X,te,oe,Z=n;if((O=O||n)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(W(L))for(oe in r)for(X=r[oe],P=0;P<X.length;P+=1){for(te=!0,T=0;T<X[P].length;T+=1)if(X[P][T]!==void 0&&X[P][T]!==L[T]){te=!1;break}if(te===!0){Z=oe;break}}else for(oe in r)for(X=r[oe],P=0;P<X.length;P+=1){for(te=!0,T=0;T<X[P].length;T+=1)if(X[P][T]!==void 0&&X[P][T]!==L.charCodeAt(T)){te=!1;break}if(te===!0){Z=oe;break}}return Z===n&&O!==n&&(Z=O),Z},i=function L(O){for(var P=this.internal.write,T=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var te=[];if(te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Image"}),te.push({key:"Width",value:O.width}),te.push({key:"Height",value:O.height}),O.colorSpace===y.INDEXED?te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(te.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===y.DEVICE_CMYK&&te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),te.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&te.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)&&O.transparency.length>0){for(var oe="",Z=0,se=O.transparency.length;Z<se;Z++)oe+=O.transparency[Z]+" "+O.transparency[Z]+" ";te.push({key:"Mask",value:"["+oe+"]"})}O.sMask!==void 0&&te.push({key:"SMask",value:O.objectId+1+" 0 R"});var ee=O.filter!==void 0?["/"+O.filter]:void 0;if(T({data:O.data,additionalKeyValues:te,alreadyAppliedFilters:ee,objectId:O.objectId}),P("endobj"),"sMask"in O&&O.sMask!==void 0){var de,D=(de=O.sMaskBitsPerComponent)!==null&&de!==void 0?de:O.bitsPerComponent,H={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:D,data:O.sMask};"filter"in O&&(H.decodeParameters="/Predictor ".concat(O.predictor," /Colors 1 /BitsPerComponent ").concat(D," /Columns ").concat(O.width),H.filter=O.filter),L.call(this,H)}if(O.colorSpace===y.INDEXED){var J=this.internal.newObject();T({data:x(new Uint8Array(O.palette)),objectId:J}),P("endobj")}},o=function(){var L=this.internal.collections[t+"images"];for(var O in L)i.call(this,L[O])},l=function(){var L,O=this.internal.collections[t+"images"],P=this.internal.write;for(var T in O)P("/I"+(L=O[T]).index,L.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var L=this.internal.collections[t+"images"];return c.call(this),L},h=function(){return Object.keys(this.internal.collections[t+"images"]).length},m=function(L){return typeof e["process"+L.toUpperCase()]=="function"},g=function(L){return Lt(L)==="object"&&L.nodeType===1},p=function(L,O){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var P=""+L.getAttribute("src");if(P.indexOf("data:image/")===0)return Qd(unescape(P).split("base64,").pop());var T=e.loadFile(P,!0);if(T!==void 0)return T}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var X;switch(O){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;default:X="image/jpeg"}return Qd(L.toDataURL(X,1).split("base64,").pop())}},j=function(L){var O=this.internal.collections[t+"images"];if(O){for(var P in O)if(L===O[P].alias)return O[P]}},N=function(L,O,P){return L||O||(L=-96,O=-96),L<0&&(L=-1*P.width*72/L/this.internal.scaleFactor),O<0&&(O=-1*P.height*72/O/this.internal.scaleFactor),L===0&&(L=O*P.width/P.height),O===0&&(O=L*P.height/P.width),[L,O]},w=function(L,O,P,T,X,te){var oe=N.call(this,P,T,X),Z=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,ee=d.call(this);if(P=oe[0],T=oe[1],ee[X.index]=X,te){te*=Math.PI/180;var de=Math.cos(te),D=Math.sin(te),H=function(V){return V.toFixed(4)},J=[H(de),H(D),H(-1*D),H(de),0,0,"cm"]}this.internal.write("q"),te?(this.internal.write([1,"0","0",1,Z(L),se(O+T),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([Z(P),"0","0",Z(T),"0","0","cm"].join(" "))):this.internal.write([Z(P),"0","0",Z(T),Z(L),se(O+T),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=e.__addimage__.sHashCode=function(L){var O,P,T=0;if(typeof L=="string")for(P=L.length,O=0;O<P;O++)T=(T<<5)-T+L.charCodeAt(O),T|=0;else if(W(L))for(P=L.byteLength/2,O=0;O<P;O++)T=(T<<5)-T+L[O],T|=0;return T},C=e.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var O=!0;return L.length===0&&(O=!1),L.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(O=!1),O},q=e.__addimage__.extractImageFromDataUrl=function(L){if(L==null||!(L=L.trim()).startsWith("data:"))return null;var O=L.indexOf(",");return O<0?null:L.substring(0,O).trim().endsWith("base64")?L.substring(O+1):null};e.__addimage__.isArrayBuffer=function(L){return L instanceof ArrayBuffer};var W=e.__addimage__.isArrayBufferView=function(L){return L instanceof Int8Array||L instanceof Uint8Array||L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array},E=e.__addimage__.binaryStringToUint8Array=function(L){for(var O=L.length,P=new Uint8Array(O),T=0;T<O;T++)P[T]=L.charCodeAt(T);return P},x=e.__addimage__.arrayBufferToBinaryString=function(L){for(var O="",P=W(L)?L:new Uint8Array(L),T=0;T<P.length;T+=8192)O+=String.fromCharCode.apply(null,P.subarray(T,T+8192));return O};e.addImage=function(){var L,O,P,T,X,te,oe,Z,se;if(typeof arguments[1]=="number"?(O=n,P=arguments[1],T=arguments[2],X=arguments[3],te=arguments[4],oe=arguments[5],Z=arguments[6],se=arguments[7]):(O=arguments[1],P=arguments[2],T=arguments[3],X=arguments[4],te=arguments[5],oe=arguments[6],Z=arguments[7],se=arguments[8]),Lt(L=arguments[0])==="object"&&!g(L)&&"imageData"in L){var ee=L;L=ee.imageData,O=ee.format||O||n,P=ee.x||P||0,T=ee.y||T||0,X=ee.w||ee.width||X,te=ee.h||ee.height||te,oe=ee.alias||oe,Z=ee.compression||Z,se=ee.rotation||ee.angle||se}var de=this.internal.getFilters();if(Z===void 0&&de.indexOf("FlateEncode")!==-1&&(Z="SLOW"),isNaN(P)||isNaN(T))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var D=A.call(this,L,O,oe,Z);return w.call(this,P,T,X,te,D,se),this};var A=function(L,O,P,T){var X,te,oe;if(typeof L=="string"&&s(L)===n){L=unescape(L);var Z=U(L,!1);(Z!==""||(Z=e.loadFile(L,!0))!==void 0)&&(L=Z)}if(g(L)&&(L=p(L,O)),O=s(L,O),!m(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((oe=P)==null||oe.length===0)&&(P=function(se){return typeof se=="string"||W(se)?S(se):W(se.data)?S(se.data):null}(L)),(X=j.call(this,P))||(L instanceof Uint8Array||O==="RGBA"||(te=L,L=E(L)),X=this["process"+O.toUpperCase()](L,h.call(this),P,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in e.image_compression?se:_.NONE}(T),te)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},U=e.__addimage__.convertBase64ToBinaryString=function(L,O){O=typeof O!="boolean"||O;var P,T="";if(typeof L=="string"){var X;P=(X=q(L))!==null&&X!==void 0?X:L;try{T=Qd(P)}catch(te){if(O)throw C(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return T};e.getImageProperties=function(L){var O,P,T="";if(g(L)&&(L=p(L)),typeof L=="string"&&s(L)===n&&((T=U(L,!1))===""&&(T=e.loadFile(L)||""),L=T),P=s(L),!m(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(L instanceof Uint8Array||(L=E(L)),!(O=this["process"+P.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=P,O}})(He.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};He.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,h=!1,m=0;m<d.length&&!h;m++)switch((r=d[m]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var g=0;g<d.length;g++){r=d[g];var p=this.internal.pdfEscape,j=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(N.objId),_=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+p(y(r.contents))+")",i+=" /Popup "+w.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(y(_))+") >>",N.content=i;var S=N.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+S,r.open&&(i+=" /Open true"),i+=" >>",w.content=i,this.internal.write(N.objId,"0 R",w.objId,"0 R");break;case"freetext":s="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var C=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(j(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var q=this.annotations._nameMap[r.options.name];r.options.pageNumber=q.page,r.options.top=q.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(j(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;default:var W=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+W+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:d(r),w:c(n+s),h:d(r+i)},options:o,type:"link"})},e.textWithLink=function(n,r,s,i){var o,l,c=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var h=this.splitTextToSize(n,l).length;o=Math.ceil(d*h)}else l=c,o=d;return this.text(n,r,s,i),s+=.2*d,i.align==="center"&&(r-=c/2),i.align==="right"&&(r-=c),this.link(r,s-d,l,o,i),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(He.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(N){return t[N.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},l=e.__arabicParser__.isArabicEndLetter=function(N){return o(N)&&i(N)&&t[N.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(N){return o(N)&&s.indexOf(N.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return o(N)&&i(N)&&t[N.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(N){return o(N)&&i(N)&&t[N.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(N){return o(N)&&i(N)&&t[N.charCodeAt(0)].length>=3};var h=e.__arabicParser__.arabicLetterHasMedialForm=function(N){return o(N)&&i(N)&&t[N.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(N){var w=0,y=n,_="",S=0;for(w=0;w<N.length;w+=1)y[N.charCodeAt(w)]!==void 0?(S++,typeof(y=y[N.charCodeAt(w)])=="number"&&(_+=String.fromCharCode(y),y=n,S=0),w===N.length-1&&(y=n,_+=N.charAt(w-(S-1)),w-=S-1,S=0)):(y=n,_+=N.charAt(w-S),w-=S,S=0);return _};e.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&r[N.charCodeAt(0)]!==void 0};var g=e.__arabicParser__.getCorrectForm=function(N,w,y){return o(N)?i(N)===!1?-1:!d(N)||!o(w)&&!o(y)||!o(y)&&l(w)||l(N)&&!o(w)||l(N)&&c(w)||l(N)&&l(w)?0:h(N)&&o(w)&&!l(w)&&o(y)&&d(y)?3:l(N)||!o(y)?1:2:-1},p=function(N){var w=0,y=0,_=0,S="",C="",q="",W=(N=N||"").split("\\s+"),E=[];for(w=0;w<W.length;w+=1){for(E.push(""),y=0;y<W[w].length;y+=1)S=W[w][y],C=W[w][y-1],q=W[w][y+1],o(S)?(_=g(S,C,q),E[w]+=_!==-1?String.fromCharCode(t[S.charCodeAt(0)][_]):S):E[w]+=S;E[w]=m(E[w])}return E.join(" ")},j=e.__arabicParser__.processArabic=e.processArabic=function(){var N,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(w)){var _=0;for(y=[],_=0;_<w.length;_+=1)Array.isArray(w[_])?y.push([p(w[_][0]),w[_][1],w[_][2]]):y.push([p(w[_])]);N=y}else N=p(w);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};e.events.push(["preProcessText",j])}(He.API),He.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(He.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(N){c=N}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(N){d=N}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(N){h=N}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(N){m=N}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(N){g=N}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(N){j=N}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){r.call(this);var h=(d=d||{}).fontSize||this.getFontSize(),m=d.font||this.getFont(),g=d.scaleFactor||this.internal.scaleFactor,p=0,j=0,N=0,w=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(S,C){return S.concat(w.splitTextToSize(C,y))},[])):c=Array.isArray(c)?c:[c];for(var _=0;_<c.length;_++)p<(N=this.getStringUnitWidth(c[_],{font:m})*h)&&(p=N);return p!==0&&(j=c.length),{w:p/=g,h:Math.max((j*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/g,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,p&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-h,c.y+h,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+h,{align:"center",baseline:"top",maxWidth:c.width-h-h}):this.text(c.text,c.x+h,c.y+h,{align:"left",baseline:"top",maxWidth:c.width-h-h})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,h,m,g){if(r.call(this),!h)throw new Error("No data for PDF table.");var p,j,N,w,y=[],_=[],S=[],C={},q={},W=[],E=[],x=(g=g||{}).autoSize||!1,A=g.printHeaders!==!1,U=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,L=g.margins||Object.assign({width:this.getPageWidth()},t),O=typeof g.padding=="number"?g.padding:3,P=g.headerBackgroundColor||"#c8c8c8",T=g.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=T,this.setFontSize(U),m==null)_=y=Object.keys(h[0]),S=y.map(function(){return"left"});else if(Array.isArray(m)&&Lt(m[0])==="object")for(y=m.map(function(ee){return ee.name}),_=m.map(function(ee){return ee.prompt||ee.name||""}),S=m.map(function(ee){return ee.align||"left"}),p=0;p<m.length;p+=1)q[m[p].name]=.7499990551181103*m[p].width;else Array.isArray(m)&&typeof m[0]=="string"&&(_=y=m,S=y.map(function(){return"left"}));if(x||Array.isArray(m)&&typeof m[0]=="string")for(p=0;p<y.length;p+=1){for(C[w=y[p]]=h.map(function(ee){return ee[w]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(_[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=C[w],this.setFont(void 0,"normal"),N=0;N<j.length;N+=1)W.push(this.getTextDimensions(j[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[w]=Math.max.apply(null,W)+O+O,W=[]}if(A){var X={};for(p=0;p<y.length;p+=1)X[y[p]]={},X[y[p]].text=_[p],X[y[p]].align=S[p];var te=l.call(this,X,q);E=y.map(function(ee){return new i(c,d,q[ee],te,X[ee].text,void 0,X[ee].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var oe=m.reduce(function(ee,de){return ee[de.name]=de.align,ee},{});for(p=0;p<h.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:h[p]},this);var Z=l.call(this,h[p],q);for(N=0;N<y.length;N+=1){var se=h[p][y[N]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:N,data:se},this),o.call(this,new i(c,d,q[y[N]],Z,se,p+2,oe[y[N]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var h=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(p){var j=c[p];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,d[p]-h-h)},this).map(function(p){return this.getLineHeightFactor()*p.length*m/g+h+h},this).reduce(function(p,j){return Math.max(p,j)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){h=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(h.y=this.internal.__cell__.margins.top||0,g.push(h)),h.lineNumber=c;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(j)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),n=!1}}(He.API);var dx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},ux=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Jp=cx(ux),hx=[100,200,300,400,500,600,700,800,900],qS=cx(hx);function qf(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return dx[i=i||"normal"]?i:"normal"}(e.style),r=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),s=function(i){return typeof Jp[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,n,r].join(" ")}}}function s2(e,t,n,r){var s;for(s=n;s>=0&&s<t.length;s+=r)if(e[t[s]])return e[t[s]];for(s=n;s>=0&&s<t.length;s-=r)if(e[t[s]])return e[t[s]]}var TS={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},i2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function o2(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function l2(e){return e.trimLeft()}function IS(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function FS(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Od,c2,d2,ho,Md,u2,h2,f2,Tf=["times"];function p2(e,t,n,r,s){var i=4,o=g2;switch(s){case He.API.image_compression.FAST:i=1,o=m2;break;case He.API.image_compression.MEDIUM:i=6,o=v2;break;case He.API.image_compression.SLOW:i=9,o=y2}e=function(c,d,h,m){for(var g,p=c.length/d,j=new Uint8Array(c.length+p),N=[RS,m2,g2,v2,y2],w=0;w<p;w+=1){var y=w*d,_=c.subarray(y,y+d);if(m)j.set(m(_,h,g),y+w);else{for(var S=N.length,C=[],q=0;q<S;q+=1)C[q]=N[q](_,h,g);var W=MS(C.concat());j.set(C[W],y+w)}g=_}return j}(e,t,Math.ceil(n*r/8),o);var l=Wp(e,{level:i});return He.API.__addimage__.arrayBufferToBinaryString(l)}function RS(e){var t=Array.apply([],e);return t.unshift(0),t}function m2(e,t){var n=e.length,r=[];r[0]=1;for(var s=0;s<n;s+=1){var i=e[s-t]||0;r[s+1]=e[s]-i+256&255}return r}function g2(e,t,n){var r=e.length,s=[];s[0]=2;for(var i=0;i<r;i+=1){var o=n&&n[i]||0;s[i+1]=e[i]-o+256&255}return s}function v2(e,t,n){var r=e.length,s=[];s[0]=3;for(var i=0;i<r;i+=1){var o=e[i-t]||0,l=n&&n[i]||0;s[i+1]=e[i]+256-(o+l>>>1)&255}return s}function y2(e,t,n){var r=e.length,s=[];s[0]=4;for(var i=0;i<r;i+=1){var o=OS(e[i-t]||0,n&&n[i]||0,n&&n[i-t]||0);s[i+1]=e[i]-o+256&255}return s}function OS(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),s=Math.abs(e-n),i=Math.abs(e+t-n-n);return r<=s&&r<=i?e:s<=i?t:n}function MS(e){var t=e.map(function(n){return n.reduce(function(r,s){return r+Math.abs(s)},0)});return t.indexOf(Math.min.apply(null,t))}function If(e,t,n){var r=t*n,s=Math.floor(r/8),i=16-(r-8*s+n),o=(1<<n)-1;return fx(e,s)>>i&o}function x2(e,t,n,r){var s=n*r,i=Math.floor(s/8),o=16-(s-8*i+r),l=(1<<r)-1,c=(t&l)<<o;(function(d,h,m){if(h+1<d.byteLength)d.setUint16(h,m,!1);else{var g=m>>8&255;d.setUint8(h,g)}})(e,i,fx(e,i)&~(l<<o)&65535|c)}function fx(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function BS(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<1+(7&s);e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,h=[],m=0,g=null,p=0,j=null;for(this.width=n,this.height=r;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,j=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var N=e[t++];m=e[t++]|e[t++]<<8,g=e[t++],1&N||(g=null),p=N>>2&7,t++;break;case 254:for(;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var w=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,C=e[t++],q=C>>6&1,W=1<<1+(7&C),E=l,x=c,A=!1;C>>7&&(A=!0,E=t,x=W,t+=3*W);var U=t;for(t++;;){var L;if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}h.push({x:w,y,width:_,height:S,has_local_palette:A,palette_offset:E,palette_size:x,data_offset:U,data_length:t-U,transparent_index:g,interlaced:!!q,delay:m,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return j},this.frameInfo=function(O){if(O<0||O>=h.length)throw new Error("Frame index out of range.");return h[O]},this.decodeAndBlitFrameBGRA=function(O,P){var T=this.frameInfo(O),X=T.width*T.height,te=new Uint8Array(X);b2(e,T.data_offset,te,X);var oe=T.palette_offset,Z=T.transparent_index;Z===null&&(Z=256);var se=T.width,ee=n-se,de=se,D=4*(T.y*n+T.x),H=4*((T.y+T.height)*n+T.x),J=D,V=4*ee;T.interlaced===!0&&(V+=4*n*7);for(var ne=8,le=0,me=te.length;le<me;++le){var re=te[le];if(de===0&&(de=se,(J+=V)>=H&&(V=4*ee+4*n*(ne-1),J=D+(se+ee)*(ne<<1),ne>>=1)),re===Z)J+=4;else{var fe=e[oe+3*re],be=e[oe+3*re+1],Se=e[oe+3*re+2];P[J++]=Se,P[J++]=be,P[J++]=fe,P[J++]=255}--de}},this.decodeAndBlitFrameRGBA=function(O,P){var T=this.frameInfo(O),X=T.width*T.height,te=new Uint8Array(X);b2(e,T.data_offset,te,X);var oe=T.palette_offset,Z=T.transparent_index;Z===null&&(Z=256);var se=T.width,ee=n-se,de=se,D=4*(T.y*n+T.x),H=4*((T.y+T.height)*n+T.x),J=D,V=4*ee;T.interlaced===!0&&(V+=4*n*7);for(var ne=8,le=0,me=te.length;le<me;++le){var re=te[le];if(de===0&&(de=se,(J+=V)>=H&&(V=4*ee+4*n*(ne-1),J=D+(se+ee)*(ne<<1),ne>>=1)),re===Z)J+=4;else{var fe=e[oe+3*re],be=e[oe+3*re+1],Se=e[oe+3*re+2];P[J++]=fe,P[J++]=be,P[J++]=Se,P[J++]=255}--de}}}function b2(e,t,n,r){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,h=0,m=0,g=0,p=e[t++],j=new Int32Array(4096),N=null;;){for(;h<16&&p!==0;)m|=e[t++]<<h,h+=8,p===1?p=e[t++]:--p;if(h<c)break;var w=m&d;if(m>>=c,h-=c,w!==i){if(w===o)break;for(var y=w<l?w:N,_=0,S=y;S>i;)S=j[S]>>8,++_;var C=S;if(g+_+(y!==w?1:0)>r)return void Ft.log("Warning, gif stream longer than expected.");n[g++]=C;var q=g+=_;for(y!==w&&(n[g++]=C),S=y;_--;)S=j[S],n[--q]=255&S,S>>=8;N!==null&&l<4096&&(j[l++]=N<<8|C,l>=d+1&&c<12&&(++c,d=d<<1|1)),N=w}else l=o+1,d=(1<<(c=s+1))-1,N=null}return g!==r&&Ft.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ff(e){var t,n,r,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),h=new Array(64),m=new Array(65535),g=new Array(65535),p=new Array(64),j=new Array(64),N=[],w=0,y=7,_=new Array(64),S=new Array(64),C=new Array(64),q=new Array(256),W=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],x=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function te(D,H){for(var J=0,V=0,ne=new Array,le=1;le<=16;le++){for(var me=1;me<=D[le];me++)ne[H[V]]=[],ne[H[V]][0]=J,ne[H[V]][1]=le,V++,J++;J*=2}return ne}function oe(D){for(var H=D[0],J=D[1]-1;J>=0;)H&1<<J&&(w|=1<<y),J--,--y<0&&(w==255?(Z(255),Z(0)):Z(w),y=7,w=0)}function Z(D){N.push(D)}function se(D){Z(D>>8&255),Z(255&D)}function ee(D,H,J,V,ne){for(var le,me=ne[0],re=ne[240],fe=function(ue,qe){var Ee,Xe,Oe,Ye,Qe,Je,Ct,ot,Ue,et,Ge=0;for(Ue=0;Ue<8;++Ue){Ee=ue[Ge],Xe=ue[Ge+1],Oe=ue[Ge+2],Ye=ue[Ge+3],Qe=ue[Ge+4],Je=ue[Ge+5],Ct=ue[Ge+6];var Rt=Ee+(ot=ue[Ge+7]),wt=Ee-ot,$e=Xe+Ct,dt=Xe-Ct,Pt=Oe+Je,Ke=Oe-Je,vt=Ye+Qe,ut=Ye-Qe,on=Rt+vt,jn=Rt-vt,qt=$e+Pt,st=$e-Pt;ue[Ge]=on+qt,ue[Ge+4]=on-qt;var Nt=.707106781*(st+jn);ue[Ge+2]=jn+Nt,ue[Ge+6]=jn-Nt;var ni=.382683433*((on=ut+Ke)-(st=dt+wt)),Gn=.5411961*on+ni,Ia=1.306562965*st+ni,ya=.707106781*(qt=Ke+dt),Ze=wt+ya,Fa=wt-ya;ue[Ge+5]=Fa+Gn,ue[Ge+3]=Fa-Gn,ue[Ge+1]=Ze+Ia,ue[Ge+7]=Ze-Ia,Ge+=8}for(Ge=0,Ue=0;Ue<8;++Ue){Ee=ue[Ge],Xe=ue[Ge+8],Oe=ue[Ge+16],Ye=ue[Ge+24],Qe=ue[Ge+32],Je=ue[Ge+40],Ct=ue[Ge+48];var Ra=Ee+(ot=ue[Ge+56]),Rr=Ee-ot,Or=Xe+Ct,Qt=Xe-Ct,En=Oe+Je,In=Oe-Je,ri=Ye+Qe,hs=Ye-Qe,ea=Ra+ri,xa=Ra-ri,ta=Or+En,na=Or-En;ue[Ge]=ea+ta,ue[Ge+32]=ea-ta;var Mr=.707106781*(na+xa);ue[Ge+16]=xa+Mr,ue[Ge+48]=xa-Mr;var ai=.382683433*((ea=hs+In)-(na=Qt+Rr)),ba=.5411961*ea+ai,si=1.306562965*na+ai,Zi=.707106781*(ta=In+Qt),Yi=Rr+Zi,Ji=Rr-Zi;ue[Ge+40]=Ji+ba,ue[Ge+24]=Ji-ba,ue[Ge+8]=Yi+si,ue[Ge+56]=Yi-si,Ge++}for(Ue=0;Ue<64;++Ue)et=ue[Ue]*qe[Ue],p[Ue]=et>0?et+.5|0:et-.5|0;return p}(D,H),be=0;be<64;++be)j[E[be]]=fe[be];var Se=j[0]-J;J=j[0],Se==0?oe(V[0]):(oe(V[g[le=32767+Se]]),oe(m[le]));for(var Ae=63;Ae>0&&j[Ae]==0;)Ae--;if(Ae==0)return oe(me),J;for(var ye,Q=1;Q<=Ae;){for(var at=Q;j[Q]==0&&Q<=Ae;)++Q;var nt=Q-at;if(nt>=16){ye=nt>>4;for(var Ve=1;Ve<=ye;++Ve)oe(re);nt&=15}le=32767+j[Q],oe(ne[(nt<<4)+g[le]]),oe(m[le]),Q++}return Ae!=63&&oe(me),J}function de(D){D=Math.min(Math.max(D,1),100),i!=D&&(function(H){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],V=0;V<64;V++){var ne=o((J[V]*H+50)/100);ne=Math.min(Math.max(ne,1),255),l[E[V]]=ne}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var re=o((le[me]*H+50)/100);re=Math.min(Math.max(re,1),255),c[E[me]]=re}for(var fe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,Se=0;Se<8;Se++)for(var Ae=0;Ae<8;Ae++)d[be]=1/(l[E[be]]*fe[Se]*fe[Ae]*8),h[be]=1/(c[E[be]]*fe[Se]*fe[Ae]*8),be++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),i=D)}this.encode=function(D,H){H&&de(H),N=new Array,w=0,y=7,se(65496),se(65504),se(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),se(1),se(1),Z(0),Z(0),function(){se(65499),se(132),Z(0);for(var Xe=0;Xe<64;Xe++)Z(l[Xe]);Z(1);for(var Oe=0;Oe<64;Oe++)Z(c[Oe])}(),function(Xe,Oe){se(65472),se(17),Z(8),se(Oe),se(Xe),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)}(D.width,D.height),function(){se(65476),se(418),Z(0);for(var Xe=0;Xe<16;Xe++)Z(x[Xe+1]);for(var Oe=0;Oe<=11;Oe++)Z(A[Oe]);Z(16);for(var Ye=0;Ye<16;Ye++)Z(U[Ye+1]);for(var Qe=0;Qe<=161;Qe++)Z(L[Qe]);Z(1);for(var Je=0;Je<16;Je++)Z(O[Je+1]);for(var Ct=0;Ct<=11;Ct++)Z(P[Ct]);Z(17);for(var ot=0;ot<16;ot++)Z(T[ot+1]);for(var Ue=0;Ue<=161;Ue++)Z(X[Ue])}(),se(65498),se(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0);var J=0,V=0,ne=0;w=0,y=7,this.encode.displayName="_encode_";for(var le,me,re,fe,be,Se,Ae,ye,Q,at=D.data,nt=D.width,Ve=D.height,ue=4*nt,qe=0;qe<Ve;){for(le=0;le<ue;){for(be=ue*qe+le,Ae=-1,ye=0,Q=0;Q<64;Q++)Se=be+(ye=Q>>3)*ue+(Ae=4*(7&Q)),qe+ye>=Ve&&(Se-=ue*(qe+1+ye-Ve)),le+Ae>=ue&&(Se-=le+Ae-ue+4),me=at[Se++],re=at[Se++],fe=at[Se++],_[Q]=(W[me]+W[re+256|0]+W[fe+512|0]>>16)-128,S[Q]=(W[me+768|0]+W[re+1024|0]+W[fe+1280|0]>>16)-128,C[Q]=(W[me+1280|0]+W[re+1536|0]+W[fe+1792|0]>>16)-128;J=ee(_,d,J,t,r),V=ee(S,h,V,n,s),ne=ee(C,h,ne,n,s),le+=32}qe+=8}if(y>=0){var Ee=[];Ee[1]=y+1,Ee[0]=(1<<y+1)-1,oe(Ee)}return se(65497),new Uint8Array(N)},e=e||50,function(){for(var D=String.fromCharCode,H=0;H<256;H++)q[H]=D(H)}(),t=te(x,A),n=te(O,P),r=te(U,L),s=te(T,X),function(){for(var D=1,H=2,J=1;J<=15;J++){for(var V=D;V<H;V++)g[32767+V]=J,m[32767+V]=[],m[32767+V][1]=J,m[32767+V][0]=V;for(var ne=-(H-1);ne<=-D;ne++)g[32767+ne]=J,m[32767+ne]=[],m[32767+ne][1]=J,m[32767+ne][0]=H-1+ne;D<<=1,H<<=1}}(),function(){for(var D=0;D<256;D++)W[D]=19595*D,W[D+256|0]=38470*D,W[D+512|0]=7471*D+32768,W[D+768|0]=-11059*D,W[D+1024|0]=-21709*D,W[D+1280|0]=32768*D+8421375,W[D+1536|0]=-27439*D,W[D+1792|0]=-5329*D}(),de(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function la(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _2(e){function t(A){if(!A)throw Error("assert :P")}function n(A,U,L){for(var O=0;4>O;O++)if(A[U+O]!=L.charCodeAt(O))return!0;return!1}function r(A,U,L,O,P){for(var T=0;T<P;T++)A[U+T]=L[O+T]}function s(A,U,L,O){for(var P=0;P<O;P++)A[U+P]=L}function i(A){return new Int32Array(A)}function o(A,U){for(var L=[],O=0;O<A;O++)L.push(new U);return L}function l(A,U){var L=[];return function O(P,T,X){for(var te=X[T],oe=0;oe<te&&(P.push(X.length>T+1?[]:new U),!(X.length<T+1));oe++)O(P[oe],T+1,X)}(L,0,A),L}var c=function(){var A=this;function U(u,f){for(var b=1<<f-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function L(u,f,b,k,F){t(!(k%b));do u[f+(k-=b)]=F;while(0<k)}function O(u,f,b,k,F){if(t(2328>=F),512>=F)var M=i(512);else if((M=i(F))==null)return 0;return function(B,z,$,G,ie,ve){var K,ce,pe=z,_e=1<<$,ge=i(16),we=i(16);for(t(ie!=0),t(G!=null),t(B!=null),t(0<$),ce=0;ce<ie;++ce){if(15<G[ce])return 0;++ge[G[ce]]}if(ge[0]==ie)return 0;for(we[1]=0,K=1;15>K;++K){if(ge[K]>1<<K)return 0;we[K+1]=we[K]+ge[K]}for(ce=0;ce<ie;++ce)K=G[ce],0<G[ce]&&(ve[we[K]++]=ce);if(we[15]==1)return(G=new P).g=0,G.value=ve[0],L(B,pe,1,_e,G),_e;var Ne,De=-1,ke=_e-1,We=0,Ie=1,ft=1,Me=1<<$;for(ce=0,K=1,ie=2;K<=$;++K,ie<<=1){if(Ie+=ft<<=1,0>(ft-=ge[K]))return 0;for(;0<ge[K];--ge[K])(G=new P).g=K,G.value=ve[ce++],L(B,pe+We,ie,Me,G),We=U(We,K)}for(K=$+1,ie=2;15>=K;++K,ie<<=1){if(Ie+=ft<<=1,0>(ft-=ge[K]))return 0;for(;0<ge[K];--ge[K]){if(G=new P,(We&ke)!=De){for(pe+=Me,Ne=1<<(De=K)-$;15>De&&!(0>=(Ne-=ge[De]));)++De,Ne<<=1;_e+=Me=1<<(Ne=De-$),B[z+(De=We&ke)].g=Ne+$,B[z+De].value=pe-z-De}G.g=K-$,G.value=ve[ce++],L(B,pe+(We>>$),ie,Me,G),We=U(We,K)}}return Ie!=2*we[15]-1?0:_e}(u,f,b,k,F,M)}function P(){this.value=this.g=0}function T(){this.value=this.g=0}function X(){this.G=o(5,P),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(wi,T)}function te(u,f,b,k){t(u!=null),t(f!=null),t(2147483648>k),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=f,u.pa=b,u.Jd=f,u.Yc=b+k,u.Zc=4<=k?b+k-4+1:b,me(u)}function oe(u,f){for(var b=0;0<f--;)b|=fe(u,128)<<f;return b}function Z(u,f){var b=oe(u,f);return re(u)?-b:b}function se(u,f,b,k){var F,M=0;for(t(u!=null),t(f!=null),t(4294967288>k),u.Sb=k,u.Ra=0,u.u=0,u.h=0,4<k&&(k=4),F=0;F<k;++F)M+=f[b+F]<<8*F;u.Ra=M,u.bb=k,u.oa=f,u.pa=b}function ee(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<vs-8>>>0,++u.bb,u.u-=8;V(u)&&(u.h=1,u.u=0)}function de(u,f){if(t(0<=f),!u.h&&f<=wr){var b=J(u)&_r[f];return u.u+=f,ee(u),b}return u.h=1,u.u=0}function D(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(u){return u.Ra>>>(u.u&vs-1)>>>0}function V(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>vs}function ne(u,f){u.u=f,u.h=V(u)}function le(u){u.u>=Wa&&(t(u.u>=Wa),ee(u))}function me(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function re(u){return oe(u,1)}function fe(u,f){var b=u.Ca;0>u.b&&me(u);var k=u.b,F=b*f>>>8,M=(u.I>>>k>F)+0;for(M?(b-=F,u.I-=F+1<<k>>>0):b=F+1,k=b,F=0;256<=k;)F+=8,k>>=8;return k=7^F+ys[k],u.b-=k,u.Ca=(b<<k)-1,M}function be(u,f,b){u[f+0]=b>>24&255,u[f+1]=b>>16&255,u[f+2]=b>>8&255,u[f+3]=255&b}function Se(u,f){return u[f+0]|u[f+1]<<8}function Ae(u,f){return Se(u,f)|u[f+2]<<16}function ye(u,f){return Se(u,f)|Se(u,f+2)<<16}function Q(u,f){var b=1<<f;return t(u!=null),t(0<f),u.X=i(b),u.X==null?0:(u.Mb=32-f,u.Xa=f,1)}function at(u,f){t(u!=null),t(f!=null),t(u.Xa==f.Xa),r(f.X,0,u.X,0,1<<f.Xa)}function nt(){this.X=[],this.Xa=this.Mb=0}function Ve(u,f,b,k){t(b!=null),t(k!=null);var F=b[0],M=k[0];return F==0&&(F=(u*M+f/2)/f),M==0&&(M=(f*F+u/2)/u),0>=F||0>=M?0:(b[0]=F,k[0]=M,1)}function ue(u,f){return u+(1<<f)-1>>>f}function qe(u,f){return((4278255360&u)+(4278255360&f)>>>0&4278255360)+((16711935&u)+(16711935&f)>>>0&16711935)>>>0}function Ee(u,f){A[f]=function(b,k,F,M,B,z,$){var G;for(G=0;G<B;++G){var ie=A[u](z[$+G-1],F,M+G);z[$+G]=qe(b[k+G],ie)}}}function Xe(){this.ud=this.hd=this.jd=0}function Oe(u,f){return((4278124286&(u^f))>>>1)+(u&f)>>>0}function Ye(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function Qe(u,f){return Ye(u+(u-f+.5>>1))}function Je(u,f,b){return Math.abs(f-b)-Math.abs(u-b)}function Ct(u,f,b,k,F,M,B){for(k=M[B-1],b=0;b<F;++b)M[B+b]=k=qe(u[f+b],k)}function ot(u,f,b,k,F){var M;for(M=0;M<b;++M){var B=u[f+M],z=B>>8&255,$=16711935&($=($=16711935&B)+((z<<16)+z));k[F+M]=(4278255360&B)+$>>>0}}function Ue(u,f){f.jd=255&u,f.hd=u>>8&255,f.ud=u>>16&255}function et(u,f,b,k,F,M){var B;for(B=0;B<k;++B){var z=f[b+B],$=z>>>8,G=z,ie=255&(ie=(ie=z>>>16)+((u.jd<<24>>24)*($<<24>>24)>>>5));G=255&(G=(G+=(u.hd<<24>>24)*($<<24>>24)>>>5)+((u.ud<<24>>24)*(ie<<24>>24)>>>5)),F[M+B]=(4278255360&z)+(ie<<16)+G}}function Ge(u,f,b,k,F){A[f]=function(M,B,z,$,G,ie,ve,K,ce){for($=ve;$<K;++$)for(ve=0;ve<ce;++ve)G[ie++]=F(z[k(M[B++])])},A[u]=function(M,B,z,$,G,ie,ve){var K=8>>M.b,ce=M.Ea,pe=M.K[0],_e=M.w;if(8>K)for(M=(1<<M.b)-1,_e=(1<<K)-1;B<z;++B){var ge,we=0;for(ge=0;ge<ce;++ge)ge&M||(we=k($[G++])),ie[ve++]=F(pe[we&_e]),we>>=K}else A["VP8LMapColor"+b]($,G,pe,_e,ie,ve,B,z,ce)}}function Rt(u,f,b,k,F){for(b=f+b;f<b;){var M=u[f++];k[F++]=M>>16&255,k[F++]=M>>8&255,k[F++]=255&M}}function wt(u,f,b,k,F){for(b=f+b;f<b;){var M=u[f++];k[F++]=M>>16&255,k[F++]=M>>8&255,k[F++]=255&M,k[F++]=M>>24&255}}function $e(u,f,b,k,F){for(b=f+b;f<b;){var M=(B=u[f++])>>16&240|B>>12&15,B=240&B|B>>28&15;k[F++]=M,k[F++]=B}}function dt(u,f,b,k,F){for(b=f+b;f<b;){var M=(B=u[f++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;k[F++]=M,k[F++]=B}}function Pt(u,f,b,k,F){for(b=f+b;f<b;){var M=u[f++];k[F++]=255&M,k[F++]=M>>8&255,k[F++]=M>>16&255}}function Ke(u,f,b,k,F,M){if(M==0)for(b=f+b;f<b;)be(k,((M=u[f++])[0]>>24|M[1]>>8&65280|M[2]<<8&16711680|M[3]<<24)>>>0),F+=32;else r(k,F,u,f,b)}function vt(u,f){A[f][0]=A[u+"0"],A[f][1]=A[u+"1"],A[f][2]=A[u+"2"],A[f][3]=A[u+"3"],A[f][4]=A[u+"4"],A[f][5]=A[u+"5"],A[f][6]=A[u+"6"],A[f][7]=A[u+"7"],A[f][8]=A[u+"8"],A[f][9]=A[u+"9"],A[f][10]=A[u+"10"],A[f][11]=A[u+"11"],A[f][12]=A[u+"12"],A[f][13]=A[u+"13"],A[f][14]=A[u+"0"],A[f][15]=A[u+"0"]}function ut(u){return u==kh||u==Ch||u==rd||u==Ah}function on(){this.eb=[],this.size=this.A=this.fb=0}function jn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new on,this.f.kb=new jn,this.sd=null}function st(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Nt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ni(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Gn(u,f){var b=u.T,k=f.ba.f.RGBA,F=k.eb,M=k.fb+u.ka*k.A,B=Hr[f.ba.S],z=u.y,$=u.O,G=u.f,ie=u.N,ve=u.ea,K=u.W,ce=f.cc,pe=f.dc,_e=f.Mc,ge=f.Nc,we=u.ka,Ne=u.ka+u.T,De=u.U,ke=De+1>>1;for(we==0?B(z,$,null,null,G,ie,ve,K,G,ie,ve,K,F,M,null,null,De):(B(f.ec,f.fc,z,$,ce,pe,_e,ge,G,ie,ve,K,F,M-k.A,F,M,De),++b);we+2<Ne;we+=2)ce=G,pe=ie,_e=ve,ge=K,ie+=u.Rc,K+=u.Rc,M+=2*k.A,B(z,($+=2*u.fa)-u.fa,z,$,ce,pe,_e,ge,G,ie,ve,K,F,M-k.A,F,M,De);return $+=u.fa,u.j+Ne<u.o?(r(f.ec,f.fc,z,$,De),r(f.cc,f.dc,G,ie,ke),r(f.Mc,f.Nc,ve,K,ke),b--):1&Ne||B(z,$,null,null,G,ie,ve,K,G,ie,ve,K,F,M+k.A,null,null,De),b}function Ia(u,f,b){var k=u.F,F=[u.J];if(k!=null){var M=u.U,B=f.ba.S,z=B==nd||B==rd;f=f.ba.f.RGBA;var $=[0],G=u.ka;$[0]=u.T,u.Kb&&(G==0?--$[0]:(--G,F[0]-=u.width),u.j+u.ka+u.T==u.o&&($[0]=u.o-u.j-G));var ie=f.eb;G=f.fb+G*f.A,u=m0(k,F[0],u.width,M,$,ie,G+(z?0:3),f.A),t(b==$),u&&ut(B)&&Nl(ie,G,z,M,$,f.A)}return 0}function ya(u){var f=u.ma,b=f.ba.S,k=11>b,F=b==ed||b==td||b==nd||b==Sh||b==12||ut(b);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!gl(f.Oa,u,F?11:12))return 0;if(F&&ut(b)&&Kc(),u.da)alert("todo:use_scaling");else{if(k){if(f.Ib=ni,u.Kb){if(b=u.U+1>>1,f.memory=i(u.U+2*b),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+u.U,f.Mc=f.cc,f.Nc=f.dc+b,f.Ib=Gn,Kc()}}else alert("todo:EmitYUV");F&&(f.Jb=Ia,k&&Ur())}if(k&&!E0){for(u=0;256>u;++u)Kx[u]=89858*(u-128)+sd>>ad,Jx[u]=-22014*(u-128)+sd,Yx[u]=-45773*(u-128),Zx[u]=113618*(u-128)+sd>>ad;for(u=kl;u<Eh;++u)f=76283*(u-16)+sd>>ad,Xx[u-kl]=en(f,255),Qx[u-kl]=en(f+8>>4,15);E0=1}return 1}function Ze(u){var f=u.ma,b=u.U,k=u.T;return t(!(1&u.ka)),0>=b||0>=k?0:(b=f.Ib(u,f),f.Jb!=null&&f.Jb(u,f,b),f.Dc+=b,1)}function Fa(u){u.ma.memory=null}function Ra(u,f,b,k){return de(u,8)!=47?0:(f[0]=de(u,14)+1,b[0]=de(u,14)+1,k[0]=de(u,1),de(u,3)!=0?0:!u.h)}function Rr(u,f){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+de(f,b)+1}function Or(u,f){return 120<f?f-120:1<=(b=((b=Tx[f-1])>>4)*u+(8-(15&b)))?b:1;var b}function Qt(u,f,b){var k=J(b),F=u[f+=255&k].g-8;return 0<F&&(ne(b,b.u+8),k=J(b),f+=u[f].value,f+=k&(1<<F)-1),ne(b,b.u+u[f].g),u[f].value}function En(u,f,b){return b.g+=u.g,b.value+=u.value<<f>>>0,t(8>=b.g),u.g}function In(u,f,b){var k=u.xc;return t((f=k==0?0:u.vc[u.md*(b>>k)+(f>>k)])<u.Wb),u.Ya[f]}function ri(u,f,b,k){var F=u.ab,M=u.c*f,B=u.C;f=B+f;var z=b,$=k;for(k=u.Ta,b=u.Ua;0<F--;){var G=u.gc[F],ie=B,ve=f,K=z,ce=$,pe=($=k,z=b,G.Ea);switch(t(ie<ve),t(ve<=G.nc),G.hc){case 2:cn(K,ce,(ve-ie)*pe,$,z);break;case 0:var _e=ie,ge=ve,we=$,Ne=z,De=(Me=G).Ea;_e==0&&(yl(K,ce,null,null,1,we,Ne),Ct(K,ce+1,0,0,De-1,we,Ne+1),ce+=De,Ne+=De,++_e);for(var ke=1<<Me.b,We=ke-1,Ie=ue(De,Me.b),ft=Me.K,Me=Me.w+(_e>>Me.b)*Ie;_e<ge;){var yt=ft,kn=Me,pt=1;for(so(K,ce,we,Ne-De,1,we,Ne);pt<De;){var Be=(pt&~We)+ke;Be>De&&(Be=De),(0,bl[yt[kn++]>>8&15])(K,ce+ +pt,we,Ne+pt-De,Be-pt,we,Ne+pt),pt=Be}ce+=De,Ne+=De,++_e&We||(Me+=Ie)}ve!=G.nc&&r($,z-pe,$,z+(ve-ie-1)*pe,pe);break;case 1:for(pe=K,ge=ce,De=(K=G.Ea)-(Ne=K&~(we=(ce=1<<G.b)-1)),_e=ue(K,G.b),ke=G.K,G=G.w+(ie>>G.b)*_e;ie<ve;){for(We=ke,Ie=G,ft=new Xe,Me=ge+Ne,yt=ge+K;ge<Me;)Ue(We[Ie++],ft),_l(ft,pe,ge,ce,$,z),ge+=ce,z+=ce;ge<yt&&(Ue(We[Ie++],ft),_l(ft,pe,ge,De,$,z),ge+=De,z+=De),++ie&we||(G+=_e)}break;case 3:if(K==$&&ce==z&&0<G.b){for(ge=$,K=pe=z+(ve-ie)*pe-(Ne=(ve-ie)*ue(G.Ea,G.b)),ce=$,we=z,_e=[],Ne=(De=Ne)-1;0<=Ne;--Ne)_e[Ne]=ce[we+Ne];for(Ne=De-1;0<=Ne;--Ne)ge[K+Ne]=_e[Ne];Yc(G,ie,ve,$,pe,$,z)}else Yc(G,ie,ve,K,ce,$,z)}z=k,$=b}$!=b&&r(k,b,z,$,M)}function hs(u,f){var b=u.V,k=u.Ba+u.c*u.C,F=f-u.C;if(t(f<=u.l.o),t(16>=F),0<F){var M=u.l,B=u.Ta,z=u.Ua,$=M.width;if(ri(u,F,b,k),F=z=[z],t((b=u.C)<(k=f)),t(M.v<M.va),k>M.o&&(k=M.o),b<M.j){var G=M.j-b;b=M.j,F[0]+=G*$}if(b>=k?b=0:(F[0]+=4*M.v,M.ka=b-M.j,M.U=M.va-M.v,M.T=k-b,b=1),b){if(z=z[0],11>(b=u.ca).S){var ie=b.f.RGBA,ve=(k=b.S,F=M.U,M=M.T,G=ie.eb,ie.A),K=M;for(ie=ie.fb+u.Ma*ie.A;0<K--;){var ce=B,pe=z,_e=F,ge=G,we=ie;switch(k){case Qc:wl(ce,pe,_e,ge,we);break;case ed:xs(ce,pe,_e,ge,we);break;case kh:xs(ce,pe,_e,ge,we),Nl(ge,we,0,_e,1,0);break;case w0:ji(ce,pe,_e,ge,we);break;case td:Ke(ce,pe,_e,ge,we,1);break;case Ch:Ke(ce,pe,_e,ge,we,1),Nl(ge,we,0,_e,1,0);break;case nd:Ke(ce,pe,_e,ge,we,0);break;case rd:Ke(ce,pe,_e,ge,we,0),Nl(ge,we,1,_e,1,0);break;case Sh:bs(ce,pe,_e,ge,we);break;case Ah:bs(ce,pe,_e,ge,we),p0(ge,we,_e,1,0);break;case j0:_s(ce,pe,_e,ge,we);break;default:t(0)}z+=$,ie+=ve}u.Ma+=M}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=b.height)}}u.C=f,t(u.C<=u.i)}function ea(u){var f;if(0<u.ua)return 0;for(f=0;f<u.Wb;++f){var b=u.Ya[f].G,k=u.Ya[f].H;if(0<b[1][k[1]+0].g||0<b[2][k[2]+0].g||0<b[3][k[3]+0].g)return 0}return 1}function xa(u,f,b,k,F,M){if(u.Z!=0){var B=u.qd,z=u.rd;for(t(Ns[u.Z]!=null);f<b;++f)Ns[u.Z](B,z,k,F,k,F,M),B=k,z=F,F+=M;u.qd=B,u.rd=z}}function ta(u,f){var b=u.l.ma,k=b.Z==0||b.Z==1?u.l.j:u.C;if(k=u.C<k?k:u.C,t(f<=u.l.o),f>k){var F=u.l.width,M=b.ca,B=b.tb+F*k,z=u.V,$=u.Ba+u.c*k,G=u.gc;t(u.ab==1),t(G[0].hc==3),ja(G[0],k,f,z,$,M,B),xa(b,k,f,M,B,F)}u.C=u.Ma=f}function na(u,f,b,k,F,M,B){var z=u.$/k,$=u.$%k,G=u.m,ie=u.s,ve=b+u.$,K=ve;F=b+k*F;var ce=b+k*M,pe=280+ie.ua,_e=u.Pb?z:16777216,ge=0<ie.ua?ie.Wa:null,we=ie.wc,Ne=ve<ce?In(ie,$,z):null;t(u.C<M),t(ce<=F);var De=!1;e:for(;;){for(;De||ve<ce;){var ke=0;if(z>=_e){var We=ve-b;t((_e=u).Pb),_e.wd=_e.m,_e.xd=We,0<_e.s.ua&&at(_e.s.Wa,_e.s.vb),_e=z+Fx}if($&we||(Ne=In(ie,$,z)),t(Ne!=null),Ne.Qb&&(f[ve]=Ne.qb,De=!0),!De)if(le(G),Ne.jc){ke=G,We=f;var Ie=ve,ft=Ne.pd[J(ke)&wi-1];t(Ne.jc),256>ft.g?(ne(ke,ke.u+ft.g),We[Ie]=ft.value,ke=0):(ne(ke,ke.u+ft.g-256),t(256<=ft.value),ke=ft.value),ke==0&&(De=!0)}else ke=Qt(Ne.G[0],Ne.H[0],G);if(G.h)break;if(De||256>ke){if(!De)if(Ne.nd)f[ve]=(Ne.qb|ke<<8)>>>0;else{if(le(G),De=Qt(Ne.G[1],Ne.H[1],G),le(G),We=Qt(Ne.G[2],Ne.H[2],G),Ie=Qt(Ne.G[3],Ne.H[3],G),G.h)break;f[ve]=(Ie<<24|De<<16|ke<<8|We)>>>0}if(De=!1,++ve,++$>=k&&($=0,++z,B!=null&&z<=M&&!(z%16)&&B(u,z),ge!=null))for(;K<ve;)ke=f[K++],ge.X[(506832829*ke&4294967295)>>>ge.Mb]=ke}else if(280>ke){if(ke=Rr(ke-256,G),We=Qt(Ne.G[4],Ne.H[4],G),le(G),We=Or(k,We=Rr(We,G)),G.h)break;if(ve-b<We||F-ve<ke)break e;for(Ie=0;Ie<ke;++Ie)f[ve+Ie]=f[ve+Ie-We];for(ve+=ke,$+=ke;$>=k;)$-=k,++z,B!=null&&z<=M&&!(z%16)&&B(u,z);if(t(ve<=F),$&we&&(Ne=In(ie,$,z)),ge!=null)for(;K<ve;)ke=f[K++],ge.X[(506832829*ke&4294967295)>>>ge.Mb]=ke}else{if(!(ke<pe))break e;for(De=ke-280,t(ge!=null);K<ve;)ke=f[K++],ge.X[(506832829*ke&4294967295)>>>ge.Mb]=ke;ke=ve,t(!(De>>>(We=ge).Xa)),f[ke]=We.X[De],De=!0}De||t(G.h==V(G))}if(u.Pb&&G.h&&ve<F)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&at(u.s.vb,u.s.Wa);else{if(G.h)break e;B!=null&&B(u,z>M?M:z),u.a=0,u.$=ve-b}return 1}return u.a=3,0}function Mr(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var f=u.Wa;f!=null&&(f.X=null),u.vb=null,t(u!=null)}function ai(){var u=new ze;return u==null?null:(u.a=0,u.xb=k0,vt("Predictor","VP8LPredictors"),vt("Predictor","VP8LPredictors_C"),vt("PredictorAdd","VP8LPredictorsAdd"),vt("PredictorAdd","VP8LPredictorsAdd_C"),cn=ot,_l=et,wl=Rt,xs=wt,bs=$e,_s=dt,ji=Pt,A.VP8LMapColor32b=wa,A.VP8LMapColor8b=xl,u)}function ba(u,f,b,k,F){var M=1,B=[u],z=[f],$=k.m,G=k.s,ie=null,ve=0;e:for(;;){if(b)for(;M&&de($,1);){var K=B,ce=z,pe=k,_e=1,ge=pe.m,we=pe.gc[pe.ab],Ne=de(ge,2);if(pe.Oc&1<<Ne)M=0;else{switch(pe.Oc|=1<<Ne,we.hc=Ne,we.Ea=K[0],we.nc=ce[0],we.K=[null],++pe.ab,t(4>=pe.ab),Ne){case 0:case 1:we.b=de(ge,3)+2,_e=ba(ue(we.Ea,we.b),ue(we.nc,we.b),0,pe,we.K),we.K=we.K[0];break;case 3:var De,ke=de(ge,8)+1,We=16<ke?0:4<ke?1:2<ke?2:3;if(K[0]=ue(we.Ea,We),we.b=We,De=_e=ba(ke,1,0,pe,we.K)){var Ie,ft=ke,Me=we,yt=1<<(8>>Me.b),kn=i(yt);if(kn==null)De=0;else{var pt=Me.K[0],Be=Me.w;for(kn[0]=Me.K[0][0],Ie=1;Ie<1*ft;++Ie)kn[Ie]=qe(pt[Be+Ie],kn[Ie-1]);for(;Ie<4*yt;++Ie)kn[Ie]=0;Me.K[0]=null,Me.K[0]=kn,De=1}}_e=De;break;case 2:break;default:t(0)}M=_e}}if(B=B[0],z=z[0],M&&de($,1)&&!(M=1<=(ve=de($,4))&&11>=ve)){k.a=3;break e}var Pe;if(Pe=M)t:{var un,ht,xt,zt=k,Rn=B,ar=z,tn=ve,Zn=b,sr=zt.m,Cn=zt.s,bt=[null],At=1,nn=0,Dt=Ix[tn];n:for(;;){if(Zn&&de(sr,1)){var On=de(sr,3)+2,sa=ue(Rn,On),hn=ue(ar,On),hr=sa*hn;if(!ba(sa,hn,0,zt,bt))break n;for(bt=bt[0],Cn.xc=On,un=0;un<hr;++un){var It=bt[un]>>8&65535;bt[un]=It,It>=At&&(At=It+1)}}if(sr.h)break n;for(ht=0;5>ht;++ht){var An=N0[ht];!ht&&0<tn&&(An+=1<<tn),nn<An&&(nn=An)}var Nr=o(At*Dt,P),ir=At,Sr=o(ir,X);if(Sr==null)var kr=null;else t(65536>=ir),kr=Sr;var fr=i(nn);if(kr==null||fr==null||Nr==null){zt.a=1;break n}var Cr=Nr;for(un=xt=0;un<At;++un){var Mt=kr[un],Ar=Mt.G,ia=Mt.H,Si=0,Ga=1,Mn=0;for(ht=0;5>ht;++ht){An=N0[ht],Ar[ht]=Cr,ia[ht]=xt,!ht&&0<tn&&(An+=1<<tn);a:{var od,Ph=An,ld=zt,Cl=fr,nb=Cr,rb=xt,qh=0,Ss=ld.m,ab=de(Ss,1);if(s(Cl,0,0,Ph),ab){var sb=de(Ss,1)+1,ib=de(Ss,1),T0=de(Ss,ib==0?1:8);Cl[T0]=1,sb==2&&(Cl[T0=de(Ss,8)]=1);var cd=1}else{var I0=i(19),F0=de(Ss,4)+4;if(19<F0){ld.a=3;var dd=0;break a}for(od=0;od<F0;++od)I0[qx[od]]=de(Ss,3);var Th=void 0,Al=void 0,R0=ld,ob=I0,ud=Ph,O0=Cl,Ih=0,ks=R0.m,M0=8,B0=o(128,P);r:for(;O(B0,0,7,ob,19);){if(de(ks,1)){var lb=2+2*de(ks,3);if((Th=2+de(ks,lb))>ud)break r}else Th=ud;for(Al=0;Al<ud&&Th--;){le(ks);var U0=B0[0+(127&J(ks))];ne(ks,ks.u+U0.g);var oo=U0.value;if(16>oo)O0[Al++]=oo,oo!=0&&(M0=oo);else{var cb=oo==16,z0=oo-16,db=Ex[z0],$0=de(ks,Lx[z0])+db;if(Al+$0>ud)break r;for(var ub=cb?M0:0;0<$0--;)O0[Al++]=ub}}Ih=1;break r}Ih||(R0.a=3),cd=Ih}(cd=cd&&!Ss.h)&&(qh=O(nb,rb,8,Cl,Ph)),cd&&qh!=0?dd=qh:(ld.a=3,dd=0)}if(dd==0)break n;if(Ga&&Px[ht]==1&&(Ga=Cr[xt].g==0),Si+=Cr[xt].g,xt+=dd,3>=ht){var Dl,Fh=fr[0];for(Dl=1;Dl<An;++Dl)fr[Dl]>Fh&&(Fh=fr[Dl]);Mn+=Fh}}if(Mt.nd=Ga,Mt.Qb=0,Ga&&(Mt.qb=(Ar[3][ia[3]+0].value<<24|Ar[1][ia[1]+0].value<<16|Ar[2][ia[2]+0].value)>>>0,Si==0&&256>Ar[0][ia[0]+0].value&&(Mt.Qb=1,Mt.qb+=Ar[0][ia[0]+0].value<<8)),Mt.jc=!Mt.Qb&&6>Mn,Mt.jc){var hd,Ka=Mt;for(hd=0;hd<wi;++hd){var Cs=hd,As=Ka.pd[Cs],fd=Ka.G[0][Ka.H[0]+Cs];256<=fd.value?(As.g=fd.g+256,As.value=fd.value):(As.g=0,As.value=0,Cs>>=En(fd,8,As),Cs>>=En(Ka.G[1][Ka.H[1]+Cs],16,As),Cs>>=En(Ka.G[2][Ka.H[2]+Cs],0,As),En(Ka.G[3][Ka.H[3]+Cs],24,As))}}}Cn.vc=bt,Cn.Wb=At,Cn.Ya=kr,Cn.yc=Nr,Pe=1;break t}Pe=0}if(!(M=Pe)){k.a=3;break e}if(0<ve){if(G.ua=1<<ve,!Q(G.Wa,ve)){k.a=1,M=0;break e}}else G.ua=0;var Rh=k,W0=B,hb=z,Oh=Rh.s,Mh=Oh.xc;if(Rh.c=W0,Rh.i=hb,Oh.md=ue(W0,Mh),Oh.wc=Mh==0?-1:(1<<Mh)-1,b){k.xb=$x;break e}if((ie=i(B*z))==null){k.a=1,M=0;break e}M=(M=na(k,ie,0,B,z,z,null))&&!$.h;break e}return M?(F!=null?F[0]=ie:(t(ie==null),t(b)),k.$=0,b||Mr(G)):Mr(G),M}function si(u,f){var b=u.c*u.i,k=b+f+16*f;return t(u.c<=f),u.V=i(k),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+f,1)}function Zi(u,f){var b=u.C,k=f-b,F=u.V,M=u.Ba+u.c*b;for(t(f<=u.l.o);0<k;){var B=16<k?16:k,z=u.l.ma,$=u.l.width,G=$*B,ie=z.ca,ve=z.tb+$*b,K=u.Ta,ce=u.Ua;ri(u,B,F,M),g0(K,ce,ie,ve,G),xa(z,b,b+B,ie,ve,$),k-=B,F+=B*u.c,b+=B}t(b==f),u.C=u.Ma=f}function Yi(){this.ub=this.yd=this.td=this.Rb=0}function Ji(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function lh(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function nl(){this.Yb=function(){var u=[];return function f(b,k,F){for(var M=F[k],B=0;B<M&&(b.push(F.length>k+1?[]:0),!(F.length<k+1));B++)f(b[B],k+1,F)}(u,0,[3,11]),u}()}function qc(){this.jb=i(3),this.Wc=l([4,8],nl),this.Xc=l([4,17],nl)}function Tc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Br(){this.ld=this.La=this.dd=this.tc=0}function rl(){this.Na=this.la=0}function Ic(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function al(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Fc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Br),this.Y=0,this.ya=Array(new al),this.aa=0,this.l=new Xi}function Rc(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Oc(){this.cb=this.a=0,this.sc="",this.m=new D,this.Od=new Yi,this.Kc=new Ji,this.ed=new Tc,this.Qa=new lh,this.Ic=this.$c=this.Aa=0,this.D=new Fc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,D),this.ia=0,this.pb=o(4,Ic),this.Pa=new qc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Rc),this.Hd=0,this.rb=Array(new rl),this.sb=0,this.wa=Array(new Br),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new al),this.L=this.aa=0,this.gd=l([4,2],Br),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ch(){var u=new Oc;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,Sl||(Sl=Oa)),u}function xn(u,f,b){return u.a==0&&(u.a=f,u.sc=b,u.cb=0),0}function Mc(u,f,b){return 3<=b&&u[f+0]==157&&u[f+1]==1&&u[f+2]==42}function Bc(u,f){if(u==null)return 0;if(u.a=0,u.sc="OK",f==null)return xn(u,2,"null VP8Io passed to VP8GetHeaders()");var b=f.data,k=f.w,F=f.ha;if(4>F)return xn(u,7,"Truncated header.");var M=b[k+0]|b[k+1]<<8|b[k+2]<<16,B=u.Od;if(B.Rb=!(1&M),B.td=M>>1&7,B.yd=M>>4&1,B.ub=M>>5,3<B.td)return xn(u,3,"Incorrect keyframe parameters.");if(!B.yd)return xn(u,4,"Frame not displayable.");k+=3,F-=3;var z=u.Kc;if(B.Rb){if(7>F)return xn(u,7,"cannot parse picture header");if(!Mc(b,k,F))return xn(u,3,"Bad code word");z.c=16383&(b[k+4]<<8|b[k+3]),z.Td=b[k+4]>>6,z.i=16383&(b[k+6]<<8|b[k+5]),z.Ud=b[k+6]>>6,k+=7,F-=7,u.za=z.c+15>>4,u.Ub=z.i+15>>4,f.width=z.c,f.height=z.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,s((M=u.Pa).jb,0,255,M.jb.length),t((M=u.Qa)!=null),M.Cb=0,M.Bb=0,M.Fb=1,s(M.Zb,0,0,M.Zb.length),s(M.Lb,0,0,M.Lb)}if(B.ub>F)return xn(u,7,"bad partition length");te(M=u.m,b,k,B.ub),k+=B.ub,F-=B.ub,B.Rb&&(z.Ld=re(M),z.Kd=re(M)),z=u.Qa;var $,G=u.Pa;if(t(M!=null),t(z!=null),z.Cb=re(M),z.Cb){if(z.Bb=re(M),re(M)){for(z.Fb=re(M),$=0;4>$;++$)z.Zb[$]=re(M)?Z(M,7):0;for($=0;4>$;++$)z.Lb[$]=re(M)?Z(M,6):0}if(z.Bb)for($=0;3>$;++$)G.jb[$]=re(M)?oe(M,8):255}else z.Bb=0;if(M.Ka)return xn(u,3,"cannot parse segment header");if((z=u.ed).zd=re(M),z.Tb=oe(M,6),z.wb=oe(M,3),z.Pc=re(M),z.Pc&&re(M)){for(G=0;4>G;++G)re(M)&&(z.vd[G]=Z(M,6));for(G=0;4>G;++G)re(M)&&(z.od[G]=Z(M,6))}if(u.L=z.Tb==0?0:z.zd?1:2,M.Ka)return xn(u,3,"cannot parse filter header");var ie=F;if(F=$=k,k=$+ie,z=ie,u.Xb=(1<<oe(u.m,2))-1,ie<3*(G=u.Xb))b=7;else{for($+=3*G,z-=3*G,ie=0;ie<G;++ie){var ve=b[F+0]|b[F+1]<<8|b[F+2]<<16;ve>z&&(ve=z),te(u.Jc[+ie],b,$,ve),$+=ve,z-=ve,F+=3}te(u.Jc[+G],b,$,z),b=$<k?0:5}if(b!=0)return xn(u,b,"cannot parse partitions");for(b=oe($=u.m,7),F=re($)?Z($,4):0,k=re($)?Z($,4):0,z=re($)?Z($,4):0,G=re($)?Z($,4):0,$=re($)?Z($,4):0,ie=u.Qa,ve=0;4>ve;++ve){if(ie.Cb){var K=ie.Zb[ve];ie.Fb||(K+=b)}else{if(0<ve){u.pb[ve]=u.pb[0];continue}K=b}var ce=u.pb[ve];ce.Sc[0]=Dh[en(K+F,127)],ce.Sc[1]=Lh[en(K+0,127)],ce.Eb[0]=2*Dh[en(K+k,127)],ce.Eb[1]=101581*Lh[en(K+z,127)]>>16,8>ce.Eb[1]&&(ce.Eb[1]=8),ce.Qc[0]=Dh[en(K+G,117)],ce.Qc[1]=Lh[en(K+$,127)],ce.lc=K+$}if(!B.Rb)return xn(u,4,"Not a key frame.");for(re(M),B=u.Pa,b=0;4>b;++b){for(F=0;8>F;++F)for(k=0;3>k;++k)for(z=0;11>z;++z)G=fe(M,Ux[b][F][k][z])?oe(M,8):Mx[b][F][k][z],B.Wc[b][F].Yb[k][z]=G;for(F=0;17>F;++F)B.Xc[b][F]=B.Wc[b][zx[F]]}return u.kc=re(M),u.kc&&(u.Bd=oe(M,8)),u.cb=1}function Oa(u,f,b,k,F,M,B){var z=f[F].Yb[b];for(b=0;16>F;++F){if(!fe(u,z[b+0]))return F;for(;!fe(u,z[b+1]);)if(z=f[++F].Yb[0],b=0,F==16)return 16;var $=f[F+1].Yb;if(fe(u,z[b+2])){var G=u,ie=0;if(fe(G,(K=z)[(ve=b)+3]))if(fe(G,K[ve+6])){for(z=0,ve=2*(ie=fe(G,K[ve+8]))+(K=fe(G,K[ve+9+ie])),ie=0,K=Rx[ve];K[z];++z)ie+=ie+fe(G,K[z]);ie+=3+(8<<ve)}else fe(G,K[ve+7])?(ie=7+2*fe(G,165),ie+=fe(G,145)):ie=5+fe(G,159);else ie=fe(G,K[ve+4])?3+fe(G,K[ve+5]):2;z=$[2]}else ie=1,z=$[1];$=B+Ox[F],0>(G=u).b&&me(G);var ve,K=G.b,ce=(ve=G.Ca>>1)-(G.I>>K)>>31;--G.b,G.Ca+=ce,G.Ca|=1,G.I-=(ve+1&ce)<<K,M[$]=((ie^ce)-ce)*k[(0<F)+0]}return 16}function ii(u){var f=u.rb[u.sb-1];f.la=0,f.Na=0,s(u.zc,0,0,u.zc.length),u.ja=0}function ra(u,f,b,k,F){F=u[f+b+32*k]+(F>>3),u[f+b+32*k]=-256&F?0>F?0:255:F}function oi(u,f,b,k,F,M){ra(u,f,0,b,k+F),ra(u,f,1,b,k+M),ra(u,f,2,b,k-M),ra(u,f,3,b,k-F)}function ln(u){return(20091*u>>16)+u}function sl(u,f,b,k){var F,M=0,B=i(16);for(F=0;4>F;++F){var z=u[f+0]+u[f+8],$=u[f+0]-u[f+8],G=(35468*u[f+4]>>16)-ln(u[f+12]),ie=ln(u[f+4])+(35468*u[f+12]>>16);B[M+0]=z+ie,B[M+1]=$+G,B[M+2]=$-G,B[M+3]=z-ie,M+=4,f++}for(F=M=0;4>F;++F)z=(u=B[M+0]+4)+B[M+8],$=u-B[M+8],G=(35468*B[M+4]>>16)-ln(B[M+12]),ra(b,k,0,0,z+(ie=ln(B[M+4])+(35468*B[M+12]>>16))),ra(b,k,1,0,$+G),ra(b,k,2,0,$-G),ra(b,k,3,0,z-ie),M++,k+=32}function dh(u,f,b,k){var F=u[f+0]+4,M=35468*u[f+4]>>16,B=ln(u[f+4]),z=35468*u[f+1]>>16;oi(b,k,0,F+B,u=ln(u[f+1]),z),oi(b,k,1,F+M,u,z),oi(b,k,2,F-M,u,z),oi(b,k,3,F-B,u,z)}function uh(u,f,b,k,F){sl(u,f,b,k),F&&sl(u,f+16,b,k+4)}function hh(u,f,b,k){Ni(u,f+0,b,k,1),Ni(u,f+32,b,k+128,1)}function _a(u,f,b,k){var F;for(u=u[f+0]+4,F=0;4>F;++F)for(f=0;4>f;++f)ra(b,k,f,F,u)}function Uc(u,f,b,k){u[f+0]&&St(u,f+0,b,k),u[f+16]&&St(u,f+16,b,k+4),u[f+32]&&St(u,f+32,b,k+128),u[f+48]&&St(u,f+48,b,k+128+4)}function zc(u,f,b,k){var F,M=i(16);for(F=0;4>F;++F){var B=u[f+0+F]+u[f+12+F],z=u[f+4+F]+u[f+8+F],$=u[f+4+F]-u[f+8+F],G=u[f+0+F]-u[f+12+F];M[0+F]=B+z,M[8+F]=B-z,M[4+F]=G+$,M[12+F]=G-$}for(F=0;4>F;++F)B=(u=M[0+4*F]+3)+M[3+4*F],z=M[1+4*F]+M[2+4*F],$=M[1+4*F]-M[2+4*F],G=u-M[3+4*F],b[k+0]=B+z>>3,b[k+16]=G+$>>3,b[k+32]=B-z>>3,b[k+48]=G-$>>3,k+=64}function fs(u,f,b){var k,F=f-32,M=jr,B=255-u[F-1];for(k=0;k<b;++k){var z,$=M,G=B+u[f-1];for(z=0;z<b;++z)u[f+z]=$[G+u[F+z]];f+=32}}function il(u,f){fs(u,f,4)}function fh(u,f){fs(u,f,8)}function ph(u,f){fs(u,f,16)}function mh(u,f){var b;for(b=0;16>b;++b)r(u,f+32*b,u,f-32,16)}function ol(u,f){var b;for(b=16;0<b;--b)s(u,f,u[f-1],16),f+=32}function li(u,f,b){var k;for(k=0;16>k;++k)s(f,b+32*k,u,16)}function ps(u,f){var b,k=16;for(b=0;16>b;++b)k+=u[f-1+32*b]+u[f+b-32];li(k>>5,u,f)}function gh(u,f){var b,k=8;for(b=0;16>b;++b)k+=u[f-1+32*b];li(k>>4,u,f)}function ci(u,f){var b,k=8;for(b=0;16>b;++b)k+=u[f+b-32];li(k>>4,u,f)}function ll(u,f){li(128,u,f)}function it(u,f,b){return u+2*f+b+2>>2}function vh(u,f){var b,k=f-32;for(k=new Uint8Array([it(u[k-1],u[k+0],u[k+1]),it(u[k+0],u[k+1],u[k+2]),it(u[k+1],u[k+2],u[k+3]),it(u[k+2],u[k+3],u[k+4])]),b=0;4>b;++b)r(u,f+32*b,k,0,k.length)}function yh(u,f){var b=u[f-1],k=u[f-1+32],F=u[f-1+64],M=u[f-1+96];be(u,f+0,16843009*it(u[f-1-32],b,k)),be(u,f+32,16843009*it(b,k,F)),be(u,f+64,16843009*it(k,F,M)),be(u,f+96,16843009*it(F,M,M))}function xh(u,f){var b,k=4;for(b=0;4>b;++b)k+=u[f+b-32]+u[f-1+32*b];for(k>>=3,b=0;4>b;++b)s(u,f+32*b,k,4)}function bh(u,f){var b=u[f-1+0],k=u[f-1+32],F=u[f-1+64],M=u[f-1-32],B=u[f+0-32],z=u[f+1-32],$=u[f+2-32],G=u[f+3-32];u[f+0+96]=it(k,F,u[f-1+96]),u[f+1+96]=u[f+0+64]=it(b,k,F),u[f+2+96]=u[f+1+64]=u[f+0+32]=it(M,b,k),u[f+3+96]=u[f+2+64]=u[f+1+32]=u[f+0+0]=it(B,M,b),u[f+3+64]=u[f+2+32]=u[f+1+0]=it(z,B,M),u[f+3+32]=u[f+2+0]=it($,z,B),u[f+3+0]=it(G,$,z)}function Ma(u,f){var b=u[f+1-32],k=u[f+2-32],F=u[f+3-32],M=u[f+4-32],B=u[f+5-32],z=u[f+6-32],$=u[f+7-32];u[f+0+0]=it(u[f+0-32],b,k),u[f+1+0]=u[f+0+32]=it(b,k,F),u[f+2+0]=u[f+1+32]=u[f+0+64]=it(k,F,M),u[f+3+0]=u[f+2+32]=u[f+1+64]=u[f+0+96]=it(F,M,B),u[f+3+32]=u[f+2+64]=u[f+1+96]=it(M,B,z),u[f+3+64]=u[f+2+96]=it(B,z,$),u[f+3+96]=it(z,$,$)}function Ba(u,f){var b=u[f-1+0],k=u[f-1+32],F=u[f-1+64],M=u[f-1-32],B=u[f+0-32],z=u[f+1-32],$=u[f+2-32],G=u[f+3-32];u[f+0+0]=u[f+1+64]=M+B+1>>1,u[f+1+0]=u[f+2+64]=B+z+1>>1,u[f+2+0]=u[f+3+64]=z+$+1>>1,u[f+3+0]=$+G+1>>1,u[f+0+96]=it(F,k,b),u[f+0+64]=it(k,b,M),u[f+0+32]=u[f+1+96]=it(b,M,B),u[f+1+32]=u[f+2+96]=it(M,B,z),u[f+2+32]=u[f+3+96]=it(B,z,$),u[f+3+32]=it(z,$,G)}function _h(u,f){var b=u[f+0-32],k=u[f+1-32],F=u[f+2-32],M=u[f+3-32],B=u[f+4-32],z=u[f+5-32],$=u[f+6-32],G=u[f+7-32];u[f+0+0]=b+k+1>>1,u[f+1+0]=u[f+0+64]=k+F+1>>1,u[f+2+0]=u[f+1+64]=F+M+1>>1,u[f+3+0]=u[f+2+64]=M+B+1>>1,u[f+0+32]=it(b,k,F),u[f+1+32]=u[f+0+96]=it(k,F,M),u[f+2+32]=u[f+1+96]=it(F,M,B),u[f+3+32]=u[f+2+96]=it(M,B,z),u[f+3+64]=it(B,z,$),u[f+3+96]=it(z,$,G)}function wh(u,f){var b=u[f-1+0],k=u[f-1+32],F=u[f-1+64],M=u[f-1+96];u[f+0+0]=b+k+1>>1,u[f+2+0]=u[f+0+32]=k+F+1>>1,u[f+2+32]=u[f+0+64]=F+M+1>>1,u[f+1+0]=it(b,k,F),u[f+3+0]=u[f+1+32]=it(k,F,M),u[f+3+32]=u[f+1+64]=it(F,M,M),u[f+3+64]=u[f+2+64]=u[f+0+96]=u[f+1+96]=u[f+2+96]=u[f+3+96]=M}function Qi(u,f){var b=u[f-1+0],k=u[f-1+32],F=u[f-1+64],M=u[f-1+96],B=u[f-1-32],z=u[f+0-32],$=u[f+1-32],G=u[f+2-32];u[f+0+0]=u[f+2+32]=b+B+1>>1,u[f+0+32]=u[f+2+64]=k+b+1>>1,u[f+0+64]=u[f+2+96]=F+k+1>>1,u[f+0+96]=M+F+1>>1,u[f+3+0]=it(z,$,G),u[f+2+0]=it(B,z,$),u[f+1+0]=u[f+3+32]=it(b,B,z),u[f+1+32]=u[f+3+64]=it(k,b,B),u[f+1+64]=u[f+3+96]=it(F,k,b),u[f+1+96]=it(M,F,k)}function cl(u,f){var b;for(b=0;8>b;++b)r(u,f+32*b,u,f-32,8)}function di(u,f){var b;for(b=0;8>b;++b)s(u,f,u[f-1],8),f+=32}function eo(u,f,b){var k;for(k=0;8>k;++k)s(f,b+32*k,u,8)}function to(u,f){var b,k=8;for(b=0;8>b;++b)k+=u[f+b-32]+u[f-1+32*b];eo(k>>4,u,f)}function jh(u,f){var b,k=4;for(b=0;8>b;++b)k+=u[f+b-32];eo(k>>3,u,f)}function dl(u,f){var b,k=4;for(b=0;8>b;++b)k+=u[f-1+32*b];eo(k>>3,u,f)}function ul(u,f){eo(128,u,f)}function ui(u,f,b){var k=u[f-b],F=u[f+0],M=3*(F-k)+Nh[1020+u[f-2*b]-u[f+b]],B=Xc[112+(M+4>>3)];u[f-b]=jr[255+k+Xc[112+(M+3>>3)]],u[f+0]=jr[255+F-B]}function hi(u,f,b,k){var F=u[f+0],M=u[f+b];return Wr[255+u[f-2*b]-u[f-b]]>k||Wr[255+M-F]>k}function hl(u,f,b,k){return 4*Wr[255+u[f-b]-u[f+0]]+Wr[255+u[f-2*b]-u[f+b]]<=k}function no(u,f,b,k,F){var M=u[f-3*b],B=u[f-2*b],z=u[f-b],$=u[f+0],G=u[f+b],ie=u[f+2*b],ve=u[f+3*b];return 4*Wr[255+z-$]+Wr[255+B-G]>k?0:Wr[255+u[f-4*b]-M]<=F&&Wr[255+M-B]<=F&&Wr[255+B-z]<=F&&Wr[255+ve-ie]<=F&&Wr[255+ie-G]<=F&&Wr[255+G-$]<=F}function fl(u,f,b,k){var F=2*k+1;for(k=0;16>k;++k)hl(u,f+k,b,F)&&ui(u,f+k,b)}function fi(u,f,b,k){var F=2*k+1;for(k=0;16>k;++k)hl(u,f+k*b,1,F)&&ui(u,f+k*b,1)}function $c(u,f,b,k){var F;for(F=3;0<F;--F)fl(u,f+=4*b,b,k)}function Wc(u,f,b,k){var F;for(F=3;0<F;--F)fi(u,f+=4,b,k)}function Ua(u,f,b,k,F,M,B,z){for(M=2*M+1;0<F--;){if(no(u,f,b,M,B))if(hi(u,f,b,z))ui(u,f,b);else{var $=u,G=f,ie=b,ve=$[G-2*ie],K=$[G-ie],ce=$[G+0],pe=$[G+ie],_e=$[G+2*ie],ge=27*(Ne=Nh[1020+3*(ce-K)+Nh[1020+ve-pe]])+63>>7,we=18*Ne+63>>7,Ne=9*Ne+63>>7;$[G-3*ie]=jr[255+$[G-3*ie]+Ne],$[G-2*ie]=jr[255+ve+we],$[G-ie]=jr[255+K+ge],$[G+0]=jr[255+ce-ge],$[G+ie]=jr[255+pe-we],$[G+2*ie]=jr[255+_e-Ne]}f+=k}}function za(u,f,b,k,F,M,B,z){for(M=2*M+1;0<F--;){if(no(u,f,b,M,B))if(hi(u,f,b,z))ui(u,f,b);else{var $=u,G=f,ie=b,ve=$[G-ie],K=$[G+0],ce=$[G+ie],pe=Xc[112+(4+(_e=3*(K-ve))>>3)],_e=Xc[112+(_e+3>>3)],ge=pe+1>>1;$[G-2*ie]=jr[255+$[G-2*ie]+ge],$[G-ie]=jr[255+ve+_e],$[G+0]=jr[255+K-pe],$[G+ie]=jr[255+ce-ge]}f+=k}}function Hc(u,f,b,k,F,M){Ua(u,f,b,1,16,k,F,M)}function Vc(u,f,b,k,F,M){Ua(u,f,1,b,16,k,F,M)}function pi(u,f,b,k,F,M){var B;for(B=3;0<B;--B)za(u,f+=4*b,b,1,16,k,F,M)}function Gc(u,f,b,k,F,M){var B;for(B=3;0<B;--B)za(u,f+=4,1,b,16,k,F,M)}function v(u,f,b,k,F,M,B,z){Ua(u,f,F,1,8,M,B,z),Ua(b,k,F,1,8,M,B,z)}function I(u,f,b,k,F,M,B,z){Ua(u,f,1,F,8,M,B,z),Ua(b,k,1,F,8,M,B,z)}function Y(u,f,b,k,F,M,B,z){za(u,f+4*F,F,1,8,M,B,z),za(b,k+4*F,F,1,8,M,B,z)}function ae(u,f,b,k,F,M,B,z){za(u,f+4,1,F,8,M,B,z),za(b,k+4,1,F,8,M,B,z)}function he(){this.ba=new qt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Nt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function je(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ce(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Re(){this.ua=0,this.Wa=new nt,this.vb=new nt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new X,this.yc=new P}function ze(){this.xb=this.a=0,this.l=new Xi,this.ca=new qt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Re,this.ab=0,this.gc=o(4,Ce),this.Oc=0}function rt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function lt(u,f,b,k,F,M,B){for(u=u==null?0:u[f+0],f=0;f<B;++f)F[M+f]=u+b[k+f]&255,u=F[M+f]}function jt(u,f,b,k,F,M,B){var z;if(u==null)lt(null,null,b,k,F,M,B);else for(z=0;z<B;++z)F[M+z]=u[f+z]+b[k+z]&255}function Kt(u,f,b,k,F,M,B){if(u==null)lt(null,null,b,k,F,M,B);else{var z,$=u[f+0],G=$,ie=$;for(z=0;z<B;++z)G=ie+($=u[f+z])-G,ie=b[k+z]+(-256&G?0>G?0:255:G)&255,G=$,F[M+z]=ie}}function bn(u,f,b,k){var F=f.width,M=f.o;if(t(u!=null&&f!=null),0>b||0>=k||b+k>M)return null;if(!u.Cc){if(u.ga==null){var B;if(u.ga=new rt,(B=u.ga==null)||(B=f.width*f.o,t(u.Gb.length==0),u.Gb=i(B),u.Uc=0,u.Gb==null?B=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,B=1),B=!B),!B){B=u.ga;var z=u.Fa,$=u.P,G=u.qc,ie=u.mb,ve=u.nb,K=$+1,ce=G-1,pe=B.l;if(t(z!=null&&ie!=null&&f!=null),Ns[0]=null,Ns[1]=lt,Ns[2]=jt,Ns[3]=Kt,B.ca=ie,B.tb=ve,B.c=f.width,B.i=f.height,t(0<B.c&&0<B.i),1>=G)f=0;else if(B.$a=3&z[$+0],B.Z=z[$+0]>>2&3,B.Lc=z[$+0]>>4&3,$=z[$+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||$)f=0;else if(pe.put=Ze,pe.ac=ya,pe.bc=Fa,pe.ma=B,pe.width=f.width,pe.height=f.height,pe.Da=f.Da,pe.v=f.v,pe.va=f.va,pe.j=f.j,pe.o=f.o,B.$a)e:{t(B.$a==1),f=ai();t:for(;;){if(f==null){f=0;break e}if(t(B!=null),B.mc=f,f.c=B.c,f.i=B.i,f.l=B.l,f.l.ma=B,f.l.width=B.c,f.l.height=B.i,f.a=0,se(f.m,z,K,ce),!ba(B.c,B.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&ea(f.s)?(B.ic=1,z=f.c*f.i,f.Ta=null,f.Ua=0,f.V=i(z),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(B.ic=0,f=si(f,B.c)),!f))break t;f=1;break e}B.mc=null,f=0}else f=ce>=B.c*B.i;B=!f}if(B)return null;u.ga.Lc!=1?u.Ga=0:k=M-b}t(u.ga!=null),t(b+k<=M);e:{if(f=(z=u.ga).c,M=z.l.o,z.$a==0){if(K=u.rc,ce=u.Vc,pe=u.Fa,$=u.P+1+b*f,G=u.mb,ie=u.nb+b*f,t($<=u.P+u.qc),z.Z!=0)for(t(Ns[z.Z]!=null),B=0;B<k;++B)Ns[z.Z](K,ce,pe,$,G,ie,f),K=G,ce=ie,ie+=f,$+=f;else for(B=0;B<k;++B)r(G,ie,pe,$,f),K=G,ce=ie,ie+=f,$+=f;u.rc=K,u.Vc=ce}else{if(t(z.mc!=null),f=b+k,t((B=z.mc)!=null),t(f<=B.i),B.C>=f)f=1;else if(z.ic||Ur(),z.ic){z=B.V,K=B.Ba,ce=B.c;var _e=B.i,ge=(pe=1,$=B.$/ce,G=B.$%ce,ie=B.m,ve=B.s,B.$),we=ce*_e,Ne=ce*f,De=ve.wc,ke=ge<Ne?In(ve,G,$):null;t(ge<=we),t(f<=_e),t(ea(ve));t:for(;;){for(;!ie.h&&ge<Ne;){if(G&De||(ke=In(ve,G,$)),t(ke!=null),le(ie),256>(_e=Qt(ke.G[0],ke.H[0],ie)))z[K+ge]=_e,++ge,++G>=ce&&(G=0,++$<=f&&!($%16)&&ta(B,$));else{if(!(280>_e)){pe=0;break t}_e=Rr(_e-256,ie);var We,Ie=Qt(ke.G[4],ke.H[4],ie);if(le(ie),!(ge>=(Ie=Or(ce,Ie=Rr(Ie,ie)))&&we-ge>=_e)){pe=0;break t}for(We=0;We<_e;++We)z[K+ge+We]=z[K+ge+We-Ie];for(ge+=_e,G+=_e;G>=ce;)G-=ce,++$<=f&&!($%16)&&ta(B,$);ge<Ne&&G&De&&(ke=In(ve,G,$))}t(ie.h==V(ie))}ta(B,$>f?f:$);break t}!pe||ie.h&&ge<we?(pe=0,B.a=ie.h?5:3):B.$=ge,f=pe}else f=na(B,B.V,B.Ba,B.c,B.i,f,Zi);if(!f){k=0;break e}}b+k>=M&&(u.Cc=1),k=1}if(!k)return null;if(u.Cc&&((k=u.ga)!=null&&(k.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*F}function Ot(u,f,b,k,F,M){for(;0<F--;){var B,z=u,$=f+(b?1:0),G=u,ie=f+(b?0:3);for(B=0;B<k;++B){var ve=G[ie+4*B];ve!=255&&(ve*=32897,z[$+4*B+0]=z[$+4*B+0]*ve>>23,z[$+4*B+1]=z[$+4*B+1]*ve>>23,z[$+4*B+2]=z[$+4*B+2]*ve>>23)}f+=M}}function Nn(u,f,b,k,F){for(;0<k--;){var M;for(M=0;M<b;++M){var B=u[f+2*M+0],z=15&(G=u[f+2*M+1]),$=4369*z,G=(240&G|G>>4)*$>>16;u[f+2*M+0]=(240&B|B>>4)*$>>16&240|(15&B|B<<4)*$>>16>>4&15,u[f+2*M+1]=240&G|z}f+=F}}function _n(u,f,b,k,F,M,B,z){var $,G,ie=255;for(G=0;G<F;++G){for($=0;$<k;++$){var ve=u[f+$];M[B+4*$]=ve,ie&=ve}f+=b,B+=z}return ie!=255}function Fn(u,f,b,k,F){var M;for(M=0;M<F;++M)b[k+M]=u[f+M]>>8}function Ur(){Nl=Ot,p0=Nn,m0=_n,g0=Fn}function ur(u,f,b){A[u]=function(k,F,M,B,z,$,G,ie,ve,K,ce,pe,_e,ge,we,Ne,De){var ke,We=De-1>>1,Ie=z[$+0]|G[ie+0]<<16,ft=ve[K+0]|ce[pe+0]<<16;t(k!=null);var Me=3*Ie+ft+131074>>2;for(f(k[F+0],255&Me,Me>>16,_e,ge),M!=null&&(Me=3*ft+Ie+131074>>2,f(M[B+0],255&Me,Me>>16,we,Ne)),ke=1;ke<=We;++ke){var yt=z[$+ke]|G[ie+ke]<<16,kn=ve[K+ke]|ce[pe+ke]<<16,pt=Ie+yt+ft+kn+524296,Be=pt+2*(yt+ft)>>3;Me=Be+Ie>>1,Ie=(pt=pt+2*(Ie+kn)>>3)+yt>>1,f(k[F+2*ke-1],255&Me,Me>>16,_e,ge+(2*ke-1)*b),f(k[F+2*ke-0],255&Ie,Ie>>16,_e,ge+(2*ke-0)*b),M!=null&&(Me=pt+ft>>1,Ie=Be+kn>>1,f(M[B+2*ke-1],255&Me,Me>>16,we,Ne+(2*ke-1)*b),f(M[B+2*ke+0],255&Ie,Ie>>16,we,Ne+(2*ke+0)*b)),Ie=yt,ft=kn}1&De||(Me=3*Ie+ft+131074>>2,f(k[F+De-1],255&Me,Me>>16,_e,ge+(De-1)*b),M!=null&&(Me=3*ft+Ie+131074>>2,f(M[B+De-1],255&Me,Me>>16,we,Ne+(De-1)*b)))}}function Kc(){Hr[Qc]=Wx,Hr[ed]=C0,Hr[w0]=Hx,Hr[td]=A0,Hr[nd]=D0,Hr[Sh]=L0,Hr[j0]=Vx,Hr[kh]=C0,Hr[Ch]=A0,Hr[rd]=D0,Hr[Ah]=L0}function ro(u){return u&-16384?0>u?0:255:u>>Gx}function mi(u,f){return ro((19077*u>>8)+(26149*f>>8)-14234)}function ms(u,f,b){return ro((19077*u>>8)-(6419*f>>8)-(13320*b>>8)+8708)}function gi(u,f){return ro((19077*u>>8)+(33050*f>>8)-17685)}function vi(u,f,b,k,F){k[F+0]=mi(u,b),k[F+1]=ms(u,f,b),k[F+2]=gi(u,f)}function yi(u,f,b,k,F){k[F+0]=gi(u,f),k[F+1]=ms(u,f,b),k[F+2]=mi(u,b)}function Kn(u,f,b,k,F){var M=ms(u,f,b);f=M<<3&224|gi(u,f)>>3,k[F+0]=248&mi(u,b)|M>>5,k[F+1]=f}function xi(u,f,b,k,F){var M=240&gi(u,f)|15;k[F+0]=240&mi(u,b)|ms(u,f,b)>>4,k[F+1]=M}function bi(u,f,b,k,F){k[F+0]=255,vi(u,f,b,k,F+1)}function pl(u,f,b,k,F){yi(u,f,b,k,F),k[F+3]=255}function ml(u,f,b,k,F){vi(u,f,b,k,F),k[F+3]=255}function en(u,f){return 0>u?0:u>f?f:u}function $a(u,f,b){A[u]=function(k,F,M,B,z,$,G,ie,ve){for(var K=ie+(-2&ve)*b;ie!=K;)f(k[F+0],M[B+0],z[$+0],G,ie),f(k[F+1],M[B+0],z[$+0],G,ie+b),F+=2,++B,++$,ie+=2*b;1&ve&&f(k[F+0],M[B+0],z[$+0],G,ie)}}function ao(u,f,b){return b==0?u==0?f==0?6:5:f==0?4:0:b}function Zc(u,f,b,k,F){switch(u>>>30){case 3:Ni(f,b,k,F,0);break;case 2:$r(f,b,k,F);break;case 1:St(f,b,k,F)}}function zr(u,f){var b,k,F=f.M,M=f.Nb,B=u.oc,z=u.pc+40,$=u.oc,G=u.pc+584,ie=u.oc,ve=u.pc+600;for(b=0;16>b;++b)B[z+32*b-1]=129;for(b=0;8>b;++b)$[G+32*b-1]=129,ie[ve+32*b-1]=129;for(0<F?B[z-1-32]=$[G-1-32]=ie[ve-1-32]=129:(s(B,z-32-1,127,21),s($,G-32-1,127,9),s(ie,ve-32-1,127,9)),k=0;k<u.za;++k){var K=f.ya[f.aa+k];if(0<k){for(b=-1;16>b;++b)r(B,z+32*b-4,B,z+32*b+12,4);for(b=-1;8>b;++b)r($,G+32*b-4,$,G+32*b+4,4),r(ie,ve+32*b-4,ie,ve+32*b+4,4)}var ce=u.Gd,pe=u.Hd+k,_e=K.ad,ge=K.Hc;if(0<F&&(r(B,z-32,ce[pe].y,0,16),r($,G-32,ce[pe].f,0,8),r(ie,ve-32,ce[pe].ea,0,8)),K.Za){var we=B,Ne=z-32+16;for(0<F&&(k>=u.za-1?s(we,Ne,ce[pe].y[15],4):r(we,Ne,ce[pe+1].y,0,4)),b=0;4>b;b++)we[Ne+128+b]=we[Ne+256+b]=we[Ne+384+b]=we[Ne+0+b];for(b=0;16>b;++b,ge<<=2)we=B,Ne=z+P0[b],aa[K.Ob[b]](we,Ne),Zc(ge,_e,16*+b,we,Ne)}else if(we=ao(k,F,K.Ob[0]),js[we](B,z),ge!=0)for(b=0;16>b;++b,ge<<=2)Zc(ge,_e,16*+b,B,z+P0[b]);for(b=K.Gc,we=ao(k,F,K.Dd),Va[we]($,G),Va[we](ie,ve),ge=_e,we=$,Ne=G,255&(K=0|b)&&(170&K?Na(ge,256,we,Ne):Tt(ge,256,we,Ne)),K=ie,ge=ve,255&(b>>=8)&&(170&b?Na(_e,320,K,ge):Tt(_e,320,K,ge)),F<u.Ub-1&&(r(ce[pe].y,0,B,z+480,16),r(ce[pe].f,0,$,G+224,8),r(ce[pe].ea,0,ie,ve+224,8)),b=8*M*u.B,ce=u.sa,pe=u.ta+16*k+16*M*u.R,_e=u.qa,K=u.ra+8*k+b,ge=u.Ha,we=u.Ia+8*k+b,b=0;16>b;++b)r(ce,pe+b*u.R,B,z+32*b,16);for(b=0;8>b;++b)r(_e,K+b*u.B,$,G+32*b,8),r(ge,we+b*u.B,ie,ve+32*b,8)}}function _i(u,f,b,k,F,M,B,z,$){var G=[0],ie=[0],ve=0,K=$!=null?$.kd:0,ce=$??new je;if(u==null||12>b)return 7;ce.data=u,ce.w=f,ce.ha=b,f=[f],b=[b],ce.gb=[ce.gb];e:{var pe=f,_e=b,ge=ce.gb;if(t(u!=null),t(_e!=null),t(ge!=null),ge[0]=0,12<=_e[0]&&!n(u,pe[0],"RIFF")){if(n(u,pe[0]+8,"WEBP")){ge=3;break e}var we=ye(u,pe[0]+4);if(12>we||4294967286<we){ge=3;break e}if(K&&we>_e[0]-8){ge=7;break e}ge[0]=we,pe[0]+=12,_e[0]-=12}ge=0}if(ge!=0)return ge;for(we=0<ce.gb[0],b=b[0];;){e:{var Ne=u;_e=f,ge=b;var De=G,ke=ie,We=pe=[0];if((Me=ve=[ve])[0]=0,8>ge[0])ge=7;else{if(!n(Ne,_e[0],"VP8X")){if(ye(Ne,_e[0]+4)!=10){ge=3;break e}if(18>ge[0]){ge=7;break e}var Ie=ye(Ne,_e[0]+8),ft=1+Ae(Ne,_e[0]+12);if(2147483648<=ft*(Ne=1+Ae(Ne,_e[0]+15))){ge=3;break e}We!=null&&(We[0]=Ie),De!=null&&(De[0]=ft),ke!=null&&(ke[0]=Ne),_e[0]+=18,ge[0]-=18,Me[0]=1}ge=0}}if(ve=ve[0],pe=pe[0],ge!=0)return ge;if(_e=!!(2&pe),!we&&ve)return 3;if(M!=null&&(M[0]=!!(16&pe)),B!=null&&(B[0]=_e),z!=null&&(z[0]=0),B=G[0],pe=ie[0],ve&&_e&&$==null){ge=0;break}if(4>b){ge=7;break}if(we&&ve||!we&&!ve&&!n(u,f[0],"ALPH")){b=[b],ce.na=[ce.na],ce.P=[ce.P],ce.Sa=[ce.Sa];e:{Ie=u,ge=f,we=b;var Me=ce.gb;De=ce.na,ke=ce.P,We=ce.Sa,ft=22,t(Ie!=null),t(we!=null),Ne=ge[0];var yt=we[0];for(t(De!=null),t(We!=null),De[0]=null,ke[0]=null,We[0]=0;;){if(ge[0]=Ne,we[0]=yt,8>yt){ge=7;break e}var kn=ye(Ie,Ne+4);if(4294967286<kn){ge=3;break e}var pt=8+kn+1&-2;if(ft+=pt,0<Me&&ft>Me){ge=3;break e}if(!n(Ie,Ne,"VP8 ")||!n(Ie,Ne,"VP8L")){ge=0;break e}if(yt[0]<pt){ge=7;break e}n(Ie,Ne,"ALPH")||(De[0]=Ie,ke[0]=Ne+8,We[0]=kn),Ne+=pt,yt-=pt}}if(b=b[0],ce.na=ce.na[0],ce.P=ce.P[0],ce.Sa=ce.Sa[0],ge!=0)break}b=[b],ce.Ja=[ce.Ja],ce.xa=[ce.xa];e:if(Me=u,ge=f,we=b,De=ce.gb[0],ke=ce.Ja,We=ce.xa,Ie=ge[0],Ne=!n(Me,Ie,"VP8 "),ft=!n(Me,Ie,"VP8L"),t(Me!=null),t(we!=null),t(ke!=null),t(We!=null),8>we[0])ge=7;else{if(Ne||ft){if(Me=ye(Me,Ie+4),12<=De&&Me>De-12){ge=3;break e}if(K&&Me>we[0]-8){ge=7;break e}ke[0]=Me,ge[0]+=8,we[0]-=8,We[0]=ft}else We[0]=5<=we[0]&&Me[Ie+0]==47&&!(Me[Ie+4]>>5),ke[0]=we[0];ge=0}if(b=b[0],ce.Ja=ce.Ja[0],ce.xa=ce.xa[0],f=f[0],ge!=0)break;if(4294967286<ce.Ja)return 3;if(z==null||_e||(z[0]=ce.xa?2:1),B=[B],pe=[pe],ce.xa){if(5>b){ge=7;break}z=B,K=pe,_e=M,u==null||5>b?u=0:5<=b&&u[f+0]==47&&!(u[f+4]>>5)?(we=[0],Me=[0],De=[0],se(ke=new H,u,f,b),Ra(ke,we,Me,De)?(z!=null&&(z[0]=we[0]),K!=null&&(K[0]=Me[0]),_e!=null&&(_e[0]=De[0]),u=1):u=0):u=0}else{if(10>b){ge=7;break}z=pe,u==null||10>b||!Mc(u,f+3,b-3)?u=0:(K=u[f+0]|u[f+1]<<8|u[f+2]<<16,_e=16383&(u[f+7]<<8|u[f+6]),u=16383&(u[f+9]<<8|u[f+8]),1&K||3<(K>>1&7)||!(K>>4&1)||K>>5>=ce.Ja||!_e||!u?u=0:(B&&(B[0]=_e),z&&(z[0]=u),u=1))}if(!u||(B=B[0],pe=pe[0],ve&&(G[0]!=B||ie[0]!=pe)))return 3;$!=null&&($[0]=ce,$.offset=f-$.w,t(4294967286>f-$.w),t($.offset==$.ha-b));break}return ge==0||ge==7&&ve&&$==null?(M!=null&&(M[0]|=ce.na!=null&&0<ce.na.length),k!=null&&(k[0]=B),F!=null&&(F[0]=pe),0):ge}function gl(u,f,b){var k=f.width,F=f.height,M=0,B=0,z=k,$=F;if(f.Da=u!=null&&0<u.Da,f.Da&&(z=u.cd,$=u.bd,M=u.v,B=u.j,11>b||(M&=-2,B&=-2),0>M||0>B||0>=z||0>=$||M+z>k||B+$>F))return 0;if(f.v=M,f.j=B,f.va=M+z,f.o=B+$,f.U=z,f.T=$,f.da=u!=null&&0<u.da,f.da){if(!Ve(z,$,b=[u.ib],M=[u.hb]))return 0;f.ib=b[0],f.hb=M[0]}return f.ob=u!=null&&u.ob,f.Kb=u==null||!u.Sd,f.da&&(f.ob=f.ib<3*k/4&&f.hb<3*F/4,f.Kb=0),1}function vl(u){if(u==null)return 2;if(11>u.S){var f=u.f.RGBA;f.fb+=(u.height-1)*f.A,f.A=-f.A}else f=u.f.kb,u=u.height,f.O+=(u-1)*f.fa,f.fa=-f.fa,f.N+=(u-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(u-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(u-1)*f.lb,f.lb=-f.lb);return 0}function gs(u,f,b,k){if(k==null||0>=u||0>=f)return 2;if(b!=null){if(b.Da){var F=b.cd,M=b.bd,B=-2&b.v,z=-2&b.j;if(0>B||0>z||0>=F||0>=M||B+F>u||z+M>f)return 2;u=F,f=M}if(b.da){if(!Ve(u,f,F=[b.ib],M=[b.hb]))return 2;u=F[0],f=M[0]}}k.width=u,k.height=f;e:{var $=k.width,G=k.height;if(u=k.S,0>=$||0>=G||!(u>=Qc&&13>u))u=2;else{if(0>=k.Rd&&k.sd==null){B=M=F=f=0;var ie=(z=$*q0[u])*G;if(11>u||(M=(G+1)/2*(f=($+1)/2),u==12&&(B=(F=$)*G)),(G=i(ie+2*M+B))==null){u=1;break e}k.sd=G,11>u?(($=k.f.RGBA).eb=G,$.fb=0,$.A=z,$.size=ie):(($=k.f.kb).y=G,$.O=0,$.fa=z,$.Fd=ie,$.f=G,$.N=0+ie,$.Ab=f,$.Cd=M,$.ea=G,$.W=0+ie+M,$.Db=f,$.Ed=M,u==12&&($.F=G,$.J=0+ie+2*M),$.Tc=B,$.lb=F)}if(f=1,F=k.S,M=k.width,B=k.height,F>=Qc&&13>F)if(11>F)u=k.f.RGBA,f&=(z=Math.abs(u.A))*(B-1)+M<=u.size,f&=z>=M*q0[F],f&=u.eb!=null;else{u=k.f.kb,z=(M+1)/2,ie=(B+1)/2,$=Math.abs(u.fa),G=Math.abs(u.Ab);var ve=Math.abs(u.Db),K=Math.abs(u.lb),ce=K*(B-1)+M;f&=$*(B-1)+M<=u.Fd,f&=G*(ie-1)+z<=u.Cd,f=(f&=ve*(ie-1)+z<=u.Ed)&$>=M&G>=z&ve>=z,f&=u.y!=null,f&=u.f!=null,f&=u.ea!=null,F==12&&(f&=K>=M,f&=ce<=u.Tc,f&=u.F!=null)}else f=0;u=f?0:2}}return u!=0||b!=null&&b.fd&&(u=vl(k)),u}var wi=64,_r=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],wr=24,vs=32,Wa=8,ys=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ee("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(u){return u},A.Predictor2=function(u,f,b){return f[b+0]},A.Predictor3=function(u,f,b){return f[b+1]},A.Predictor4=function(u,f,b){return f[b-1]},A.Predictor5=function(u,f,b){return Oe(Oe(u,f[b+1]),f[b+0])},A.Predictor6=function(u,f,b){return Oe(u,f[b-1])},A.Predictor7=function(u,f,b){return Oe(u,f[b+0])},A.Predictor8=function(u,f,b){return Oe(f[b-1],f[b+0])},A.Predictor9=function(u,f,b){return Oe(f[b+0],f[b+1])},A.Predictor10=function(u,f,b){return Oe(Oe(u,f[b-1]),Oe(f[b+0],f[b+1]))},A.Predictor11=function(u,f,b){var k=f[b+0];return 0>=Je(k>>24&255,u>>24&255,(f=f[b-1])>>24&255)+Je(k>>16&255,u>>16&255,f>>16&255)+Je(k>>8&255,u>>8&255,f>>8&255)+Je(255&k,255&u,255&f)?k:u},A.Predictor12=function(u,f,b){var k=f[b+0];return(Ye((u>>24&255)+(k>>24&255)-((f=f[b-1])>>24&255))<<24|Ye((u>>16&255)+(k>>16&255)-(f>>16&255))<<16|Ye((u>>8&255)+(k>>8&255)-(f>>8&255))<<8|Ye((255&u)+(255&k)-(255&f)))>>>0},A.Predictor13=function(u,f,b){var k=f[b-1];return(Qe((u=Oe(u,f[b+0]))>>24&255,k>>24&255)<<24|Qe(u>>16&255,k>>16&255)<<16|Qe(u>>8&255,k>>8&255)<<8|Qe(255&u,255&k))>>>0};var yl=A.PredictorAdd0;A.PredictorAdd1=Ct,Ee("Predictor2","PredictorAdd2"),Ee("Predictor3","PredictorAdd3"),Ee("Predictor4","PredictorAdd4"),Ee("Predictor5","PredictorAdd5"),Ee("Predictor6","PredictorAdd6"),Ee("Predictor7","PredictorAdd7"),Ee("Predictor8","PredictorAdd8"),Ee("Predictor9","PredictorAdd9"),Ee("Predictor10","PredictorAdd10"),Ee("Predictor11","PredictorAdd11"),Ee("Predictor12","PredictorAdd12"),Ee("Predictor13","PredictorAdd13");var so=A.PredictorAdd2;Ge("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),Ge("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var cn,Yc=A.ColorIndexInverseTransform,wa=A.MapARGB,ja=A.VP8LColorIndexInverseTransformAlpha,xl=A.MapAlpha,bl=A.VP8LPredictorsAdd=[];bl.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var _l,wl,xs,bs,_s,ji,ws,Ni,$r,Na,St,Tt,dn,Sn,Ha,jl,io,Jc,l0,c0,d0,u0,h0,f0,Nl,p0,m0,g0,v0=i(511),y0=i(2041),x0=i(225),b0=i(767),_0=0,Nh=y0,Xc=x0,jr=b0,Wr=v0,Qc=0,ed=1,w0=2,td=3,nd=4,Sh=5,j0=6,kh=7,Ch=8,rd=9,Ah=10,Lx=[2,3,7],Ex=[3,3,11],N0=[280,256,256,256,40],Px=[0,1,1,1,0],qx=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Tx=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ix=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Fx=8,Dh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Lh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Sl=null,Rx=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ox=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],S0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Mx=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Bx=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ux=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],zx=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],js=[],aa=[],Va=[],$x=1,k0=2,Ns=[],Hr=[];ur("UpsampleRgbLinePair",vi,3),ur("UpsampleBgrLinePair",yi,3),ur("UpsampleRgbaLinePair",ml,4),ur("UpsampleBgraLinePair",pl,4),ur("UpsampleArgbLinePair",bi,4),ur("UpsampleRgba4444LinePair",xi,2),ur("UpsampleRgb565LinePair",Kn,2);var Wx=A.UpsampleRgbLinePair,Hx=A.UpsampleBgrLinePair,C0=A.UpsampleRgbaLinePair,A0=A.UpsampleBgraLinePair,D0=A.UpsampleArgbLinePair,L0=A.UpsampleRgba4444LinePair,Vx=A.UpsampleRgb565LinePair,ad=16,sd=1<<ad-1,kl=-227,Eh=482,Gx=6,E0=0,Kx=i(256),Zx=i(256),Yx=i(256),Jx=i(256),Xx=i(Eh-kl),Qx=i(Eh-kl);$a("YuvToRgbRow",vi,3),$a("YuvToBgrRow",yi,3),$a("YuvToRgbaRow",ml,4),$a("YuvToBgraRow",pl,4),$a("YuvToArgbRow",bi,4),$a("YuvToRgba4444Row",xi,2),$a("YuvToRgb565Row",Kn,2);var P0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],id=[0,2,8],eb=[8,7,6,4,4,2,2,2,1,1,1,1],tb=1;this.WebPDecodeRGBA=function(u,f,b,k,F){var M=ed,B=new he,z=new qt;B.ba=z,z.S=M,z.width=[z.width],z.height=[z.height];var $=z.width,G=z.height,ie=new st;if(ie==null||u==null)var ve=2;else t(ie!=null),ve=_i(u,f,b,ie.width,ie.height,ie.Pd,ie.Qd,ie.format,null);if(ve!=0?$=0:($!=null&&($[0]=ie.width[0]),G!=null&&(G[0]=ie.height[0]),$=1),$){z.width=z.width[0],z.height=z.height[0],k!=null&&(k[0]=z.width),F!=null&&(F[0]=z.height);e:{if(k=new Xi,(F=new je).data=u,F.w=f,F.ha=b,F.kd=1,f=[0],t(F!=null),((u=_i(F.data,F.w,F.ha,null,null,null,f,null,F))==0||u==7)&&f[0]&&(u=4),(f=u)==0){if(t(B!=null),k.data=F.data,k.w=F.w+F.offset,k.ha=F.ha-F.offset,k.put=Ze,k.ac=ya,k.bc=Fa,k.ma=B,F.xa){if((u=ai())==null){B=1;break e}if(function(K,ce){var pe=[0],_e=[0],ge=[0];t:for(;;){if(K==null)return 0;if(ce==null)return K.a=2,0;if(K.l=ce,K.a=0,se(K.m,ce.data,ce.w,ce.ha),!Ra(K.m,pe,_e,ge)){K.a=3;break t}if(K.xb=k0,ce.width=pe[0],ce.height=_e[0],!ba(pe[0],_e[0],1,K,null))break t;return 1}return t(K.a!=0),0}(u,k)){if(k=(f=gs(k.width,k.height,B.Oa,B.ba))==0){t:{k=u;n:for(;;){if(k==null){k=0;break t}if(t(k.s.yc!=null),t(k.s.Ya!=null),t(0<k.s.Wb),t((b=k.l)!=null),t((F=b.ma)!=null),k.xb!=0){if(k.ca=F.ba,k.tb=F.tb,t(k.ca!=null),!gl(F.Oa,b,td)){k.a=2;break n}if(!si(k,b.width)||b.da)break n;if((b.da||ut(k.ca.S))&&Ur(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&Ur()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!Q(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!na(k,k.V,k.Ba,k.c,k.i,b.o,hs))break n;F.Dc=k.Ma,k=1;break t}t(k.a!=0),k=0}k=!k}k&&(f=u.a)}else f=u.a}else{if((u=new ch)==null){B=1;break e}if(u.Fa=F.na,u.P=F.P,u.qc=F.Sa,Bc(u,k)){if((f=gs(k.width,k.height,B.Oa,B.ba))==0){if(u.Aa=0,b=B.Oa,t((F=u)!=null),b!=null){if(0<($=0>($=b.Md)?0:100<$?255:255*$/100)){for(G=ie=0;4>G;++G)12>(ve=F.pb[G]).lc&&(ve.ia=$*eb[0>ve.lc?0:ve.lc]>>3),ie|=ve.ia;ie&&(alert("todo:VP8InitRandom"),F.ia=1)}F.Ga=b.Id,100<F.Ga?F.Ga=100:0>F.Ga&&(F.Ga=0)}(function(K,ce){if(K==null)return 0;if(ce==null)return xn(K,2,"NULL VP8Io parameter in VP8Decode().");if(!K.cb&&!Bc(K,ce))return 0;if(t(K.cb),ce.ac==null||ce.ac(ce)){ce.ob&&(K.L=0);var pe=id[K.L];if(K.L==2?(K.yb=0,K.zb=0):(K.yb=ce.v-pe>>4,K.zb=ce.j-pe>>4,0>K.yb&&(K.yb=0),0>K.zb&&(K.zb=0)),K.Va=ce.o+15+pe>>4,K.Hb=ce.va+15+pe>>4,K.Hb>K.za&&(K.Hb=K.za),K.Va>K.Ub&&(K.Va=K.Ub),0<K.L){var _e=K.ed;for(pe=0;4>pe;++pe){var ge;if(K.Qa.Cb){var we=K.Qa.Lb[pe];K.Qa.Fb||(we+=_e.Tb)}else we=_e.Tb;for(ge=0;1>=ge;++ge){var Ne=K.gd[pe][ge],De=we;if(_e.Pc&&(De+=_e.vd[0],ge&&(De+=_e.od[0])),0<(De=0>De?0:63<De?63:De)){var ke=De;0<_e.wb&&(ke=4<_e.wb?ke>>2:ke>>1)>9-_e.wb&&(ke=9-_e.wb),1>ke&&(ke=1),Ne.dd=ke,Ne.tc=2*De+ke,Ne.ld=40<=De?2:15<=De?1:0}else Ne.tc=0;Ne.La=ge}}}pe=0}else xn(K,6,"Frame setup failed"),pe=K.a;if(pe=pe==0){if(pe){K.$c=0,0<K.Aa||(K.Ic=tb);t:{pe=K.Ic,_e=4*(ke=K.za);var We=32*ke,Ie=ke+1,ft=0<K.L?ke*(0<K.Aa?2:1):0,Me=(K.Aa==2?2:1)*ke;if((Ne=_e+832+(ge=3*(16*pe+id[K.L])/2*We)+(we=K.Fa!=null&&0<K.Fa.length?K.Kc.c*K.Kc.i:0))!=Ne)pe=0;else{if(Ne>K.Vb){if(K.Vb=0,K.Ec=i(Ne),K.Fc=0,K.Ec==null){pe=xn(K,1,"no memory during frame initialization.");break t}K.Vb=Ne}Ne=K.Ec,De=K.Fc,K.Ac=Ne,K.Bc=De,De+=_e,K.Gd=o(We,Rc),K.Hd=0,K.rb=o(Ie+1,rl),K.sb=1,K.wa=ft?o(ft,Br):null,K.Y=0,K.D.Nb=0,K.D.wa=K.wa,K.D.Y=K.Y,0<K.Aa&&(K.D.Y+=ke),t(!0),K.oc=Ne,K.pc=De,De+=832,K.ya=o(Me,al),K.aa=0,K.D.ya=K.ya,K.D.aa=K.aa,K.Aa==2&&(K.D.aa+=ke),K.R=16*ke,K.B=8*ke,ke=(We=id[K.L])*K.R,We=We/2*K.B,K.sa=Ne,K.ta=De+ke,K.qa=K.sa,K.ra=K.ta+16*pe*K.R+We,K.Ha=K.qa,K.Ia=K.ra+8*pe*K.B+We,K.$c=0,De+=ge,K.mb=we?Ne:null,K.nb=we?De:null,t(De+we<=K.Fc+K.Vb),ii(K),s(K.Ac,K.Bc,0,_e),pe=1}}if(pe){if(ce.ka=0,ce.y=K.sa,ce.O=K.ta,ce.f=K.qa,ce.N=K.ra,ce.ea=K.Ha,ce.Vd=K.Ia,ce.fa=K.R,ce.Rc=K.B,ce.F=null,ce.J=0,!_0){for(pe=-255;255>=pe;++pe)v0[255+pe]=0>pe?-pe:pe;for(pe=-1020;1020>=pe;++pe)y0[1020+pe]=-128>pe?-128:127<pe?127:pe;for(pe=-112;112>=pe;++pe)x0[112+pe]=-16>pe?-16:15<pe?15:pe;for(pe=-255;510>=pe;++pe)b0[255+pe]=0>pe?0:255<pe?255:pe;_0=1}ws=zc,Ni=uh,Na=hh,St=_a,Tt=Uc,$r=dh,dn=Hc,Sn=Vc,Ha=v,jl=I,io=pi,Jc=Gc,l0=Y,c0=ae,d0=fl,u0=fi,h0=$c,f0=Wc,aa[0]=xh,aa[1]=il,aa[2]=vh,aa[3]=yh,aa[4]=bh,aa[5]=Ba,aa[6]=Ma,aa[7]=_h,aa[8]=Qi,aa[9]=wh,js[0]=ps,js[1]=ph,js[2]=mh,js[3]=ol,js[4]=gh,js[5]=ci,js[6]=ll,Va[0]=to,Va[1]=fh,Va[2]=cl,Va[3]=di,Va[4]=dl,Va[5]=jh,Va[6]=ul,pe=1}else pe=0}pe&&(pe=function(yt,kn){for(yt.M=0;yt.M<yt.Va;++yt.M){var pt,Be=yt.Jc[yt.M&yt.Xb],Pe=yt.m,un=yt;for(pt=0;pt<un.za;++pt){var ht=Pe,xt=un,zt=xt.Ac,Rn=xt.Bc+4*pt,ar=xt.zc,tn=xt.ya[xt.aa+pt];if(xt.Qa.Bb?tn.$b=fe(ht,xt.Pa.jb[0])?2+fe(ht,xt.Pa.jb[2]):fe(ht,xt.Pa.jb[1]):tn.$b=0,xt.kc&&(tn.Ad=fe(ht,xt.Bd)),tn.Za=!fe(ht,145)+0,tn.Za){var Zn=tn.Ob,sr=0;for(xt=0;4>xt;++xt){var Cn,bt=ar[0+xt];for(Cn=0;4>Cn;++Cn){bt=Bx[zt[Rn+Cn]][bt];for(var At=S0[fe(ht,bt[0])];0<At;)At=S0[2*At+fe(ht,bt[At])];bt=-At,zt[Rn+Cn]=bt}r(Zn,sr,zt,Rn,4),sr+=4,ar[0+xt]=bt}}else bt=fe(ht,156)?fe(ht,128)?1:3:fe(ht,163)?2:0,tn.Ob[0]=bt,s(zt,Rn,bt,4),s(ar,0,bt,4);tn.Dd=fe(ht,142)?fe(ht,114)?fe(ht,183)?1:3:2:0}if(un.m.Ka)return xn(yt,7,"Premature end-of-partition0 encountered.");for(;yt.ja<yt.za;++yt.ja){if(un=Be,ht=(Pe=yt).rb[Pe.sb-1],zt=Pe.rb[Pe.sb+Pe.ja],pt=Pe.ya[Pe.aa+Pe.ja],Rn=Pe.kc?pt.Ad:0)ht.la=zt.la=0,pt.Za||(ht.Na=zt.Na=0),pt.Hc=0,pt.Gc=0,pt.ia=0;else{var nn,Dt;if(ht=zt,zt=un,Rn=Pe.Pa.Xc,ar=Pe.ya[Pe.aa+Pe.ja],tn=Pe.pb[ar.$b],xt=ar.ad,Zn=0,sr=Pe.rb[Pe.sb-1],bt=Cn=0,s(xt,Zn,0,384),ar.Za)var On=0,sa=Rn[3];else{At=i(16);var hn=ht.Na+sr.Na;if(hn=Sl(zt,Rn[1],hn,tn.Eb,0,At,0),ht.Na=sr.Na=(0<hn)+0,1<hn)ws(At,0,xt,Zn);else{var hr=At[0]+3>>3;for(At=0;256>At;At+=16)xt[Zn+At]=hr}On=1,sa=Rn[0]}var It=15&ht.la,An=15&sr.la;for(At=0;4>At;++At){var Nr=1&An;for(hr=Dt=0;4>hr;++hr)It=It>>1|(Nr=(hn=Sl(zt,sa,hn=Nr+(1&It),tn.Sc,On,xt,Zn))>On)<<7,Dt=Dt<<2|(3<hn?3:1<hn?2:xt[Zn+0]!=0),Zn+=16;It>>=4,An=An>>1|Nr<<7,Cn=(Cn<<8|Dt)>>>0}for(sa=It,On=An>>4,nn=0;4>nn;nn+=2){for(Dt=0,It=ht.la>>4+nn,An=sr.la>>4+nn,At=0;2>At;++At){for(Nr=1&An,hr=0;2>hr;++hr)hn=Nr+(1&It),It=It>>1|(Nr=0<(hn=Sl(zt,Rn[2],hn,tn.Qc,0,xt,Zn)))<<3,Dt=Dt<<2|(3<hn?3:1<hn?2:xt[Zn+0]!=0),Zn+=16;It>>=2,An=An>>1|Nr<<5}bt|=Dt<<4*nn,sa|=It<<4<<nn,On|=(240&An)<<nn}ht.la=sa,sr.la=On,ar.Hc=Cn,ar.Gc=bt,ar.ia=43690&bt?0:tn.ia,Rn=!(Cn|bt)}if(0<Pe.L&&(Pe.wa[Pe.Y+Pe.ja]=Pe.gd[pt.$b][pt.Za],Pe.wa[Pe.Y+Pe.ja].La|=!Rn),un.Ka)return xn(yt,7,"Premature end-of-file encountered.")}if(ii(yt),Pe=kn,un=1,pt=(Be=yt).D,ht=0<Be.L&&Be.M>=Be.zb&&Be.M<=Be.Va,Be.Aa==0)t:{if(pt.M=Be.M,pt.uc=ht,zr(Be,pt),un=1,pt=(Dt=Be.D).Nb,ht=(bt=id[Be.L])*Be.R,zt=bt/2*Be.B,At=16*pt*Be.R,hr=8*pt*Be.B,Rn=Be.sa,ar=Be.ta-ht+At,tn=Be.qa,xt=Be.ra-zt+hr,Zn=Be.Ha,sr=Be.Ia-zt+hr,An=(It=Dt.M)==0,Cn=It>=Be.Va-1,Be.Aa==2&&zr(Be,Dt),Dt.uc)for(Nr=(hn=Be).D.M,t(hn.D.uc),Dt=hn.yb;Dt<hn.Hb;++Dt){On=Dt,sa=Nr;var ir=(Sr=(Mn=hn).D).Nb;nn=Mn.R;var Sr=Sr.wa[Sr.Y+On],kr=Mn.sa,fr=Mn.ta+16*ir*nn+16*On,Cr=Sr.dd,Mt=Sr.tc;if(Mt!=0)if(t(3<=Mt),Mn.L==1)0<On&&u0(kr,fr,nn,Mt+4),Sr.La&&f0(kr,fr,nn,Mt),0<sa&&d0(kr,fr,nn,Mt+4),Sr.La&&h0(kr,fr,nn,Mt);else{var Ar=Mn.B,ia=Mn.qa,Si=Mn.ra+8*ir*Ar+8*On,Ga=Mn.Ha,Mn=Mn.Ia+8*ir*Ar+8*On;ir=Sr.ld,0<On&&(Sn(kr,fr,nn,Mt+4,Cr,ir),jl(ia,Si,Ga,Mn,Ar,Mt+4,Cr,ir)),Sr.La&&(Jc(kr,fr,nn,Mt,Cr,ir),c0(ia,Si,Ga,Mn,Ar,Mt,Cr,ir)),0<sa&&(dn(kr,fr,nn,Mt+4,Cr,ir),Ha(ia,Si,Ga,Mn,Ar,Mt+4,Cr,ir)),Sr.La&&(io(kr,fr,nn,Mt,Cr,ir),l0(ia,Si,Ga,Mn,Ar,Mt,Cr,ir))}}if(Be.ia&&alert("todo:DitherRow"),Pe.put!=null){if(Dt=16*It,It=16*(It+1),An?(Pe.y=Be.sa,Pe.O=Be.ta+At,Pe.f=Be.qa,Pe.N=Be.ra+hr,Pe.ea=Be.Ha,Pe.W=Be.Ia+hr):(Dt-=bt,Pe.y=Rn,Pe.O=ar,Pe.f=tn,Pe.N=xt,Pe.ea=Zn,Pe.W=sr),Cn||(It-=bt),It>Pe.o&&(It=Pe.o),Pe.F=null,Pe.J=null,Be.Fa!=null&&0<Be.Fa.length&&Dt<It&&(Pe.J=bn(Be,Pe,Dt,It-Dt),Pe.F=Be.mb,Pe.F==null&&Pe.F.length==0)){un=xn(Be,3,"Could not decode alpha data.");break t}Dt<Pe.j&&(bt=Pe.j-Dt,Dt=Pe.j,t(!(1&bt)),Pe.O+=Be.R*bt,Pe.N+=Be.B*(bt>>1),Pe.W+=Be.B*(bt>>1),Pe.F!=null&&(Pe.J+=Pe.width*bt)),Dt<It&&(Pe.O+=Pe.v,Pe.N+=Pe.v>>1,Pe.W+=Pe.v>>1,Pe.F!=null&&(Pe.J+=Pe.v),Pe.ka=Dt-Pe.j,Pe.U=Pe.va-Pe.v,Pe.T=It-Dt,un=Pe.put(Pe))}pt+1!=Be.Ic||Cn||(r(Be.sa,Be.ta-ht,Rn,ar+16*Be.R,ht),r(Be.qa,Be.ra-zt,tn,xt+8*Be.B,zt),r(Be.Ha,Be.Ia-zt,Zn,sr+8*Be.B,zt))}if(!un)return xn(yt,6,"Output aborted.")}return 1}(K,ce)),ce.bc!=null&&ce.bc(ce),pe&=1}return pe?(K.cb=0,pe):0})(u,k)||(f=u.a)}}else f=u.a}f==0&&B.Oa!=null&&B.Oa.fd&&(f=vl(B.ba))}B=f}M=B!=0?null:11>M?z.f.RGBA.eb:z.f.kb.y}else M=null;return M};var q0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(A,U){for(var L="",O=0;O<4;O++)L+=String.fromCharCode(A[U++]);return L}function h(A,U){return A[U+0]|A[U+1]<<8}function m(A,U){return(A[U+0]|A[U+1]<<8|A[U+2]<<16)>>>0}function g(A,U){return(A[U+0]|A[U+1]<<8|A[U+2]<<16|A[U+3]<<24)>>>0}new c;var p=[0],j=[0],N=[],w=new c,y=e,_=function(A,U){var L={},O=0,P=!1,T=0,X=0;if(L.frames=[],!function(D,H){for(var J=0;J<4;J++)if(D[H+J]!="RIFF".charCodeAt(J))return!0;return!1}(A,U)){for(g(A,U+=4),U+=8;U<A.length;){var te=d(A,U),oe=g(A,U+=4);U+=4;var Z=oe+(1&oe);switch(te){case"VP8 ":case"VP8L":L.frames[O]===void 0&&(L.frames[O]={}),(de=L.frames[O]).src_off=P?X:U-8,de.src_size=T+oe+8,O++,P&&(P=!1,T=0,X=0);break;case"VP8X":(de=L.header={}).feature_flags=A[U];var se=U+4;de.canvas_width=1+m(A,se),se+=3,de.canvas_height=1+m(A,se),se+=3;break;case"ALPH":P=!0,T=Z+8,X=U-8;break;case"ANIM":(de=L.header).bgcolor=g(A,U),se=U+4,de.loop_count=h(A,se),se+=2;break;case"ANMF":var ee,de;(de=L.frames[O]={}).offset_x=2*m(A,U),U+=3,de.offset_y=2*m(A,U),U+=3,de.width=1+m(A,U),U+=3,de.height=1+m(A,U),U+=3,de.duration=m(A,U),U+=3,ee=A[U++],de.dispose=1&ee,de.blend=ee>>1&1}te!="ANMF"&&(U+=Z)}return L}}(y,0);_.response=y,_.rgbaoutput=!0,_.dataurl=!1;var S=_.header?_.header:null,C=_.frames?_.frames:null;if(S){S.loop_counter=S.loop_count,p=[S.canvas_height],j=[S.canvas_width];for(var q=0;q<C.length&&C[q].blend!=0;q++);}var W=C[0],E=w.WebPDecodeRGBA(y,W.src_off,W.src_size,j,p);W.rgba=E,W.imgwidth=j[0],W.imgheight=p[0];for(var x=0;x<j[0]*p[0]*4;x++)N[x]=E[x];return this.width=j,this.height=p,this.data=N,this}(function(e){var t,n,r,s,i,o,l,c,d,h=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new c,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new o,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new o,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new h}]);var m=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=D;Object.defineProperty(this,"pdf",{get:function(){return H}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(ye){J=!!ye}});var V=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return V},set:function(ye){V=!!ye}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(ye){isNaN(ye)||(ne=ye)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(ye){isNaN(ye)||(le=ye)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ye){var Q;typeof ye=="number"?Q=[ye,ye,ye,ye]:((Q=new Array(4))[0]=ye[0],Q[1]=ye.length>=2?ye[1]:Q[0],Q[2]=ye.length>=3?ye[2]:Q[0],Q[3]=ye.length>=4?ye[3]:Q[1]),d.margin=Q}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(ye){me=ye}});var re=0;Object.defineProperty(this,"lastBreak",{get:function(){return re},set:function(ye){re=ye}});var fe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return fe},set:function(ye){fe=ye}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ye){ye instanceof h&&(d=ye)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ye){d.path=ye}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(ye){be=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var Q;Q=g(ye),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var Q=g(ye);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Se=null,Ae=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ae},set:function(ye){Se=null,Ae=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var Q;if(this.ctx.font=ye,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var at=Q[1];Q[2];var nt=Q[3],Ve=Q[4];Q[5];var ue=Q[6],qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ve)[2];Ve=Math.floor(qe==="px"?parseFloat(Ve)*this.pdf.internal.scaleFactor:qe==="em"?parseFloat(Ve)*this.pdf.getFontSize():parseFloat(Ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ve);var Ee=function(et){var Ge,Rt,wt=[],$e=et.trim();if($e==="")return Tf;if($e in i2)return[i2[$e]];for(;$e!=="";){switch(Rt=null,Ge=($e=l2($e)).charAt(0)){case'"':case"'":Rt=IS($e.substring(1),Ge);break;default:Rt=FS($e)}if(Rt===null||(wt.push(Rt[0]),($e=l2(Rt[1]))!==""&&$e.charAt(0)!==","))return Tf;$e=$e.replace(/^,/,"")}return wt}(ue);if(this.fontFaces){var Xe=function(et,Ge){if(Se===null){var Rt=function(wt){var $e=[];return Object.keys(wt).forEach(function(dt){wt[dt].forEach(function(Pt){var Ke=null;switch(Pt){case"bold":Ke={family:dt,weight:"bold"};break;case"italic":Ke={family:dt,style:"italic"};break;case"bolditalic":Ke={family:dt,weight:"bold",style:"italic"};break;case"":case"normal":Ke={family:dt}}Ke!==null&&(Ke.ref={name:dt,style:Pt},$e.push(Ke))})}),$e}(et.getFontList());Se=function(wt){for(var $e={},dt=0;dt<wt.length;++dt){var Pt=qf(wt[dt]),Ke=Pt.family,vt=Pt.stretch,ut=Pt.style,on=Pt.weight;$e[Ke]=$e[Ke]||{},$e[Ke][vt]=$e[Ke][vt]||{},$e[Ke][vt][ut]=$e[Ke][vt][ut]||{},$e[Ke][vt][ut][on]=Pt}return $e}(Rt.concat(Ge))}return Se}(this.pdf,this.fontFaces),Oe=Ee.map(function(et){return{family:et,stretch:"normal",weight:nt,style:at}}),Ye=function(et,Ge,Rt){for(var wt=(Rt=Rt||{}).defaultFontFamily||"times",$e=Object.assign({},TS,Rt.genericFontFamilies||{}),dt=null,Pt=null,Ke=0;Ke<Ge.length;++Ke)if($e[(dt=qf(Ge[Ke])).family]&&(dt.family=$e[dt.family]),et.hasOwnProperty(dt.family)){Pt=et[dt.family];break}if(!(Pt=Pt||et[wt]))throw new Error("Could not find a font-family for the rule '"+o2(dt)+"' and default family '"+wt+"'.");if(Pt=function(vt,ut){if(ut[vt])return ut[vt];var on=Jp[vt],jn=on<=Jp.normal?-1:1,qt=s2(ut,ux,on,jn);if(!qt)throw new Error("Could not find a matching font-stretch value for "+vt);return qt}(dt.stretch,Pt),Pt=function(vt,ut){if(ut[vt])return ut[vt];for(var on=dx[vt],jn=0;jn<on.length;++jn)if(ut[on[jn]])return ut[on[jn]];throw new Error("Could not find a matching font-style for "+vt)}(dt.style,Pt),!(Pt=function(vt,ut){if(ut[vt])return ut[vt];if(vt===400&&ut[500])return ut[500];if(vt===500&&ut[400])return ut[400];var on=qS[vt],jn=s2(ut,hx,on,vt<400?-1:1);if(!jn)throw new Error("Could not find a matching font-weight for value "+vt);return jn}(dt.weight,Pt)))throw new Error("Failed to resolve a font for the rule '"+o2(dt)+"'.");return Pt}(Xe,Oe);this.pdf.setFont(Ye.ref.name,Ye.ref.style)}else{var Qe="";(nt==="bold"||parseInt(nt,10)>=700||at==="bold")&&(Qe="bold"),at==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var Je="",Ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<Ee.length;ot++){if(this.pdf.internal.getFont(Ee[ot],Qe,{noFallback:!0,disableWarning:!0})!==void 0){Je=Ee[ot];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont(Ee[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Je=Ee[ot],Qe="bold";else if(this.pdf.internal.getFont(Ee[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Je=Ee[ot],Qe="normal";break}}if(Je===""){for(var Ue=0;Ue<Ee.length;Ue++)if(Ct[Ee[Ue]]){Je=Ct[Ee[Ue]];break}}Je=Je===""?"Times":Je,this.pdf.setFont(Je,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,de.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,de.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};m.prototype.setLineDash=function(D){this.lineDash=D},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){C.call(this,"fill",!1)},m.prototype.stroke=function(){C.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(D,H){if(isNaN(D)||isNaN(H))throw Ft.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(D,H));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(D,H)},m.prototype.closePath=function(){var D=new o(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Lt(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){D=new o(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(D.x,D.y)},m.prototype.lineTo=function(D,H){if(isNaN(D)||isNaN(H))throw Ft.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(D,H));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},m.prototype.quadraticCurveTo=function(D,H,J,V){if(isNaN(J)||isNaN(V)||isNaN(D)||isNaN(H))throw Ft.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o(J,V)),le=this.ctx.transform.applyToPoint(new o(D,H));this.path.push({type:"qct",x1:le.x,y1:le.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},m.prototype.bezierCurveTo=function(D,H,J,V,ne,le){if(isNaN(ne)||isNaN(le)||isNaN(D)||isNaN(H)||isNaN(J)||isNaN(V))throw Ft.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new o(ne,le)),re=this.ctx.transform.applyToPoint(new o(D,H)),fe=this.ctx.transform.applyToPoint(new o(J,V));this.path.push({type:"bct",x1:re.x,y1:re.y,x2:fe.x,y2:fe.y,x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},m.prototype.arc=function(D,H,J,V,ne,le){if(isNaN(D)||isNaN(H)||isNaN(J)||isNaN(V)||isNaN(ne))throw Ft.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new o(D,H));D=me.x,H=me.y;var re=this.ctx.transform.applyToPoint(new o(0,J)),fe=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(re.x-fe.x,2)+Math.pow(re.y-fe.y,2))}Math.abs(ne-V)>=2*Math.PI&&(V=0,ne=2*Math.PI),this.path.push({type:"arc",x:D,y:H,radius:J,startAngle:V,endAngle:ne,counterclockwise:le})},m.prototype.arcTo=function(D,H,J,V,ne){throw new Error("arcTo not implemented.")},m.prototype.rect=function(D,H,J,V){if(isNaN(D)||isNaN(H)||isNaN(J)||isNaN(V))throw Ft.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,H),this.lineTo(D+J,H),this.lineTo(D+J,H+V),this.lineTo(D,H+V),this.lineTo(D,H),this.lineTo(D+J,H),this.lineTo(D,H)},m.prototype.fillRect=function(D,H,J,V){if(isNaN(D)||isNaN(H)||isNaN(J)||isNaN(V))throw Ft.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,H,J,V),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},m.prototype.strokeRect=function(D,H,J,V){if(isNaN(D)||isNaN(H)||isNaN(J)||isNaN(V))throw Ft.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(D,H,J,V),this.stroke())},m.prototype.clearRect=function(D,H,J,V){if(isNaN(D)||isNaN(H)||isNaN(J)||isNaN(V))throw Ft.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,H,J,V))},m.prototype.save=function(D){D=typeof D!="boolean"||D;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var V=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=V}},m.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(H),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(D){var H,J,V,ne;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))H=0,J=0,V=0,ne=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(le!==null)H=parseInt(le[1]),J=parseInt(le[2]),V=parseInt(le[3]),ne=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)H=parseInt(le[1]),J=parseInt(le[2]),V=parseInt(le[3]),ne=parseFloat(le[4]);else{if(ne=1,typeof D=="string"&&D.charAt(0)!=="#"){var me=new rx(D);D=me.ok?me.toHex():"#000000"}D.length===4?(H=D.substring(1,2),H+=H,J=D.substring(2,3),J+=J,V=D.substring(3,4),V+=V):(H=D.substring(1,3),J=D.substring(3,5),V=D.substring(5,7)),H=parseInt(H,16),J=parseInt(J,16),V=parseInt(V,16)}}return{r:H,g:J,b:V,a:ne,style:D}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(D,H,J,V){if(isNaN(H)||isNaN(J)||typeof D!="string")throw Ft.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(V=isNaN(V)?void 0:V,!p.call(this)){var ne=Z(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;O.call(this,{text:D,x:H,y:J,scale:le,angle:ne,align:this.textAlign,maxWidth:V})}},m.prototype.strokeText=function(D,H,J,V){if(isNaN(H)||isNaN(J)||typeof D!="string")throw Ft.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){V=isNaN(V)?void 0:V;var ne=Z(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;O.call(this,{text:D,x:H,y:J,scale:le,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:V})}},m.prototype.measureText=function(D){if(typeof D!="string")throw Ft.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,J=this.pdf.internal.scaleFactor,V=H.internal.getFontSize(),ne=H.getStringUnitWidth(D)*V/H.internal.scaleFactor;return new function(le){var me=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this}({width:ne*=Math.round(96*J/72*1e4)/1e4})},m.prototype.scale=function(D,H){if(isNaN(D)||isNaN(H))throw Ft.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(D,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},m.prototype.rotate=function(D){if(isNaN(D))throw Ft.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new c(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},m.prototype.translate=function(D,H){if(isNaN(D)||isNaN(H))throw Ft.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,D,H);this.ctx.transform=this.ctx.transform.multiply(J)},m.prototype.transform=function(D,H,J,V,ne,le){if(isNaN(D)||isNaN(H)||isNaN(J)||isNaN(V)||isNaN(ne)||isNaN(le))throw Ft.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new c(D,H,J,V,ne,le);this.ctx.transform=this.ctx.transform.multiply(me)},m.prototype.setTransform=function(D,H,J,V,ne,le){D=isNaN(D)?1:D,H=isNaN(H)?0:H,J=isNaN(J)?0:J,V=isNaN(V)?1:V,ne=isNaN(ne)?0:ne,le=isNaN(le)?0:le,this.ctx.transform=new c(D,H,J,V,ne,le)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(D,H,J,V,ne,le,me,re,fe){var be=this.pdf.getImageProperties(D),Se=1,Ae=1,ye=1,Q=1;V!==void 0&&re!==void 0&&(ye=re/V,Q=fe/ne,Se=be.width/V*re/V,Ae=be.height/ne*fe/ne),le===void 0&&(le=H,me=J,H=0,J=0),V!==void 0&&re===void 0&&(re=V,fe=ne),V===void 0&&re===void 0&&(re=be.width,fe=be.height);for(var at,nt=this.ctx.transform.decompose(),Ve=Z(nt.rotate.shx),ue=new c,qe=(ue=(ue=(ue=ue.multiply(nt.translate)).multiply(nt.skew)).multiply(nt.scale)).applyToRectangle(new l(le-H*ye,me-J*Q,V*Se,ne*Ae)),Ee=w.call(this,qe),Xe=[],Oe=0;Oe<Ee.length;Oe+=1)Xe.indexOf(Ee[Oe])===-1&&Xe.push(Ee[Oe]);if(S(Xe),this.autoPaging)for(var Ye=Xe[0],Qe=Xe[Xe.length-1],Je=Ye;Je<Qe+1;Je++){this.pdf.setPage(Je);var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=Je===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ge=Je===1?0:Ue+(Je-2)*et;if(this.ctx.clip_path.length!==0){var Rt=this.path;at=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(at,this.posX+this.margin[3],-Ge+ot+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=Rt}var wt=JSON.parse(JSON.stringify(qe));wt=_([wt],this.posX+this.margin[3],-Ge+ot+this.ctx.prevPageLastElemOffset)[0];var $e=(Je>Ye||Je<Qe)&&N.call(this);$e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,et,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",wt.x,wt.y,wt.w,wt.h,null,null,Ve),$e&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",qe.x,qe.y,qe.w,qe.h,null,null,Ve)};var w=function(D,H,J){var V=[];H=H||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":V.push(Math.floor((D.y+ne)/J)+1);break;case"arc":V.push(Math.floor((D.y+ne-D.radius)/J)+1),V.push(Math.floor((D.y+ne+D.radius)/J)+1);break;case"qct":var le=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);V.push(Math.floor((le.y+ne)/J)+1),V.push(Math.floor((le.y+le.h+ne)/J)+1);break;case"bct":var me=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);V.push(Math.floor((me.y+ne)/J)+1),V.push(Math.floor((me.y+me.h+ne)/J)+1);break;case"rect":V.push(Math.floor((D.y+ne)/J)+1),V.push(Math.floor((D.y+D.h+ne)/J)+1)}for(var re=0;re<V.length;re+=1)for(;this.pdf.internal.getNumberOfPages()<V[re];)y.call(this);return V},y=function(){var D=this.fillStyle,H=this.strokeStyle,J=this.font,V=this.lineCap,ne=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=H,this.font=J,this.lineCap=V,this.lineWidth=ne,this.lineJoin=le},_=function(D,H,J){for(var V=0;V<D.length;V++)switch(D[V].type){case"bct":D[V].x2+=H,D[V].y2+=J;case"qct":D[V].x1+=H,D[V].y1+=J;default:D[V].x+=H,D[V].y+=J}return D},S=function(D){return D.sort(function(H,J){return H-J})},C=function(D,H){for(var J,V,ne=this.fillStyle,le=this.strokeStyle,me=this.lineCap,re=this.lineWidth,fe=Math.abs(re*this.ctx.transform.scaleX),be=this.lineJoin,Se=JSON.parse(JSON.stringify(this.path)),Ae=JSON.parse(JSON.stringify(this.path)),ye=[],Q=0;Q<Ae.length;Q++)if(Ae[Q].x!==void 0)for(var at=w.call(this,Ae[Q]),nt=0;nt<at.length;nt+=1)ye.indexOf(at[nt])===-1&&ye.push(at[nt]);for(var Ve=0;Ve<ye.length;Ve++)for(;this.pdf.internal.getNumberOfPages()<ye[Ve];)y.call(this);if(S(ye),this.autoPaging)for(var ue=ye[0],qe=ye[ye.length-1],Ee=ue;Ee<qe+1;Ee++){this.pdf.setPage(Ee),this.fillStyle=ne,this.strokeStyle=le,this.lineCap=me,this.lineWidth=fe,this.lineJoin=be;var Xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Oe=Ee===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=Ee===1?0:Ye+(Ee-2)*Qe;if(this.ctx.clip_path.length!==0){var Ct=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(J,this.posX+this.margin[3],-Je+Oe+this.ctx.prevPageLastElemOffset),q.call(this,D,!0),this.path=Ct}if(V=JSON.parse(JSON.stringify(Se)),this.path=_(V,this.posX+this.margin[3],-Je+Oe+this.ctx.prevPageLastElemOffset),H===!1||Ee===0){var ot=(Ee>ue||Ee<qe)&&N.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,Qe,null).clip().discardPath()),q.call(this,D,H),ot&&this.pdf.restoreGraphicsState()}this.lineWidth=re}else this.lineWidth=fe,q.call(this,D,H),this.lineWidth=re;this.path=Se},q=function(D,H){if((D!=="stroke"||H||!j.call(this))&&(D==="stroke"||H||!p.call(this))){for(var J,V,ne=[],le=this.path,me=0;me<le.length;me++){var re=le[me];switch(re.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:re,deltas:[],abs:[]});break;case"lt":var fe=ne.length;if(le[me-1]&&!isNaN(le[me-1].x)&&(J=[re.x-le[me-1].x,re.y-le[me-1].y],fe>0)){for(;fe>=0;fe--)if(ne[fe-1].close!==!0&&ne[fe-1].begin!==!0){ne[fe-1].deltas.push(J),ne[fe-1].abs.push(re);break}}break;case"bct":J=[re.x1-le[me-1].x,re.y1-le[me-1].y,re.x2-le[me-1].x,re.y2-le[me-1].y,re.x-le[me-1].x,re.y-le[me-1].y],ne[ne.length-1].deltas.push(J);break;case"qct":var be=le[me-1].x+2/3*(re.x1-le[me-1].x),Se=le[me-1].y+2/3*(re.y1-le[me-1].y),Ae=re.x+2/3*(re.x1-re.x),ye=re.y+2/3*(re.y1-re.y),Q=re.x,at=re.y;J=[be-le[me-1].x,Se-le[me-1].y,Ae-le[me-1].x,ye-le[me-1].y,Q-le[me-1].x,at-le[me-1].y],ne[ne.length-1].deltas.push(J);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(re)}}V=H?null:D==="stroke"?"stroke":"fill";for(var nt=!1,Ve=0;Ve<ne.length;Ve++)if(ne[Ve].arc)for(var ue=ne[Ve].abs,qe=0;qe<ue.length;qe++){var Ee=ue[qe];Ee.type==="arc"?x.call(this,Ee.x,Ee.y,Ee.radius,Ee.startAngle,Ee.endAngle,Ee.counterclockwise,void 0,H,!nt):P.call(this,Ee.x,Ee.y),nt=!0}else if(ne[Ve].close===!0)this.pdf.internal.out("h"),nt=!1;else if(ne[Ve].begin!==!0){var Xe=ne[Ve].start.x,Oe=ne[Ve].start.y;T.call(this,ne[Ve].deltas,Xe,Oe),nt=!0}V&&A.call(this,V),H&&U.call(this)}},W=function(D){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-J;case"top":return D+H-J;case"hanging":return D+H-2*J;case"middle":return D+H/2-J;default:return D}},E=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(H,J){this.colorStops.push([H,J])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var x=function(D,H,J,V,ne,le,me,re,fe){for(var be=te.call(this,J,V,ne,le),Se=0;Se<be.length;Se++){var Ae=be[Se];Se===0&&(fe?L.call(this,Ae.x1+D,Ae.y1+H):P.call(this,Ae.x1+D,Ae.y1+H)),X.call(this,D,H,Ae.x2,Ae.y2,Ae.x3,Ae.y3,Ae.x4,Ae.y4)}re?U.call(this):A.call(this,me)},A=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(D,H){this.pdf.internal.out(n(D)+" "+r(H)+" m")},O=function(D){var H;switch(D.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var J=this.pdf.getTextDimensions(D.text),V=W.call(this,D.y),ne=E.call(this,V)-J.h,le=this.ctx.transform.applyToPoint(new o(D.x,V)),me=this.ctx.transform.decompose(),re=new c;re=(re=(re=re.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var fe,be,Se,Ae=this.ctx.transform.applyToRectangle(new l(D.x,V,J.w,J.h)),ye=re.applyToRectangle(new l(D.x,ne,J.w,J.h)),Q=w.call(this,ye),at=[],nt=0;nt<Q.length;nt+=1)at.indexOf(Q[nt])===-1&&at.push(Q[nt]);if(S(at),this.autoPaging)for(var Ve=at[0],ue=at[at.length-1],qe=Ve;qe<ue+1;qe++){this.pdf.setPage(qe);var Ee=qe===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[2],Ye=Oe-this.margin[0],Qe=this.pdf.internal.pageSize.width-this.margin[1],Je=Qe-this.margin[3],Ct=qe===1?0:Xe+(qe-2)*Ye;if(this.ctx.clip_path.length!==0){var ot=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(fe,this.posX+this.margin[3],-1*Ct+Ee),q.call(this,"fill",!0),this.path=ot}var Ue=_([JSON.parse(JSON.stringify(ye))],this.posX+this.margin[3],-Ct+Ee+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*D.scale),Se=this.lineWidth,this.lineWidth=Se*D.scale);var et=this.autoPaging!=="text";if(et||Ue.y+Ue.h<=Oe){if(et||Ue.y>=Ee&&Ue.x<=Qe){var Ge=et?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Qe-Ue.x)[0],Rt=_([JSON.parse(JSON.stringify(Ae))],this.posX+this.margin[3],-Ct+Ee+this.ctx.prevPageLastElemOffset)[0],wt=et&&(qe>Ve||qe<ue)&&N.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Je,Ye,null).clip().discardPath()),this.pdf.text(Ge,Rt.x,Rt.y,{angle:D.angle,align:H,renderingMode:D.renderingMode}),wt&&this.pdf.restoreGraphicsState()}}else Ue.y<Oe&&(this.ctx.prevPageLastElemOffset+=Oe-Ue.y);D.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Se)}else D.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*D.scale),Se=this.lineWidth,this.lineWidth=Se*D.scale),this.pdf.text(D.text,le.x+this.posX,le.y+this.posY,{angle:D.angle,align:H,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Se)},P=function(D,H,J,V){J=J||0,V=V||0,this.pdf.internal.out(n(D+J)+" "+r(H+V)+" l")},T=function(D,H,J){return this.pdf.lines(D,H,J,null,null)},X=function(D,H,J,V,ne,le,me,re){this.pdf.internal.out([t(s(J+D)),t(i(V+H)),t(s(ne+D)),t(i(le+H)),t(s(me+D)),t(i(re+H)),"c"].join(" "))},te=function(D,H,J,V){for(var ne=2*Math.PI,le=Math.PI/2;H>J;)H-=ne;var me=Math.abs(J-H);me<ne&&V&&(me=ne-me);for(var re=[],fe=V?-1:1,be=H;me>1e-5;){var Se=be+fe*Math.min(me,le);re.push(oe.call(this,D,be,Se)),me-=Math.abs(Se-be),be=Se}return re},oe=function(D,H,J){var V=(J-H)/2,ne=D*Math.cos(V),le=D*Math.sin(V),me=ne,re=-le,fe=me*me+re*re,be=fe+me*ne+re*le,Se=4/3*(Math.sqrt(2*fe*be)-be)/(me*le-re*ne),Ae=me-Se*re,ye=re+Se*me,Q=Ae,at=-ye,nt=V+H,Ve=Math.cos(nt),ue=Math.sin(nt);return{x1:D*Math.cos(H),y1:D*Math.sin(H),x2:Ae*Ve-ye*ue,y2:Ae*ue+ye*Ve,x3:Q*Ve-at*ue,y3:Q*ue+at*Ve,x4:D*Math.cos(J),y4:D*Math.sin(J)}},Z=function(D){return 180*D/Math.PI},se=function(D,H,J,V,ne,le){var me=D+.5*(J-D),re=H+.5*(V-H),fe=ne+.5*(J-ne),be=le+.5*(V-le),Se=Math.min(D,ne,me,fe),Ae=Math.max(D,ne,me,fe),ye=Math.min(H,le,re,be),Q=Math.max(H,le,re,be);return new l(Se,ye,Ae-Se,Q-ye)},ee=function(D,H,J,V,ne,le,me,re){var fe,be,Se,Ae,ye,Q,at,nt,Ve,ue,qe,Ee,Xe,Oe,Ye=J-D,Qe=V-H,Je=ne-J,Ct=le-V,ot=me-ne,Ue=re-le;for(be=0;be<41;be++)Ve=(at=(Se=D+(fe=be/40)*Ye)+fe*((ye=J+fe*Je)-Se))+fe*(ye+fe*(ne+fe*ot-ye)-at),ue=(nt=(Ae=H+fe*Qe)+fe*((Q=V+fe*Ct)-Ae))+fe*(Q+fe*(le+fe*Ue-Q)-nt),be==0?(qe=Ve,Ee=ue,Xe=Ve,Oe=ue):(qe=Math.min(qe,Ve),Ee=Math.min(Ee,ue),Xe=Math.max(Xe,Ve),Oe=Math.max(Oe,ue));return new l(Math.round(qe),Math.round(Ee),Math.round(Xe-qe),Math.round(Oe-Ee))},de=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,H,J=(D=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:H}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(He.API),function(e){var t=function(o){var l,c,d,h,m,g,p,j,N,w;for(c=[],d=0,h=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;h>d;d+=4)(m=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(g=(m=((m=((m=((m=(m-(w=m%85))/85)-(N=m%85))/85)-(j=m%85))/85)-(p=m%85))/85)%85,c.push(g+33,p+33,j+33,N+33,w+33)):c.push(122);return function(y,_){for(var S=_;S>0;S--)y.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},n=function(o){var l,c,d,h,m,g=String,p="length",j=255,N="charCodeAt",w="slice",y="replace";for(o[w](-2),o=o[w](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),d=[],h=0,m=(o+=l="uuuuu"[w](o[p]%5||5))[p];m>h;h+=5)c=52200625*(o[N](h)-33)+614125*(o[N](h+1)-33)+7225*(o[N](h+2)-33)+85*(o[N](h+3)-33)+(o[N](h+4)-33),d.push(j&c>>24,j&c>>16,j&c>>8,j&c);return function(_,S){for(var C=S;C>0;C--)_.pop()}(d,l[p]),g.fromCharCode.apply(g,d)},r=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},i=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=Wp(l)).reduce(function(d,h){return d+String.fromCharCode(h)},"")};e.processDataByFilters=function(o,l){var c=0,d=o||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=r(d),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:h.reverse().join(" ")}}}(He.API),function(e){e.loadFile=function(t,n,r){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,h){var m=new XMLHttpRequest,g=0,p=function(j){var N=j.length,w=[],y=String.fromCharCode;for(g=0;g<N;g+=1)w.push(y(255&j.charCodeAt(g)));return w.join("")};if(m.open("GET",c,!d),m.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(m.onload=function(){m.status===200?h(p(this.responseText)):h(void 0)}),m.send(null),d&&m.status===200)return p(m.responseText)}(s,i,o)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(He.API),function(e){function t(){return(tt.html2canvas?Promise.resolve(tt.html2canvas):mf(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(tt.DOMPurify?Promise.resolve(tt.DOMPurify):mf(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var r=function(l){var c=Lt(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},s=function(l,c){var d=document.createElement(l);for(var h in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[h]=c.style[h];return d},i=function l(c,d){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h},o=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),d);return(h=h.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(d){switch(r(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(n).then(function(d){return this.set({src:s("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=this.opt.jsPDF,h=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=h,h)for(var p=0;p<h.length;++p){var j=h[p],N=j.src.find(function(w){return w.format==="truetype"});N&&d.addFont(N.url,j.ref.name,j.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,d.context2d.save(!0),c(this.prop.container,g)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(r(l)!=="object")return this;var c=Object.keys(l||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(d):d})},o.prototype.setMargin=function(l){return this.then(function(){switch(r(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(d,h){return Math.floor(d*h/72*96)}return this.then(function(){(l=l||He.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,d,h){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,d,h){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,function(h,m){return d.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(g){return d.updateProgress(null,h),g}).then(h,m).then(function(g){return d.updateProgress(1),g})})},o.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then;var h=this;l&&(l=l.bind(h)),c&&(c=c.bind(h));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:o.convert(Object.assign({},h),Promise.prototype),g=d.call(m,l,c);return o.convert(g,h.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(d){c=c.thenCore(d)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,He.getPageSize=function(l,c,d){if(Lt(l)==="object"){var h=l;l=h.orientation,c=h.unit||c,d=h.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var m,g=(""+d).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+c}var j,N=0,w=0;if(p.hasOwnProperty(g))N=p[g][1]/m,w=p[g][0]/m;else try{N=d[1],w=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",w>N&&(j=w,w=N,N=j);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",N>w&&(j=w,w=N,N=j)}return{width:w,height:N,unit:c,k:m,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(qf):null;var d=new o(c);return c.worker?d:d.from(l).doCallback()}}(He.API),He.API.addJS=function(e){return d2=e,this.internal.events.subscribe("postPutResources",function(){Od=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Od+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),c2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+d2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Od!==void 0&&c2!==void 0&&this.internal.out("/Names <</JavaScript "+Od+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=r.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,h=[];for(i=0;i<d;i++){var m=n.internal.newObject();h.push(m);var g=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<h.length;i++)n.internal.write("(page_"+(i+1)+")"+h[i]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,i){var o={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var o=r.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(He.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,s,i,o,l){var c,d=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,c=function(m){for(var g,p=256*m.charCodeAt(4)+m.charCodeAt(5),j=m.length,N={width:0,height:0,numcomponents:1},w=4;w<j;w+=2){if(w+=p,t.indexOf(m.charCodeAt(w+1))!==-1){g=256*m.charCodeAt(w+5)+m.charCodeAt(w+6),N={width:256*m.charCodeAt(w+7)+m.charCodeAt(w+8),height:g,numcomponents:m.charCodeAt(w+9)};break}p=256*m.charCodeAt(w+2)+m.charCodeAt(w+3)}return N}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}h={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:s}}return h}}(He.API),He.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,i=xS(e,{checkCrc:!0}),o=i.width,l=i.height,c=i.channels,d=i.palette,h=i.depth;s=d&&c===1?function(x){for(var A=x.width,U=x.height,L=x.data,O=x.palette,P=x.depth,T=!1,X=[],te=[],oe=void 0,Z=!1,se=0,ee=0;ee<O.length;ee++){var de=p1(O[ee],4),D=de[0],H=de[1],J=de[2],V=de[3];X.push(D,H,J),V!=null&&(V===0?(se++,te.length<1&&te.push(ee)):V<255&&(Z=!0))}if(Z||se>1){T=!0,te=void 0;var ne=A*U;oe=new Uint8Array(ne);for(var le=new DataView(L.buffer),me=0;me<ne;me++){var re=If(le,me,P),fe=p1(O[re],4)[3];oe[me]=fe}}else se===0&&(te=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:T?8:void 0,colorBytes:L,alphaBytes:oe,needSMask:T,palette:X,mask:te}}(i):c===2||c===4?function(x){for(var A=x.data,U=x.width,L=x.height,O=x.channels,P=x.depth,T=O===2?"DeviceGray":"DeviceRGB",X=O-1,te=U*L,oe=X,Z=te*oe,se=1*te,ee=Math.ceil(Z*P/8),de=Math.ceil(se*P/8),D=new Uint8Array(ee),H=new Uint8Array(de),J=new DataView(A.buffer),V=new DataView(D.buffer),ne=new DataView(H.buffer),le=!1,me=0;me<te;me++){for(var re=me*O,fe=0;fe<oe;fe++)x2(V,If(J,re+fe,P),me*oe+fe,P);var be=If(J,re+oe,P);be<(1<<P)-1&&(le=!0),x2(ne,be,1*me,P)}return{colorSpace:T,colorsPerPixel:X,sMaskBitsPerComponent:le?P:void 0,colorBytes:D,alphaBytes:H,needSMask:le}}(i):function(x){var A=x.data,U=x.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:U,colorsPerPixel:U==="DeviceGray"?1:3,colorBytes:A instanceof Uint16Array?function(L){for(var O=L.length,P=new Uint8Array(2*O),T=new DataView(P.buffer,P.byteOffset,P.byteLength),X=0;X<O;X++)T.setUint16(2*X,L[X],!1);return P}(A):A,needSMask:!1}}(i);var m,g,p,j=s,N=j.colorSpace,w=j.colorsPerPixel,y=j.sMaskBitsPerComponent,_=j.colorBytes,S=j.alphaBytes,C=j.needSMask,q=j.palette,W=j.mask,E=null;return r!==He.API.image_compression.NONE&&typeof Wp=="function"?(E=function(x){var A;switch(x){case He.API.image_compression.FAST:A=11;break;case He.API.image_compression.MEDIUM:A=13;break;case He.API.image_compression.SLOW:A=14;break;default:A=12}return A}(r),m=this.decode.FLATE_DECODE,g="/Predictor ".concat(E," /Colors ").concat(w," /BitsPerComponent ").concat(h," /Columns ").concat(o),e=p2(_,Math.ceil(o*w*h/8),w,h,r),C&&(p=p2(S,Math.ceil(o*y/8),1,y,r))):(m=void 0,g=void 0,e=_,C&&(p=S)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:n,data:e,index:t,filter:m,decodeParameters:g,transparency:W,palette:q,sMask:p,predictor:E,width:o,height:l,bitsPerComponent:h,sMaskBitsPerComponent:y,colorSpace:N}}},function(e){e.processGIF89A=function(t,n,r,s){var i=new BS(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},h=new Ff(100).encode(d,100);return e.processJPEG.call(this,h,n,r,s)},e.processGIF87A=e.processGIF89A}(He.API),la.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},la.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Ft.log("bit decode error:"+n)}},la.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},la.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},la.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},la.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,h=r*this.width*4+4*s;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=o,this.data[h+3]=d}this.pos+=e}},la.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,h=s*this.width*4+4*i;this.data[h]=d,this.data[h+1]=c,this.data[h+2]=l,this.data[h+3]=255}this.pos+=e}},la.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},la.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=r,this.data[l+3]=o}},la.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,s){var i=new la(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Ff(100).encode(c,100);return e.processJPEG.call(this,d,n,r,s)}}(He.API),_2.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,s){var i=new _2(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Ff(100).encode(c,100);return e.processJPEG.call(this,d,n,r,s)}}(He.API),He.API.processRGBA=function(e,t,n){for(var r=e.data,s=r.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var h=r[d],m=r[d+1],g=r[d+2],p=r[d+3];i[l++]=h,i[l++]=m,i[l++]=g,o[c++]=p}var j=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:j,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},He.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ho=He.API,Md=ho.getCharWidthsArray=function(e,t){var n,r,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,h=d.fof?d.fof:1,m=t.doKerning!==!1,g=0,p=e.length,j=0,N=l[0]||c,w=[];for(n=0;n<p;n++)r=e.charCodeAt(n),typeof s.metadata.widthOfString=="function"?w.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(g=m&&Lt(d[r])==="object"&&!isNaN(parseInt(d[r][j],10))?d[r][j]/h:0,w.push((l[r]||N)/c+g)),j=r;return w},u2=ho.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return ho.processArabic&&(e=ho.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,s)/n:Md.apply(this,arguments).reduce(function(i,o){return i+o},0)},h2=function(e,t,n,r){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<n;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>r&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},f2=function(e,t,n){n||(n={});var r,s,i,o,l,c,d,h=[],m=[h],g=n.textIndent||0,p=0,j=0,N=e.split(" "),w=Md.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?N[0].length+2:n.lineIndent||0){var y=Array(c).join(" "),_=[];N.map(function(C){(C=C.split(/\s*\n/)).length>1?_=_.concat(C.map(function(q,W){return(W&&q.length?`
`:"")+q})):_.push(C[0])}),N=_,c=u2.apply(this,[y,n])}for(i=0,o=N.length;i<o;i++){var S=0;if(r=N[i],c&&r[0]==`
`&&(r=r.substr(1),S=1),g+p+(j=(s=Md.apply(this,[r,n])).reduce(function(C,q){return C+q},0))>t||S){if(j>t){for(l=h2.apply(this,[r,s,t-(g+p),t]),h.push(l.shift()),h=[l.pop()];l.length;)m.push([l.shift()]);j=s.slice(r.length-(h[0]?h[0].length:0)).reduce(function(C,q){return C+q},0)}else h=[r];m.push(h),g=j+c,p=w}else h.push(r),g+=p+j,p=w}return d=c?function(C,q){return(q?y:"")+C.join(" ")}:function(C){return C.join(" ")},m.map(d)},ho.splitTextToSize=function(e,t,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var m=this.internal.getFont(h.fontName,h.fontStyle),g="Unicode";return m.metadata[g]?{widths:m.metadata[g].widths||{0:1},kerning:m.metadata[g].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=n.lineIndent;var l,c,d=[];for(l=0,c=r.length;l<c;l++)d=d.concat(f2.apply(this,[r[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",r={},s={},i=0;i<16;i++)r[n[i]]=t[i],s[t[i]]=n[i];var o=function(g){return"0x"+parseInt(g,10).toString(16)},l=e.__fontmetrics__.compress=function(g){var p,j,N,w,y=["{"];for(var _ in g){if(p=g[_],isNaN(parseInt(_,10))?j="'"+_+"'":(_=parseInt(_,10),j=(j=o(_).slice(2)).slice(0,-1)+s[j.slice(-1)]),typeof p=="number")p<0?(N=o(p).slice(3),w="-"):(N=o(p).slice(2),w=""),N=w+N.slice(0,-1)+s[N.slice(-1)];else{if(Lt(p)!=="object")throw new Error("Don't know what to do with value type "+Lt(p)+".");N=l(p)}y.push(j+N)}return y.push("}"),y.join("")},c=e.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,j,N,w,y={},_=1,S=y,C=[],q="",W="",E=g.length-1,x=1;x<E;x+=1)(w=g[x])=="'"?p?(N=p.join(""),p=void 0):p=[]:p?p.push(w):w=="{"?(C.push([S,N]),S={},N=void 0):w=="}"?((j=C.pop())[0][j[1]]=S,N=void 0,S=j[0]):w=="-"?_=-1:N===void 0?r.hasOwnProperty(w)?(q+=r[w],N=parseInt(q,16)*_,_=1,q=""):q+=w:r.hasOwnProperty(w)?(W+=r[w],S[N]=parseInt(W,16)*_,_=1,N=void 0,W=""):W+=w;return y},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},m={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(g){var p=g.font,j=m.Unicode[p.postScriptName];j&&(p.metadata.Unicode={},p.metadata.Unicode.widths=j.widths,p.metadata.Unicode.kerning=j.kerning);var N=h.Unicode[p.postScriptName];N&&(p.metadata.Unicode.encoding=N,p.encoding=N.codePages[0])}])}(He.API),function(e){var t=function(n){for(var r=n.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=n.charCodeAt(i);return s};e.API.events.push(["addFont",function(n){var r=void 0,s=n.font,i=n.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Qd(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,r)}}])}(He),He.API.addSvgAsImage=function(e,t,n,r,s,i,o,l){if(isNaN(t)||isNaN(n))throw Ft.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw Ft.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=s;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(tt.canvg?Promise.resolve(tt.canvg):mf(()=>import("./index.es-BYdiEJ3y.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(d,e,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){m.addImage(c.toDataURL("image/jpeg",1),t,n,r,s,o,l)})},He.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(t,n);return this},He.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,h=0,m=0;function g(j,N){var w,y=!1;for(w=0;w<j.length;w+=1)j[w]===N&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(m=0;m<p;m+=1)n[l[m]].value=n[l[m]].defaultValue,n[l[m]].explicitSet=!1}if(Lt(e)==="object"){for(s in e)if(i=e[s],g(l,s)&&i!==void 0){if(n[s].type==="boolean"&&typeof i=="boolean")n[s].value=i;else if(n[s].type==="name"&&g(n[s].valueSet,i))n[s].value=i;else if(n[s].type==="integer"&&Number.isInteger(i))n[s].value=i;else if(n[s].type==="array"){for(d=0;d<i.length;d+=1)if(r=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(h=0;h<i[d].length;h+=1)typeof i[d][h]!="number"&&(r=!1);r===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}n[s].value="["+c.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,N=[];for(j in n)n[j].explicitSet===!0&&(n[j].type==="name"?N.push("/"+j+" /"+n[j].value):N.push("/"+j+" "+n[j].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(He.API),function(e){var t=e.API,n=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],h=[""],m=0,g=i.length;m<g;++m){if(l=o.metadata.characterToGlyph(i.charCodeAt(m)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return h.join("");l=l.toString(16),h.push(d[4-l.length],l)}return h.join("")},r=function(i){var o,l,c,d,h,m,g;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,g=(l=Object.keys(i).sort(function(p,j){return p-j})).length;m<g;m++)o=l[m],c.length>=100&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,h=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,g=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",j=0;j<g.length;j++)p+=String.fromCharCode(g[j]);var N=d();h({data:p,addLength1:!0,objectId:N}),c("endobj");var w=d();h({data:r(l.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+po(l.fontName)),c("/FontFile2 "+N+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var _=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+po(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+w+" 0 R"),c("/BaseFont /"+po(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+_+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,h=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,g="",p=0;p<m.length;p++)g+=String.fromCharCode(m[p]);var j=d();h({data:g,addLength1:!0,objectId:j}),c("endobj");var N=d();h({data:r(l.metadata.toUnicode),addLength1:!0,objectId:N}),c("endobj");var w=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+j+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+po(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+po(l.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,h=i.options||{},m=i.mutex||{},g=m.pdfEscape,p=m.activeFontKey,j=m.fonts,N=p,w="",y=0,_="",S=j[N].encoding;if(j[N].encoding!=="Identity-H")return{text:l,x:c,y:d,options:h,mutex:m};for(_=l,N=p,Array.isArray(l)&&(_=l[0]),y=0;y<_.length;y+=1)j[N].metadata.hasOwnProperty("cmap")&&(o=j[N].metadata.cmap.unicode.codeMap[_[y].charCodeAt(0)]),o||_[y].charCodeAt(0)<256&&j[N].metadata.hasOwnProperty("Unicode")?w+=_[y]:w+="";var C="";return parseInt(N.slice(1))<14||S==="WinAnsiEncoding"?C=g(w,N).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(C=n(w,j[N])),m.isHex=!0,{text:C,x:c,y:d,options:h,mutex:m}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])}(He),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(He.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var s,i,o,l,c,d,h,m=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,S=0;this.__bidiEngine__={};var C=function(L){var O=L.charCodeAt(),P=O>>8,T=N[P];return T!==void 0?m[256*T+(255&O)]:P===252||P===253?"AL":y.test(P)?"L":P===8?"R":"N"},q=function(L){for(var O,P=0;P<L.length;P++){if((O=C(L.charAt(P)))==="L")return!1;if(O==="R")return!0}return!1},W=function(L,O,P,T){var X,te,oe,Z,se=O[T];switch(se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"N":case"AN":break;case"EN":_&&(se="AN");break;case"AL":_=!0,se="R";break;case"WS":case"BN":se="N";break;case"CS":T<1||T+1>=O.length||(X=P[T-1])!=="EN"&&X!=="AN"||(te=O[T+1])!=="EN"&&te!=="AN"?se="N":_&&(te="AN"),se=te===X?te:"N";break;case"ES":se=(X=T>0?P[T-1]:"B")==="EN"&&T+1<O.length&&O[T+1]==="EN"?"EN":"N";break;case"ET":if(T>0&&P[T-1]==="EN"){se="EN";break}if(_){se="N";break}for(oe=T+1,Z=O.length;oe<Z&&O[oe]==="ET";)oe++;se=oe<Z&&O[oe]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(Z=O.length,oe=T+1;oe<Z&&O[oe]==="NSM";)oe++;if(oe<Z){var ee=L[T],de=ee>=1425&&ee<=2303||ee===64286;if(X=O[oe],de&&(X==="R"||X==="AL")){se="R";break}}}se=T<1||(X=O[T-1])==="B"?"N":P[T-1];break;case"B":_=!1,s=!0,se=S;break;case"S":i=!0,se="N"}return se},E=function(L,O,P){var T=L.split("");return P&&x(T,P,{hiLevel:S}),T.reverse(),O&&O.reverse(),T.join("")},x=function(L,O,P){var T,X,te,oe,Z,se=-1,ee=L.length,de=0,D=[],H=S?p:g,J=[];for(_=!1,s=!1,i=!1,X=0;X<ee;X++)J[X]=C(L[X]);for(te=0;te<ee;te++){if(Z=de,D[te]=W(L,J,D,te),T=240&(de=H[Z][j[D[te]]]),de&=15,O[te]=oe=H[de][5],T>0)if(T===16){for(X=se;X<te;X++)O[X]=1;se=-1}else se=-1;if(H[de][6])se===-1&&(se=te);else if(se>-1){for(X=se;X<te;X++)O[X]=oe;se=-1}J[te]==="B"&&(O[te]=0),P.hiLevel|=oe}i&&function(V,ne,le){for(var me=0;me<le;me++)if(V[me]==="S"){ne[me]=S;for(var re=me-1;re>=0&&V[re]==="WS";re--)ne[re]=S}}(J,O,ee)},A=function(L,O,P,T,X){if(!(X.hiLevel<L)){if(L===1&&S===1&&!s)return O.reverse(),void(P&&P.reverse());for(var te,oe,Z,se,ee=O.length,de=0;de<ee;){if(T[de]>=L){for(Z=de+1;Z<ee&&T[Z]>=L;)Z++;for(se=de,oe=Z-1;se<oe;se++,oe--)te=O[se],O[se]=O[oe],O[oe]=te,P&&(te=P[se],P[se]=P[oe],P[oe]=te);de=Z}de++}}},U=function(L,O,P){var T=L.split(""),X={hiLevel:S};return P||(P=[]),x(T,P,X),function(te,oe,Z){if(Z.hiLevel!==0&&h)for(var se,ee=0;ee<te.length;ee++)oe[ee]===1&&(se=w.indexOf(te[ee]))>=0&&(te[ee]=w[se+1])}(T,P,X),A(2,T,O,P,X),A(1,T,O,P,X),T.join("")};return this.__bidiEngine__.doBidiReorder=function(L,O,P){if(function(X,te){if(te)for(var oe=0;oe<X.length;oe++)te[oe]=oe;l===void 0&&(l=q(X)),d===void 0&&(d=q(X))}(L,O),o||!c||d)if(o&&c&&l^d)S=l?1:0,L=E(L,O,P);else if(!o&&c&&d)S=l?1:0,L=U(L,O,P),L=E(L,O);else if(!o||l||c||d){if(o&&!c&&l^d)L=E(L,O),l?(S=0,L=U(L,O,P)):(S=1,L=U(L,O,P),L=E(L,O));else if(o&&l&&!c&&d)S=1,L=U(L,O,P),L=E(L,O);else if(!o&&!c&&l^d){var T=h;l?(S=1,L=U(L,O,P),S=0,h=!1,L=U(L,O,P),h=T):(S=0,L=U(L,O,P),L=E(L,O),S=1,h=!1,L=U(L,O,P),h=T,L=E(L,O))}}else S=0,L=U(L,O,P);else S=l?1:0,L=U(L,O,P);return L},this.__bidiEngine__.setOptions=function(L){L&&(o=L.isInputVisual,c=L.isOutputVisual,l=L.isInputRtl,d=L.isOutputRtl,h=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([n.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([n.doBidiReorder(s[l])]);r.text=o}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(He),He.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Js(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new tk(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new US(this.contents),this.head=new $S(this),this.name=new KS(this),this.cmap=new px(this),this.toUnicode={},this.hhea=new WS(this),this.maxp=new ZS(this),this.hmtx=new YS(this),this.post=new VS(this),this.os2=new HS(this),this.loca=new ek(this),this.glyf=new JS(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var va,Js=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,s;for(s=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(t.charCodeAt(n)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,s,i,o,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,s,i;for(i=[],r=0,s=t.length;r<s;r++)n=t[r],i.push(this.writeByte(n));return i},e}(),US=function(){var e;function t(n){var r,s,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,s,i,o,l,c,d,h,m,g,p,j,N;for(N in p=Object.keys(n).length,c=Math.log(2),m=16*Math.floor(Math.log(p)/c),o=Math.floor(m/c),h=16*p-m,(s=new Js).writeInt(this.scalarType),s.writeShort(p),s.writeShort(m),s.writeShort(o),s.writeShort(h),i=16*p,d=s.pos+i,l=null,j=[],n)for(g=n[N],s.writeString(N),s.writeInt(e(g)),s.writeInt(d),s.writeInt(g.length),j=j.concat(g),N==="head"&&(l=d),d+=g.length;d%4;)j.push(0),d++;return s.write(j),r=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(r),s.data},e=function(n){var r,s,i,o;for(n=mx.call(n);n.length%4;)n.push(0);for(i=new Js(n),s=0,r=0,o=n.length;r<o;r=r+=4)s+=i.readUInt32();return 4294967295&s},t}(),zS={}.hasOwnProperty,Ta=function(e,t){for(var n in t)zS.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};va=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var $S=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ta(e,va),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Js).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),w2=function(){function e(t,n){var r,s,i,o,l,c,d,h,m,g,p,j,N,w,y,_,S;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),g=p/2,t.pos+=6,i=function(){var C,q;for(q=[],c=C=0;0<=g?C<g:C>g;c=0<=g?++C:--C)q.push(t.readUInt16());return q}(),t.pos+=2,N=function(){var C,q;for(q=[],c=C=0;0<=g?C<g:C>g;c=0<=g?++C:--C)q.push(t.readUInt16());return q}(),d=function(){var C,q;for(q=[],c=C=0;0<=g?C<g:C>g;c=0<=g?++C:--C)q.push(t.readUInt16());return q}(),h=function(){var C,q;for(q=[],c=C=0;0<=g?C<g:C>g;c=0<=g?++C:--C)q.push(t.readUInt16());return q}(),s=(this.length-t.pos+this.offset)/2,l=function(){var C,q;for(q=[],c=C=0;0<=s?C<s:C>s;c=0<=s?++C:--C)q.push(t.readUInt16());return q}(),c=y=0,S=i.length;y<S;c=++y)for(w=i[c],r=_=j=N[c];j<=w?_<=w:_>=w;r=j<=w?++_:--_)h[c]===0?o=r+d[c]:(o=l[h[c]/2+(r-j)-(g-c)]||0)!==0&&(o+=d[c]),this.codeMap[r]=65535&o}t.pos=m}return e.encode=function(t,n){var r,s,i,o,l,c,d,h,m,g,p,j,N,w,y,_,S,C,q,W,E,x,A,U,L,O,P,T,X,te,oe,Z,se,ee,de,D,H,J,V,ne,le,me,re,fe,be,Se;switch(T=new Js,o=Object.keys(t).sort(function(Ae,ye){return Ae-ye}),n){case"macroman":for(N=0,w=function(){var Ae=[];for(j=0;j<256;++j)Ae.push(0);return Ae}(),_={0:0},i={},X=0,se=o.length;X<se;X++)_[re=t[s=o[X]]]==null&&(_[re]=++N),i[s]={old:t[s],new:_[t[s]]},w[s]=_[t[s]];return T.writeUInt16(1),T.writeUInt16(0),T.writeUInt32(12),T.writeUInt16(0),T.writeUInt16(262),T.writeUInt16(0),T.write(w),{charMap:i,subtable:T.data,maxGlyphID:N+1};case"unicode":for(O=[],m=[],S=0,_={},r={},y=d=null,te=0,ee=o.length;te<ee;te++)_[q=t[s=o[te]]]==null&&(_[q]=++S),r[s]={old:q,new:_[q]},l=_[q]-s,y!=null&&l===d||(y&&m.push(y),O.push(s),d=l),y=s;for(y&&m.push(y),m.push(65535),O.push(65535),U=2*(A=O.length),x=2*Math.pow(Math.log(A)/Math.LN2,2),g=Math.log(x/2)/Math.LN2,E=2*A-x,c=[],W=[],p=[],j=oe=0,de=O.length;oe<de;j=++oe){if(L=O[j],h=m[j],L===65535){c.push(0),W.push(0);break}if(L-(P=r[L].new)>=32768)for(c.push(0),W.push(2*(p.length+A-j)),s=Z=L;L<=h?Z<=h:Z>=h;s=L<=h?++Z:--Z)p.push(r[s].new);else c.push(P-L),W.push(0)}for(T.writeUInt16(3),T.writeUInt16(1),T.writeUInt32(12),T.writeUInt16(4),T.writeUInt16(16+8*A+2*p.length),T.writeUInt16(0),T.writeUInt16(U),T.writeUInt16(x),T.writeUInt16(g),T.writeUInt16(E),le=0,D=m.length;le<D;le++)s=m[le],T.writeUInt16(s);for(T.writeUInt16(0),me=0,H=O.length;me<H;me++)s=O[me],T.writeUInt16(s);for(fe=0,J=c.length;fe<J;fe++)l=c[fe],T.writeUInt16(l);for(be=0,V=W.length;be<V;be++)C=W[be],T.writeUInt16(C);for(Se=0,ne=p.length;Se<ne;Se++)N=p[Se],T.writeUInt16(N);return{charMap:r,subtable:T.data,maxGlyphID:S+1}}},e}(),px=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ta(e,va),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n=new w2(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,s;return n==null&&(n="macroman"),r=w2.encode(t,n),(s=new Js).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},e}(),WS=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ta(e,va),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),HS=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ta(e,va),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),VS=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ta(e,va),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(r=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)n=t.readByte(),s.push(this.names.push(t.readString(n)));return s;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=(function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(t.readUInt32());return c}).call(this)}},e}(),GS=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},KS=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ta(e,va),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,s,i,o,l,c,d,h,m,g;for(t.pos=this.offset,t.readShort(),n=t.readShort(),l=t.readShort(),r=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},i=h=0,m=r.length;h<m;i=++h)s=r[i],t.pos=s.offset,d=t.readString(s.length),o=new GS(d,s),c[g=s.nameID]==null&&(c[g]=[]),c[s.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),ZS=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ta(e,va),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),YS=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ta(e,va),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,s,i,o,l,c;for(t.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)h.push(t.readInt16());return h}(),this.widths=(function(){var d,h,m,g;for(g=[],d=0,h=(m=this.metrics).length;d<h;d++)i=m[d],g.push(i.advance);return g}).call(this),r=this.widths[this.widths.length-1],c=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)c.push(this.widths.push(r));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),mx=[].slice,JS=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ta(e,va),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,s,i,o,l,c,d,h,m;return t in this.cache?this.cache[t]:(i=this.file.loca,n=this.file.contents,r=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,o=(l=new Js(n.read(s))).readShort(),d=l.readShort(),m=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[t]=o===-1?new QS(l,d,m,c,h):new XS(l,o,d,m,c,h),this.cache[t]))},e.prototype.encode=function(t,n,r){var s,i,o,l,c;for(o=[],i=[],l=0,c=n.length;l<c;l++)s=t[n[l]],i.push(o.length),s&&(o=o.concat(s.encode(r)));return i.push(o.length),{table:o,offsets:i}},e}(),XS=function(){function e(t,n,r,s,i,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),QS=function(){function e(t,n,r,s,i){var o,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Js(mx.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),ek=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ta(e,va),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],r=0,s=this.length;r<s;r+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],r=0,s=this.length;r<s;r+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<r.length;++o)if(r[o]=s,i<n.length&&n[i]==o){++i,r[o]=s;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(s+=c)}for(var d=new Array(4*r.length),h=0;h<r.length;++h)d[4*h+3]=255&r[h],d[4*h+2]=(65280&r[h])>>8,d[4*h+1]=(16711680&r[h])>>16,d[4*h]=(4278190080&r[h])>>24;return d},e}(),tk=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,s,i;for(n in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)r=i[n],t[n]=s[r];return t},e.prototype.glyphsFor=function(t){var n,r,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in n=[],s)(r=s[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in c=this.glyphsFor(n))r=c[i],s[i]=r;return s},e.prototype.encode=function(t,n){var r,s,i,o,l,c,d,h,m,g,p,j,N,w,y;for(s in r=px.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},y=r.charMap)p[(c=y[s]).old]=c.new;for(j in g=r.maxGlyphID,o)j in p||(p[j]=g++);return h=function(_){var S,C;for(S in C={},_)C[_[S]]=S;return C}(p),m=Object.keys(h).sort(function(_,S){return _-S}),N=function(){var _,S,C;for(C=[],_=0,S=m.length;_<S;_++)l=m[_],C.push(h[l]);return C}(),i=this.font.glyf.encode(o,N,p),d=this.font.loca.encode(i.offsets,N),w={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},e}();He.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,s,i,o;if(Array.isArray(n))return"["+function(){var l,c,d;for(d=[],l=0,c=n.length;l<c;l++)r=n[l],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in i=["<<"],n)o=n[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+n},t}();function gx(e,t,n,r,s){r=r||{};var i=1.15,o=s.internal.scaleFactor,l=s.internal.getFontSize()/o,c=s.getLineHeightFactor?s.getLineHeightFactor():i,d=l*c,h=/\r\n|\r|\n/g,m="",g=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(m=typeof e=="string"?e.split(h):e,g=m.length||1),n+=l*(2-i),r.valign==="middle"?n-=g/2*d:r.valign==="bottom"&&(n-=g*d),r.halign==="center"||r.halign==="right"){var p=l;if(r.halign==="center"&&(p*=.5),m&&g>=1){for(var j=0;j<m.length;j++)s.text(m[j],t-s.getStringUnitWidth(m[j])*p,n),n+=d;return s}t-=s.getStringUnitWidth(e)*p}return r.halign==="justify"?s.text(e,t,n,{maxWidth:r.maxWidth||100,align:"justify"}):s.text(e,t,n),s}var j2={},Bo=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=t:j2=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,n){var r,s,i;n===void 0&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),l=d[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var h=e.unifyColor(t.fillColor);h&&(r=this.jsPDFDocument).setFillColor.apply(r,h),h=e.unifyColor(t.textColor),h&&(s=this.jsPDFDocument).setTextColor.apply(s,h),h=e.unifyColor(t.lineColor),h&&(i=this.jsPDFDocument).setDrawColor.apply(i,h),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,n,r){return this.jsPDFDocument.splitTextToSize(t,n,r)},e.prototype.rect=function(t,n,r,s,i){return this.jsPDFDocument.rect(t,n,r,s,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return j2||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),Xp=function(e,t){return Xp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},Xp(e,t)};function vx(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Xp(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var yx=function(e){vx(t,e);function t(n){var r=e.call(this)||this;return r._element=n,r}return t}(Array);function nk(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function rk(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function Tu(e,t,n){n.applyStyles(t,!0);var r=Array.isArray(e)?e:[e],s=r.map(function(i){return n.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return s}function xx(e,t,n,r){var s=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:s,lineColor:i});var o=bx(s,!1);o&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),r.y-n.y,o)}function bx(e,t){var n=e>0,r=t||t===0;return n&&r?"DF":n?"S":r?"F":null}function oh(e,t){var n,r,s,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(n=e.left)!==null&&n!==void 0?n:t,top:(r=e.top)!==null&&r!==void 0?r:t,right:(s=e.right)!==null&&s!==void 0?s:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function _x(e,t){var n=oh(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function ak(e,t,n,r,s){var i={},o=1.3333333333333333,l=Rf(t,function(S){return s.getComputedStyle(S).backgroundColor});l!=null&&(i.fillColor=l);var c=Rf(t,function(S){return s.getComputedStyle(S).color});c!=null&&(i.textColor=c);var d=ik(r,n);d&&(i.cellPadding=d);var h="borderTopColor",m=o*n,g=r.borderTopWidth;if(r.borderBottomWidth===g&&r.borderRightWidth===g&&r.borderLeftWidth===g){var p=(parseFloat(g)||0)/m;p&&(i.lineWidth=p)}else i.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/m,right:(parseFloat(r.borderRightWidth)||0)/m,bottom:(parseFloat(r.borderBottomWidth)||0)/m,left:(parseFloat(r.borderLeftWidth)||0)/m},i.lineWidth.top||(i.lineWidth.right?h="borderRightColor":i.lineWidth.bottom?h="borderBottomColor":i.lineWidth.left&&(h="borderLeftColor"));var j=Rf(t,function(S){return s.getComputedStyle(S)[h]});j!=null&&(i.lineColor=j);var N=["left","right","center","justify"];N.indexOf(r.textAlign)!==-1&&(i.halign=r.textAlign),N=["middle","bottom","top"],N.indexOf(r.verticalAlign)!==-1&&(i.valign=r.verticalAlign);var w=parseInt(r.fontSize||"");isNaN(w)||(i.fontSize=w/o);var y=sk(r);y&&(i.fontStyle=y);var _=(r.fontFamily||"").toLowerCase();return e.indexOf(_)!==-1&&(i.font=_),i}function sk(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function Rf(e,t){var n=wx(e,t);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var s=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],i=parseInt(r[4]);return i===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function wx(e,t){var n=t(e);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?e.parentElement==null?null:wx(e.parentElement,t):n}function ik(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],r=96/(72/t),s=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=n.map(function(l){return parseInt(l||"0")/r}),o=oh(i,0);return s>o.top&&(o.top=s),s>o.bottom&&(o.bottom=s),o}function jx(e,t,n,r,s){var i,o;r===void 0&&(r=!1),s===void 0&&(s=!1);var l;typeof t=="string"?l=n.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),h=[],m=[],g=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:h,body:m,foot:g};for(var p=0;p<l.rows.length;p++){var j=l.rows[p],N=(o=(i=j==null?void 0:j.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),w=ok(c,d,n,j,r,s);w&&(N==="thead"?h.push(w):N==="tfoot"?g.push(w):m.push(w))}return{head:h,body:m,foot:g}}function ok(e,t,n,r,s,i){for(var o=new yx(r),l=0;l<r.cells.length;l++){var c=r.cells[l],d=n.getComputedStyle(c);if(s||d.display!=="none"){var h=void 0;i&&(h=ak(e,c,t,d,n)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:h,_element:c,content:lk(c)})}}var m=n.getComputedStyle(r);if(o.length>0&&(s||m.display!=="none"))return o}function lk(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),t.innerText||t.textContent||""}function ck(e,t,n){for(var r=0,s=[e,t,n];r<s.length;r++){var i=s[r];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function rs(e,t,n,r,s){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function dk(e,t){var n=new Bo(e),r=n.getDocumentOptions(),s=n.getGlobalOptions();ck(s,r,t);var i=rs({},s,r,t),o;typeof window<"u"&&(o=window);var l=uk(s,r,t),c=hk(s,r,t),d=fk(n,i),h=mk(n,i,o);return{id:t.tableId,content:h,hooks:c,styles:l,settings:d}}function uk(e,t,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(c){if(c==="columnStyles"){var d=e[c],h=t[c],m=n[c];r.columnStyles=rs({},d,h,m)}else{var g=[e,t,n],p=g.map(function(j){return j[c]||{}});r[c]=rs({},p[0],p[1],p[2])}},i=0,o=Object.keys(r);i<o.length;i++){var l=o[i];s(l)}return r}function hk(e,t,n){for(var r=[e,t,n],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=r;i<o.length;i++){var l=o[i];l.didParseCell&&s.didParseCell.push(l.didParseCell),l.willDrawCell&&s.willDrawCell.push(l.willDrawCell),l.didDrawCell&&s.didDrawCell.push(l.didDrawCell),l.willDrawPage&&s.willDrawPage.push(l.willDrawPage),l.didDrawPage&&s.didDrawPage.push(l.didDrawPage)}return s}function fk(e,t){var n,r,s,i,o,l,c,d,h,m,g,p,j=oh(t.margin,40/e.scaleFactor()),N=(n=pk(e,t.startY))!==null&&n!==void 0?n:j.top,w;t.showFoot===!0?w="everyPage":t.showFoot===!1?w="never":w=(r=t.showFoot)!==null&&r!==void 0?r:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(s=t.showHead)!==null&&s!==void 0?s:"everyPage";var _=(i=t.useCss)!==null&&i!==void 0?i:!1,S=t.theme||(_?"plain":"striped"),C=!!t.horizontalPageBreak,q=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:_,theme:S,startY:N,margin:j,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(h=t.tableWidth)!==null&&h!==void 0?h:"auto",showHead:y,showFoot:w,tableLineWidth:(m=t.tableLineWidth)!==null&&m!==void 0?m:0,tableLineColor:(g=t.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:C,horizontalPageBreakRepeat:q,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function pk(e,t){var n=e.getLastAutoTable(),r=e.scaleFactor(),s=e.pageNumber(),i=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;i=o===s}return typeof t=="number"?t:(t==null||t===!1)&&i&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function mk(e,t,n){var r=t.head||[],s=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(n){var l=jx(e,t.html,n,o,t.useCss)||{};r=l.head||r,s=l.body||r,i=l.foot||r}else console.error("Cannot parse html in non browser environment")}var c=t.columns||gk(r,s,i);return{columns:c,head:r,body:s,foot:i}}function gk(e,t,n){var r=e[0]||t[0]||n[0]||[],s=[];return Object.keys(r).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(r)?l=r[parseInt(i)]:l=r[i],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var d=void 0;Array.isArray(r)?d=s.length:d=i+(c>0?"_".concat(c):"");var h={dataKey:d};s.push(h)}}),s}var Qp=function(){function e(t,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=t.getDocument()}return e}(),vk=function(e){vx(t,e);function t(n,r,s,i,o,l){var c=e.call(this,n,r,l)||this;return c.cell=s,c.row=i,c.column=o,c.section=i.section,c}return t}(Qp),yk=function(){function e(t,n){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,n,r,s,i,o){for(var l=0,c=n;l<c.length;l++){var d=c[l],h=new vk(t,this,r,s,i,o),m=d(h)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],m)return!1}return!0},e.prototype.callEndPageHooks=function(t,n){t.applyStyles(t.userStyles);for(var r=0,s=this.hooks.didDrawPage;r<s.length;r++){var i=s[r];i(new Qp(t,this,n))}},e.prototype.callWillDrawPageHooks=function(t,n){for(var r=0,s=this.hooks.willDrawPage;r<s.length;r++){var i=s[r];i(new Qp(t,this,n))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(s,i){return s+i.wrappedWidth},0);return n}else{var r=this.settings.margin;return t-r.left-r.right}},e}(),Nx=function(){function e(t,n,r,s,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof yx&&(this.raw=t._element,this.element=t._element),this.index=n,this.section=r,this.cells=s,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var n=this;return t.reduce(function(r,s){var i;return Math.max(r,((i=n.cells[s.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var n=this;return t.filter(function(r){var s=n.cells[r.index];return s?s.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,n){return this.getMaxCellHeight(n)<=t},e.prototype.getMinimumRowHeight=function(t,n){var r=this;return t.reduce(function(s,i){var o=r.cells[i.index];if(!o)return 0;var l=n.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),d=c+l;return d>s?d:s},0)},e}(),Sx=function(){function e(t,n,r){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(s=t.content)!==null&&s!==void 0?s:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");t=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");r=this.x+s/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:t}},e.prototype.getContentHeight=function(t,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/t*n,i=r*s+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var n=oh(this.styles.cellPadding,0);return t==="vertical"?n.top+n.bottom:t==="horizontal"?n.left+n.right:n[t]},e}(),xk=function(){function e(t,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=n,this.index=r}return e.prototype.getMaxCustomCellWidth=function(t){for(var n=0,r=0,s=t.allRows();r<s.length;r++){var i=s[r],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},e}();function bk(e,t){_k(e,t);var n=[],r=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,n.push(i)),r+=i.width});var s=t.getWidth(e.pageSize().width)-r;s&&(s=em(n,s,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),s&&(s=em(n,s,function(i){return i.minWidth})),s=Math.abs(s),!t.settings.horizontalPageBreak&&s>.1/e.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),jk(t),Nk(t,e),wk(t)}function _k(e,t){var n=e.scaleFactor(),r=t.settings.horizontalPageBreak,s=_x(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){var h=t.hooks.didParseCell;t.callCellHooks(e,h,d,i,c,null);var m=d.padding("horizontal");d.contentWidth=Tu(d.text,d.styles,e)+m;var g=Tu(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=g+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||r===!0)d.contentWidth>s?(d.minWidth=s,d.wrappedWidth=s):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var p=10/n;d.minWidth=d.styles.minCellWidth||p,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var h=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},m=h.cellWidth||h.minCellWidth;m&&typeof m=="number"&&(c.minWidth=m,c.wrappedWidth=m)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function em(e,t,n){for(var r=t,s=e.reduce(function(p,j){return p+j.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/s,c=r*l,d=o.width+c,h=n(o),m=d<h?h:d;t-=m-o.width,o.width=m}if(t=Math.round(t*1e10)/1e10,t){var g=e.filter(function(p){return t<0?p.width>n(p):!0});g.length&&(t=em(g,t,n))}return t}function wk(e){for(var t={},n=1,r=e.allRows(),s=0;s<r.length;s++)for(var i=r[s],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=t[c.index];if(n>1)n--,delete i.cells[c.index];else if(d)d.cell.height+=i.height,n=d.cell.colSpan,delete i.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var h=i.cells[c.index];if(!h)continue;if(h.height=i.height,h.rowSpan>1){var m=r.length-s,g=h.rowSpan>m?m:h.rowSpan;t[c.index]={cell:h,left:g,row:i}}}}}function jk(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var r=t[n],s=null,i=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=c.width,delete r.cells[c.index];else if(s){var d=s;delete r.cells[c.index],s=null,d.width=c.width+i}else{var d=r.cells[c.index];if(!d)continue;if(o=d.colSpan,i=0,d.colSpan>1){s=d,i+=c.width;continue}d.width=c.width+i}}}function Nk(e,t){for(var n={count:0,height:0},r=0,s=e.allRows();r<s.length;r++){for(var i=s[r],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var h=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,h+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=N2(d.text,h,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=N2(d.text,h,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var m=d.styles.overflow(d.text,h);typeof m=="string"?d.text=[m]:d.text=m}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var g=d.contentHeight/d.rowSpan;d.rowSpan>1&&n.count*n.height<g*d.rowSpan?n={height:g,count:d.rowSpan}:n&&n.count>0&&n.height>g&&(g=n.height),g>i.height&&(i.height=g)}}n.count--}}function N2(e,t,n,r,s){return e.map(function(i){return Sk(i,t,n,r,s)})}function Sk(e,t,n,r,s){var i=1e4*r.scaleFactor();if(t=Math.ceil(t*i)/i,t>=Tu(e,n,r))return e;for(;t<Tu(e+s,n,r)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+s}function kk(e,t){var n=new Bo(e),r=Ck(t,n.scaleFactor()),s=new yk(t,r);return bk(n,s),n.applyStyles(n.userStyles),s}function Ck(e,t){var n=e.content,r=Dk(n.columns);if(n.head.length===0){var s=S2(r,"head");s&&n.head.push(s)}if(n.foot.length===0){var s=S2(r,"foot");s&&n.foot.push(s)}var i=e.settings.theme,o=e.styles;return{columns:r,head:Of("head",n.head,r,o,i,t),body:Of("body",n.body,r,o,i,t),foot:Of("foot",n.foot,r,o,i,t)}}function Of(e,t,n,r,s,i){var o={},l=t.map(function(c,d){for(var h=0,m={},g=0,p=0,j=0,N=n;j<N.length;j++){var w=N[j];if(o[w.index]==null||o[w.index].left===0)if(p===0){var y=void 0;Array.isArray(c)?y=c[w.index-g-h]:y=c[w.dataKey];var _={};typeof y=="object"&&!Array.isArray(y)&&(_=(y==null?void 0:y.styles)||{});var S=Lk(e,w,d,s,r,i,_),C=new Sx(y,S,e);m[w.dataKey]=C,m[w.index]=C,p=C.colSpan-1,o[w.index]={left:C.rowSpan-1,times:p}}else p--,g++;else o[w.index].left--,p=o[w.index].times,h++}return new Nx(c,d,e,m)});return l}function S2(e,t){var n={};return e.forEach(function(r){if(r.raw!=null){var s=Ak(t,r.raw);s!=null&&(n[r.dataKey]=s)}}),Object.keys(n).length>0?n:null}function Ak(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Dk(e){return e.map(function(t,n){var r,s;return typeof t=="object"?s=(r=t.dataKey)!==null&&r!==void 0?r:n:s=n,new xk(s,t,n)})}function Lk(e,t,n,r,s,i,o){var l=rk(r),c;e==="head"?c=s.headStyles:e==="body"?c=s.bodyStyles:e==="foot"&&(c=s.footStyles);var d=rs({},l.table,l[e],s.styles,c),h=s.columnStyles[t.dataKey]||s.columnStyles[t.index]||{},m=e==="body"?h:{},g=e==="body"&&n%2===0?rs({},l.alternateRow,s.alternateRowStyles):{},p=nk(i),j=rs({},p,d,g,m);return rs(j,o)}function Ek(e,t,n){var r;n===void 0&&(n={});var s=_x(e,t),i=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(g){var p=t.columns.find(function(j){return j.dataKey===g||j.index===g});p&&!i.has(p.index)&&(i.set(p.index,!0),o.push(p.index),l.push(t.columns[p.index]),s-=p.wrappedWidth)});for(var d=!0,h=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;h<t.columns.length;){if(i.has(h)){h++;continue}var m=t.columns[h].wrappedWidth;if(d||s>=m)d=!1,o.push(h),l.push(t.columns[h]),s-=m;else break;h++}return{colIndexes:o,columns:l,lastIndex:h-1}}function Pk(e,t){for(var n=[],r=0;r<t.columns.length;r++){var s=Ek(e,t,{start:r});s.columns.length&&(n.push(s),r=s.lastIndex)}return n}function qk(e,t){var n=t.settings,r=n.startY,s=n.margin,i={x:s.left,y:r},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=r+s.bottom+o;if(n.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(g,p){return g+p.height},0);l+=d}var h=new Bo(e);(n.pageBreak==="always"||n.startY!=null&&l>h.pageSize().height)&&(Cx(h),i.y=s.top),t.callWillDrawPageHooks(h,i);var m=rs({},i);t.startPageNumber=h.pageNumber(),n.horizontalPageBreak?Tk(h,t,m,i):(h.applyStyles(h.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(g){return cs(h,t,g,i,t.columns)}),h.applyStyles(h.userStyles),t.body.forEach(function(g,p){var j=p===t.body.length-1;Iu(h,t,g,j,m,i,t.columns)}),h.applyStyles(h.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(g){return cs(h,t,g,i,t.columns)})),xx(h,t,m,i),t.callEndPageHooks(h,i),t.finalY=i.y,e.lastAutoTable=t,h.applyStyles(h.userStyles)}function Tk(e,t,n,r){var s=Pk(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(d,h){e.applyStyles(e.userStyles),h>0?nc(e,t,n,r,d.columns,!0):k2(e,t,r,d.columns),Ik(e,t,n,r,d.columns),Mf(e,t,r,d.columns)});else for(var o=-1,l=s[0],c=function(){var d=o;if(l){e.applyStyles(e.userStyles);var h=l.columns;o>=0?nc(e,t,n,r,h,!0):k2(e,t,r,h),d=C2(e,t,o+1,r,h),Mf(e,t,r,h)}var m=d-o;s.slice(1).forEach(function(g){e.applyStyles(e.userStyles),nc(e,t,n,r,g.columns,!0),C2(e,t,o+1,r,g.columns,m),Mf(e,t,r,g.columns)}),o=d};o<t.body.length-1;)c()}function k2(e,t,n,r){var s=t.settings;e.applyStyles(e.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&t.head.forEach(function(i){return cs(e,t,i,n,r)})}function Ik(e,t,n,r,s){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;Iu(e,t,i,l,n,r,s)})}function C2(e,t,n,r,s,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(n+i,t.body.length),l=-1;return t.body.slice(n,o).forEach(function(c,d){var h=n+d===t.body.length-1,m=kx(e,t,h,r);c.canEntireRowFit(m,s)&&(cs(e,t,c,r,s),l=n+d)}),l}function Mf(e,t,n,r){var s=t.settings;e.applyStyles(e.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&t.foot.forEach(function(i){return cs(e,t,i,n,r)})}function Fk(e,t,n){var r=n.getLineHeight(e.styles.fontSize),s=e.padding("vertical"),i=Math.floor((t-s)/r);return Math.max(0,i)}function Rk(e,t,n,r){var s={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=n.columns;o<l.length;o++){var c=l[o],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var h=new Sx(d.raw,d.styles,d.section);h=rs(h,d),h.text=[];var m=Fk(d,t,r);d.text.length>m&&(h.text=d.text.splice(m,d.text.length));var g=r.scaleFactor(),p=r.getLineHeightFactor();d.contentHeight=d.getContentHeight(g,p),d.contentHeight>=t&&(d.contentHeight=t,h.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),h.contentHeight=h.getContentHeight(g,p),h.contentHeight>i&&(i=h.contentHeight),s[c.index]=h}}var j=new Nx(e.raw,-1,e.section,s,!0);j.height=i;for(var N=0,w=n.columns;N<w.length;N++){var c=w[N],h=j.cells[c.index];h&&(h.height=j.height);var d=e.cells[c.index];d&&(d.height=e.height)}return j}function Ok(e,t,n,r){var s=e.pageSize().height,i=r.settings.margin,o=i.top+i.bottom,l=s-o;t.section==="body"&&(l-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=t.getMinimumRowHeight(r.columns,e),d=c<n;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var h=t.hasRowSpan(r.columns),m=t.getMaxCellHeight(r.columns)>l;return m?(h&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||r.settings.rowPageBreak==="avoid")}function Iu(e,t,n,r,s,i,o){var l=kx(e,t,r,i);if(n.canEntireRowFit(l,o))cs(e,t,n,i,o);else if(Ok(e,n,l,t)){var c=Rk(n,l,t,e);cs(e,t,n,i,o),nc(e,t,s,i,o),Iu(e,t,c,r,s,i,o)}else nc(e,t,s,i,o),Iu(e,t,n,r,s,i,o)}function cs(e,t,n,r,s){r.x=t.settings.margin.left;for(var i=0,o=s;i<o.length;i++){var l=o[i],c=n.cells[l.index];if(!c){r.x+=l.width;continue}e.applyStyles(c.styles),c.x=r.x,c.y=r.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,n,l,r);if(d===!1){r.x+=l.width;continue}Mk(e,c,r);var h=c.getTextPos();gx(c.text,h.x,h.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,n,l,r),r.x+=l.width}r.y+=n.height}function Mk(e,t,n){var r=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof r.lineWidth=="number"){var s=bx(r.lineWidth,r.fillColor);s&&e.rect(t.x,n.y,t.width,t.height,s)}else typeof r.lineWidth=="object"&&(r.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),Bk(e,t,n,r.lineWidth))}function Bk(e,t,n,r){var s,i,o,l;r.top&&(s=n.x,i=n.y,o=n.x+t.width,l=n.y,r.right&&(o+=.5*r.right),r.left&&(s-=.5*r.left),c(r.top,s,i,o,l)),r.bottom&&(s=n.x,i=n.y+t.height,o=n.x+t.width,l=n.y+t.height,r.right&&(o+=.5*r.right),r.left&&(s-=.5*r.left),c(r.bottom,s,i,o,l)),r.left&&(s=n.x,i=n.y,o=n.x,l=n.y+t.height,r.top&&(i-=.5*r.top),r.bottom&&(l+=.5*r.bottom),c(r.left,s,i,o,l)),r.right&&(s=n.x+t.width,i=n.y,o=n.x+t.width,l=n.y+t.height,r.top&&(i-=.5*r.top),r.bottom&&(l+=.5*r.bottom),c(r.right,s,i,o,l));function c(d,h,m,g,p){e.getDocument().setLineWidth(d),e.getDocument().line(h,m,g,p,"S")}}function kx(e,t,n,r){var s=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&n)&&(s+=t.getFootHeight(t.columns)),e.pageSize().height-r.y-s}function nc(e,t,n,r,s,i){s===void 0&&(s=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return cs(e,t,l,r,s)}),t.callEndPageHooks(e,r);var o=t.settings.margin;xx(e,t,n,r),Cx(e),t.pageNumber++,r.x=o.left,r.y=o.top,n.y=o.top,t.callWillDrawPageHooks(e,r),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return cs(e,t,l,r,s)}),e.applyStyles(e.userStyles))}function Cx(e){var t=e.pageNumber();e.setPage(t+1);var n=e.pageNumber();return n===t?(e.addPage(),!0):!1}function Uk(e){e.API.autoTable=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],s=dk(this,r),i=kk(this,s);return qk(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,n,r,s){gx(t,n,r,s,this)},e.API.autoTableSetDefaults=function(t){return Bo.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,n){Bo.setDefaults(t,n)},e.API.autoTableHtmlToJson=function(t,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Bo(this),i=jx(s,t,window,n,!1),o=i.head,l=i.body,c=((r=o[0])===null||r===void 0?void 0:r.map(function(d){return d.content}))||[];return{columns:c,rows:l,data:l}}}var Bf;try{if(typeof window<"u"&&window){var A2=window,D2=A2.jsPDF||((Bf=A2.jspdf)===null||Bf===void 0?void 0:Bf.jsPDF);D2&&Uk(D2)}}catch(e){console.error("Could not apply autoTable plugin",e)}function zk(){const[e,t]=R.useState({totalBookings:0,approvalRate:0,popularEquipment:[],bookingsByDepartment:{},bookingsByStatus:{},filteredBookings:[]}),[n,r]=R.useState(!0),[s,i]=R.useState("all"),[o,l]=R.useState("all"),[c,d]=R.useState(""),[h,m]=R.useState(""),[g,p]=R.useState([]),[j,N]=R.useState([]),[w,y]=R.useState([]);R.useEffect(()=>{_()},[]),R.useEffect(()=>{w.length>0&&S()},[s,o,c,h,w]);const _=async()=>{try{const E=await xe.query("bookings"),x=await xe.query("equipment"),A=await xe.query("users");y(E),N(A);const U=[...new Set(A.map(L=>L.department))].filter(Boolean);p(U)}catch(E){console.error("Failed to load data:",E)}finally{r(!1)}},S=async()=>{try{const E=await xe.query("equipment");let x=[...w];s!=="all"&&(x=x.filter(te=>{const oe=j.find(Z=>Z.id===te.user_id);return(oe==null?void 0:oe.department)===s})),o!=="all"&&(x=x.filter(te=>te.user_id===o)),c&&(x=x.filter(te=>new Date(te.start_date)>=new Date(c))),h&&(x=x.filter(te=>new Date(te.start_date)<=new Date(h)));const A=x.filter(te=>te.status!=="pending").length,U=x.filter(te=>te.status==="approved").length,L=A>0?Math.round(U/A*100):0,O={};x.forEach(te=>{O[te.equipment_id]=(O[te.equipment_id]||0)+1});const P=Object.entries(O).sort((te,oe)=>oe[1]-te[1]).slice(0,5).map(([te,oe])=>{const Z=E.find(se=>se.id===te);return{name:(Z==null?void 0:Z.product_name)||"Unknown",count:oe}}),T={};for(const te of x){const oe=j.find(se=>se.id===te.user_id),Z=(oe==null?void 0:oe.department)||"Unknown";T[Z]=(T[Z]||0)+1}const X={};x.forEach(te=>{X[te.status]=(X[te.status]||0)+1}),t({totalBookings:x.length,approvalRate:L,popularEquipment:P,bookingsByDepartment:T,bookingsByStatus:X,filteredBookings:x})}catch(E){console.error("Failed to calculate analytics:",E)}},C=async()=>{try{const E=new He,x=E.internal.pageSize.getWidth(),A=E.internal.pageSize.getHeight(),U=[156,39,176],L=[243,229,245],O=[26,26,26],P=[84,110,122];E.setFillColor(...U),E.rect(0,0,x,45,"F"),E.setTextColor(255,255,255),E.setFontSize(24),E.setFont("helvetica","bold"),E.text("NCAD Equipment Booking System",x/2,20,{align:"center"}),E.setFontSize(14),E.setFont("helvetica","normal"),E.text("Analytics & Reports",x/2,30,{align:"center"}),E.setFontSize(9),E.setTextColor(255,255,255),E.text(`Generated: ${new Date().toLocaleString("en-IE")}`,x/2,38,{align:"center"});let T=55;E.setFillColor(...L),E.roundedRect(14,T,x-28,25,2,2,"F"),E.setTextColor(...O),E.setFontSize(10),E.setFont("helvetica","bold"),E.text("Applied Filters:",20,T+7),E.setFont("helvetica","normal"),E.setFontSize(9);let X=[];if(s!=="all"&&X.push(`Department: ${s}`),o!=="all"){const D=j.find(H=>H.id===o);X.push(`User: ${(D==null?void 0:D.full_name)||"Unknown"}`)}c&&X.push(`From: ${new Date(c).toLocaleDateString("en-IE")}`),h&&X.push(`To: ${new Date(h).toLocaleDateString("en-IE")}`),X.length===0&&X.push("No filters applied - showing all data"),E.text(X.join("  "),20,T+15),T=90,E.setFontSize(12),E.setFont("helvetica","bold"),E.setTextColor(...U),E.text("Summary Statistics",20,T),T+=10,E.autoTable({startY:T,head:[["Metric","Value"]],body:[["Total Bookings",e.totalBookings.toString()],["Approval Rate",`${e.approvalRate}%`],["Pending Bookings",(e.bookingsByStatus.pending||0).toString()],["Approved Bookings",(e.bookingsByStatus.approved||0).toString()],["Rejected Bookings",(e.bookingsByStatus.rejected||0).toString()]],theme:"grid",headStyles:{fillColor:U,textColor:[255,255,255],fontStyle:"bold",fontSize:10},bodyStyles:{fontSize:9,textColor:O},alternateRowStyles:{fillColor:[250,250,250]},margin:{left:20,right:20}}),T=E.lastAutoTable.finalY+15,T>A-80&&(E.addPage(),T=20),E.setFontSize(12),E.setFont("helvetica","bold"),E.setTextColor(...U),E.text("Top 5 Popular Equipment",20,T),T+=5;const te=e.popularEquipment.map(D=>[D.name,D.count.toString(),`${Math.round(D.count/e.totalBookings*100)}%`]);E.autoTable({startY:T,head:[["Equipment Name","Bookings","Usage %"]],body:te,theme:"grid",headStyles:{fillColor:U,textColor:[255,255,255],fontStyle:"bold",fontSize:10},bodyStyles:{fontSize:9,textColor:O},alternateRowStyles:{fillColor:[250,250,250]},margin:{left:20,right:20}}),T=E.lastAutoTable.finalY+15,T>A-60&&(E.addPage(),T=20),E.setFontSize(12),E.setFont("helvetica","bold"),E.setTextColor(...U),E.text("Bookings by Department",20,T),T+=5;const oe=Object.entries(e.bookingsByDepartment).map(([D,H])=>[D,H.toString(),`${Math.round(H/e.totalBookings*100)}%`]);E.autoTable({startY:T,head:[["Department","Bookings","Percentage"]],body:oe,theme:"grid",headStyles:{fillColor:U,textColor:[255,255,255],fontStyle:"bold",fontSize:10},bodyStyles:{fontSize:9,textColor:O},alternateRowStyles:{fillColor:[250,250,250]},margin:{left:20,right:20}}),T=E.lastAutoTable.finalY+15,T>A-60&&(E.addPage(),T=20),E.setFontSize(12),E.setFont("helvetica","bold"),E.setTextColor(...U),E.text("Bookings by Status",20,T),T+=5;const Z=Object.entries(e.bookingsByStatus).map(([D,H])=>[D.charAt(0).toUpperCase()+D.slice(1),H.toString(),`${Math.round(H/e.totalBookings*100)}%`]);E.autoTable({startY:T,head:[["Status","Count","Percentage"]],body:Z,theme:"grid",headStyles:{fillColor:U,textColor:[255,255,255],fontStyle:"bold",fontSize:10},bodyStyles:{fontSize:9,textColor:O},alternateRowStyles:{fillColor:[250,250,250]},margin:{left:20,right:20}});const se=E.internal.getNumberOfPages();for(let D=1;D<=se;D++)E.setPage(D),E.setFontSize(8),E.setTextColor(...P),E.setFont("helvetica","normal"),E.text("NCAD Equipment Booking System - Confidential",x/2,A-10,{align:"center"}),E.text(`Page ${D} of ${se}`,x-20,A-10,{align:"right"});const de=`NCAD_Analytics_Report_${new Date().toISOString().split("T")[0]}.pdf`;E.save(de),alert("PDF report generated successfully!")}catch(E){console.error("Failed to generate PDF:",E),alert("Failed to generate PDF report. Please try again.")}},q=()=>{try{const E={};let x=`Booking ID,User,Department,Equipment,Start Date,End Date,Status,Created
`;e.filteredBookings.forEach(O=>{const P=j.find(X=>X.id===O.user_id),T=E[O.equipment_id]||"Unknown";x+=`${O.id},"${(P==null?void 0:P.full_name)||"Unknown"}","${(P==null?void 0:P.department)||"Unknown"}","${T}",${O.start_date},${O.end_date},${O.status},${O.created_at}
`});const A=new Blob([x],{type:"text/csv"}),U=window.URL.createObjectURL(A),L=document.createElement("a");L.href=U,L.download=`analytics_${new Date().toISOString().split("T")[0]}.csv`,L.click(),window.URL.revokeObjectURL(U)}catch(E){console.error("Failed to export CSV:",E),alert("Failed to export CSV. Please try again.")}},W=()=>{i("all"),l("all"),d(""),m("")};return n?a.jsx("div",{className:"loading",children:"Loading analytics..."}):a.jsxs("div",{className:"analytics-dashboard",children:[a.jsxs("div",{className:"analytics-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Analytics & Reports"}),a.jsx("p",{className:"subtitle",children:"Filter and export booking statistics"})]}),a.jsxs("div",{className:"analytics-actions",children:[a.jsx("button",{onClick:q,className:"btn btn-secondary",children:" Export CSV"}),a.jsx("button",{onClick:C,className:"btn btn-primary",children:" Generate PDF Report"})]})]}),a.jsxs("div",{className:"analytics-filters",children:[a.jsx("h3",{children:"Filters"}),a.jsxs("div",{className:"filter-grid",children:[a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{htmlFor:"filter-department",children:"Department"}),a.jsxs("select",{id:"filter-department",value:s,onChange:E=>i(E.target.value),className:"select-input",children:[a.jsx("option",{value:"all",children:"All Departments"}),g.map(E=>a.jsx("option",{value:E,children:E},E))]})]}),a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{htmlFor:"filter-user",children:"User"}),a.jsxs("select",{id:"filter-user",value:o,onChange:E=>l(E.target.value),className:"select-input",children:[a.jsx("option",{value:"all",children:"All Users"}),j.map(E=>a.jsxs("option",{value:E.id,children:[E.full_name," (",E.department,")"]},E.id))]})]}),a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{htmlFor:"filter-start-date",children:"Start Date"}),a.jsx("input",{id:"filter-start-date",type:"date",value:c,onChange:E=>d(E.target.value),className:"date-input"})]}),a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{htmlFor:"filter-end-date",children:"End Date"}),a.jsx("input",{id:"filter-end-date",type:"date",value:h,onChange:E=>m(E.target.value),className:"date-input"})]}),a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{children:""}),a.jsx("button",{onClick:W,className:"btn btn-secondary btn-reset",children:"Reset Filters"})]})]})]}),a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-card stat-primary",children:[a.jsx("div",{className:"stat-icon",style:{background:"var(--master-bg-tertiary)",color:"var(--master-accent-primary)"},children:""}),a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:e.totalBookings}),a.jsx("p",{children:"Total Bookings"})]})]}),a.jsxs("div",{className:"stat-card stat-success",children:[a.jsx("div",{className:"stat-icon",style:{background:"#F3E5F5",color:"#7B1FA2"},children:""}),a.jsxs("div",{className:"stat-content",children:[a.jsxs("h3",{children:[e.approvalRate,"%"]}),a.jsx("p",{children:"Approval Rate"})]})]})]}),a.jsxs("div",{className:"analytics-grid",children:[a.jsxs("div",{className:"analytics-card",children:[a.jsx("h3",{children:"Popular Equipment"}),a.jsx("div",{className:"chart-list",children:e.popularEquipment.length>0?e.popularEquipment.map((E,x)=>a.jsxs("div",{className:"chart-item",children:[a.jsx("span",{className:"item-name",children:E.name}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${E.count/e.totalBookings*100}%`,background:"var(--master-accent-primary)"}})}),a.jsxs("span",{className:"item-count",children:[E.count," bookings"]})]},x)):a.jsx("p",{className:"empty-message",children:"No data available"})})]}),a.jsxs("div",{className:"analytics-card",children:[a.jsx("h3",{children:"Bookings by Department"}),a.jsx("div",{className:"chart-list",children:Object.entries(e.bookingsByDepartment).length>0?Object.entries(e.bookingsByDepartment).map(([E,x])=>a.jsxs("div",{className:"chart-item",children:[a.jsx("span",{className:"item-name",children:E}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${x/e.totalBookings*100}%`,background:"var(--master-accent-primary)"}})}),a.jsx("span",{className:"item-count",children:x})]},E)):a.jsx("p",{className:"empty-message",children:"No data available"})})]}),a.jsxs("div",{className:"analytics-card",children:[a.jsx("h3",{children:"Bookings by Status"}),a.jsx("div",{className:"chart-list",children:Object.entries(e.bookingsByStatus).length>0?Object.entries(e.bookingsByStatus).map(([E,x])=>a.jsxs("div",{className:"chart-item",children:[a.jsx("span",{className:"item-name",children:E}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${x/e.totalBookings*100}%`,background:"var(--master-accent-primary)"}})}),a.jsx("span",{className:"item-count",children:x})]},E)):a.jsx("p",{className:"empty-message",children:"No data available"})})]})]})]})}function $k(){const{user:e}=xr(),[t,n]=R.useState([]),[r,s]=R.useState(!0),[i,o]=R.useState({serviceId:"",publicKey:"",templateConfirm:"",templateApproved:"",templateDenied:"",templateOverdue:"",templateReminder:""}),[l,c]=R.useState(!1),[d,h]=R.useState("");R.useEffect(()=>{m(),g()},[]);const m=async()=>{try{const w=await xe.query("featureFlags");n(w)}catch(w){console.error("Failed to load feature flags:",w)}finally{s(!1)}},g=()=>{const w=Un.getConfig();o({serviceId:w.serviceId,publicKey:w.publicKey,templateConfirm:w.templates.bookingConfirmation,templateApproved:w.templates.bookingApproved,templateDenied:w.templates.bookingDenied,templateOverdue:w.templates.bookingOverdue,templateReminder:w.templates.bookingReminder})},p=()=>{if(e.role!=="master_admin"){alert("Only master admins can update email configuration");return}Un.updateConfig({serviceId:i.serviceId,publicKey:i.publicKey,templates:{bookingConfirmation:i.templateConfirm,bookingApproved:i.templateApproved,bookingDenied:i.templateDenied,bookingOverdue:i.templateOverdue,bookingReminder:i.templateReminder}}),alert("Email configuration saved successfully!"),c(!1)},j=async w=>{h(`Testing ${w} email...`);const y={id:"TEST123",start_date:new Date().toISOString(),end_date:new Date(Date.now()+864e5*3).toISOString(),purpose:"Test booking for email verification"},_=[{product_name:"Test Equipment (Canon EOS R5)"}];try{let S;switch(w){case"confirmation":S=await Un.sendBookingConfirmation(y,e,_);break;case"approved":S=await Un.sendBookingApproved(y,e,_,e);break;case"denied":S=await Un.sendBookingDenied(y,e,_,e,"Test denial reason");break;case"overdue":S=await Un.sendOverdueReminder(y,e,_,3);break;case"reminder":S=await Un.sendBookingReminder(y,e,_,2);break}S.success?h(` ${w} email sent successfully!`):h(` Failed: ${S.error}`)}catch(S){h(` Error: ${S.message}`)}setTimeout(()=>h(""),5e3)},N=async w=>{if(e.role!=="master_admin"){alert("Only master admins can toggle feature flags");return}try{const y=t.find(_=>_.id===w);await xe.update("featureFlags",{id:w},{enabled:!y.enabled,updated_by:e.id,updated_at:new Date().toISOString()}),await m(),alert(`Feature flag ${y.enabled?"disabled":"enabled"} successfully`)}catch(y){alert("Failed to toggle feature flag: "+y.message)}};return r?a.jsx("div",{className:"loading",children:"Loading feature flags..."}):a.jsxs("div",{className:"feature-flags",children:[a.jsx("h2",{children:"Feature Flag Management"}),a.jsx("p",{className:"subtitle",children:"Control system-wide features and access"}),e.role!=="master_admin"&&a.jsx("div",{className:"warning-banner",children:" You are viewing feature flags in read-only mode. Only Master Admins can toggle flags."}),a.jsx("div",{className:"flags-list",children:t.map(w=>a.jsxs("div",{className:"flag-item",children:[a.jsxs("div",{className:"flag-info",children:[a.jsx("h3",{children:w.name.replace(/_/g," ").toUpperCase()}),a.jsx("p",{className:"flag-description",children:w.description}),a.jsx("p",{className:"flag-meta",children:a.jsx("span",{className:"role-badge",children:w.required_role})})]}),a.jsxs("div",{className:"flag-toggle",children:[a.jsxs("label",{className:"switch",children:[a.jsx("input",{type:"checkbox",checked:w.enabled,onChange:()=>N(w.id),disabled:e.role!=="master_admin"}),a.jsx("span",{className:"slider"})]}),a.jsx("span",{className:w.enabled?"status-enabled":"status-disabled",children:w.enabled?"Enabled":"Disabled"})]})]},w.id))}),a.jsxs("div",{className:"flags-info",children:[a.jsx("h3",{children:"About Feature Flags"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Room Booking:"})," Allows staff to book rooms and spaces by the hour"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Analytics Export:"})," Enables CSV/PDF export of analytics data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"CSV Import:"})," Allows bulk import of users and equipment"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Interdisciplinary Access:"})," Permits cross-department equipment borrowing"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Advanced Reporting:"})," Unlocks detailed reporting features"]})]})]}),a.jsxs("div",{className:"email-config-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:" Email Notifications Configuration"}),a.jsx("button",{onClick:()=>c(!l),className:"btn btn-secondary btn-sm",disabled:e.role!=="master_admin",children:l?"Hide":"Configure EmailJS"})]}),a.jsxs("div",{className:"email-status",children:[Un.isConfigured()?a.jsx("span",{className:"status-badge status-success",children:" EmailJS Configured"}):a.jsx("span",{className:"status-badge status-warning",children:" EmailJS Not Configured"}),a.jsxs("p",{className:"help-text",children:["Email notifications are sent automatically for booking confirmations, approvals, and denials.",a.jsx("br",{}),"See ",a.jsx("code",{children:"EMAIL_TEMPLATES.md"})," for setup instructions."]})]}),l&&a.jsxs("div",{className:"email-config-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"serviceId",children:"EmailJS Service ID"}),a.jsx("input",{id:"serviceId",type:"text",value:i.serviceId,onChange:w=>o({...i,serviceId:w.target.value}),placeholder:"service_xxxxxxxxx",disabled:e.role!=="master_admin"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"publicKey",children:"EmailJS Public Key"}),a.jsx("input",{id:"publicKey",type:"text",value:i.publicKey,onChange:w=>o({...i,publicKey:w.target.value}),placeholder:"Your public key",disabled:e.role!=="master_admin"})]})]}),a.jsx("h3",{children:"Email Template IDs"}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"templateConfirm",children:"Booking Confirmation"}),a.jsx("input",{id:"templateConfirm",type:"text",value:i.templateConfirm,onChange:w=>o({...i,templateConfirm:w.target.value}),placeholder:"template_booking_confirm",disabled:e.role!=="master_admin"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"templateApproved",children:"Booking Approved"}),a.jsx("input",{id:"templateApproved",type:"text",value:i.templateApproved,onChange:w=>o({...i,templateApproved:w.target.value}),placeholder:"template_booking_approved",disabled:e.role!=="master_admin"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"templateDenied",children:"Booking Denied"}),a.jsx("input",{id:"templateDenied",type:"text",value:i.templateDenied,onChange:w=>o({...i,templateDenied:w.target.value}),placeholder:"template_booking_denied",disabled:e.role!=="master_admin"})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"templateOverdue",children:"Overdue Reminder"}),a.jsx("input",{id:"templateOverdue",type:"text",value:i.templateOverdue,onChange:w=>o({...i,templateOverdue:w.target.value}),placeholder:"template_booking_overdue",disabled:e.role!=="master_admin"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"templateReminder",children:"Booking Reminder"}),a.jsx("input",{id:"templateReminder",type:"text",value:i.templateReminder,onChange:w=>o({...i,templateReminder:w.target.value}),placeholder:"template_booking_reminder",disabled:e.role!=="master_admin"})]})]}),a.jsx("div",{className:"form-actions",children:a.jsx("button",{onClick:p,className:"btn btn-primary",disabled:e.role!=="master_admin",children:"Save Configuration"})}),Un.isConfigured()&&a.jsxs("div",{className:"email-test-section",children:[a.jsx("h3",{children:"Test Email Templates"}),a.jsxs("p",{className:"help-text",children:["Send test emails to ",e.email]}),a.jsxs("div",{className:"test-buttons",children:[a.jsx("button",{onClick:()=>j("confirmation"),className:"btn btn-secondary btn-sm",children:"Test Confirmation"}),a.jsx("button",{onClick:()=>j("approved"),className:"btn btn-secondary btn-sm",children:"Test Approved"}),a.jsx("button",{onClick:()=>j("denied"),className:"btn btn-secondary btn-sm",children:"Test Denied"}),a.jsx("button",{onClick:()=>j("overdue"),className:"btn btn-secondary btn-sm",children:"Test Overdue"}),a.jsx("button",{onClick:()=>j("reminder"),className:"btn btn-secondary btn-sm",children:"Test Reminder"})]}),d&&a.jsx("div",{className:"test-status",children:d})]})]})]})]})}function Wk(){const{user:e}=sn(),[t,n]=R.useState([]),[r,s]=R.useState([]),[i,o]=R.useState(!0),[l,c]=R.useState("all"),[d,h]=R.useState("all"),[m,g]=R.useState(""),[p,j]=R.useState(1),N=20,[w,y]=R.useState(!1),[_,S]=R.useState(!1),[C,q]=R.useState(null),[W,E]=R.useState({email:"",password:"",first_name:"",surname:"",role:"student",department:"Moving Image"});if(e.role!=="master_admin")return a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only Master Admins can manage users."})]});R.useEffect(()=>{x()},[l,d]),R.useEffect(()=>{let ee=t;if(m.trim()){const de=m.toLowerCase();ee=ee.filter(D=>D.full_name.toLowerCase().includes(de)||D.email.toLowerCase().includes(de))}s(ee),j(1)},[t,m]);const x=async()=>{o(!0);try{let ee={};l!=="all"&&(ee.role=l),d!=="all"&&(ee.department=d);let de=await xe.query("users",ee);n(de)}catch(ee){console.error("Failed to load users:",ee)}finally{o(!1)}},A=async()=>{if(!W.email||!W.password||!W.first_name||!W.surname){alert("Please fill in all required fields");return}try{const ee={id:Date.now().toString(),...W,full_name:`${W.first_name} ${W.surname}`,created_at:new Date().toISOString().split("T")[0]};await xe.insert("users",ee),y(!1),E({email:"",password:"",first_name:"",surname:"",role:"student",department:"Moving Image"}),x(),alert("User created successfully")}catch(ee){alert("Failed to create user: "+ee.message)}},U=async()=>{if(!W.first_name||!W.surname){alert("Please fill in all required fields");return}try{const ee={...W,full_name:`${W.first_name} ${W.surname}`};await xe.update("users",{id:C.id},ee),S(!1),q(null),x(),alert("User updated successfully")}catch(ee){alert("Failed to update user: "+ee.message)}},L=async(ee,de)=>{if(["1","2","3","4"].includes(ee)){alert("Cannot delete demo test accounts");return}if(confirm(`Are you sure you want to delete ${de}? This action cannot be undone.`))try{await xe.delete("users",{id:ee}),x(),alert("User deleted successfully")}catch(D){alert("Failed to delete user: "+D.message)}},O=ee=>{q(ee),E({email:ee.email,password:ee.password,first_name:ee.first_name,surname:ee.surname,role:ee.role,department:ee.department}),S(!0)},P=["Moving Image","Graphic Design","Illustration","Administration"],T=[{value:"student",label:"Student"},{value:"staff",label:"Staff"},{value:"admin",label:"Admin"},{value:"master_admin",label:"Master Admin"}],X=ee=>{g(ee)},te=ee=>{j(ee),window.scrollTo({top:0,behavior:"smooth"})},oe=(p-1)*N,Z=oe+N,se=r.slice(oe,Z);return a.jsxs("div",{className:"user-management",children:[a.jsx("h2",{children:"User Management"}),a.jsx("p",{className:"subtitle",children:"Manage user accounts, roles, and permissions"}),a.jsx(ah,{onSearch:X,placeholder:"Search by name or email...",ariaLabel:"Search users"}),a.jsx("div",{className:"management-controls",children:a.jsxs("div",{className:"filter-controls",children:[a.jsxs("select",{value:l,onChange:ee=>c(ee.target.value),className:"select-input",children:[a.jsx("option",{value:"all",children:"All Roles"}),T.map(ee=>a.jsx("option",{value:ee.value,children:ee.label},ee.value))]}),a.jsxs("select",{value:d,onChange:ee=>h(ee.target.value),className:"select-input",children:[a.jsx("option",{value:"all",children:"All Departments"}),P.map(ee=>a.jsx("option",{value:ee,children:ee},ee))]}),a.jsx("button",{onClick:()=>y(!0),className:"btn btn-primary",children:"+ Add User"})]})}),i?a.jsx("div",{className:"users-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:a.jsx(jc,{type:"table-row",count:10})})]})}):r.length===0?a.jsx("div",{className:"empty-state",children:a.jsxs("p",{children:["No users found",m?" matching your search":""]})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"users-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:se.map(ee=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:ee.full_name})}),a.jsx("td",{children:ee.email}),a.jsx("td",{children:a.jsx("span",{className:`role-badge role-${ee.role}`,children:ee.role.replace("_"," ")})}),a.jsx("td",{children:ee.department}),a.jsx("td",{children:new Date(ee.created_at).toLocaleDateString("en-IE")}),a.jsx("td",{children:a.jsxs("div",{className:"action-buttons",children:[a.jsx("button",{onClick:()=>O(ee),className:"btn btn-secondary btn-sm",children:"Edit"}),a.jsx("button",{onClick:()=>L(ee.id,ee.full_name),className:"btn btn-danger btn-sm",disabled:["1","2","3","4"].includes(ee.id),children:"Delete"})]})})]},ee.id))})]})}),a.jsx(wc,{currentPage:p,totalItems:r.length,itemsPerPage:N,onPageChange:te,loading:i})]}),w&&a.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:a.jsxs("div",{className:"modal-content",onClick:ee=>ee.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Add New User"}),a.jsx("button",{className:"modal-close",onClick:()=>y(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"first-name",children:"First Name *"}),a.jsx("input",{id:"first-name",type:"text",value:W.first_name,onChange:ee=>E({...W,first_name:ee.target.value}),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"surname",children:"Surname *"}),a.jsx("input",{id:"surname",type:"text",value:W.surname,onChange:ee=>E({...W,surname:ee.target.value}),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email *"}),a.jsx("input",{id:"email",type:"email",value:W.email,onChange:ee=>E({...W,email:ee.target.value}),className:"form-input",placeholder:"user@ncad.ie"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password *"}),a.jsx("input",{id:"password",type:"password",value:W.password,onChange:ee=>E({...W,password:ee.target.value}),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"role",children:"Role *"}),a.jsx("select",{id:"role",value:W.role,onChange:ee=>E({...W,role:ee.target.value}),className:"select-input",children:T.map(ee=>a.jsx("option",{value:ee.value,children:ee.label},ee.value))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"department",children:"Department *"}),a.jsx("select",{id:"department",value:W.department,onChange:ee=>E({...W,department:ee.target.value}),className:"select-input",children:P.map(ee=>a.jsx("option",{value:ee,children:ee},ee))})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:()=>y(!1),className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:A,className:"btn btn-primary",children:"Add User"})]})]})]})}),_&&C&&a.jsx("div",{className:"modal-overlay",onClick:()=>S(!1),children:a.jsxs("div",{className:"modal-content",onClick:ee=>ee.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{children:["Edit User - ",C.full_name]}),a.jsx("button",{className:"modal-close",onClick:()=>S(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-first-name",children:"First Name *"}),a.jsx("input",{id:"edit-first-name",type:"text",value:W.first_name,onChange:ee=>E({...W,first_name:ee.target.value}),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-surname",children:"Surname *"}),a.jsx("input",{id:"edit-surname",type:"text",value:W.surname,onChange:ee=>E({...W,surname:ee.target.value}),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-email",children:"Email"}),a.jsx("input",{id:"edit-email",type:"email",value:W.email,className:"form-input",disabled:!0,title:"Email cannot be changed"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-password",children:"Password"}),a.jsx("input",{id:"edit-password",type:"password",value:W.password,onChange:ee=>E({...W,password:ee.target.value}),className:"form-input",placeholder:"Leave blank to keep current"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-role",children:"Role *"}),a.jsx("select",{id:"edit-role",value:W.role,onChange:ee=>E({...W,role:ee.target.value}),className:"select-input",children:T.map(ee=>a.jsx("option",{value:ee.value,children:ee.label},ee.value))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"edit-department",children:"Department *"}),a.jsx("select",{id:"edit-department",value:W.department,onChange:ee=>E({...W,department:ee.target.value}),className:"select-input",children:P.map(ee=>a.jsx("option",{value:ee,children:ee},ee))})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:()=>S(!1),className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:U,className:"btn btn-primary",children:"Save Changes"})]})]})]})})]})}class Hk{parseCSV(t){const n=t.trim().split(`
`);if(n.length<2)throw new Error("CSV file must contain at least a header row and one data row");const r=n[0].split(",").map(i=>i.trim().toLowerCase().replace(/^["']|["']$/g,"")),s=[];for(let i=1;i<n.length;i++){const o=n[i].trim();if(!o)continue;const l=this.parseCSVLine(o);if(l.length!==r.length){console.warn(`Row ${i+1} has ${l.length} columns, expected ${r.length}. Skipping.`);continue}const c={};r.forEach((d,h)=>{c[d]=l[h].trim()}),s.push(c)}return s}parseCSVLine(t){const n=[];let r="",s=!1;for(let i=0;i<t.length;i++){const o=t[i],l=t[i+1];o==='"'||o==="'"?s&&l===o?(r+=o,i++):s=!s:o===","&&!s?(n.push(r),r=""):r+=o}return n.push(r),n.map(i=>i.replace(/^["']|["']$/g,""))}validateUsers(t){const n=[],r=[],s=["first_name","surname","full_name","email","department"],i=["student","staff","admin","master_admin"],o=["Moving Image Design","Graphic Design","Illustration"],l=Object.keys(t[0]||{}),c=s.filter(d=>!l.includes(d));return c.length>0?(n.push(`Missing required columns: ${c.join(", ")}`),{valid:!1,errors:n,warnings:r}):(t.forEach((d,h)=>{const m=h+2;if(s.forEach(g=>{(!d[g]||d[g].trim()==="")&&n.push(`Row ${m}: Missing required field '${g}'`)}),d.email&&!this.isValidEmail(d.email)&&n.push(`Row ${m}: Invalid email format '${d.email}'`),d.role&&!i.includes(d.role)&&r.push(`Row ${m}: Invalid role '${d.role}', will default to 'student'`),d.department&&!o.includes(d.department)&&r.push(`Row ${m}: Department '${d.department}' not in standard list`),d.first_name&&d.surname&&d.full_name){const g=`${d.first_name} ${d.surname}`;d.full_name!==g&&r.push(`Row ${m}: full_name '${d.full_name}' doesn't match '${g}'`)}}),{valid:n.length===0,errors:n,warnings:r})}validateEquipment(t){const n=[],r=[],s=["product_name","tracking_number","description","link_to_image"],i=["Camera","Lens","Lighting","Audio","Tripod & Support","Computer","Printer","Scanner","Projector","Other"],o=["Moving Image Design","Graphic Design","Illustration","Shared"],l=Object.keys(t[0]||{}),c=s.filter(d=>!l.includes(d));return c.length>0?(n.push(`Missing required columns: ${c.join(", ")}`),{valid:!1,errors:n,warnings:r}):(t.forEach((d,h)=>{const m=h+2;s.forEach(g=>{(!d[g]||d[g].trim()==="")&&n.push(`Row ${m}: Missing required field '${g}'`)}),d.tracking_number&&d.tracking_number.length<3&&r.push(`Row ${m}: Tracking number '${d.tracking_number}' seems too short`),d.category&&!i.includes(d.category)&&r.push(`Row ${m}: Category '${d.category}' not in standard list`),d.department&&!o.includes(d.department)&&r.push(`Row ${m}: Department '${d.department}' not in standard list`),d.status&&!["available","booked","maintenance","out_of_service"].includes(d.status)&&r.push(`Row ${m}: Invalid status '${d.status}', will default to 'available'`)}),{valid:n.length===0,errors:n,warnings:r})}async detectUserDuplicates(t){const n=await xe.query("users"),r=[],s=[];return t.forEach(i=>{const o=n.find(l=>l.email.toLowerCase()===i.email.toLowerCase());o?r.push({row:i,existingId:o.id,existingName:o.full_name,action:"skip"}):s.push(i)}),{duplicates:r,unique:s}}async detectEquipmentDuplicates(t){const n=await xe.query("equipment"),r=[],s=[];return t.forEach(i=>{const o=n.find(l=>l.tracking_number.toLowerCase()===i.tracking_number.toLowerCase());o?r.push({row:i,existingId:o.id,existingName:o.product_name,action:"skip"}):s.push(i)}),{duplicates:r,unique:s}}async importUsers(t,n={skipDuplicates:!0,updateDuplicates:!1}){let r=0,s=0,i=0;for(const o of t)try{const c=(await xe.query("users")).find(d=>d.email.toLowerCase()===o.email.toLowerCase());if(c)n.updateDuplicates?(await xe.update("users",{id:c.id},{first_name:o.first_name,surname:o.surname,full_name:o.full_name||`${o.first_name} ${o.surname}`,department:o.department,role:o.role||"student",year:o.year||null}),i++):s++;else{const d={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,first_name:o.first_name,surname:o.surname,full_name:o.full_name||`${o.first_name} ${o.surname}`,email:o.email.toLowerCase(),department:o.department,role:o.role||"student",year:o.year||null,created_at:new Date().toISOString().split("T")[0]};await xe.insert("users",d),r++}}catch(l){console.error(`Failed to import user ${o.email}:`,l),s++}return{imported:r,skipped:s,updated:i}}async importEquipment(t,n={skipDuplicates:!0,updateDuplicates:!1}){let r=0,s=0,i=0;for(const o of t)try{const c=(await xe.query("equipment")).find(d=>d.tracking_number.toLowerCase()===o.tracking_number.toLowerCase());if(c)n.updateDuplicates?(await xe.update("equipment",{id:c.id},{product_name:o.product_name,description:o.description,category:o.category||c.category,department:o.department||c.department,link_to_image:o.link_to_image,requires_justification:o.requires_justification==="true"||o.requires_justification===!0}),i++):s++;else{const d={id:`eq${Date.now()}_${Math.random().toString(36).substr(2,9)}`,product_name:o.product_name,tracking_number:o.tracking_number,description:o.description,category:o.category||"Other",department:o.department||"Shared",status:o.status||"available",link_to_image:o.link_to_image,requires_justification:o.requires_justification==="true"||o.requires_justification===!0||!1};await xe.insert("equipment",d),r++}}catch(l){console.error(`Failed to import equipment ${o.tracking_number}:`,l),s++}return{imported:r,skipped:s,updated:i}}generateUserTemplate(){const t=["first_name","surname","full_name","email","department","role","year"],n=[["John","Doe","John Doe","john.doe@ncad.ie","Moving Image Design","student","2"],["Jane","Smith","Jane Smith","jane.smith@ncad.ie","Graphic Design","student","3"],["Bob","Admin","Bob Admin","bob.admin@ncad.ie","Moving Image Design","admin",""]];let r=t.join(",")+`
`;return n.forEach(s=>{r+=s.map(i=>`"${i}"`).join(",")+`
`}),r}generateEquipmentTemplate(){const t=["product_name","tracking_number","description","category","department","link_to_image","status","requires_justification"],n=[["Canon EOS R5","CAM001","Professional mirrorless camera","Camera","Moving Image Design","https://example.com/camera.jpg","available","true"],["Rode NTG3","AUD050","Shotgun microphone","Audio","Moving Image Design","https://example.com/mic.jpg","available","false"],['MacBook Pro 16"',"COMP020","M1 Max laptop","Computer","Shared","https://example.com/laptop.jpg","available","true"]];let r=t.join(",")+`
`;return n.forEach(s=>{r+=s.map(i=>`"${i}"`).join(",")+`
`}),r}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}}const Ja=new Hk;function Vk(){const{user:e}=xr(),[t,n]=R.useState("users"),[r,s]=R.useState(null),[i,o]=R.useState(null),[l,c]=R.useState(null),[d,h]=R.useState(null),[m,g]=R.useState(1),[p,j]=R.useState({skipDuplicates:!0,updateDuplicates:!1}),[N,w]=R.useState(null),[y,_]=R.useState(!1);if(e.role!=="master_admin")return a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only Master Admins can import CSV data."})]});const S=x=>{const A=x.target.files[0];if(A){if(!A.name.endsWith(".csv")){alert("Please select a CSV file");return}s(A)}},C=async()=>{if(!r){alert("Please select a file first");return}_(!0);try{const x=await r.text(),A=Ja.parseCSV(x);if(A.length===0){alert("CSV file is empty or invalid"),_(!1);return}const U=t==="users"?Ja.validateUsers(A):Ja.validateEquipment(A);if(!U.valid){c(U),o(null),g(2),_(!1);return}const L=t==="users"?await Ja.detectUserDuplicates(A):await Ja.detectEquipmentDuplicates(A);o(A),c(U),h(L),g(2)}catch(x){alert("Failed to parse CSV file: "+x.message)}finally{_(!1)}},q=async()=>{if(i){_(!0),g(3);try{const x=t==="users"?await Ja.importUsers(i,p):await Ja.importEquipment(i,p);w(x),g(4)}catch(x){alert("Import failed: "+x.message),g(2)}finally{_(!1)}}},W=()=>{s(null),o(null),c(null),h(null),g(1),w(null),j({skipDuplicates:!0,updateDuplicates:!1})},E=()=>{const x=t==="users"?Ja.generateUserTemplate():Ja.generateEquipmentTemplate(),A=new Blob([x],{type:"text/csv"}),U=window.URL.createObjectURL(A),L=document.createElement("a");L.href=U,L.download=`${t}_template.csv`,L.click(),window.URL.revokeObjectURL(U)};return a.jsxs("div",{className:"csv-import",children:[a.jsxs("div",{className:"import-header",children:[a.jsx("h2",{children:"CSV Import"}),a.jsx("p",{className:"subtitle",children:"Bulk import users or equipment from CSV files"})]}),m===1&&a.jsxs("div",{className:"import-step",children:[a.jsxs("div",{className:"import-type-selector",children:[a.jsxs("label",{children:[a.jsx("input",{type:"radio",value:"users",checked:t==="users",onChange:x=>n(x.target.value)}),a.jsx("span",{children:"Import Users"})]}),a.jsxs("label",{children:[a.jsx("input",{type:"radio",value:"equipment",checked:t==="equipment",onChange:x=>n(x.target.value)}),a.jsx("span",{children:"Import Equipment"})]})]}),a.jsxs("div",{className:"template-download",children:[a.jsxs("button",{onClick:E,className:"btn btn-secondary",children:[" Download ",t==="users"?"Users":"Equipment"," Template"]}),a.jsx("p",{className:"help-text",children:"Download the template CSV file to see required columns and format"})]}),a.jsxs("div",{className:"file-upload-section",children:[a.jsx("label",{htmlFor:"csv-file",className:"file-upload-label",children:r?r.name:"Choose CSV file..."}),a.jsx("input",{id:"csv-file",type:"file",accept:".csv",onChange:S,className:"file-input"})]}),a.jsx("div",{className:"import-actions",children:a.jsx("button",{onClick:C,className:"btn btn-primary",disabled:!r||y,children:y?"Processing...":"Upload and Validate"})}),a.jsxs("div",{className:"import-info",children:[a.jsxs("h3",{children:[" ",t==="users"?"User":"Equipment"," CSV Requirements"]}),t==="users"?a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Required columns:"})," first_name, surname, full_name, email, department"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Optional columns:"})," role (student/staff/admin/master_admin), year"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Valid departments:"})," Moving Image Design, Graphic Design, Illustration"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"GDPR:"})," All imports are logged and previewed before confirmation"]})]}):a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Required columns:"})," product_name, tracking_number, description, link_to_image"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Optional columns:"})," category, department, status, requires_justification"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Tracking numbers:"})," Must be unique (duplicates will be detected)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Status options:"})," available, booked, maintenance, out_of_service"]})]})]})]}),m===2&&a.jsxs("div",{className:"import-step",children:[a.jsx("h3",{children:" Validation Results"}),l&&l.errors.length>0&&a.jsxs("div",{className:"validation-errors",children:[a.jsxs("h4",{children:[" Errors (",l.errors.length,")"]}),a.jsx("ul",{children:l.errors.map((x,A)=>a.jsx("li",{className:"error-item",children:x},A))}),a.jsx("p",{className:"error-message",children:"Please fix these errors in your CSV file and try again."})]}),l&&l.warnings.length>0&&l.valid&&a.jsxs("div",{className:"validation-warnings",children:[a.jsxs("h4",{children:[" Warnings (",l.warnings.length,")"]}),a.jsx("ul",{children:l.warnings.map((x,A)=>a.jsx("li",{className:"warning-item",children:x},A))}),a.jsx("p",{className:"help-text",children:"These warnings won't stop the import, but you may want to review them."})]}),d&&l&&l.valid&&a.jsxs("div",{className:"duplicate-detection",children:[a.jsx("h4",{children:" Duplicate Detection"}),a.jsxs("div",{className:"duplicate-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-number",children:d.unique.length}),a.jsxs("span",{className:"stat-label",children:["New ",t]})]}),a.jsxs("div",{className:"stat-card warning",children:[a.jsx("span",{className:"stat-number",children:d.duplicates.length}),a.jsx("span",{className:"stat-label",children:"Duplicates found"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-number",children:i.length}),a.jsx("span",{className:"stat-label",children:"Total in CSV"})]})]}),d.duplicates.length>0&&a.jsxs("div",{className:"duplicate-list",children:[a.jsxs("h5",{children:["Duplicate ",t==="users"?"Emails":"Tracking Numbers"]}),a.jsxs("table",{className:"duplicate-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"CSV Row"}),a.jsx("th",{children:"Existing Record"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:d.duplicates.slice(0,10).map((x,A)=>a.jsxs("tr",{children:[a.jsxs("td",{children:[t==="users"?x.row.email:x.row.tracking_number,a.jsx("br",{}),a.jsx("small",{children:t==="users"?x.row.full_name:x.row.product_name})]}),a.jsxs("td",{children:["ID: ",x.existingId,a.jsx("br",{}),a.jsx("small",{children:x.existingName})]}),a.jsx("td",{children:a.jsx("span",{className:"action-badge",children:"Will be skipped"})})]},A))})]}),d.duplicates.length>10&&a.jsxs("p",{className:"help-text",children:["Showing 10 of ",d.duplicates.length," duplicates"]})]}),a.jsxs("div",{className:"import-options",children:[a.jsx("h5",{children:"Import Options"}),a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:p.skipDuplicates,onChange:x=>j({...p,skipDuplicates:x.target.checked})}),a.jsx("span",{children:"Skip duplicates (recommended)"})]}),a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:p.updateDuplicates,onChange:x=>j({...p,updateDuplicates:x.target.checked}),disabled:p.skipDuplicates}),a.jsx("span",{children:"Update existing records with CSV data ( use with caution)"})]})]})]}),a.jsxs("div",{className:"import-actions",children:[a.jsx("button",{onClick:W,className:"btn btn-secondary",children:"Cancel"}),l&&l.valid&&a.jsx("button",{onClick:q,className:"btn btn-primary",disabled:y,children:y?"Importing...":`Import ${(d==null?void 0:d.unique.length)||0} ${t}`}),l&&!l.valid&&a.jsx("button",{onClick:W,className:"btn btn-primary",children:"Try Again"})]})]}),m===3&&a.jsx("div",{className:"import-step",children:a.jsxs("div",{className:"loading-spinner",children:[a.jsxs("h3",{children:[" Importing ",t,"..."]}),a.jsx("p",{children:"Please wait while we import your data."})]})}),m===4&&N&&a.jsxs("div",{className:"import-step",children:[a.jsx("h3",{children:" Import Complete!"}),a.jsxs("div",{className:"import-results",children:[a.jsxs("div",{className:"result-card success",children:[a.jsx("span",{className:"result-number",children:N.imported}),a.jsxs("span",{className:"result-label",children:["New ",t," imported"]})]}),N.updated>0&&a.jsxs("div",{className:"result-card warning",children:[a.jsx("span",{className:"result-number",children:N.updated}),a.jsxs("span",{className:"result-label",children:[t," updated"]})]}),N.skipped>0&&a.jsxs("div",{className:"result-card",children:[a.jsx("span",{className:"result-number",children:N.skipped}),a.jsxs("span",{className:"result-label",children:[t," skipped"]})]})]}),a.jsx("div",{className:"import-actions",children:a.jsx("button",{onClick:W,className:"btn btn-primary",children:"Import Another File"})})]})]})}async function Gk(e=null){try{let n=(await xe.query("users")).filter(r=>r.role==="staff"||r.role==="department_admin"||r.role==="master_admin");return e&&(n=n.filter(r=>r.department===e)),n}catch(t){throw console.error("Failed to get staff:",t),t}}async function Ax(e){try{const t=await xe.findOne("users",{id:e});return(t==null?void 0:t.staff_permissions)||{can_create_bookings:!0,can_view_analytics:!1,can_add_equipment_notes:!1,can_request_access:!1,accessible_departments:[]}}catch(t){throw console.error("Failed to get staff permissions:",t),t}}async function Fu(e,t){try{return await xe.update("users",{id:e},{staff_permissions:t})}catch(n){throw console.error("Failed to update staff permissions:",n),n}}async function Kk(){try{return(await xe.query("users")).filter(t=>t.role==="department_admin"||t.role==="master_admin")}catch(e){throw console.error("Failed to get admins:",e),e}}async function Ru(e,t){try{return await xe.update("users",{id:e},{admin_permissions:t})}catch(n){throw console.error("Failed to update admin permissions:",n),n}}function Zk(){return{admin:{full_access:{name:"Full Access",permissions:{manage_equipment:!0,manage_users:!0,manage_bookings:!0,view_analytics:!0,export_data:!0,add_equipment_notes:!0,csv_import:!0,manage_kits:!0,accessible_departments:[]}},booking_manager:{name:"Booking Manager",permissions:{manage_equipment:!1,manage_users:!1,manage_bookings:!0,view_analytics:!0,export_data:!0,add_equipment_notes:!0,csv_import:!1,manage_kits:!1,accessible_departments:[]}},equipment_manager:{name:"Equipment Manager",permissions:{manage_equipment:!0,manage_users:!1,manage_bookings:!1,view_analytics:!0,export_data:!1,add_equipment_notes:!0,csv_import:!1,manage_kits:!0,accessible_departments:[]}},view_only:{name:"View Only",permissions:{manage_equipment:!1,manage_users:!1,manage_bookings:!1,view_analytics:!0,export_data:!1,add_equipment_notes:!1,csv_import:!1,manage_kits:!1,accessible_departments:[]}}},staff:{full_staff:{name:"Full Staff Access",permissions:{can_create_bookings:!0,can_view_analytics:!0,can_add_equipment_notes:!0,can_request_access:!0,accessible_departments:[]}},basic_staff:{name:"Basic Staff Access",permissions:{can_create_bookings:!0,can_view_analytics:!1,can_add_equipment_notes:!1,can_request_access:!0,accessible_departments:[]}}}}}async function Yk(e,t,n=null,r=!0){var s;try{const i=r?((s=await xe.findOne("users",{id:e}))==null?void 0:s.admin_permissions)||{}:await Ax(e),o=i.accessible_departments||[];o.includes(t)||o.push(t);const l=i.department_access_expiry||{};n&&(l[t]={expiry:n,granted_at:new Date().toISOString()});const c={...i,accessible_departments:o,department_access_expiry:l};return r?await Ru(e,c):await Fu(e,c),c}catch(i){throw console.error("Failed to grant department access with expiry:",i),i}}async function Jk(e,t,n=!0){var r;try{const s=n?((r=await xe.findOne("users",{id:e}))==null?void 0:r.admin_permissions)||{}:await Ax(e),i=(s.accessible_departments||[]).filter(c=>c!==t),o={...s.department_access_expiry};delete o[t];const l={...s,accessible_departments:i,department_access_expiry:o};return n?await Ru(e,l):await Fu(e,l),l}catch(s){throw console.error("Failed to revoke department access:",s),s}}async function Dx(e){try{return(await xe.query("users")).filter(n=>n.role==="staff"&&n.managed_department_id===e)}catch(t){throw console.error("Failed to get department staff:",t),t}}async function Xk(e,t,n){try{const r={...t,modified_by:n,modified_at:new Date().toISOString()};return await xe.update("users",{id:e},{view_permissions:r})}catch(r){throw console.error("Failed to update staff view permissions:",r),r}}function L2(){return{can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!1,can_export_data:!1,can_request_access:!0,email_notifications:!0}}async function E2(e,t){try{const n=await Dx(e);let r=0;for(const s of n)await xe.update("users",{id:s.id},{view_permissions:t}),r++;return r}catch(n){throw console.error("Failed to bulk update department staff:",n),n}}async function Qk(){try{return await xe.query("sub_areas")||[]}catch(e){throw console.error("Failed to get departments:",e),e}}function e6(){const{user:e}=xr(),[t,n]=R.useState("admins"),[r,s]=R.useState([]),[i,o]=R.useState([]),[l,c]=R.useState([]),[d,h]=R.useState(!0),[m,g]=R.useState(null),[p,j]=R.useState(""),[N,w]=R.useState("all"),[y,_]=R.useState("all"),[S,C]=R.useState(!1),[q,W]=R.useState(null),[E,x]=R.useState(!1),[A,U]=R.useState(null),[L,O]=R.useState({}),{toasts:P,showToast:T,removeToast:X}=Hn();R.useEffect(()=>{(e==null?void 0:e.role)==="master_admin"&&te()},[e,t]);const te=async()=>{h(!0);try{const[V,ne,le]=await Promise.all([Kk(),Gk(),Qk()]);s(V),o(ne.filter(me=>me.role==="staff")),c(le)}catch(V){console.error("Failed to load data:",V),T("Failed to load users and permissions","error")}finally{h(!1)}},oe=async(V,ne,le=!0)=>{try{const me=le?r.find(Se=>Se.id===V):i.find(Se=>Se.id===V);if(!me)return;const fe=me[le?"admin_permissions":"staff_permissions"]||{},be={...fe,[ne]:!fe[ne]};le?(await Ru(V,be),s(Se=>Se.map(Ae=>Ae.id===V?{...Ae,admin_permissions:be}:Ae))):(await Fu(V,be),o(Se=>Se.map(Ae=>Ae.id===V?{...Ae,staff_permissions:be}:Ae))),T(`Permission ${ne} ${be[ne]?"granted":"revoked"}`,"success")}catch(me){console.error("Failed to update permissions:",me),T("Failed to update permissions","error")}};if((e==null?void 0:e.role)!=="master_admin")return a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only master administrators can manage permissions."})]});if(d)return a.jsx("div",{className:"loading",children:"Loading users and permissions..."});const Z=[{key:"manage_equipment",label:"Manage Equipment",description:"Add, edit, and remove equipment"},{key:"manage_users",label:"Manage Users",description:"View and manage user accounts"},{key:"manage_bookings",label:"Approve Bookings",description:"Approve/deny booking requests"},{key:"view_analytics",label:"View Analytics",description:"Access analytics and reports"},{key:"export_data",label:"Export Data",description:"Export data as CSV/PDF"},{key:"add_equipment_notes",label:"Add Notes",description:"Add notes to equipment"},{key:"csv_import",label:"CSV Import",description:"Import users/equipment via CSV"},{key:"manage_kits",label:"Manage Kits",description:"Create and manage equipment kits"}],se=[{key:"can_create_bookings",label:"Create Bookings",description:"Can create equipment bookings"},{key:"can_view_analytics",label:"View Analytics",description:"Can view department analytics"},{key:"can_add_equipment_notes",label:"Add Notes",description:"Can add notes to equipment"},{key:"can_request_access",label:"Request Access",description:"Can request cross-department access"}],ee=async(V,ne,le=!0)=>{try{const me=Zk(),re=le?me.admin[ne]:me.staff[ne];if(!re){T("Invalid preset","error");return}le?(await Ru(V,re.permissions),s(fe=>fe.map(be=>be.id===V?{...be,admin_permissions:re.permissions}:be))):(await Fu(V,re.permissions),o(fe=>fe.map(be=>be.id===V?{...be,staff_permissions:re.permissions}:be))),T(`Applied "${re.name}" preset successfully`,"success"),C(!1)}catch(me){console.error("Failed to apply preset:",me),T("Failed to apply preset","error")}},de=async(V,ne,le=!0)=>{const me=le?r.find(Ae=>Ae.id===V):i.find(Ae=>Ae.id===V);if(!me)return;if(((me[le?"admin_permissions":"staff_permissions"]||{}).accessible_departments||[]).includes(ne))U({message:`Revoke access to this department for ${me.full_name}?`,onConfirm:async()=>{try{await Jk(V,ne,le),await te(),T("Department access revoked","success"),x(!1)}catch{T("Failed to revoke access","error")}}}),x(!0);else{const Ae=`${V}-${ne}`,ye=L[Ae];try{await Yk(V,ne,ye,le),await te(),T(ye?`Department access granted until ${new Date(ye).toLocaleDateString()}`:"Department access granted (no expiry)","success"),O(Q=>{const at={...Q};return delete at[Ae],at})}catch{T("Failed to grant access","error")}}},D=(t==="admins"?r:i).filter(V=>{const ne=p===""||V.full_name.toLowerCase().includes(p.toLowerCase())||V.email.toLowerCase().includes(p.toLowerCase()),le=N==="all"||V.department===N,me=y==="all"||V.role===y;return ne&&le&&me}),H=t==="admins"?Z:se,J=t==="admins";return a.jsxs("div",{className:"admin-permissions",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h2",{children:"Staff & Admin Permissions"}),a.jsx("p",{className:"subtitle",children:"Manage access control for all staff members and admins across departments"})]}),a.jsxs("div",{className:"warning-banner",children:[" ",a.jsx("strong",{children:"Warning:"})," Permission changes take effect immediately. Only grant permissions to trusted users."]}),a.jsxs("div",{className:"view-toggle",style:{marginTop:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("button",{className:`btn ${t==="admins"?"btn-primary":"btn-secondary"}`,onClick:()=>n("admins"),children:["Admin Permissions (",r.length,")"]}),a.jsxs("button",{className:`btn ${t==="staff"?"btn-primary":"btn-secondary"}`,onClick:()=>n("staff"),style:{marginLeft:"1rem"},children:["Staff Permissions (",i.length,")"]})]}),a.jsxs("div",{className:"filters-section",style:{marginBottom:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[a.jsx("div",{style:{flex:"1 1 300px"},children:a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:p,onChange:V=>j(V.target.value),className:"input",style:{width:"100%"}})}),a.jsx("div",{style:{flex:"0 1 200px"},children:a.jsxs("select",{value:N,onChange:V=>w(V.target.value),className:"input",style:{width:"100%"},children:[a.jsx("option",{value:"all",children:"All Departments"}),l.map(V=>a.jsx("option",{value:V.name,children:V.name},V.id))]})}),a.jsx("div",{style:{flex:"0 1 200px"},children:a.jsxs("select",{value:y,onChange:V=>_(V.target.value),className:"input",style:{width:"100%"},children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"master_admin",children:"Master Admin"}),a.jsx("option",{value:"department_admin",children:"Department Admin"}),a.jsx("option",{value:"staff",children:"Staff"})]})})]}),a.jsxs("div",{className:"stats-grid",style:{marginBottom:"2rem"},children:[a.jsx("div",{className:"stat-card stat-primary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:r.length}),a.jsx("p",{children:"Total Admins"})]})}),a.jsx("div",{className:"stat-card stat-secondary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:i.length}),a.jsx("p",{children:"Total Staff"})]})}),a.jsx("div",{className:"stat-card stat-tertiary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:l.length}),a.jsx("p",{children:"Departments"})]})})]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{className:"users-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"30px"}}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Primary Department"}),H.map(V=>a.jsx("th",{style:{textAlign:"center",minWidth:"100px"},children:a.jsx("div",{style:{fontSize:"0.75rem"},children:V.label})},V.key)),a.jsx("th",{style:{textAlign:"center",minWidth:"120px"},children:"Actions"})]})}),a.jsx("tbody",{children:D.map(V=>{const le=V[J?"admin_permissions":"staff_permissions"]||{},me=V.role==="master_admin",re=m===V.id;return a.jsxs(a.Fragment,{children:[a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("button",{onClick:()=>g(re?null:V.id),className:"btn btn-sm",style:{padding:"0.25rem 0.5rem"},children:re?"":""})}),a.jsxs("td",{children:[a.jsx("strong",{children:V.full_name}),V.id===e.id&&a.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.875rem",color:"var(--color-primary)"},children:"(You)"})]}),a.jsx("td",{children:V.email}),a.jsx("td",{children:a.jsxs("span",{className:`role-badge role-${V.role}`,children:[V.role==="master_admin"&&"Master Admin",V.role==="department_admin"&&"Department Admin",V.role==="staff"&&"Staff"]})}),a.jsx("td",{children:V.department}),H.map(fe=>a.jsx("td",{style:{textAlign:"center"},children:me?a.jsx("span",{style:{color:"var(--color-success)",fontWeight:"bold"},children:""}):a.jsxs("label",{className:"switch",children:[a.jsx("input",{type:"checkbox",checked:le[fe.key]||!1,onChange:()=>oe(V.id,fe.key,J),"data-testid":`permission-${V.id}-${fe.key}`}),a.jsx("span",{className:"slider"})]})},fe.key)),a.jsx("td",{style:{textAlign:"center"},children:a.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>{W(V),C(!0)},className:"btn btn-sm btn-primary",title:"Manage detailed permissions",children:"Details"}),a.jsx("button",{onClick:()=>g(re?null:V.id),className:"btn btn-sm btn-secondary",title:"Manage department access",children:re?"Hide":"Depts"})]})})]},V.id),re&&a.jsx("tr",{children:a.jsx("td",{colSpan:H.length+6,style:{background:"var(--bg-secondary)",padding:"1.5rem"},children:a.jsxs("div",{children:[a.jsxs("h4",{style:{marginBottom:"1rem"},children:["Department Access for ",V.full_name]}),a.jsxs("p",{style:{fontSize:"0.875rem",marginBottom:"1rem",color:"var(--text-muted)"},children:["Grant access to additional departments beyond their primary department (",V.department,")"]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:l.map(fe=>{var Q,at;const be=((Q=le.accessible_departments)==null?void 0:Q.includes(fe.id))||!1,Se=V.department===fe.name||V.managed_department_id===fe.id&&J,Ae=`${V.id}-${fe.id}`,ye=(at=le.department_access_expiry)==null?void 0:at[fe.id];return a.jsxs("div",{style:{padding:"0.75rem",border:`2px solid ${Se?"var(--color-primary)":be?"var(--color-success)":"var(--border-color)"}`,borderRadius:"var(--radius-md)",background:Se?"var(--color-primary-pale)":be?"var(--color-success-pale)":"var(--bg-card)"},children:[a.jsxs("div",{style:{marginBottom:"0.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("strong",{style:{fontSize:"0.875rem"},children:fe.name}),!Se&&a.jsxs("label",{className:"switch",style:{marginLeft:"0.5rem"},children:[a.jsx("input",{type:"checkbox",checked:be,onChange:()=>de(V.id,fe.id,J)}),a.jsx("span",{className:"slider"})]})]}),Se&&a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-primary)",marginTop:"0.25rem"},children:"Home Department"}),!Se&&be&&(ye==null?void 0:ye.expiry)&&a.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:["Expires: ",new Date(ye.expiry).toLocaleDateString()]})]}),!Se&&!be&&a.jsx("input",{type:"date",placeholder:"Expiry date (optional)",value:L[Ae]||"",onChange:nt=>O(Ve=>({...Ve,[Ae]:nt.target.value})),className:"input",style:{fontSize:"0.75rem",padding:"0.25rem",marginTop:"0.25rem",width:"100%"},min:new Date().toISOString().split("T")[0]})]},fe.id)})})]})})})]})})})]})}),a.jsxs("div",{className:"flags-info",style:{marginTop:"2rem"},children:[a.jsxs("h3",{children:[t==="admins"?"Admin":"Staff"," Permission Descriptions"]}),a.jsx("ul",{children:H.map(V=>a.jsxs("li",{children:[a.jsxs("strong",{children:[V.label,":"]})," ",V.description]},V.key))})]}),S&&q&&a.jsx("div",{className:"modal-overlay",onClick:()=>C(!1),children:a.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),style:{maxWidth:"600px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h3",{children:["Manage Permissions: ",q.full_name]}),a.jsx("button",{onClick:()=>C(!1),className:"modal-close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{style:{marginBottom:"1.5rem"},children:a.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:[a.jsx("strong",{children:"Role:"})," ",q.role," | ",a.jsx("strong",{children:"Department:"})," ",q.department]})}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Quick Apply Preset"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.5rem"},children:J?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>ee(q.id,"full_access",!0),className:"btn btn-sm btn-primary",children:"Full Access"}),a.jsx("button",{onClick:()=>ee(q.id,"booking_manager",!0),className:"btn btn-sm btn-secondary",children:"Booking Manager"}),a.jsx("button",{onClick:()=>ee(q.id,"equipment_manager",!0),className:"btn btn-sm btn-secondary",children:"Equipment Manager"}),a.jsx("button",{onClick:()=>ee(q.id,"view_only",!0),className:"btn btn-sm btn-secondary",children:"View Only"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>ee(q.id,"full_staff",!1),className:"btn btn-sm btn-primary",children:"Full Staff"}),a.jsx("button",{onClick:()=>ee(q.id,"basic_staff",!1),className:"btn btn-sm btn-secondary",children:"Basic Staff"})]})})]}),a.jsxs("div",{children:[a.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Individual Permissions"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:H.map(V=>{const le=q[J?"admin_permissions":"staff_permissions"]||{},me=q.role==="master_admin";return a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)"},children:[a.jsxs("div",{children:[a.jsx("strong",{style:{fontSize:"0.875rem"},children:V.label}),a.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:V.description})]}),me?a.jsx("span",{style:{color:"var(--color-success)",fontWeight:"bold"},children:""}):a.jsxs("label",{className:"switch",children:[a.jsx("input",{type:"checkbox",checked:le[V.key]||!1,onChange:()=>oe(q.id,V.key,J)}),a.jsx("span",{className:"slider"})]})]},V.key)})})]}),q.permissions_updated_at&&a.jsxs("div",{style:{marginTop:"1.5rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:["Last modified: ",new Date(q.permissions_updated_at).toLocaleString(),q.permissions_updated_by&&` by ${q.permissions_updated_by}`]})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{onClick:()=>C(!1),className:"btn btn-secondary",children:"Close"})})]})}),E&&A&&a.jsx("div",{className:"modal-overlay",onClick:()=>x(!1),children:a.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),style:{maxWidth:"400px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:"Confirm Action"}),a.jsx("button",{onClick:()=>x(!1),className:"modal-close",children:""})]}),a.jsx("div",{className:"modal-body",children:a.jsx("p",{children:A.message})}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:A.onConfirm,className:"btn btn-danger",children:"Confirm"})]})]})}),P.map(V=>a.jsx(Vn,{message:V.message,type:V.type,onClose:()=>X(V.id)},V.id))]})}function t6(){xr();const[e,t]=R.useState([]),[n,r]=R.useState([]),[s,i]=R.useState(!1),[o,l]=R.useState(null),{toasts:c,showToast:d,removeToast:h}=Hn();R.useEffect(()=>{m()},[]);const m=async()=>{try{const w=await xe.query("equipment");r(w);const y=Co.getAdminKits();t(y)}catch(w){console.error("Failed to load data:",w),d("Failed to load data","error")}},g=()=>{l({name:"",description:"",department:"all",equipment_ids:[]}),i(!0)},p=w=>{try{w.id?(Co.updateAdminKit(w.id,w),d("Kit updated successfully","success")):(Co.saveAdminKit(w),d("Kit created successfully","success")),m(),i(!1),l(null)}catch{d("Failed to save kit","error")}},j=w=>{if(confirm("Are you sure you want to delete this kit?"))try{Co.deleteAdminKit(w),d("Kit deleted successfully","success"),m()}catch{d("Failed to delete kit","error")}},N=w=>{l(w),i(!0)};return a.jsxs("div",{className:"kit-management",children:[a.jsxs("div",{className:"page-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Equipment Kits Management"}),a.jsx("p",{className:"subtitle",children:"Create preset equipment kits that students can quickly book"})]}),a.jsx("button",{onClick:g,className:"btn btn-primary","data-testid":"create-kit-btn",children:"+ Create New Kit"})]}),e.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("h3",{children:"No Equipment Kits Yet"}),a.jsx("p",{children:"Create your first equipment kit to help students quickly book common equipment combinations."}),a.jsx("button",{onClick:g,className:"btn btn-primary",children:"Create First Kit"})]}):a.jsx("div",{style:{display:"grid",gap:"1rem"},children:e.map(w=>{const y=n.filter(_=>{var S;return(S=w.equipment_ids)==null?void 0:S.includes(_.id)});return a.jsxs("div",{style:{background:"white",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",padding:"1.5rem"},"data-testid":"kit-item",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1rem"},children:[a.jsxs("div",{children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0"},children:w.name}),a.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"var(--text-secondary)"},children:w.description}),a.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[a.jsx("span",{className:"role-badge",children:w.department==="all"?"All Departments":w.department}),a.jsxs("span",{style:{marginLeft:"1rem"},children:[y.length," item",y.length!==1?"s":""]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{onClick:()=>N(w),className:"btn btn-secondary btn-sm","data-testid":"edit-kit-btn",children:"Edit"}),a.jsx("button",{onClick:()=>j(w.id),className:"btn btn-danger btn-sm","data-testid":"delete-kit-btn",children:"Delete"})]})]}),y.length>0&&a.jsxs("div",{children:[a.jsx("h4",{style:{margin:"1rem 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600"},children:"Equipment in this kit:"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.5rem"},children:y.map(_=>a.jsxs("div",{style:{padding:"0.5rem",background:"var(--surface)",borderRadius:"var(--border-radius)",fontSize:"0.875rem"},children:[a.jsx("div",{style:{fontWeight:"600"},children:_.product_name}),a.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"0.75rem"},children:_.category})]},_.id))})]})]},w.id)})}),s&&a.jsx(n6,{kit:o,equipment:n,onSave:p,onClose:()=>{i(!1),l(null)}}),c.map(w=>a.jsx(Vn,{message:w.message,type:w.type,onClose:()=>h(w.id)},w.id))]})}function n6({kit:e,equipment:t,onSave:n,onClose:r}){const[s,i]=R.useState({id:(e==null?void 0:e.id)||null,name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",department:(e==null?void 0:e.department)||"all",equipment_ids:(e==null?void 0:e.equipment_ids)||[]}),o=["all","Moving Image Design","Graphic Design","Illustration"],l=[...new Set(t.map(h=>h.category))],c=h=>{i(m=>({...m,equipment_ids:m.equipment_ids.includes(h)?m.equipment_ids.filter(g=>g!==h):[...m.equipment_ids,h]}))},d=h=>{if(h.preventDefault(),s.equipment_ids.length===0){alert("Please select at least one piece of equipment");return}n(s)};return a.jsx("div",{className:"modal-overlay",onClick:r,children:a.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),style:{maxWidth:"900px",maxHeight:"90vh",overflow:"auto"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:e!=null&&e.id?"Edit Equipment Kit":"Create New Equipment Kit"}),a.jsx("button",{onClick:r,className:"modal-close",children:""})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:d,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Kit Name *"}),a.jsx("input",{type:"text",value:s.name,onChange:h=>i({...s,name:h.target.value}),placeholder:"e.g., 'Documentary Filming Kit'",className:"form-input",required:!0,"data-testid":"kit-name-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Description *"}),a.jsx("textarea",{value:s.description,onChange:h=>i({...s,description:h.target.value}),placeholder:"Describe what this kit is for...",rows:3,required:!0,"data-testid":"kit-description-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Department Access"}),a.jsx("select",{value:s.department,onChange:h=>i({...s,department:h.target.value}),className:"form-input","data-testid":"kit-department-select",children:o.map(h=>a.jsx("option",{value:h,children:h==="all"?"All Departments":h},h))})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{children:["Select Equipment (",s.equipment_ids.length," selected) *"]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",padding:"1rem"},children:l.map(h=>{const m=t.filter(g=>g.category===h);return a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{margin:"0 0 0.75rem 0",color:"var(--text-primary)"},children:h}),a.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:m.map(g=>a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",background:s.equipment_ids.includes(g.id)?"rgba(102, 126, 234, 0.1)":"var(--surface)",borderRadius:"var(--border-radius)",cursor:"pointer",border:`1px solid ${s.equipment_ids.includes(g.id)?"var(--primary-color)":"var(--border-color)"}`},children:[a.jsx("input",{type:"checkbox",checked:s.equipment_ids.includes(g.id),onChange:()=>c(g.id),style:{width:"18px",height:"18px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:"600"},children:g.product_name}),a.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:g.description})]})]},g.id))})]},h)})})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary","data-testid":"save-kit-btn",children:e!=null&&e.id?"Update Kit":"Create Kit"})]})]})})]})})}function r6(){const{user:e}=xr(),[t,n]=R.useState([]),[r,s]=R.useState(!0),[i,o]=R.useState(!1),[l,c]=R.useState(null),[d,h]=R.useState({name:"",description:"",parent_department:""}),{toasts:m,showToast:g,removeToast:p}=Hn(),j=(e==null?void 0:e.role)==="master_admin";R.useEffect(()=>{N()},[]);const N=async()=>{s(!0);try{const C=await xe.query("sub_areas")||[];n(C)}catch(C){console.error("Failed to load departments:",C),g("Failed to load departments","error")}finally{s(!1)}},w=(C=null)=>{C?(c(C),h({name:C.name,description:C.description||"",parent_department:C.parent_department||""})):(c(null),h({name:"",description:"",parent_department:""})),o(!0)},y=()=>{o(!1),c(null),h({name:"",description:"",parent_department:""})},_=async C=>{if(C.preventDefault(),!d.name.trim()){g("Department name is required","error");return}try{l?(await xe.update("sub_areas",l.id,d),g("Department updated successfully","success")):(await xe.insert("sub_areas",d),g("Department created successfully","success")),y(),await N()}catch(q){g(`Failed to ${l?"update":"create"} department: ${q.message}`,"error")}},S=async C=>{if(confirm("Are you sure you want to delete this department? This will affect all associated equipment and users."))try{await xe.delete("sub_areas",C),g("Department deleted successfully","success"),await N()}catch(q){g("Failed to delete department: "+q.message,"error")}};return j?r?a.jsx("div",{className:"loading",children:"Loading departments..."}):a.jsxs("div",{className:"department-management",children:[a.jsxs("div",{className:"approvals-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Department Management"}),a.jsx("p",{className:"subtitle",children:"Manage departments and areas within NCAD"})]}),a.jsx("button",{onClick:()=>w(),className:"btn btn-primary","data-testid":"add-department-btn",children:"Add Department"})]}),a.jsxs("div",{className:"stats-grid",style:{marginBottom:"var(--spacing-xl)"},children:[a.jsx("div",{className:"stat-card stat-primary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:t.length}),a.jsx("p",{children:"Total Departments"})]})}),a.jsx("div",{className:"stat-card stat-secondary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:new Set(t.map(C=>C.parent_department).filter(Boolean)).size}),a.jsx("p",{children:"Parent Schools"})]})})]}),t.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("h2",{children:"No Departments Yet"}),a.jsx("p",{children:"Create your first department to organize equipment and students."}),a.jsx("button",{onClick:()=>w(),className:"btn btn-primary",children:"Create Department"})]}):a.jsx("div",{className:"equipment-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Parent School"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:t.map(C=>a.jsxs("tr",{"data-testid":"department-row",children:[a.jsx("td",{style:{fontWeight:"600"},children:C.name}),a.jsx("td",{children:C.description||"-"}),a.jsx("td",{children:C.parent_department||"-"}),a.jsx("td",{children:new Date(C.created_at).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("div",{className:"action-buttons",children:[a.jsx("button",{onClick:()=>w(C),className:"btn btn-sm btn-secondary","data-testid":"edit-department-btn",children:"Edit"}),a.jsx("button",{onClick:()=>S(C.id),className:"btn btn-sm btn-danger","data-testid":"delete-department-btn",children:"Delete"})]})})]},C.id))})]})}),i&&a.jsx("div",{className:"modal-overlay",onClick:y,children:a.jsxs("div",{className:"modal-content",onClick:C=>C.stopPropagation(),"data-testid":"department-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:l?"Edit Department":"Create Department"}),a.jsx("button",{className:"modal-close",onClick:y,children:""})]}),a.jsx("form",{onSubmit:_,children:a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"name",children:"Name *"}),a.jsx("input",{type:"text",id:"name",className:"form-input",value:d.name,onChange:C=>h({...d,name:C.target.value}),placeholder:"e.g., Communication Design",required:!0,"data-testid":"department-name-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"description",children:"Description"}),a.jsx("textarea",{id:"description",className:"form-textarea",value:d.description,onChange:C=>h({...d,description:C.target.value}),placeholder:"Brief description of this department",rows:"3","data-testid":"department-description-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"parent_department",children:"Parent School"}),a.jsxs("select",{id:"parent_department",className:"form-select",value:d.parent_department,onChange:C=>h({...d,parent_department:C.target.value}),"data-testid":"department-parent-select",children:[a.jsx("option",{value:"",children:"-- Select School --"}),a.jsx("option",{value:"School of Design",children:"School of Design"}),a.jsx("option",{value:"School of Fine Art",children:"School of Fine Art"}),a.jsx("option",{value:"School of Education",children:"School of Education"}),a.jsx("option",{value:"School of Visual Culture",children:"School of Visual Culture"})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:y,className:"btn btn-secondary",children:"Cancel"}),a.jsxs("button",{type:"submit",className:"btn btn-primary","data-testid":"save-department-btn",children:[l?"Update":"Create"," Department"]})]})]})})]})}),m.map(C=>a.jsx(Vn,{message:C.message,type:C.type,onClose:()=>p(C.id)},C.id))]}):a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only master administrators can manage departments."})]})}function a6(){const{user:e}=xr(),[t,n]=R.useState([]),[r,s]=R.useState([]),[i,o]=R.useState([]),[l,c]=R.useState(!0),[d,h]=R.useState([]),[m,g]=R.useState(""),[p,j]=R.useState(""),[N,w]=R.useState("all"),{toasts:y,showToast:_,removeToast:S}=Hn(),C=(e==null?void 0:e.role)==="master_admin"||(e==null?void 0:e.role)==="department_admin";R.useEffect(()=>{q()},[]);const q=async()=>{c(!0);try{const T=await xe.query("users",{role:"student"});n(T||[]);const X=await xe.query("sub_areas")||[];s(X);const te=await xe.query("user_sub_areas")||[];o(te)}catch(T){console.error("Failed to load data:",T),_("Failed to load data","error")}finally{c(!1)}},W=T=>i.filter(X=>X.user_id===T).map(X=>r.find(te=>te.id===X.sub_area_id)).filter(Boolean),E=T=>{h(X=>X.includes(T)?X.filter(te=>te!==T):[...X,T])},x=()=>{const T=L();d.length===T.length?h([]):h(T.map(X=>X.id))},A=async()=>{if(d.length===0){_("Please select at least one student","error");return}if(!m){_("Please select a department","error");return}try{const T=d.map(X=>({user_id:X,sub_area_id:m,assigned_by:e.id,assigned_at:new Date().toISOString()}));for(const X of T)i.find(oe=>oe.user_id===X.user_id&&oe.sub_area_id===X.sub_area_id)||await xe.insert("user_sub_areas",X);_(`Successfully assigned ${d.length} student(s) to department`,"success"),h([]),g(""),await q()}catch(T){_("Failed to assign students: "+T.message,"error")}},U=async(T,X)=>{if(confirm("Remove this department assignment?"))try{const te=i.find(oe=>oe.user_id===T&&oe.sub_area_id===X);te&&(await xe.delete("user_sub_areas",te.id),_("Assignment removed successfully","success"),await q())}catch(te){_("Failed to remove assignment: "+te.message,"error")}},L=()=>t.filter(T=>{var oe,Z;const X=!p||((oe=T.full_name)==null?void 0:oe.toLowerCase().includes(p.toLowerCase()))||((Z=T.email)==null?void 0:Z.toLowerCase().includes(p.toLowerCase())),te=N==="all"||T.department===N;return X&&te});if(!C)return a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only administrators can manage student assignments."})]});if(l)return a.jsx("div",{className:"loading",children:"Loading students..."});const O=L(),P=[...new Set(t.map(T=>T.department).filter(Boolean))];return a.jsxs("div",{className:"student-assignment",children:[a.jsx("h2",{children:"Student Department Assignment"}),a.jsx("p",{className:"subtitle",children:"Assign students to departments for equipment access"}),a.jsxs("div",{className:"dashboard-card",style:{marginBottom:"var(--spacing-xl)"},children:[a.jsx("h3",{children:"Bulk Assignment"}),a.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"var(--spacing-lg)"},children:"Select students below and assign them to a department"}),a.jsxs("div",{style:{display:"flex",gap:"var(--spacing-md)",alignItems:"center",flexWrap:"wrap"},children:[a.jsxs("div",{className:"form-group",style:{flex:"1",minWidth:"250px",marginBottom:0},children:[a.jsx("label",{htmlFor:"bulk-sub-area",children:"Department"}),a.jsxs("select",{id:"bulk-sub-area",className:"form-select",value:m,onChange:T=>g(T.target.value),"data-testid":"bulk-sub-area-select",children:[a.jsx("option",{value:"",children:"-- Select Department --"}),r.map(T=>a.jsx("option",{value:T.id,children:T.name},T.id))]})]}),a.jsxs("button",{onClick:A,className:"btn btn-primary",disabled:d.length===0||!m,"data-testid":"bulk-assign-btn",style:{marginTop:"var(--spacing-lg)"},children:["Assign Selected (",d.length,")"]})]})]}),a.jsx("div",{className:"management-controls",style:{marginBottom:"var(--spacing-lg)"},children:a.jsxs("div",{className:"filter-controls",children:[a.jsx("input",{type:"text",className:"search-input",placeholder:"Search by name or email...",value:p,onChange:T=>j(T.target.value),"data-testid":"student-search-input"}),a.jsxs("select",{className:"form-select",value:N,onChange:T=>w(T.target.value),"data-testid":"department-filter-select",children:[a.jsx("option",{value:"all",children:"All Departments"}),P.map(T=>a.jsx("option",{value:T,children:T},T))]}),a.jsx("button",{onClick:x,className:"btn btn-secondary","data-testid":"select-all-btn",children:d.length===O.length?"Deselect All":"Select All"})]})}),a.jsxs("div",{className:"stats-grid",style:{marginBottom:"var(--spacing-xl)"},children:[a.jsx("div",{className:"stat-card stat-info",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:O.length}),a.jsx("p",{children:"Students Found"})]})}),a.jsx("div",{className:"stat-card stat-primary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:d.length}),a.jsx("p",{children:"Selected"})]})}),a.jsx("div",{className:"stat-card stat-secondary",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:i.length}),a.jsx("p",{children:"Total Assignments"})]})})]}),O.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("h2",{children:"No Students Found"}),a.jsx("p",{children:"Try adjusting your search or filter criteria."})]}):a.jsx("div",{className:"users-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"40px"},children:a.jsx("input",{type:"checkbox",checked:d.length===O.length,onChange:x,"data-testid":"select-all-checkbox"})}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Current Departments"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:O.map(T=>{const X=W(T.id);return a.jsxs("tr",{"data-testid":"student-row",children:[a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:d.includes(T.id),onChange:()=>E(T.id),"data-testid":`student-checkbox-${T.id}`})}),a.jsx("td",{style:{fontWeight:"600"},children:T.full_name}),a.jsx("td",{children:T.email}),a.jsx("td",{children:T.department||"-"}),a.jsx("td",{children:X.length===0?a.jsx("span",{style:{color:"var(--text-muted)"},children:"Not assigned"}):a.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:X.map(te=>a.jsxs("span",{className:"role-badge",style:{background:"var(--color-info-pale)",color:"var(--color-info)",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[te.name,a.jsx("button",{onClick:()=>U(T.id,te.id),style:{background:"none",border:"none",color:"var(--color-error)",cursor:"pointer",padding:"0 0.25rem",fontSize:"1rem",fontWeight:"bold"},title:"Remove assignment","data-testid":`remove-assignment-${T.id}-${te.id}`,children:""})]},te.id))})}),a.jsx("td",{children:a.jsx("button",{onClick:()=>{h([T.id])},className:"btn btn-sm btn-secondary","data-testid":`assign-btn-${T.id}`,children:"Assign"})})]},T.id)})})]})}),a.jsxs("div",{className:"users-stats",children:["Showing ",O.length," of ",t.length," students"]}),y.map(T=>a.jsx(Vn,{message:T.message,type:T.type,onClose:()=>S(T.id)},T.id))]})}function s6(){const{user:e}=xr(),[t,n]=R.useState([]),[r,s]=R.useState([]),[i,o]=R.useState(!0),[l,c]=R.useState(!1),[d,h]=R.useState({from_sub_area_id:"",to_sub_area_id:"",expires_at:"",notes:""}),{toasts:m,showToast:g,removeToast:p}=Hn(),j=(e==null?void 0:e.role)==="master_admin"||(e==null?void 0:e.role)==="department_admin";R.useEffect(()=>{N()},[]);const N=async()=>{o(!0);try{const A=await xe.query("sub_areas")||[];n(A);const U=await xe.query("interdisciplinary_access")||[];s(U)}catch(A){console.error("Failed to load data:",A),g("Failed to load data","error")}finally{o(!1)}},w=A=>{const U=t.find(L=>L.id===A);return U?U.name:"Unknown"},y=()=>{h({from_sub_area_id:"",to_sub_area_id:"",expires_at:"",notes:""}),c(!0)},_=()=>{c(!1),h({from_sub_area_id:"",to_sub_area_id:"",expires_at:"",notes:""})},S=async A=>{if(A.preventDefault(),!d.from_sub_area_id||!d.to_sub_area_id){g("Please select both departments","error");return}if(d.from_sub_area_id===d.to_sub_area_id){g("Cannot grant access to the same department","error");return}if(r.find(L=>L.from_sub_area_id===d.from_sub_area_id&&L.to_sub_area_id===d.to_sub_area_id)){g("This access grant already exists","error");return}try{const L={...d,granted_by:e.id,granted_at:new Date().toISOString(),is_active:!0,expires_at:d.expires_at||null};await xe.insert("interdisciplinary_access",L),g("Interdisciplinary access granted successfully","success"),_(),await N()}catch(L){g("Failed to grant access: "+L.message,"error")}},C=async(A,U)=>{try{await xe.update("interdisciplinary_access",A,{is_active:!U}),g(`Access ${U?"deactivated":"activated"}`,"success"),await N()}catch(L){g("Failed to update access status: "+L.message,"error")}},q=async A=>{if(confirm("Are you sure you want to revoke this access grant?"))try{await xe.delete("interdisciplinary_access",A),g("Access grant revoked successfully","success"),await N()}catch(U){g("Failed to revoke access: "+U.message,"error")}},W=A=>A.expires_at?new Date(A.expires_at)<new Date:!1;if(!j)return a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"Only administrators can manage interdisciplinary access."})]});if(i)return a.jsx("div",{className:"loading",children:"Loading access grants..."});const E=r.filter(A=>A.is_active&&!W(A)),x=r.filter(A=>!A.is_active||W(A));return a.jsxs("div",{className:"interdisciplinary-access",children:[a.jsxs("div",{className:"approvals-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Interdisciplinary Access Management"}),a.jsx("p",{className:"subtitle",children:"Grant cross-departmental equipment access between departments"})]}),a.jsx("button",{onClick:y,className:"btn btn-primary","data-testid":"grant-access-btn",children:"Grant Access"})]}),a.jsxs("div",{style:{background:"var(--color-info-pale)",border:"1px solid var(--color-info)",borderRadius:"var(--radius-md)",padding:"var(--spacing-lg)",marginBottom:"var(--spacing-xl)"},children:[a.jsx("h4",{style:{margin:"0 0 var(--spacing-sm) 0",color:"var(--color-info)"},children:"How Interdisciplinary Access Works"}),a.jsx("p",{style:{margin:0,color:"var(--text-primary)"},children:"When you grant access FROM Department A TO Department B, students in Department A will be able to view and book equipment from Department B. This is useful for collaborative projects between departments."})]}),a.jsxs("div",{className:"stats-grid",style:{marginBottom:"var(--spacing-xl)"},children:[a.jsx("div",{className:"stat-card stat-success",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:E.length}),a.jsx("p",{children:"Active Grants"})]})}),a.jsx("div",{className:"stat-card stat-warning",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:x.length}),a.jsx("p",{children:"Inactive/Expired"})]})}),a.jsx("div",{className:"stat-card stat-info",children:a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{children:r.length}),a.jsx("p",{children:"Total Grants"})]})})]}),a.jsxs("div",{style:{marginBottom:"var(--spacing-2xl)"},children:[a.jsx("h3",{children:"Active Access Grants"}),E.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"No active interdisciplinary access grants"})}):a.jsx("div",{className:"equipment-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"From Department"}),a.jsx("th",{children:"To Department"}),a.jsx("th",{children:"Granted"}),a.jsx("th",{children:"Expires"}),a.jsx("th",{children:"Notes"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:E.map(A=>a.jsxs("tr",{"data-testid":"access-grant-row",children:[a.jsx("td",{style:{fontWeight:"600"},children:w(A.from_sub_area_id)}),a.jsx("td",{style:{fontWeight:"600"},children:w(A.to_sub_area_id)}),a.jsx("td",{children:new Date(A.granted_at).toLocaleDateString()}),a.jsx("td",{children:A.expires_at?a.jsx("span",{style:{color:W(A)?"var(--color-error)":"var(--text-primary)"},children:new Date(A.expires_at).toLocaleDateString()}):a.jsx("span",{style:{color:"var(--text-muted)"},children:"Never"})}),a.jsx("td",{children:A.notes||"-"}),a.jsx("td",{children:a.jsx("span",{className:"status status-success",children:"Active"})}),a.jsx("td",{children:a.jsxs("div",{className:"action-buttons",children:[a.jsx("button",{onClick:()=>C(A.id,A.is_active),className:"btn btn-sm btn-secondary","data-testid":"deactivate-grant-btn",children:"Deactivate"}),a.jsx("button",{onClick:()=>q(A.id),className:"btn btn-sm btn-danger","data-testid":"revoke-grant-btn",children:"Revoke"})]})})]},A.id))})]})})]}),x.length>0&&a.jsxs("div",{children:[a.jsx("h3",{children:"Inactive/Expired Access Grants"}),a.jsx("div",{className:"equipment-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"From Department"}),a.jsx("th",{children:"To Department"}),a.jsx("th",{children:"Granted"}),a.jsx("th",{children:"Expires"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:x.map(A=>a.jsxs("tr",{style:{opacity:.7},"data-testid":"inactive-grant-row",children:[a.jsx("td",{children:w(A.from_sub_area_id)}),a.jsx("td",{children:w(A.to_sub_area_id)}),a.jsx("td",{children:new Date(A.granted_at).toLocaleDateString()}),a.jsx("td",{children:A.expires_at?new Date(A.expires_at).toLocaleDateString():"Never"}),a.jsx("td",{children:a.jsx("span",{className:"status status-secondary",children:W(A)?"Expired":"Inactive"})}),a.jsx("td",{children:a.jsxs("div",{className:"action-buttons",children:[!W(A)&&a.jsx("button",{onClick:()=>C(A.id,A.is_active),className:"btn btn-sm btn-secondary","data-testid":"activate-grant-btn",children:"Activate"}),a.jsx("button",{onClick:()=>q(A.id),className:"btn btn-sm btn-danger",children:"Delete"})]})})]},A.id))})]})})]}),l&&a.jsx("div",{className:"modal-overlay",onClick:_,children:a.jsxs("div",{className:"modal-content",onClick:A=>A.stopPropagation(),"data-testid":"grant-access-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Grant Interdisciplinary Access"}),a.jsx("button",{className:"modal-close",onClick:_,children:""})]}),a.jsx("form",{onSubmit:S,children:a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"from-sub-area",children:"From Department *"}),a.jsxs("select",{id:"from-sub-area",className:"form-select",value:d.from_sub_area_id,onChange:A=>h({...d,from_sub_area_id:A.target.value}),required:!0,"data-testid":"from-sub-area-select",children:[a.jsx("option",{value:"",children:"-- Select Department --"}),t.map(A=>a.jsx("option",{value:A.id,children:A.name},A.id))]}),a.jsx("small",{style:{color:"var(--text-secondary)"},children:"Students in this department will gain access"})]}),a.jsx("div",{style:{textAlign:"center",margin:"var(--spacing-md) 0",fontSize:"var(--font-size-sm)",color:"var(--text-muted)",fontWeight:"500"},children:"will have access to"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"to-sub-area",children:"To Department (Equipment Source) *"}),a.jsxs("select",{id:"to-sub-area",className:"form-select",value:d.to_sub_area_id,onChange:A=>h({...d,to_sub_area_id:A.target.value}),required:!0,"data-testid":"to-sub-area-select",children:[a.jsx("option",{value:"",children:"-- Select Department --"}),t.map(A=>a.jsx("option",{value:A.id,disabled:A.id===d.from_sub_area_id,children:A.name},A.id))]}),a.jsx("small",{style:{color:"var(--text-secondary)"},children:"Equipment from this department will be accessible"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"expires-at",children:"Expiration Date (Optional)"}),a.jsx("input",{type:"date",id:"expires-at",className:"form-input",value:d.expires_at,onChange:A=>h({...d,expires_at:A.target.value}),min:new Date().toISOString().split("T")[0],"data-testid":"expires-at-input"}),a.jsx("small",{style:{color:"var(--text-secondary)"},children:"Leave blank for permanent access"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"notes",children:"Notes (Optional)"}),a.jsx("textarea",{id:"notes",className:"form-textarea",value:d.notes,onChange:A=>h({...d,notes:A.target.value}),placeholder:"e.g., For collaborative project between departments",rows:"3","data-testid":"notes-input"})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:_,className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary","data-testid":"confirm-grant-btn",children:"Grant Access"})]})]})})]})}),m.map(A=>a.jsx(Vn,{message:A.message,type:A.type,onClose:()=>p(A.id)},A.id))]})}function i6(){const{user:e}=sn(),[t,n]=R.useState([]),[r,s]=R.useState([]),[i,o]=R.useState(null),[l,c]=R.useState(""),[d,h]=R.useState(!0),[m,g]=R.useState(!1),[p,j]=R.useState(null),[N,w]=R.useState(null);R.useEffect(()=>{y()},[e]);async function y(){try{h(!0);const[E,x]=await Promise.all([n0(),O4(e.id)]);n(E),s(x),j(null)}catch(E){console.error("Failed to load data:",E),j("Failed to load data. Please try again.")}finally{h(!1)}}async function _(E){if(E.preventDefault(),!i){j("Please select a sub-area to request access to");return}if(!l.trim()){j("Please provide a reason for your request");return}if(i===e.managed_sub_area_id){j("You already have access to your own sub-area");return}if(r.find(A=>A.to_sub_area_id===i&&A.status==="pending")){j("You already have a pending request for this sub-area");return}try{g(!0),j(null),await F4(e.id,e.managed_sub_area_id,i,l),w("Access request submitted successfully!"),o(null),c(""),await y(),setTimeout(()=>w(null),3e3)}catch(A){console.error("Failed to submit request:",A),j("Failed to submit request. Please try again.")}finally{g(!1)}}function S(E){switch(E){case"pending":return"badge-warning";case"approved":return"badge-success";case"denied":return"badge-error";default:return"badge-default"}}function C(E){return E?new Date(E).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}if(d)return a.jsx("div",{className:"loading",children:"Loading access requests..."});const q=t.find(E=>E.id===e.managed_sub_area_id),W=t.filter(E=>E.id!==e.managed_sub_area_id);return a.jsxs("div",{className:"access-requests-page",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h1",{children:"Request Equipment Access"}),a.jsxs("p",{className:"page-description",children:["You manage ",a.jsx("strong",{children:(q==null?void 0:q.name)||"your department"}),". Request access to equipment from other departments for your students."]})]}),p&&a.jsx("div",{className:"alert alert-error",children:p}),N&&a.jsx("div",{className:"alert alert-success",children:N}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{children:"Submit New Access Request"}),a.jsxs("form",{onSubmit:_,className:"access-request-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"subArea",children:"Select Department to Access:"}),a.jsxs("select",{id:"subArea",value:i||"",onChange:E=>o(E.target.value),required:!0,className:"form-select",children:[a.jsx("option",{value:"",children:"-- Select a department --"}),W.map(E=>a.jsxs("option",{value:E.id,children:[E.name," (",E.parent_department,")"]},E.id))]}),a.jsx("p",{className:"form-help",children:"Choose the department whose equipment your students need access to."})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"reason",children:"Reason for Request:"}),a.jsx("textarea",{id:"reason",value:l,onChange:E=>c(E.target.value),required:!0,rows:4,className:"form-textarea",placeholder:"Explain why your students need access to this department's equipment..."}),a.jsx("p",{className:"form-help",children:"Provide a clear justification for your request. This will be reviewed by the master admin."})]}),a.jsx("button",{type:"submit",disabled:m,className:"btn btn-primary",children:m?"Submitting...":"Submit Request"})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("h2",{children:["My Access Requests (",r.length,")"]}),r.length===0?a.jsx("p",{className:"text-muted",children:"You haven't submitted any access requests yet."}):a.jsx("div",{className:"requests-list",children:r.map(E=>{const x=t.find(A=>A.id===E.to_sub_area_id);return a.jsxs("div",{className:"request-item",children:[a.jsxs("div",{className:"request-header",children:[a.jsx("h3",{children:(x==null?void 0:x.name)||"Unknown Department"}),a.jsx("span",{className:`badge ${S(E.status)}`,children:E.status.toUpperCase()})]}),a.jsxs("div",{className:"request-details",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Reason:"})," ",E.reason]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Requested:"})," ",C(E.requested_at)]}),E.status!=="pending"&&a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Reviewed:"})," ",C(E.reviewed_at)]}),E.notes&&a.jsxs("p",{children:[a.jsx("strong",{children:"Admin Notes:"})," ",E.notes]})]})]})]},E.id)})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{children:"Browse Other Departments"}),a.jsx("p",{className:"text-muted",children:"View equipment from other departments (read-only). Submit a request to gain booking access."}),a.jsx("div",{className:"sub-areas-grid",children:W.map(E=>a.jsxs("div",{className:"sub-area-card",children:[a.jsx("h3",{children:E.name}),a.jsx("p",{className:"text-small text-muted",children:E.description}),a.jsxs("p",{className:"text-small",children:[a.jsx("strong",{children:"Department:"})," ",E.parent_department]}),(()=>{const x=r.find(A=>A.to_sub_area_id===E.id);return x?a.jsxs("p",{className:"text-small",children:[a.jsx("strong",{children:"Request Status:"})," ",a.jsx("span",{className:`badge ${S(x.status)}`,children:x.status})]}):null})()]},E.id))})]})]})}function o6(){const{user:e}=sn(),[t,n]=R.useState([]),[r,s]=R.useState([]),[i,o]=R.useState([]),[l,c]=R.useState("pending"),[d,h]=R.useState(!0),[m,g]=R.useState(null),[p,j]=R.useState(""),[N,w]=R.useState(null),[y,_]=R.useState(null),[S,C]=R.useState(null);R.useEffect(()=>{q()},[]);async function q(){try{h(!0);const[P,T,X]=await Promise.all([R4(),n0(),xe.query("users",{role:"sub_area_admin"})]);n(P),s(T),o(X),_(null)}catch(P){console.error("Failed to load data:",P),_("Failed to load data. Please try again.")}finally{h(!1)}}async function W(P){if(confirm("Are you sure you want to approve this request? This will create an interdisciplinary access grant."))try{g(P),_(null),await M4(P,e.id),C("Request approved successfully! Interdisciplinary access grant has been created."),await q(),setTimeout(()=>C(null),3e3)}catch(T){console.error("Failed to approve request:",T),_(T.message||"Failed to approve request. Please try again.")}finally{g(null)}}async function E(P){if(!p.trim()){_("Please provide a reason for denying this request");return}try{g(P),_(null),await B4(P,e.id,p),C("Request denied successfully."),w(null),j(""),await q(),setTimeout(()=>C(null),3e3)}catch(T){console.error("Failed to deny request:",T),_(T.message||"Failed to deny request. Please try again.")}finally{g(null)}}function x(P){w(P),j(""),_(null)}function A(P){switch(P){case"pending":return"badge-warning";case"approved":return"badge-success";case"denied":return"badge-error";default:return"badge-default"}}function U(P){return P?new Date(P).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}if(d)return a.jsx("div",{className:"loading",children:"Loading access requests..."});const L=l==="all"?t:t.filter(P=>P.status===l),O=t.filter(P=>P.status==="pending").length;return a.jsxs("div",{className:"manage-access-requests-page",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h1",{children:"Manage Access Requests"}),a.jsxs("p",{className:"page-description",children:["Review and approve access requests from department admins.",O>0&&a.jsxs("span",{className:"badge badge-warning ml-2",children:[O," pending"]})]})]}),y&&a.jsx("div",{className:"alert alert-error",children:y}),S&&a.jsx("div",{className:"alert alert-success",children:S}),a.jsxs("div",{className:"filter-tabs",children:[a.jsxs("button",{className:`tab ${l==="pending"?"active":""}`,onClick:()=>c("pending"),children:["Pending (",t.filter(P=>P.status==="pending").length,")"]}),a.jsxs("button",{className:`tab ${l==="approved"?"active":""}`,onClick:()=>c("approved"),children:["Approved (",t.filter(P=>P.status==="approved").length,")"]}),a.jsxs("button",{className:`tab ${l==="denied"?"active":""}`,onClick:()=>c("denied"),children:["Denied (",t.filter(P=>P.status==="denied").length,")"]}),a.jsxs("button",{className:`tab ${l==="all"?"active":""}`,onClick:()=>c("all"),children:["All (",t.length,")"]})]}),a.jsx("div",{className:"requests-list",children:L.length===0?a.jsx("div",{className:"card",children:a.jsxs("p",{className:"text-muted text-center",children:["No ",l!=="all"&&l," requests found."]})}):L.map(P=>{const T=r.find(Z=>Z.id===P.from_sub_area_id),X=r.find(Z=>Z.id===P.to_sub_area_id),te=i.find(Z=>Z.id===P.requesting_admin_id),oe=P.status==="pending";return a.jsxs("div",{className:"card request-card",children:[a.jsxs("div",{className:"request-header",children:[a.jsxs("div",{className:"request-title",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"text-primary",children:T==null?void 0:T.name}),"  ",a.jsx("span",{className:"text-secondary",children:X==null?void 0:X.name})]}),a.jsx("span",{className:`badge ${A(P.status)}`,children:P.status.toUpperCase()})]}),a.jsxs("div",{className:"request-meta",children:[a.jsxs("p",{className:"text-small text-muted",children:["Requested by: ",a.jsx("strong",{children:te==null?void 0:te.full_name})," (",te==null?void 0:te.email,")"]}),a.jsxs("p",{className:"text-small text-muted",children:["Date: ",U(P.requested_at)]})]})]}),a.jsxs("div",{className:"request-body",children:[a.jsx("p",{children:a.jsx("strong",{children:"Reason:"})}),a.jsx("p",{className:"reason-text",children:P.reason}),P.status!=="pending"&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsxs("p",{className:"text-small text-muted",children:["Reviewed: ",U(P.reviewed_at)]}),P.notes&&a.jsxs(a.Fragment,{children:[a.jsx("p",{children:a.jsx("strong",{children:"Admin Notes:"})}),a.jsx("p",{className:"notes-text",children:P.notes})]})]})]}),oe&&a.jsxs("div",{className:"request-actions",children:[a.jsx("button",{onClick:()=>W(P.id),disabled:m===P.id,className:"btn btn-success",children:m===P.id?"Processing...":"Approve"}),a.jsx("button",{onClick:()=>x(P.id),disabled:m===P.id,className:"btn btn-error",children:"Deny"})]})]},P.id)})}),N&&a.jsx("div",{className:"modal-overlay",onClick:()=>w(null),children:a.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[a.jsx("h2",{children:"Deny Access Request"}),a.jsx("p",{children:"Please provide a reason for denying this request:"}),a.jsx("textarea",{value:p,onChange:P=>j(P.target.value),rows:4,className:"form-textarea",placeholder:"Explain why this request is being denied...",autoFocus:!0}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:()=>E(N),disabled:!p.trim()||m===N,className:"btn btn-error",children:m===N?"Denying...":"Deny Request"}),a.jsx("button",{onClick:()=>w(null),className:"btn btn-secondary",children:"Cancel"})]})]})})]})}function l6(){const{user:e}=sn(),[t,n]=R.useState([]),[r,s]=R.useState([]),[i,o]=R.useState(!0),[l,c]=R.useState(""),[d,h]=R.useState(null),[m,g]=R.useState(null),{toasts:p,showToast:j,removeToast:N}=Hn();R.useEffect(()=>{w()},[e]),R.useEffect(()=>{if(l.trim()){const x=l.toLowerCase(),A=t.filter(U=>U.full_name.toLowerCase().includes(x)||U.email.toLowerCase().includes(x));s(A)}else s(t)},[l,t]);const w=async()=>{o(!0);try{const x=e.managed_department_id;if(!x){j("You are not assigned to manage a department","error");return}const A=await Dx(x);n(A),s(A)}catch(x){console.error("Failed to load staff:",x),j("Failed to load staff members","error")}finally{o(!1)}},y=x=>{if(d===x)h(null),g(null);else{h(x);const A=t.find(U=>U.id===x);g((A==null?void 0:A.view_permissions)||L2())}},_=x=>{g(A=>({...A,[x]:!A[x]}))},S=async x=>{try{await Xk(x,m,e.email),j("Permissions updated successfully","success"),await w(),h(null),g(null)}catch(A){console.error("Failed to update permissions:",A),j("Failed to update permissions","error")}},C=async()=>{if(window.confirm("Enable all permissions for all staff in your department? This cannot be undone."))try{const x={can_view_catalog:!0,can_create_bookings:!0,can_cancel_bookings:!0,can_view_history:!0,can_view_analytics:!0,can_export_data:!0,can_request_access:!0,email_notifications:!0,modified_by:e.email,modified_at:new Date().toISOString()};await E2(e.managed_department_id,x),j("All staff permissions enabled","success"),await w()}catch(x){console.error("Failed to bulk update:",x),j("Failed to update all staff permissions","error")}},q=async()=>{if(window.confirm("Reset all staff permissions to defaults? This cannot be undone."))try{const x=L2();await E2(e.managed_department_id,{...x,modified_by:e.email,modified_at:new Date().toISOString()}),j("All staff permissions reset to defaults","success"),await w()}catch(x){console.error("Failed to reset permissions:",x),j("Failed to reset permissions","error")}},W=x=>x?Object.entries(x).filter(([A,U])=>A.startsWith("can_")&&U===!0).length:0,E=x=>x?new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return i?a.jsx("div",{className:"loading",children:"Loading staff members..."}):a.jsxs("div",{className:"department-staff-permissions",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h1",{children:"Manage Staff Permissions"}),a.jsx("p",{className:"subtitle",children:"Control what your department staff can see and do"})]}),a.jsxs("div",{className:"alert alert-warning",style:{marginBottom:"1.5rem"},children:[a.jsx("strong",{children:"Department Restriction:"})," You can only manage staff in YOUR department (",e.department,")"]}),a.jsxs("div",{className:"actions-bar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",gap:"1rem",flexWrap:"wrap"},children:[a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:l,onChange:x=>c(x.target.value),className:"search-input",style:{flex:"1",minWidth:"250px",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"}}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{onClick:C,className:"btn btn-primary btn-sm",children:"Enable All"}),a.jsx("button",{onClick:q,className:"btn btn-secondary btn-sm",children:"Reset to Default"})]})]}),r.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"No staff members found in your department."})}):a.jsx("div",{className:"staff-table-container",children:a.jsxs("table",{className:"staff-permissions-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Staff Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Active Permissions"}),a.jsx("th",{children:"Last Modified"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map(x=>{var A,U;return a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:d===x.id?"expanded":"",children:[a.jsxs("td",{children:[a.jsx("strong",{children:x.full_name}),a.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:x.role==="staff"?"Staff Member":x.role})]}),a.jsx("td",{children:x.email}),a.jsx("td",{children:a.jsxs("span",{className:"badge badge-info",children:[W(x.view_permissions)," / 8 enabled"]})}),a.jsxs("td",{children:[a.jsx("div",{style:{fontSize:"0.9rem"},children:E((A=x.view_permissions)==null?void 0:A.modified_at)}),((U=x.view_permissions)==null?void 0:U.modified_by)&&a.jsxs("div",{style:{fontSize:"0.8rem",color:"#666"},children:["by ",x.view_permissions.modified_by]})]}),a.jsx("td",{children:a.jsx("button",{onClick:()=>y(x.id),className:"btn btn-sm btn-secondary",children:d===x.id?"Close":"Edit Permissions"})})]},x.id),d===x.id&&m&&a.jsx("tr",{className:"permissions-editor-row",children:a.jsx("td",{colSpan:"5",children:a.jsxs("div",{className:"permissions-editor",children:[a.jsxs("h3",{children:["Edit Permissions for ",x.full_name]}),a.jsxs("div",{className:"permissions-grid",children:[a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_view_catalog||!1,onChange:()=>_("can_view_catalog")}),a.jsxs("span",{children:[a.jsx("strong",{children:"View Equipment Catalog"}),a.jsx("small",{children:"Browse available equipment"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_create_bookings||!1,onChange:()=>_("can_create_bookings")}),a.jsxs("span",{children:[a.jsx("strong",{children:"Create Bookings"}),a.jsx("small",{children:"Book equipment for projects"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_cancel_bookings||!1,onChange:()=>_("can_cancel_bookings")}),a.jsxs("span",{children:[a.jsx("strong",{children:"Cancel Own Bookings"}),a.jsx("small",{children:"Cancel their own bookings"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_view_history||!1,onChange:()=>_("can_view_history")}),a.jsxs("span",{children:[a.jsx("strong",{children:"View Booking History"}),a.jsx("small",{children:"Access past bookings"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_view_analytics||!1,onChange:()=>_("can_view_analytics")}),a.jsxs("span",{children:[a.jsx("strong",{children:"View Analytics Dashboard"}),a.jsx("small",{children:"Read-only statistics access"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_export_data||!1,onChange:()=>_("can_export_data")}),a.jsxs("span",{children:[a.jsx("strong",{children:"Export Own Booking Data"}),a.jsx("small",{children:"Download CSV reports"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.can_request_access||!1,onChange:()=>_("can_request_access")}),a.jsxs("span",{children:[a.jsx("strong",{children:"Request Interdepartmental Access"}),a.jsx("small",{children:"Request access to other departments"})]})]}),a.jsxs("label",{className:"permission-item",children:[a.jsx("input",{type:"checkbox",checked:m.email_notifications||!1,onChange:()=>_("email_notifications")}),a.jsxs("span",{children:[a.jsx("strong",{children:"Receive Email Notifications"}),a.jsx("small",{children:"Get booking status updates"})]})]})]}),a.jsxs("div",{className:"permissions-actions",style:{marginTop:"1rem",display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:()=>{h(null),g(null)},className:"btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:()=>S(x.id),className:"btn btn-primary",children:"Save Permissions"})]})]})})})]})})})]})}),p.map(x=>a.jsx(Vn,{message:x.message,type:x.type,onClose:()=>N(x.id)},x.id)),a.jsx("style",{jsx:!0,children:`
        .department-staff-permissions {
          padding: 2rem;
          max-width: 1400px;
          margin: 0 auto;
        }

        .page-header {
          margin-bottom: 2rem;
        }

        .page-header h1 {
          margin-bottom: 0.5rem;
        }

        .subtitle {
          color: #666;
          font-size: 1rem;
        }

        .staff-table-container {
          background: white;
          border-radius: 8px;
          overflow: hidden;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .staff-permissions-table {
          width: 100%;
          border-collapse: collapse;
        }

        .staff-permissions-table th {
          background: #f5f5f5;
          padding: 1rem;
          text-align: left;
          font-weight: 600;
          border-bottom: 2px solid #ddd;
        }

        .staff-permissions-table td {
          padding: 1rem;
          border-bottom: 1px solid #eee;
        }

        .staff-permissions-table tbody tr:hover {
          background: #f9f9f9;
        }

        .staff-permissions-table tbody tr.expanded {
          background: #f0f7ff;
        }

        .permissions-editor-row {
          background: white !important;
        }

        .permissions-editor {
          padding: 2rem;
          background: #f9f9f9;
          border: 2px solid #e0e0e0;
          border-radius: 8px;
        }

        .permissions-editor h3 {
          margin-bottom: 1.5rem;
          color: #333;
        }

        .permissions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 1rem;
          margin-bottom: 1rem;
        }

        .permission-item {
          display: flex;
          align-items: flex-start;
          gap: 0.75rem;
          padding: 1rem;
          background: white;
          border: 1px solid #ddd;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.2s;
        }

        .permission-item:hover {
          border-color: #007bff;
          box-shadow: 0 2px 8px rgba(0,123,255,0.1);
        }

        .permission-item input[type="checkbox"] {
          margin-top: 0.25rem;
          width: 18px;
          height: 18px;
          cursor: pointer;
        }

        .permission-item span {
          flex: 1;
        }

        .permission-item strong {
          display: block;
          margin-bottom: 0.25rem;
          color: #333;
        }

        .permission-item small {
          display: block;
          color: #666;
          font-size: 0.875rem;
        }

        .badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 12px;
          font-size: 0.875rem;
          font-weight: 600;
        }

        .badge-info {
          background: #e3f2fd;
          color: #1976d2;
        }

        .alert {
          padding: 1rem;
          border-radius: 6px;
          border-left: 4px solid;
        }

        .alert-warning {
          background: #fff3cd;
          border-color: #ffc107;
          color: #856404;
        }

        .empty-state {
          text-align: center;
          padding: 3rem;
          color: #666;
        }

        @media (max-width: 768px) {
          .department-staff-permissions {
            padding: 1rem;
          }

          .permissions-grid {
            grid-template-columns: 1fr;
          }

          .actions-bar {
            flex-direction: column;
            align-items: stretch !important;
          }

          .search-input {
            width: 100% !important;
          }
        }
      `})]})}function c6(){const{user:e}=sn(),[t,n]=R.useState([]),[r,s]=R.useState(!0),[i,o]=R.useState({}),{toasts:l,showToast:c,removeToast:d}=Hn(),[h,m]=R.useState({}),[g,p]=R.useState(!1),j=["Communication Design","Moving Image Design","Illustration","Fashion Design","Fine Art","Visual Culture"];R.useEffect(()=>{N(),w()},[]);const N=async()=>{s(!0);try{const x=await U4();n(x)}catch(x){console.error("Failed to load system settings:",x),c("Failed to load system settings","error")}finally{s(!1)}},w=()=>{const x=localStorage.getItem("ncadbook_department_access");if(x)m(JSON.parse(x));else{const A={};j.forEach(U=>{A[U]=[]}),m(A)}},y=x=>{localStorage.setItem("ncadbook_department_access",JSON.stringify(x)),m(x)},_=(x,A)=>{const U=h[x]||[],L=U.includes(A),O={...h,[x]:L?U.filter(P=>P!==A):[...U,A]};y(O),c(`${x} ${L?"removed from":"granted access to"} ${A} equipment`,"success")},S=async(x,A)=>{o({...i,[x]:!0});try{const U=!A;await z4(x,U,e.id),n(t.map(L=>L.key===x?{...L,value:U,modified_by:e.id,modified_at:new Date().toISOString()}:L)),c("Setting updated successfully","success")}catch(U){console.error("Failed to update setting:",U),c("Failed to update setting","error")}finally{o({...i,[x]:!1})}},C=x=>({cross_department_browsing_enabled:"Cross-Department Equipment Browsing",cross_department_booking_enabled:"Cross-Department Equipment Booking",cross_department_approval_required:"Cross-Department Approval Required",staff_cross_department_requests_enabled:"Staff Cross-Department Requests",equipment_kits_enabled:"Equipment Kits",room_bookings_visible_staff:"Room Bookings - Staff Portal",room_bookings_visible_dept_admin:"Room Bookings - Department Admin Portal",room_bookings_enabled:"Room Bookings System"})[x]||x,q=(x,A)=>({cross_department_browsing_enabled:"When enabled, students can browse and view equipment from departments other than their own. A department filter will appear in the equipment browse page.",cross_department_booking_enabled:"Allow students to book equipment from other departments. This setting works in conjunction with browsing and requires department admin approval unless auto-approval is enabled.",cross_department_approval_required:"When enabled, all cross-department bookings require explicit approval from the equipment's department admin. When disabled, bookings are auto-approved if the equipment is available.",staff_cross_department_requests_enabled:"Allow staff members to request equipment from other departments for workshops, projects, or special events.",equipment_kits_enabled:"Allow department admins to create equipment kits (bundles) that students can book as a single unit.",room_bookings_visible_staff:"Show room booking functionality in the Staff portal. Staff can view, create, and manage room bookings for their department.",room_bookings_visible_dept_admin:"Show room booking functionality in the Department Admin portal. Admins can view, approve, and manage room bookings.",room_bookings_enabled:"Master toggle for the entire room bookings system. When disabled, room bookings are hidden from all portals."})[x]||A,W=x=>({cross_department_browsing_enabled:{enabled:"Students will see a department dropdown to browse all equipment across NCAD. Department admins can control booking permissions.",disabled:"Students can only view equipment from their own department."},cross_department_booking_enabled:{enabled:"Students can request equipment from other departments. Booking availability is controlled by department admins.",disabled:"Students can only book equipment from their own department, even if browsing is enabled."},cross_department_approval_required:{enabled:'All cross-department bookings go to "pending" status and require explicit department admin approval.',disabled:"Cross-department bookings are auto-approved if equipment is available (still subject to department admin access control)."},staff_cross_department_requests_enabled:{enabled:"Staff can create cross-department equipment requests with smart routing based on availability.",disabled:"Staff cannot request equipment from other departments."},equipment_kits_enabled:{enabled:"Department admins can create equipment kits, students can book entire kits with auto-booking of individual items.",disabled:"Kit functionality is hidden from all users."},room_bookings_visible_staff:{enabled:"Room Bookings tab appears in Staff portal. Staff can create and manage room bookings.",disabled:"Room bookings are hidden from Staff portal, even if the system is enabled."},room_bookings_visible_dept_admin:{enabled:"Room Bookings section appears in Department Admin portal with approval and management features.",disabled:"Room bookings are hidden from Department Admin portal, even if the system is enabled."},room_bookings_enabled:{enabled:"Room bookings system is active. Visibility in portals is controlled by individual portal settings.",disabled:"Room bookings system is completely disabled across all portals."}})[x]||{};if(r)return a.jsxs("div",{className:"system-settings",children:[a.jsx("h2",{children:"System Settings"}),a.jsx("div",{className:"loading-state",children:a.jsx("p",{children:"Loading system settings..."})})]});const E=()=>{confirm("This will reset all demo data including the new system settings. Continue?")&&(localStorage.removeItem("ncadbook_demo_data"),window.location.reload())};return a.jsxs("div",{className:"system-settings",children:[a.jsxs("div",{className:"settings-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"System Settings"}),a.jsx("p",{className:"settings-subtitle",children:"Global configuration for the NCAD Equipment Booking System. Changes take effect immediately for all users."})]}),a.jsx("button",{onClick:E,className:"btn-reset-demo",title:"Reset demo data to load new settings",children:" Reset Demo Data"})]}),a.jsx("div",{className:"settings-list",children:t.map(x=>{const A=W(x.key),U=i[x.key],L=x.key==="cross_department_browsing_enabled",O=x.value===!0||x.value==="true";return a.jsxs("div",{className:"setting-card",children:[a.jsxs("div",{className:"setting-header",children:[a.jsxs("div",{className:"setting-info",children:[a.jsx("h3",{children:C(x.key)}),a.jsx("p",{className:"setting-description",children:q(x.key,x.description)})]}),a.jsxs("div",{className:"setting-toggle",children:[a.jsxs("label",{className:"toggle-switch",children:[a.jsx("input",{type:"checkbox",checked:x.value===!0||x.value==="true",onChange:()=>S(x.key,x.value),disabled:U}),a.jsx("span",{className:"toggle-slider"})]}),a.jsx("span",{className:`toggle-label ${x.value?"enabled":"disabled"}`,children:U?"Saving...":x.value?"Enabled":"Disabled"})]})]}),A&&a.jsx("div",{className:"setting-impact",children:a.jsxs("div",{className:`impact-message ${x.value?"active":"inactive"}`,children:[a.jsx("strong",{children:x.value?" Active:":" Inactive:"}),a.jsx("span",{children:x.value?A.enabled:A.disabled})]})}),L&&O&&a.jsxs("div",{className:"department-access-matrix",children:[a.jsxs("div",{className:"matrix-header",children:[a.jsx("h4",{children:"Department Equipment Access Control"}),a.jsx("p",{children:"Configure which departments can access equipment from other departments"})]}),a.jsx("div",{className:"matrix-table-wrapper",children:a.jsxs("table",{className:"access-matrix-table",children:[a.jsxs("thead",{children:[a.jsxs("tr",{children:[a.jsx("th",{className:"department-column",children:"Requesting Department"}),a.jsx("th",{colSpan:j.length,className:"access-column-header",children:"Can Access Equipment From"})]}),a.jsxs("tr",{children:[a.jsx("th",{}),j.map(P=>a.jsx("th",{className:"target-dept",children:P.split(" ")[0]},P))]})]}),a.jsx("tbody",{children:j.map(P=>a.jsxs("tr",{children:[a.jsx("td",{className:"requesting-dept-name",children:P}),j.map(T=>{var oe;const X=P===T,te=(oe=h[P])==null?void 0:oe.includes(T);return a.jsx("td",{className:"access-cell",children:X?a.jsx("span",{className:"own-dept-indicator",title:"Own department - always has access",children:""}):a.jsxs("label",{className:"access-checkbox",children:[a.jsx("input",{type:"checkbox",checked:te||!1,onChange:()=>_(P,T),title:`Allow ${P} to access ${T} equipment`}),a.jsx("span",{className:"checkmark"})]})},T)})]},P))})]})}),a.jsxs("div",{className:"matrix-legend",children:[a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-icon own",children:""}),a.jsx("span",{children:"Own department (always has access)"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-icon checked",children:""}),a.jsx("span",{children:"Has access to equipment"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("span",{className:"legend-icon unchecked",children:""}),a.jsx("span",{children:"No access"})]})]})]}),x.modified_at&&a.jsx("div",{className:"setting-metadata",children:a.jsxs("small",{children:["Last modified: ",new Date(x.modified_at).toLocaleString()]})})]},x.key)})}),a.jsxs("div",{className:"settings-warning",children:[a.jsx("h4",{children:" Important Notes"}),a.jsxs("div",{className:"settings-info-sections",children:[a.jsxs("div",{className:"info-section",children:[a.jsx("h5",{children:"Cross-Department Equipment Access"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Browsing:"})," Allows students to ",a.jsx("em",{children:"view"})," equipment from all departments via a dropdown filter."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Booking:"})," Allows students to ",a.jsx("em",{children:"request bookings"})," for equipment from other departments."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Approval:"})," Controls whether cross-department bookings are auto-approved or require manual approval."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Department Control:"})," Department admins can grant/revoke individual student access via the Cross-Department Access management page."]})]})]}),a.jsxs("div",{className:"info-section",children:[a.jsx("h5",{children:"Room Bookings Visibility"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Master Toggle:"}),' The "Room Bookings System" setting controls the entire feature across all portals.']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Staff Portal:"})," When enabled, staff can view and create room bookings for their department."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Dept Admin Portal:"})," When enabled, department admins can approve, manage, and view all room bookings."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Recommended:"})," Enable master toggle first, then selectively enable for each portal as needed."]})]})]}),a.jsxs("div",{className:"info-section",children:[a.jsx("h5",{children:"Other Settings"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Staff Requests:"})," All cross-department requests require department admin approval before equipment becomes accessible."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Equipment Kits:"})," Kits are department-specific. Students can only see and book kits from their own department."]})]})]})]})]}),l.map(x=>a.jsx(Vn,{message:x.message,type:x.type,onClose:()=>d(x.id)},x.id))]})}const P2=[{id:1,feature_key:"role_view_only_staff",feature_name:"View-Only Staff",description:"Read-only access to equipment catalog for teaching faculty",is_enabled:!0,created_at:"2024-03-01"},{id:2,feature_key:"role_accounts_officer",feature_name:"Accounts Officer",description:"Financial reporting, cost analysis, and budget tracking",is_enabled:!0,created_at:"2024-03-01"},{id:3,feature_key:"role_payroll_coordinator",feature_name:"Payroll Coordinator",description:"Staff cost center allocations and payroll data exports",is_enabled:!0,created_at:"2024-03-01"},{id:4,feature_key:"role_it_support_technician",feature_name:"IT Support Technician",description:"Equipment management, system logs, and technical functions",is_enabled:!0,created_at:"2024-03-01"},{id:5,feature_key:"role_budget_manager",feature_name:"Budget Manager",description:"Budget tracking, cost forecasting, and financial planning",is_enabled:!0,created_at:"2024-03-01"},{id:6,feature_key:"feature_financial_management",feature_name:"Financial Management Module",description:"Equipment costs, depreciation tracking, and financial reports",is_enabled:!0,created_at:"2024-03-01",metadata:{components:["Cost tracking","Depreciation","TCO calculations"]}},{id:7,feature_key:"feature_payroll_tracking",feature_name:"Payroll Tracking Module",description:"Staff allocations, cost centers, and payroll exports",is_enabled:!0,created_at:"2024-03-01",metadata:{components:["Cost centers","Staff allocations","Payroll exports"]}},{id:8,feature_key:"feature_it_asset_lifecycle",feature_name:"IT Asset Lifecycle Module",description:"Equipment lifecycle management and system logging",is_enabled:!0,created_at:"2024-03-01",metadata:{components:["Asset tracking","Maintenance logs","System diagnostics"]}},{id:9,feature_key:"feature_budget_analytics",feature_name:"Budget Analytics Module",description:"Budget forecasting, variance tracking, and spending analysis",is_enabled:!0,created_at:"2024-03-01",metadata:{components:["Budget forecasting","Variance tracking","Trend analysis"]}}];function d6(){const{user:e}=sn(),[t,n]=R.useState(P2),[r,s]=R.useState(!1),[i,o]=R.useState({view_only_staff:1,accounts_officer:1,payroll_coordinator:1,it_support_technician:1,budget_manager:1}),[l,c]=R.useState([]),{toasts:d,showToast:h,removeToast:m}=Hn(),g=()=>{n(P2)},p=(q,W)=>{const E=t.find(U=>U.feature_key===q),x=W?"disable":"enable";if(W){const U=`Disable "${E.feature_name}"?

This will immediately block access for all users with this role/feature.`;if(!window.confirm(U))return}const A=t.map(U=>U.feature_key===q?{...U,is_enabled:!W,updated_at:new Date().toISOString()}:U);n(A),h(`${E.feature_name} ${x}d successfully (Demo Mode)`,"success")},j=()=>{if(!window.confirm(`Disable ALL advanced roles?

This will immediately disable View-Only Staff, Accounts Officer, Payroll Coordinator, IT Support, and Budget Manager roles.`))return;const q=t.filter(E=>E.feature_key.startsWith("role_")&&!["role_student","role_general_admin","role_master_admin"].includes(E.feature_key)).map(E=>E.feature_key),W=t.map(E=>q.includes(E.feature_key)?{...E,is_enabled:!1,updated_at:new Date().toISOString()}:E);n(W),h("All advanced roles disabled (Demo Mode)","success")},N=q=>({role_view_only_staff:"",role_accounts_officer:"",role_payroll_coordinator:"",role_it_support_technician:"",role_budget_manager:"",feature_financial_management:"",feature_payroll_tracking:"",feature_it_asset_lifecycle:"",feature_budget_analytics:""})[q]||"",w=q=>({role_accounts_officer:"feature_financial_management",role_payroll_coordinator:"feature_payroll_tracking",role_it_support_technician:"feature_it_asset_lifecycle",role_budget_manager:"feature_budget_analytics"})[q],y=q=>{const W=w(q);if(!W)return!0;const E=t.find(x=>x.feature_key===W);return(E==null?void 0:E.is_enabled)||!1};if(r)return a.jsx("div",{className:"loading",children:"Loading role management..."});if(t.length===0)return a.jsxs("div",{className:"role-management-error",children:[a.jsx("h2",{children:" Database Connection Error"}),a.jsx("p",{children:"Unable to load feature flags from Supabase."}),a.jsxs("div",{className:"error-instructions",children:[a.jsx("h3",{children:"To fix this:"}),a.jsxs("ol",{children:[a.jsx("li",{children:"Open your Supabase project dashboard"}),a.jsx("li",{children:"Go to Project Settings  API"}),a.jsx("li",{children:"Copy your Project URL and anon key"}),a.jsxs("li",{children:["Update ",a.jsx("code",{children:".env.local"})," with your credentials"]}),a.jsxs("li",{children:["Restart the dev server (",a.jsx("code",{children:"npm run dev"}),")"]})]}),a.jsx("p",{className:"check-console",children:"Check the browser console for detailed errors."})]})]});const _=t.filter(q=>q.feature_key.startsWith("role_")),S=t.filter(q=>q.feature_key.startsWith("feature_")),C=t.filter(q=>q.is_enabled).length;return a.jsxs("div",{className:"role-management",children:[a.jsxs("div",{className:"role-management-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:" Role Management"}),a.jsx("p",{className:"subtitle",children:"Activate/deactivate advanced user roles and feature modules. Test each role in demo portals."})]}),a.jsxs("div",{className:"header-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-value",children:C}),a.jsx("div",{className:"stat-label",children:"Features Enabled"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-value",children:Object.keys(i).length}),a.jsx("div",{className:"stat-label",children:"Active Roles"})]})]})]}),a.jsxs("div",{className:"quick-actions",children:[a.jsx("button",{onClick:()=>g(),className:"btn btn-secondary",children:" Refresh Status"}),a.jsx("button",{onClick:j,className:"btn btn-danger",children:" Disable All Advanced Roles"})]}),a.jsxs("section",{className:"role-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:" User Roles"}),a.jsx("p",{children:"Toggle availability of advanced user roles in the system"})]}),a.jsx("div",{className:"role-grid",children:_.map(q=>{var L,O;const W=q.feature_key.replace("role_",""),E=i[W]||0,x=w(q.feature_key),A=y(q.feature_key),U=q.is_enabled?!0:A;return a.jsxs("div",{className:`role-card ${q.is_enabled?"enabled":"disabled"}`,children:[a.jsxs("div",{className:"role-card-header",children:[a.jsx("div",{className:"role-icon",children:N(q.feature_key)}),a.jsxs("div",{className:"role-info",children:[a.jsx("h4",{children:q.feature_name}),a.jsx("span",{className:`status-badge ${q.is_enabled?"status-enabled":"status-disabled"}`,children:q.is_enabled?"Enabled":"Disabled"})]}),a.jsxs("label",{className:"toggle-switch",children:[a.jsx("input",{type:"checkbox",checked:q.is_enabled,onChange:()=>p(q.feature_key,q.is_enabled),disabled:!U&&!q.is_enabled}),a.jsx("span",{className:"toggle-slider"})]})]}),a.jsx("p",{className:"role-description",children:q.description}),a.jsxs("div",{className:"role-meta",children:[a.jsxs("div",{className:"meta-item",children:[a.jsx("strong",{children:"Users:"})," ",a.jsx("span",{children:E})]}),x&&a.jsxs("div",{className:`meta-item dependency ${A?"met":"unmet"}`,children:[a.jsx("strong",{children:"Requires:"}),a.jsx("span",{children:((L=t.find(P=>P.feature_key===x))==null?void 0:L.feature_name)||x}),!A&&a.jsx("span",{className:"warning-icon",children:""})]})]}),q.is_enabled&&a.jsx(Zr,{to:`/demo/${W}`,className:"btn btn-demo",children:" Test Demo Portal"}),!U&&!q.is_enabled&&a.jsxs("div",{className:"warning-message",children:[" Enable ",(O=t.find(P=>P.feature_key===x))==null?void 0:O.feature_name," first"]})]},q.feature_key)})})]}),a.jsxs("section",{className:"role-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:" Feature Modules"}),a.jsx("p",{children:"Core functionality modules that power advanced roles"})]}),a.jsx("div",{className:"role-grid",children:S.map(q=>{const E=(q.metadata||{}).components||[];return a.jsxs("div",{className:`role-card ${q.is_enabled?"enabled":"disabled"}`,children:[a.jsxs("div",{className:"role-card-header",children:[a.jsx("div",{className:"role-icon",children:N(q.feature_key)}),a.jsxs("div",{className:"role-info",children:[a.jsx("h4",{children:q.feature_name}),a.jsx("span",{className:`status-badge ${q.is_enabled?"status-enabled":"status-disabled"}`,children:q.is_enabled?"Enabled":"Disabled"})]}),a.jsxs("label",{className:"toggle-switch",children:[a.jsx("input",{type:"checkbox",checked:q.is_enabled,onChange:()=>p(q.feature_key,q.is_enabled)}),a.jsx("span",{className:"toggle-slider"})]})]}),a.jsx("p",{className:"role-description",children:q.description}),E.length>0&&a.jsx("div",{className:"role-meta",children:a.jsxs("div",{className:"meta-item",children:[a.jsx("strong",{children:"Components:"}),a.jsx("span",{children:E.join(", ")})]})})]},q.feature_key)})})]}),a.jsxs("section",{className:"role-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:" Recent Configuration Changes"}),a.jsx("p",{children:"Last 20 role/feature modifications"})]}),a.jsx("div",{className:"activity-log",children:l.length===0?a.jsx("p",{className:"empty-state",children:"No configuration changes recorded yet"}):a.jsxs("table",{className:"activity-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Timestamp"}),a.jsx("th",{children:"Admin"}),a.jsx("th",{children:"Feature/Role"}),a.jsx("th",{children:"Action"}),a.jsx("th",{children:"Status"})]})}),a.jsx("tbody",{children:l.map(q=>{var E;const W=q.details||{};return a.jsxs("tr",{children:[a.jsx("td",{children:new Date(q.created_at).toLocaleString()}),a.jsx("td",{children:((E=q.users)==null?void 0:E.full_name)||"Unknown"}),a.jsx("td",{children:W.feature_name||W.feature_key||""}),a.jsx("td",{children:W.action||"Update"}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${W.new_status==="enabled"?"status-enabled":"status-disabled"}`,children:W.new_status||""})})]},q.id)})})]})})]}),d.map(q=>a.jsx(Vn,{message:q.message,type:q.type,onClose:()=>m(q.id)},q.id))]})}function u6(){const{user:e}=sn(),[t,n]=R.useState([]),[r,s]=R.useState(!0),[i,o]=R.useState("pending"),[l,c]=R.useState(null),[d,h]=R.useState(""),[m,g]=R.useState(""),[p,j]=R.useState(!1),{toasts:N,showToast:w,removeToast:y}=Hn();R.useEffect(()=>{_()},[i]);const _=async()=>{s(!0);try{const x=i==="all"?null:i,A=await Q4(e.department,x);n(A)}catch(x){console.error("Failed to load requests:",x),w("Failed to load requests","error")}finally{s(!1)}},S=async()=>{if(!l||d.trim().length<20){w("Please provide detailed collection instructions (minimum 20 characters)","error");return}j(!0);try{await t3(l.id,e.id,d),w("Request approved successfully! Staff member will be notified.","success"),c(null),h(""),_()}catch(x){console.error("Failed to approve request:",x),w("Failed to approve request","error")}finally{j(!1)}},C=async()=>{if(!l||m.trim().length<20){w("Please provide a detailed reason for denial (minimum 20 characters)","error");return}j(!0);try{await n3(l.id,e.id,m),w("Request denied. Staff member will be notified.","success"),c(null),g(""),_()}catch(x){console.error("Failed to deny request:",x),w("Failed to deny request","error")}finally{j(!1)}},q=x=>{c(x),h("Equipment available for collection on [date] at [time] from [location]. Please return by [date/time]. Contact [email/phone] for any questions."),g("")},W=x=>{c(x),g(""),h("")},E=()=>{c(null),h(""),g("")};return r?a.jsxs("div",{className:"cross-dept-requests",children:[a.jsx("h2",{children:"Cross-Department Requests"}),a.jsx("p",{children:"Loading requests..."})]}):a.jsxs("div",{className:"cross-dept-requests",children:[a.jsx("h2",{children:"Cross-Department Equipment Requests"}),a.jsx("p",{className:"subtitle",children:"Review and approve/deny requests from staff members for your department's equipment"}),a.jsxs("div",{className:"filter-tabs",children:[a.jsxs("button",{onClick:()=>o("pending"),className:i==="pending"?"tab-active":"tab",children:["Pending (",t.filter(x=>x.status==="pending").length,")"]}),a.jsxs("button",{onClick:()=>o("approved"),className:i==="approved"?"tab-active":"tab",children:["Approved (",t.filter(x=>x.status==="approved").length,")"]}),a.jsxs("button",{onClick:()=>o("denied"),className:i==="denied"?"tab-active":"tab",children:["Denied (",t.filter(x=>x.status==="denied").length,")"]}),a.jsxs("button",{onClick:()=>o("all"),className:i==="all"?"tab-active":"tab",children:["All (",t.length,")"]})]}),t.length===0?a.jsx("div",{className:"empty-state",children:a.jsxs("p",{children:["No ",i," requests found."]})}):a.jsx("div",{className:"requests-grid",children:t.map(x=>a.jsxs("div",{className:"request-card",children:[a.jsx("div",{className:"request-header",children:a.jsxs("div",{children:[a.jsx("h3",{children:x.equipment_type}),a.jsx("span",{className:`status-badge status-${x.status}`,children:x.status.charAt(0).toUpperCase()+x.status.slice(1)}),x.routing_type==="broadcast"&&a.jsx("span",{className:"broadcast-badge",title:"This request was broadcast to multiple departments",children:" Broadcast"})]})}),a.jsxs("div",{className:"request-info",children:[a.jsxs("div",{className:"info-row",children:[a.jsx("span",{className:"label",children:"Requesting Staff:"}),a.jsx("span",{className:"value",children:x.requesting_user_name})]}),a.jsxs("div",{className:"info-row",children:[a.jsx("span",{className:"label",children:"Email:"}),a.jsx("span",{className:"value",children:x.requesting_user_email})]}),a.jsxs("div",{className:"info-row",children:[a.jsx("span",{className:"label",children:"Quantity Needed:"}),a.jsx("span",{className:"value",children:a.jsx("strong",{children:x.quantity})})]}),x.available_at_department&&a.jsxs("div",{className:"info-row",children:[a.jsx("span",{className:"label",children:"Available in Your Dept:"}),a.jsx("span",{className:"value",children:a.jsx("strong",{children:x.available_at_department})})]}),a.jsxs("div",{className:"info-row",children:[a.jsx("span",{className:"label",children:"Dates:"}),a.jsxs("span",{className:"value",children:[new Date(x.start_date).toLocaleDateString()," - ",new Date(x.end_date).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"request-justification",children:[a.jsx("strong",{children:"Justification:"}),a.jsx("p",{children:x.justification})]}),x.status==="pending"&&a.jsxs("div",{className:"request-actions",children:[a.jsx("button",{onClick:()=>q(x),className:"btn btn-success btn-sm",children:" Approve"}),a.jsx("button",{onClick:()=>W(x),className:"btn btn-danger btn-sm",children:" Deny"})]}),x.status!=="pending"&&x.review_notes&&a.jsxs("div",{className:`review-notes ${x.status}`,children:[a.jsx("strong",{children:x.status==="approved"?"Approval Instructions:":"Denial Reason:"}),a.jsx("p",{children:x.review_notes}),a.jsxs("small",{children:["Reviewed: ",new Date(x.reviewed_at).toLocaleString()]})]}),a.jsx("div",{className:"request-metadata",children:a.jsxs("small",{children:["Created: ",new Date(x.created_at).toLocaleString()]})})]},x.id))}),l&&d!==""&&a.jsx("div",{className:"modal-overlay",onClick:E,children:a.jsxs("div",{className:"modal-content approval-dialog",onClick:x=>x.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h3",{children:["Approve Request for ",l.equipment_type]}),a.jsx("button",{onClick:E,className:"modal-close",children:""})]}),a.jsxs("div",{className:"dialog-body",children:[a.jsxs("p",{children:["Provide collection and return instructions for ",a.jsx("strong",{children:l.requesting_user_name}),":"]}),a.jsx("textarea",{value:d,onChange:x=>h(x.target.value),rows:"6",placeholder:"Equipment available for collection on [date] at [time] from [location]...",style:{width:"100%",padding:"0.75rem",fontSize:"1rem",fontFamily:"inherit"}}),a.jsxs("small",{className:d.length<20?"text-error":"text-success",children:[d.length," / 20 characters minimum"]})]}),a.jsxs("div",{className:"dialog-actions",children:[a.jsx("button",{onClick:E,className:"btn btn-secondary",disabled:p,children:"Cancel"}),a.jsx("button",{onClick:S,className:"btn btn-success",disabled:p||d.length<20,children:p?"Approving...":"Approve Request"})]})]})}),l&&m!==""&&a.jsx("div",{className:"modal-overlay",onClick:E,children:a.jsxs("div",{className:"modal-content denial-dialog",onClick:x=>x.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h3",{children:["Deny Request for ",l.equipment_type]}),a.jsx("button",{onClick:E,className:"modal-close",children:""})]}),a.jsxs("div",{className:"dialog-body",children:[a.jsxs("p",{children:["Provide a detailed reason for denying this request to ",a.jsx("strong",{children:l.requesting_user_name}),":"]}),a.jsx("textarea",{value:m,onChange:x=>g(x.target.value),rows:"4",placeholder:"Unfortunately our equipment is fully booked during this period...",style:{width:"100%",padding:"0.75rem",fontSize:"1rem",fontFamily:"inherit"}}),a.jsxs("small",{className:m.length<20?"text-error":"text-success",children:[m.length," / 20 characters minimum"]})]}),a.jsxs("div",{className:"dialog-actions",children:[a.jsx("button",{onClick:E,className:"btn btn-secondary",disabled:p,children:"Cancel"}),a.jsx("button",{onClick:C,className:"btn btn-danger",disabled:p||m.length<20,children:p?"Denying...":"Deny Request"})]})]})}),N.map(x=>a.jsx(Vn,{message:x.message,type:x.type,onClose:()=>y(x.id)},x.id)),a.jsx("style",{jsx:!0,children:`
        .cross-dept-requests {
          padding: 2rem;
        }

        .subtitle {
          color: #666;
          margin-bottom: 2rem;
        }

        .filter-tabs {
          display: flex;
          gap: 0.5rem;
          margin-bottom: 2rem;
          border-bottom: 2px solid #eee;
        }

        .tab,
        .tab-active {
          padding: 0.75rem 1.5rem;
          border: none;
          background: none;
          cursor: pointer;
          font-weight: 600;
          color: #666;
          border-bottom: 3px solid transparent;
          transition: all 0.2s;
        }

        .tab:hover {
          color: #333;
          background-color: #f5f5f5;
        }

        .tab-active {
          color: #1976d2;
          border-bottom-color: #1976d2;
        }

        .requests-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(450px, 1fr));
          gap: 1.5rem;
        }

        .request-card {
          background: #fff;
          border: 1px solid #ddd;
          border-radius: 8px;
          padding: 1.5rem;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .request-header {
          margin-bottom: 1rem;
        }

        .request-header h3 {
          margin: 0 0 0.5rem 0;
          color: #333;
        }

        .status-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 12px;
          font-size: 0.875rem;
          font-weight: 600;
          margin-right: 0.5rem;
        }

        .status-pending {
          background-color: #fff3cd;
          color: #856404;
        }

        .status-approved {
          background-color: #d4edda;
          color: #155724;
        }

        .status-denied {
          background-color: #f8d7da;
          color: #721c24;
        }

        .broadcast-badge {
          display: inline-block;
          padding: 0.25rem 0.5rem;
          background-color: #e3f2fd;
          border-radius: 4px;
          font-size: 0.75rem;
        }

        .request-info {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
          margin-bottom: 1rem;
        }

        .info-row {
          display: flex;
          gap: 0.5rem;
        }

        .info-row .label {
          font-weight: 600;
          color: #666;
          min-width: 140px;
        }

        .info-row .value {
          color: #333;
        }

        .request-justification {
          margin-top: 1rem;
          padding: 1rem;
          background-color: #f5f5f5;
          border-radius: 4px;
        }

        .request-justification strong {
          display: block;
          margin-bottom: 0.5rem;
          color: #333;
        }

        .request-justification p {
          margin: 0;
          color: #555;
          line-height: 1.5;
        }

        .request-actions {
          display: flex;
          gap: 1rem;
          margin-top: 1rem;
        }

        .review-notes {
          margin-top: 1rem;
          padding: 1rem;
          border-radius: 4px;
          border-left: 4px solid;
        }

        .review-notes.approved {
          background-color: #e8f5e9;
          border-left-color: #4caf50;
        }

        .review-notes.denied {
          background-color: #ffebee;
          border-left-color: #f44336;
        }

        .review-notes strong {
          display: block;
          margin-bottom: 0.5rem;
        }

        .review-notes p {
          margin: 0 0 0.5rem 0;
          line-height: 1.5;
        }

        .review-notes small {
          color: #999;
          font-size: 0.85rem;
        }

        .request-metadata {
          margin-top: 1rem;
          padding-top: 1rem;
          border-top: 1px solid #eee;
        }

        .request-metadata small {
          color: #999;
        }

        .empty-state {
          text-align: center;
          padding: 3rem;
          color: #666;
        }

        .approval-dialog,
        .denial-dialog {
          max-width: 600px;
        }

        .dialog-body {
          padding: 1.5rem 0;
        }

        .dialog-body textarea {
          margin-top: 1rem;
          margin-bottom: 0.5rem;
          border: 1px solid #ccc;
          border-radius: 4px;
          resize: vertical;
        }

        .dialog-body small.text-error {
          color: #d32f2f;
        }

        .dialog-body small.text-success {
          color: #4caf50;
        }

        .dialog-actions {
          display: flex;
          justify-content: flex-end;
          gap: 1rem;
          padding-top: 1.5rem;
          border-top: 1px solid #eee;
        }

        @media (max-width: 768px) {
          .cross-dept-requests {
            padding: 1rem;
          }

          .requests-grid {
            grid-template-columns: 1fr;
          }

          .filter-tabs {
            flex-wrap: wrap;
          }
        }
      `})]})}function h6({kit:e,departmentId:t,onClose:n,onSuccess:r}){const{user:s}=sn(),[i,o]=R.useState(""),[l,c]=R.useState(""),[d,h]=R.useState(""),[m,g]=R.useState([]),[p,j]=R.useState([]),[N,w]=R.useState(!1),[y,_]=R.useState(!0);R.useEffect(()=>{S(),e&&(o(e.name),c(e.description||""),h(e.image_url||""),g(e.equipment_ids||[]))},[e]);const S=async()=>{_(!0);try{const A=await xe.query("equipment",{department:t});j(A)}catch(A){console.error("Failed to load equipment:",A)}finally{_(!1)}},C=A=>{g(U=>U.includes(A)?U.filter(L=>L!==A):[...U,A])},q=()=>{g(p.map(A=>A.id))},W=()=>{g([])},E=async A=>{if(A.preventDefault(),!i.trim()||m.length===0){alert("Please provide a kit name and select at least one equipment item");return}w(!0);try{const U={name:i.trim(),description:l.trim(),department_id:t,created_by:s.id,equipment_ids:m,image_url:d.trim()};e?await v5(e.id,U):await E4(U),r()}catch(U){console.error("Failed to save kit:",U),alert("Failed to save kit. Please try again.")}finally{w(!1)}},x=p.reduce((A,U)=>{const L=U.category||"Other";return A[L]||(A[L]=[]),A[L].push(U),A},{});return a.jsx("div",{className:"modal-overlay",onClick:n,children:a.jsxs("div",{className:"modal-content kit-form-modal",onClick:A=>A.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:e?"Edit Equipment Kit":"Create New Equipment Kit"}),a.jsx("button",{onClick:n,className:"modal-close",children:""})]}),a.jsxs("form",{onSubmit:E,children:[a.jsxs("div",{className:"form-section",children:[a.jsx("h3",{children:"Kit Details"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"kit-name",children:"Kit Name *"}),a.jsx("input",{type:"text",id:"kit-name",value:i,onChange:A=>o(A.target.value),placeholder:"e.g., Video Production Starter Kit",required:!0,maxLength:"100"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"kit-description",children:"Description"}),a.jsx("textarea",{id:"kit-description",value:l,onChange:A=>c(A.target.value),placeholder:"Describe what this kit is for and when students should use it...",rows:"3",maxLength:"500"}),a.jsxs("small",{children:[l.length," / 500 characters"]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"kit-image",children:"Image URL (optional)"}),a.jsx("input",{type:"url",id:"kit-image",value:d,onChange:A=>h(A.target.value),placeholder:"https://example.com/kit-image.jpg"})]})]}),a.jsxs("div",{className:"form-section",children:[a.jsxs("div",{className:"equipment-selection-header",children:[a.jsxs("h3",{children:["Select Equipment (",m.length," selected)"]}),a.jsxs("div",{className:"selection-actions",children:[a.jsx("button",{type:"button",onClick:q,className:"btn btn-secondary btn-sm",children:"Select All"}),a.jsx("button",{type:"button",onClick:W,className:"btn btn-secondary btn-sm",children:"Deselect All"})]})]}),y?a.jsx("p",{children:"Loading equipment..."}):p.length===0?a.jsx("div",{className:"empty-state-small",children:a.jsx("p",{children:"No equipment found in your department. Add equipment first to create kits."})}):a.jsx("div",{className:"equipment-selection-list",children:Object.entries(x).map(([A,U])=>a.jsxs("div",{className:"equipment-category",children:[a.jsxs("h4",{children:[A," (",U.length,")"]}),a.jsx("div",{className:"equipment-items",children:U.map(L=>a.jsxs("label",{className:"equipment-checkbox",children:[a.jsx("input",{type:"checkbox",checked:m.includes(L.id),onChange:()=>C(L.id)}),a.jsxs("span",{className:"equipment-label",children:[a.jsx("strong",{children:L.product_name}),a.jsx("small",{children:L.tracking_number})]}),a.jsx("span",{className:`equipment-status status-${L.status}`,children:L.status})]},L.id))})]},A))})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:N,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:N||m.length===0,children:N?"Saving...":e?"Update Kit":"Create Kit"})]})]}),a.jsx("style",{jsx:!0,children:`
          .kit-form-modal {
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
          }

          .form-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
          }

          .form-section:last-of-type {
            border-bottom: none;
          }

          .form-section h3 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.1rem;
          }

          .form-group {
            margin-bottom: 1rem;
          }

          .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
          }

          .form-group input[type="text"],
          .form-group input[type="url"],
          .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
            font-family: inherit;
          }

          .form-group textarea {
            resize: vertical;
          }

          .form-group small {
            display: block;
            margin-top: 0.25rem;
            color: #666;
            font-size: 0.875rem;
          }

          .equipment-selection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
          }

          .selection-actions {
            display: flex;
            gap: 0.5rem;
          }

          .equipment-selection-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 1rem;
          }

          .equipment-category {
            margin-bottom: 1.5rem;
          }

          .equipment-category:last-child {
            margin-bottom: 0;
          }

          .equipment-category h4 {
            margin: 0 0 0.75rem 0;
            color: #666;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
          }

          .equipment-items {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
          }

          .equipment-checkbox {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
          }

          .equipment-checkbox:hover {
            background-color: #f0f0f0;
            border-color: #1976d2;
          }

          .equipment-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
          }

          .equipment-label {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
          }

          .equipment-label strong {
            color: #333;
          }

          .equipment-label small {
            color: #666;
            font-size: 0.85rem;
          }

          .equipment-status {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: capitalize;
          }

          .status-available {
            background-color: #d4edda;
            color: #155724;
          }

          .status-booked {
            background-color: #fff3cd;
            color: #856404;
          }

          .status-maintenance {
            background-color: #f8d7da;
            color: #721c24;
          }

          .empty-state-small {
            text-align: center;
            padding: 2rem;
            color: #666;
            background-color: #f5f5f5;
            border-radius: 4px;
          }

          .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #eee;
          }

          @media (max-width: 768px) {
            .kit-form-modal {
              max-width: 95vw;
              padding: 1rem;
            }

            .equipment-selection-header {
              flex-direction: column;
              align-items: flex-start;
              gap: 1rem;
            }

            .selection-actions {
              width: 100%;
            }

            .selection-actions button {
              flex: 1;
            }
          }
        `})]})})}function f6(){const{user:e}=sn(),[t,n]=R.useState([]),[r,s]=R.useState(!0),[i,o]=R.useState(!1),[l,c]=R.useState(null),[d,h]=R.useState(!1),{toasts:m,showToast:g,removeToast:p}=Hn();R.useEffect(()=>{j()},[d]);const j=async()=>{s(!0);try{const C=await g5(e.department,!d);n(C)}catch(C){console.error("Failed to load kits:",C),g("Failed to load equipment kits","error")}finally{s(!1)}},N=()=>{c(null),o(!0)},w=C=>{c(C),o(!0)},y=async(C,q)=>{if(confirm(`Are you sure you want to deactivate "${q}"? It will no longer be visible to students.`))try{await P4(C),g("Kit deactivated successfully","success"),j()}catch(W){console.error("Failed to delete kit:",W),g("Failed to deactivate kit","error")}},_=()=>{o(!1),c(null)},S=()=>{g(l?"Kit updated successfully":"Kit created successfully","success"),j(),_()};return r?a.jsxs("div",{className:"equipment-kits-management",children:[a.jsx("h2",{children:"Equipment Kits Management"}),a.jsx("p",{children:"Loading kits..."})]}):a.jsxs("div",{className:"equipment-kits-management",children:[a.jsxs("div",{className:"page-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Equipment Kits Management"}),a.jsx("p",{className:"subtitle",children:"Create equipment bundles that students in your department can book as a single unit"})]}),a.jsx("button",{onClick:N,className:"btn btn-primary",children:"+ Create New Kit"})]}),a.jsxs("div",{className:"kits-controls",children:[a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:C=>h(C.target.checked)}),"Show inactive kits"]}),a.jsxs("div",{className:"kits-count",children:[t.length," kit",t.length!==1?"s":""," found"]})]}),t.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h3",{children:"No equipment kits yet"}),a.jsx("p",{children:"Create your first equipment kit to help students book commonly used equipment bundles together."}),a.jsx("button",{onClick:N,className:"btn btn-primary",style:{marginTop:"1rem"},children:"Create Your First Kit"})]}):a.jsx("div",{className:"kits-grid",children:t.map(C=>a.jsxs("div",{className:`kit-card ${C.is_active?"":"inactive"}`,children:[a.jsxs("div",{className:"kit-header",children:[a.jsxs("div",{className:"kit-title-section",children:[a.jsx("h3",{children:C.name}),!C.is_active&&a.jsx("span",{className:"inactive-badge",children:"Inactive"})]}),C.image_url&&a.jsx("div",{className:"kit-image",children:a.jsx("img",{src:C.image_url,alt:C.name})})]}),a.jsx("p",{className:"kit-description",children:C.description}),a.jsxs("div",{className:"kit-equipment-list",children:[a.jsxs("strong",{children:["Equipment in this kit (",C.equipment_ids.length," items):"]}),a.jsxs("ul",{children:[C.equipment_ids.slice(0,5).map((q,W)=>a.jsxs("li",{children:["Equipment ID: ",q]},q)),C.equipment_ids.length>5&&a.jsxs("li",{className:"more-items",children:["+ ",C.equipment_ids.length-5," more items"]})]})]}),a.jsx("div",{className:"kit-metadata",children:a.jsxs("small",{children:["Created: ",new Date(C.created_at).toLocaleDateString()]})}),a.jsxs("div",{className:"kit-actions",children:[a.jsx("button",{onClick:()=>w(C),className:"btn btn-secondary btn-sm",children:"Edit"}),C.is_active&&a.jsx("button",{onClick:()=>y(C.id,C.name),className:"btn btn-danger btn-sm",children:"Deactivate"})]})]},C.id))}),i&&a.jsx(h6,{kit:l,departmentId:e.department,onClose:_,onSuccess:S}),m.map(C=>a.jsx(Vn,{message:C.message,type:C.type,onClose:()=>p(C.id)},C.id))]})}function p6(){const{user:e,logout:t}=sn();return a.jsxs("div",{className:`admin-portal ${(e==null?void 0:e.role)==="master_admin"?"master-admin-portal":""}`,children:[a.jsx("header",{className:"admin-header",children:a.jsxs("div",{className:"admin-header-content",children:[a.jsxs("h1",{children:[" NCADbook ",(e==null?void 0:e.role)==="master_admin"?"Master Admin":"Department Admin"]}),a.jsxs("div",{className:"admin-header-actions",children:[a.jsx(Jm,{}),a.jsxs("span",{className:"admin-user-info",children:[e==null?void 0:e.full_name,"  ",(e==null?void 0:e.department)||"System"]}),a.jsx("button",{onClick:t,className:"btn btn-secondary btn-sm",children:"Logout"})]})]})}),a.jsx("nav",{className:"admin-nav",children:a.jsxs("div",{className:"admin-nav-container",children:[a.jsx(pn,{to:"/admin",end:!0,className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Dashboard"}),a.jsx(pn,{to:"/admin/approvals",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Approvals"}),a.jsx(pn,{to:"/admin/equipment",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Equipment"}),a.jsx(pn,{to:"/admin/equipment-kits",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Equipment Kits"}),(e==null?void 0:e.role)==="master_admin"&&a.jsxs(a.Fragment,{children:[a.jsx(pn,{to:"/admin/users",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Users"}),a.jsx(pn,{to:"/admin/analytics",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Analytics"}),a.jsx(pn,{to:"/admin/departments",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Departments"}),a.jsx(pn,{to:"/admin/csv-import",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" CSV Import"}),a.jsx(pn,{to:"/admin/system-settings",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Settings"}),a.jsx(pn,{to:"/admin/role-management",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Role Management"})]}),(e==null?void 0:e.role)==="department_admin"&&a.jsxs(a.Fragment,{children:[a.jsx(pn,{to:"/admin/cross-department-requests",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Cross-Dept Requests"}),a.jsx(pn,{to:"/admin/department-staff-permissions",className:({isActive:n})=>`admin-nav-link ${n?"active":""}`,children:" Staff Permissions"})]})]})}),a.jsx("main",{className:"admin-main",children:a.jsxs(rh,{children:[a.jsx(mt,{index:!0,element:a.jsx(i3,{})}),a.jsx(mt,{path:"approvals",element:a.jsx(c3,{})}),a.jsx(mt,{path:"equipment",element:a.jsx(u3,{})}),a.jsx(mt,{path:"analytics",element:a.jsx(zk,{})}),a.jsx(mt,{path:"users",element:a.jsx(Wk,{})}),a.jsx(mt,{path:"kits",element:a.jsx(t6,{})}),a.jsx(mt,{path:"departments",element:a.jsx(r6,{})}),a.jsx(mt,{path:"student-assignment",element:a.jsx(a6,{})}),a.jsx(mt,{path:"interdisciplinary",element:a.jsx(s6,{})}),a.jsx(mt,{path:"access-requests",element:a.jsx(i6,{})}),a.jsx(mt,{path:"manage-access-requests",element:a.jsx(o6,{})}),a.jsx(mt,{path:"csv-import",element:a.jsx(Vk,{})}),a.jsx(mt,{path:"permissions",element:a.jsx(e6,{})}),a.jsx(mt,{path:"features",element:a.jsx($k,{})}),a.jsx(mt,{path:"department-staff-permissions",element:a.jsx(l6,{})}),a.jsx(mt,{path:"system-settings",element:a.jsx(c6,{})}),a.jsx(mt,{path:"role-management",element:a.jsx(d6,{})}),a.jsx(mt,{path:"cross-department-requests",element:a.jsx(u6,{})}),a.jsx(mt,{path:"equipment-kits",element:a.jsx(f6,{})})]})}),a.jsx(Xm,{})]})}function m6(){var o;const[e,t]=R.useState(null),{login:n}=sn(),r=el(),s=async(l,c,d)=>{try{await n(l,c),r(d)}catch(h){console.error("Auto-login failed:",h)}},i=[{id:"student",email:"commdesign.student1@student.ncad.ie",password:"student123",name:"Student Portal",path:"/student",coords:"60,60,580,580"},{id:"staff",email:"staff.commdesign@ncad.ie",password:"staff123",name:"Staff Portal",path:"/staff",coords:"620,60,1140,580"},{id:"admin",email:"admin.commdesign@ncad.ie",password:"admin123",name:"Department Admin",path:"/admin",coords:"60,620,580,1140"},{id:"master",email:"master@ncad.ie",password:"master123",name:"Master Admin",path:"/admin",coords:"620,620,1140,1140"}];return a.jsxs("div",{className:"artistic-login-container",children:[a.jsxs("div",{className:"demo-header",children:[a.jsx("h1",{children:"NCADbook Demo"}),a.jsx("p",{children:"Click any portal to explore the system"})]}),a.jsxs("div",{className:"portal-map-container",children:[a.jsxs("div",{className:"map-wrapper",children:[a.jsx("img",{src:"/login-map-frame2.jpg",alt:"NCAD Portal Map",className:"base-map-image"}),a.jsx("svg",{viewBox:"0 0 1200 1200",className:"portal-overlay-svg",children:i.map(l=>{const[c,d,h,m]=l.coords.split(",").map(Number),g=e===l.id;return a.jsxs("g",{children:[a.jsx("rect",{x:c,y:d,width:h-c,height:m-d,className:`portal-quadrant ${g?"hovered":""}`,onMouseEnter:()=>t(l.id),onMouseLeave:()=>t(null),onClick:()=>s(l.email,l.password,l.path),style:{cursor:"pointer"}}),g&&a.jsx("text",{x:(c+h)/2,y:(d+m)/2,className:"portal-label",textAnchor:"middle",dominantBaseline:"middle",children:l.name})]},l.id)})})]}),a.jsx("p",{className:"instruction-text",children:e?`Click to enter ${(o=i.find(l=>l.id===e))==null?void 0:o.name}`:"Tap any quadrant to enter a portal"})]}),a.jsxs("div",{className:"specialized-roles-links",children:[a.jsx("h3",{children:"Specialized Role Demos"}),a.jsxs("div",{className:"role-links-grid",children:[a.jsxs("a",{href:"/demo/view_only_staff",className:"role-link",children:[a.jsx("span",{className:"role-icon",children:""}),a.jsx("span",{className:"role-name",children:"View-Only Staff"})]}),a.jsxs("a",{href:"/demo/accounts_officer",className:"role-link",children:[a.jsx("span",{className:"role-icon",children:""}),a.jsx("span",{className:"role-name",children:"Accounts Officer"})]}),a.jsxs("a",{href:"/demo/payroll_coordinator",className:"role-link",children:[a.jsx("span",{className:"role-icon",children:""}),a.jsx("span",{className:"role-name",children:"Payroll Coordinator"})]}),a.jsxs("a",{href:"/demo/it_support_technician",className:"role-link",children:[a.jsx("span",{className:"role-icon",children:""}),a.jsx("span",{className:"role-name",children:"IT Support"})]}),a.jsxs("a",{href:"/demo/budget_manager",className:"role-link",children:[a.jsx("span",{className:"role-icon",children:""}),a.jsx("span",{className:"role-name",children:"Budget Manager"})]})]})]})]})}function g6(){const[e,t]=R.useState([]),[n,r]=R.useState("");R.useEffect(()=>{s()},[]);const s=async()=>{const o=await xe.query("equipment");t(o.slice(0,20))},i=e.filter(o=>o.product_name.toLowerCase().includes(n.toLowerCase()));return a.jsxs("div",{className:"portal-container",style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[a.jsxs("div",{className:"portal-header",style:{marginBottom:"2rem"},children:[a.jsx("h1",{style:{color:"#9C27B0",marginBottom:"0.5rem"},children:" View-Only Staff Portal"}),a.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Read-only access to equipment catalog. No booking permissions."})]}),a.jsxs("div",{className:"permissions-notice",style:{background:"#E1BEE7",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",border:"2px solid #9C27B0"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#6A1B9A"},children:"Your Permissions:"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[a.jsx("li",{children:" Can view equipment catalog"}),a.jsx("li",{children:" Can view equipment details and availability"}),a.jsx("li",{children:" Cannot create bookings"}),a.jsx("li",{children:" Cannot modify equipment"}),a.jsx("li",{children:" Cannot access admin features"})]})]}),a.jsx("div",{className:"search-section",style:{marginBottom:"2rem"},children:a.jsx("input",{type:"text",placeholder:" Search equipment...",value:n,onChange:o=>r(o.target.value),style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #9C27B0",borderRadius:"8px"}})}),a.jsx("div",{className:"equipment-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.5rem"},children:i.map(o=>{var l;return a.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1rem",background:"white"},children:[a.jsx("img",{src:o.link_to_image||"/placeholder-equipment.png",alt:o.product_name,style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"4px",marginBottom:"1rem"}}),a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.1rem"},children:o.product_name}),a.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 0.5rem 0"},children:[(l=o.description)==null?void 0:l.substring(0,100),"..."]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[a.jsx("span",{style:{padding:"0.25rem 0.75rem",background:o.status==="available"?"#4CAF50":"#FF9800",color:"white",borderRadius:"4px",fontSize:"0.85rem"},children:o.status||"available"}),a.jsx("button",{disabled:!0,style:{padding:"0.5rem 1rem",background:"#ccc",color:"#666",border:"none",borderRadius:"4px",cursor:"not-allowed"},children:" Booking Disabled"})]})]},o.id)})}),i.length===0&&a.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:a.jsxs("p",{children:['No equipment found matching "',n,'"']})})]})}function v6(){return a.jsxs("div",{className:"demo-portal-wrapper",children:[a.jsx("div",{className:"demo-header",style:{padding:"1rem 2rem",background:"#9C27B0",color:"white"},children:a.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"View-Only Staff Role Demo"}),a.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:"Read-only equipment catalog access"})]}),a.jsx(Zr,{to:"/admin/role-management",className:"btn btn-secondary",style:{background:"white",color:"#9C27B0",padding:"0.5rem 1rem",borderRadius:"4px",textDecoration:"none"},children:" Back to Role Management"})]})}),a.jsx(g6,{})]})}function y6(){const[e,t]=R.useState([]),[n,r]=R.useState([]),[s,i]=R.useState(0);R.useEffect(()=>{o()},[]);const o=async()=>{const c=await xe.query("equipment"),d=await xe.query("bookings");t(c.slice(0,15)),r(d.slice(0,10));const h=c.reduce((m,g)=>m+(parseFloat(g.purchase_price)||0),0);i(h)},l=[{dept:"Communication Design",cost:45230,bookings:156},{dept:"Product Design",cost:32100,bookings:89},{dept:"Media",cost:58900,bookings:203},{dept:"Painting",cost:12400,bookings:34},{dept:"Sculpture",cost:28700,bookings:67}];return a.jsxs("div",{className:"portal-container",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[a.jsxs("div",{className:"portal-header",style:{marginBottom:"2rem"},children:[a.jsx("h1",{style:{color:"#9C27B0",marginBottom:"0.5rem"},children:" Accounts Officer Portal"}),a.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Financial overview, equipment costs, and department budgets"})]}),a.jsxs("div",{className:"permissions-notice",style:{background:"#E1BEE7",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",border:"2px solid #9C27B0"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#6A1B9A"},children:"Your Permissions:"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[a.jsx("li",{children:" View equipment costs and purchase prices"}),a.jsx("li",{children:" Export financial reports (CSV/PDF)"}),a.jsx("li",{children:" Access all department budgets"}),a.jsx("li",{children:" View booking-related costs"}),a.jsx("li",{children:" Cannot modify equipment or bookings"})]})]}),a.jsxs("div",{className:"stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Total Equipment Value"}),a.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:["",s.toLocaleString()]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"YTD Bookings"}),a.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:"549"})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Avg Cost per Booking"}),a.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:["",(s/549).toFixed(2)]})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Department Cost Breakdown"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",marginBottom:"2rem"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#9C27B0",color:"white"},children:[a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Department"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Equipment Value"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Total Bookings"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Avg per Booking"})]})}),a.jsx("tbody",{children:l.map((c,d)=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:"1rem"},children:c.dept}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"bold"},children:["",c.cost.toLocaleString()]}),a.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:c.bookings}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",(c.cost/c.bookings).toFixed(2)]})]},d))})]})}),a.jsxs("div",{style:{textAlign:"center",marginTop:"2rem"},children:[a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#9C27B0",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Export Financial Report (PDF)"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:" Export to Excel (CSV)"})]})]})}function x6(){return a.jsxs("div",{className:"demo-portal-wrapper",children:[a.jsx("div",{className:"demo-header",style:{padding:"1rem 2rem",background:"#9C27B0",color:"white"},children:a.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"Accounts Officer Role Demo"}),a.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:"Financial reporting and cost analysis"})]}),a.jsx(Zr,{to:"/admin/role-management",className:"btn btn-secondary",style:{background:"white",color:"#9C27B0",padding:"0.5rem 1rem",borderRadius:"4px",textDecoration:"none"},children:" Back to Role Management"})]})}),a.jsx(y6,{})]})}function b6(){const e=[{id:1,name:"Sarah Johnson",role:"Department Admin",dept:"Communication Design",hours:35,costCenter:"CC-001",allocation:"100%"},{id:2,name:"Mark Williams",role:"Department Admin",dept:"Product Design",hours:35,costCenter:"CC-002",allocation:"100%"},{id:3,name:"Anna Collins",role:"Staff",dept:"Communication Design",hours:20,costCenter:"CC-001",allocation:"60%"},{id:4,name:"Brian Hughes",role:"Staff",dept:"Product Design",hours:15,costCenter:"CC-002",allocation:"40%"},{id:5,name:"Lisa O'Brien",role:"Department Admin",dept:"Media",hours:28,costCenter:"CC-003",allocation:"80%"},{id:6,name:"Fiona McCarthy",role:"Staff",dept:"Media",hours:25,costCenter:"CC-003",allocation:"70%"}],t=[{code:"CC-001",name:"Communication Design",budget:125e3,allocated:118500,staff:5},{code:"CC-002",name:"Product Design",budget:95e3,allocated:87200,staff:4},{code:"CC-003",name:"Media Department",budget:14e4,allocated:132e3,staff:6},{code:"CC-004",name:"Sculpture & Applied Materials",budget:78e3,allocated:71500,staff:3}];return a.jsxs("div",{className:"portal-container",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[a.jsxs("div",{className:"portal-header",style:{marginBottom:"2rem"},children:[a.jsx("h1",{style:{color:"#9C27B0",marginBottom:"0.5rem"},children:" Payroll Coordinator Portal"}),a.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Staff cost center allocations and payroll data management"})]}),a.jsxs("div",{className:"permissions-notice",style:{background:"#E1BEE7",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",border:"2px solid #9C27B0"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#6A1B9A"},children:"Your Permissions:"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[a.jsx("li",{children:" View staff cost center allocations"}),a.jsx("li",{children:" Export payroll data for finance system"}),a.jsx("li",{children:" Track staff hours across departments"}),a.jsx("li",{children:" Generate allocation reports"}),a.jsx("li",{children:" Cannot modify cost center budgets"})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Cost Center Overview"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",marginBottom:"2rem"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#9C27B0",color:"white"},children:[a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Cost Center"}),a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Department"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Budget"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Allocated"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Remaining"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Staff Count"})]})}),a.jsx("tbody",{children:t.map(n=>{const r=n.budget-n.allocated,s=(n.allocated/n.budget*100).toFixed(1);return a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:"1rem",fontWeight:"bold"},children:n.code}),a.jsx("td",{style:{padding:"1rem"},children:n.name}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",n.budget.toLocaleString()]}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",n.allocated.toLocaleString()]}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right",color:r>0?"#4CAF50":"#f44336"},children:["",r.toLocaleString()," (",s,"%)"]}),a.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:n.staff})]},n.code)})})]})}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Staff Allocations"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",marginBottom:"2rem"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#9C27B0",color:"white"},children:[a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Staff Member"}),a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Role"}),a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Department"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Hours/Week"}),a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Cost Center"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Allocation %"})]})}),a.jsx("tbody",{children:e.map(n=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:"1rem",fontWeight:"bold"},children:n.name}),a.jsx("td",{style:{padding:"1rem"},children:n.role}),a.jsx("td",{style:{padding:"1rem"},children:n.dept}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:[n.hours,"h"]}),a.jsx("td",{style:{padding:"1rem"},children:n.costCenter}),a.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:a.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"#4CAF50",color:"white",borderRadius:"4px",fontSize:"0.85rem"},children:n.allocation})})]},n.id))})]})}),a.jsxs("div",{style:{textAlign:"center",marginTop:"2rem"},children:[a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#9C27B0",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Export Payroll Report"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:" Export Allocation Data (CSV)"})]})]})}function _6(){return a.jsxs("div",{className:"demo-portal-wrapper",children:[a.jsx("div",{className:"demo-header",style:{padding:"1rem 2rem",background:"#9C27B0",color:"white"},children:a.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"Payroll Coordinator Role Demo"}),a.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:"Staff cost center allocations"})]}),a.jsx(Zr,{to:"/admin/role-management",className:"btn btn-secondary",style:{background:"white",color:"#9C27B0",padding:"0.5rem 1rem",borderRadius:"4px",textDecoration:"none"},children:" Back to Role Management"})]})}),a.jsx(b6,{})]})}function w6(){const[e,t]=R.useState([]),[n,r]=R.useState([]);R.useEffect(()=>{s(),i()},[]);const s=async()=>{const l=await xe.query("equipment");t(l.slice(0,10))},i=()=>{r([{time:"2024-03-15 14:23:12",type:"INFO",user:"commdesign.student1@student.ncad.ie",action:"Equipment booking created",details:"Canon EOS R5"},{time:"2024-03-15 14:18:45",type:"WARNING",user:"admin.media@ncad.ie",action:"Equipment status changed",details:"Sony A7IV  Maintenance"},{time:"2024-03-15 13:55:23",type:"INFO",user:"staff.product@ncad.ie",action:"User login successful",details:"Staff portal access"},{time:"2024-03-15 13:42:09",type:"ERROR",user:"media.student5@student.ncad.ie",action:"Booking conflict detected",details:"MacBook Pro M3 already booked"},{time:"2024-03-15 13:30:17",type:"INFO",user:"admin.commdesign@ncad.ie",action:"Equipment added",details:"New DSLR camera added to catalog"},{time:"2024-03-15 12:15:33",type:"WARNING",user:"system",action:"Scheduled maintenance",details:"Database backup completed"}])},o={total:150,available:98,booked:42,maintenance:8,outOfService:2};return a.jsxs("div",{className:"portal-container",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[a.jsxs("div",{className:"portal-header",style:{marginBottom:"2rem"},children:[a.jsx("h1",{style:{color:"#9C27B0",marginBottom:"0.5rem"},children:" IT Support Portal"}),a.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Equipment management, system logs, and technical administration"})]}),a.jsxs("div",{className:"permissions-notice",style:{background:"#E1BEE7",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",border:"2px solid #9C27B0"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#6A1B9A"},children:"Your Permissions:"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[a.jsx("li",{children:" Manage equipment (add, edit, set maintenance status)"}),a.jsx("li",{children:" View system logs and audit trails"}),a.jsx("li",{children:" Monitor booking conflicts and errors"}),a.jsx("li",{children:" Access technical diagnostics"}),a.jsx("li",{children:" Cannot reset user passwords (security restriction)"})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Equipment Status Overview"}),a.jsxs("div",{className:"stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{style:{background:"#2196F3",padding:"1.5rem",borderRadius:"8px",color:"white",textAlign:"center"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Total Equipment"}),a.jsx("p",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:o.total})]}),a.jsxs("div",{style:{background:"#4CAF50",padding:"1.5rem",borderRadius:"8px",color:"white",textAlign:"center"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Available"}),a.jsx("p",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:o.available})]}),a.jsxs("div",{style:{background:"#FF9800",padding:"1.5rem",borderRadius:"8px",color:"white",textAlign:"center"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Booked"}),a.jsx("p",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:o.booked})]}),a.jsxs("div",{style:{background:"#9C27B0",padding:"1.5rem",borderRadius:"8px",color:"white",textAlign:"center"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Maintenance"}),a.jsx("p",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:o.maintenance})]}),a.jsxs("div",{style:{background:"#f44336",padding:"1.5rem",borderRadius:"8px",color:"white",textAlign:"center"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Out of Service"}),a.jsx("p",{style:{margin:0,fontSize:"2.5rem",fontWeight:"bold"},children:o.outOfService})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"System Activity Logs"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",marginBottom:"2rem"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontFamily:"monospace",fontSize:"0.9rem"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#9C27B0",color:"white"},children:[a.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Timestamp"}),a.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Type"}),a.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"User"}),a.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Action"}),a.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Details"})]})}),a.jsx("tbody",{children:n.map((l,c)=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:"0.75rem",color:"#666"},children:l.time}),a.jsx("td",{style:{padding:"0.75rem"},children:a.jsx("span",{style:{padding:"0.25rem 0.5rem",background:l.type==="ERROR"?"#f44336":l.type==="WARNING"?"#FF9800":"#4CAF50",color:"white",borderRadius:"4px",fontSize:"0.75rem"},children:l.type})}),a.jsx("td",{style:{padding:"0.75rem"},children:l.user}),a.jsx("td",{style:{padding:"0.75rem"},children:l.action}),a.jsx("td",{style:{padding:"0.75rem",color:"#666"},children:l.details})]},c))})]})}),a.jsxs("div",{style:{textAlign:"center",marginTop:"2rem"},children:[a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#9C27B0",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Export System Logs"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Run Diagnostics"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#FF9800",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:" System Settings"})]})]})}function j6(){return a.jsxs("div",{className:"demo-portal-wrapper",children:[a.jsx("div",{className:"demo-header",style:{padding:"1rem 2rem",background:"#9C27B0",color:"white"},children:a.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"IT Support Technician Role Demo"}),a.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:"Equipment management and system logs"})]}),a.jsx(Zr,{to:"/admin/role-management",className:"btn btn-secondary",style:{background:"white",color:"#9C27B0",padding:"0.5rem 1rem",borderRadius:"4px",textDecoration:"none"},children:" Back to Role Management"})]})}),a.jsx(w6,{})]})}function N6(){const e=[{dept:"Communication Design",allocated:125e3,spent:98400,forecast:115e3,variance:1e4},{dept:"Product Design",allocated:95e3,spent:82300,forecast:91e3,variance:4e3},{dept:"Media",allocated:14e4,spent:132100,forecast:138500,variance:1500},{dept:"Painting",allocated:65e3,spent:48200,forecast:58e3,variance:7e3},{dept:"Sculpture",allocated:85e3,spent:71500,forecast:79e3,variance:6e3}],t=[{quarter:"Q1 2024",amount:98500},{quarter:"Q2 2024",amount:112300},{quarter:"Q3 2024",amount:125700},{quarter:"Q4 2024 (Forecast)",amount:95200}],n=e.reduce((i,o)=>i+o.allocated,0),r=e.reduce((i,o)=>i+o.spent,0),s=e.reduce((i,o)=>i+o.forecast,0);return a.jsxs("div",{className:"portal-container",style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[a.jsxs("div",{className:"portal-header",style:{marginBottom:"2rem"},children:[a.jsx("h1",{style:{color:"#9C27B0",marginBottom:"0.5rem"},children:" Budget Manager Portal"}),a.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Department budgets, cost forecasting, and financial planning"})]}),a.jsxs("div",{className:"permissions-notice",style:{background:"#E1BEE7",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",border:"2px solid #9C27B0"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#6A1B9A"},children:"Your Permissions:"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[a.jsx("li",{children:" View all department budgets and spending"}),a.jsx("li",{children:" Forecast future costs based on usage trends"}),a.jsx("li",{children:" Export budget reports (PDF/Excel)"}),a.jsx("li",{children:" Track variance and budget health"}),a.jsx("li",{children:" Cannot modify budget allocations (requires Finance Director approval)"})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Budget Summary"}),a.jsxs("div",{className:"stats-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Total Allocated"}),a.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:["",n.toLocaleString()]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"YTD Spent"}),a.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:["",r.toLocaleString()]}),a.jsxs("p",{style:{margin:0,fontSize:"0.85rem",opacity:.9},children:[(r/n*100).toFixed(1),"% of budget"]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",padding:"1.5rem",borderRadius:"8px",color:"white"},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",opacity:.9},children:"Forecasted Year-End"}),a.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold"},children:["",s.toLocaleString()]}),a.jsxs("p",{style:{margin:0,fontSize:"0.85rem",opacity:.9},children:["",(n-s).toLocaleString()," under budget"]})]})]}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Department Budget Breakdown"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",marginBottom:"2rem"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#9C27B0",color:"white"},children:[a.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Department"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Allocated"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"YTD Spent"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Forecast"}),a.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Variance"}),a.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Health"})]})}),a.jsx("tbody",{children:e.map((i,o)=>{const l=(i.spent/i.allocated*100).toFixed(1),c=i.variance>5e3?"Good":i.variance>0?"Fair":"At Risk",d=i.variance>5e3?"#4CAF50":i.variance>0?"#FF9800":"#f44336";return a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:"1rem",fontWeight:"bold"},children:i.dept}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",i.allocated.toLocaleString()]}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",i.spent.toLocaleString(),a.jsxs("span",{style:{fontSize:"0.85rem",color:"#666",marginLeft:"0.5rem"},children:["(",l,"%)"]})]}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right"},children:["",i.forecast.toLocaleString()]}),a.jsxs("td",{style:{padding:"1rem",textAlign:"right",color:i.variance>0?"#4CAF50":"#f44336"},children:["",i.variance.toLocaleString()]}),a.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:a.jsx("span",{style:{padding:"0.25rem 0.75rem",background:d,color:"white",borderRadius:"4px",fontSize:"0.85rem"},children:c})})]},o)})})]})}),a.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Quarterly Spending Trend"}),a.jsx("div",{style:{background:"white",border:"1px solid #ddd",borderRadius:"8px",padding:"1.5rem",marginBottom:"2rem"},children:t.map((i,o)=>{const l=Math.max(...t.map(d=>d.amount)),c=i.amount/l*100;return a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[a.jsx("span",{style:{fontWeight:"bold"},children:i.quarter}),a.jsxs("span",{style:{color:"#666"},children:["",i.amount.toLocaleString()]})]}),a.jsx("div",{style:{background:"#eee",height:"24px",borderRadius:"4px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${c}%`,height:"100%",background:o===t.length-1?"linear-gradient(90deg, #9C27B0, #CE93D8)":"linear-gradient(90deg, #4CAF50, #81C784)",transition:"width 0.3s ease"}})})]},o)})}),a.jsxs("div",{style:{textAlign:"center",marginTop:"2rem"},children:[a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#9C27B0",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Generate Budget Report (PDF)"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",marginRight:"1rem"},children:" Export to Excel"}),a.jsx("button",{style:{padding:"0.75rem 2rem",background:"#FF9800",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:" Run Forecast Model"})]})]})}function S6(){return a.jsxs("div",{className:"demo-portal-wrapper",children:[a.jsx("div",{className:"demo-header",style:{padding:"1rem 2rem",background:"#9C27B0",color:"white"},children:a.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"Budget Manager Role Demo"}),a.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:"Budget tracking and cost forecasting"})]}),a.jsx(Zr,{to:"/admin/role-management",className:"btn btn-secondary",style:{background:"white",color:"#9C27B0",padding:"0.5rem 1rem",borderRadius:"4px",textDecoration:"none"},children:" Back to Role Management"})]})}),a.jsx(N6,{})]})}function Uf({children:e,allowedRoles:t}){const{user:n}=sn();if(!n)return a.jsx(Rp,{to:"/"});if(!t.includes(n.role)){const r=()=>n.role==="master_admin"||n.role==="department_admin"?"/admin":n.role==="staff"?"/staff":"/student";return a.jsx(Rp,{to:r()})}return e}function k6(){const{user:e,loading:t}=sn();return t?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading NCADbook..."})]}):a.jsxs(rh,{children:[a.jsx(mt,{path:"/",element:e?a.jsx(Rp,{to:e.role==="master_admin"||e.role==="department_admin"?"/admin":e.role==="staff"?"/staff":"/student"}):a.jsx(m6,{})}),a.jsx(mt,{path:"/student/*",element:a.jsx(Uf,{allowedRoles:["student","staff","department_admin","master_admin"],children:a.jsx(V4,{})})}),a.jsx(mt,{path:"/staff/*",element:a.jsx(Uf,{allowedRoles:["staff","department_admin","master_admin"],children:a.jsx(s3,{})})}),a.jsx(mt,{path:"/admin/*",element:a.jsx(Uf,{allowedRoles:["department_admin","master_admin"],children:a.jsx(p6,{})})}),a.jsx(mt,{path:"/demo/view_only_staff",element:a.jsx(v6,{})}),a.jsx(mt,{path:"/demo/accounts_officer",element:a.jsx(x6,{})}),a.jsx(mt,{path:"/demo/payroll_coordinator",element:a.jsx(_6,{})}),a.jsx(mt,{path:"/demo/it_support_technician",element:a.jsx(j6,{})}),a.jsx(mt,{path:"/demo/budget_manager",element:a.jsx(S6,{})})]})}function C6(){return a.jsx(d4,{children:a.jsx(c4,{children:a.jsx(o4,{children:a.jsx(Mj,{basename:"/NCADbook",children:a.jsx(k6,{})})})})})}zf.createRoot(document.getElementById("root")).render(a.jsx($2.StrictMode,{children:a.jsx(C6,{})}));export{Lt as _,D6 as c,gb as g};
//# sourceMappingURL=index-C2vQCG2t.js.map
